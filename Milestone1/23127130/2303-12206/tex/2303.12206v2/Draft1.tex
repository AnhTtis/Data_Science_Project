\documentclass[nonblindrev]{workingpaperJJB} %

\usepackage[normalem]{ulem}
\usepackage{natbib}
\usepackage{amsmath,bbm}
\usepackage[capitalise]{cleveref}
 \bibpunct[, ]{(}{)}{,}{a}{}{,}%
 \def\bibfont{\small}%
 \def\bibsep{\smallskipamount}%
 \def\bibhang{24pt}%
 \def\newblock{\ }%
 \def\BIBand{and}%
 \usepackage{bibspacing}
 \setlength{\bibitemsep}{.0\baselineskip plus .05\baselineskip minus .05\baselineskip}
 
 \setlength{\pdfpagewidth}{8.5in}
 \setlength{\pdfpageheight}{11in}

 \TheoremsNumberedThrough     %
 \ECRepeatTheorems

 \EquationsNumberedThrough    %


\usepackage{amsfonts}
\usepackage{amsmath}  
\usepackage{amssymb}
\usepackage{changepage}
\usepackage{graphicx}
\usepackage{multirow}
\usepackage{enumerate}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage{color}
\usepackage{filecontents}
\usepackage{subfig}
\usepackage[customcolors]{hf-tikz}
\usepackage{colortbl}
\usepackage{threeparttable}


\usepackage{algorithm}%
\usepackage{algpseudocode}%

\def\sym#1{\ifmmode^{#1}\else\(^{#1}\)\fi}
\def\jb#1{{\bf\color{blue}#1}}
\def\jnote#1{{\color{cyan}[Jackie: #1]}}


\newcommand{\added}[1]{{\leavevmode#1}}
\newcommand{\edit}[1]{{\leavevmode#1}}
\newcommand{\jedit}[1]{{\leavevmode#1}}


\input{commands.tex}
\NewDocumentEnvironment{myproof}{o}
  {\IfNoValueTF{#1}{\paragraph{{Proof.} }} {\paragraph{{#1.} }} }
  {\hfill$\Halmos$}


\begin{document}

 \RUNAUTHOR{Baek et al.}

\RUNTITLE{Policy Optimization for Personalized Interventions}

\EquationsNumberedThrough    %



\TITLE{
Policy Optimization for Personalized Interventions in Behavioral Health}
\ARTICLEAUTHORS{
\AUTHOR{Jackie Baek}\AFF{NYU Stern School of Business, \EMAIL{baek@stern.nyu.edu}}
\AUTHOR{Justin J. Boutilier}\AFF{Department of Industrial and Systems Engineering, University of Wisconsin-Madison, \EMAIL{j.boutilier@wisc.edu}}
\AUTHOR{Vivek F. Farias}\AFF{MIT Sloan School of Management, \EMAIL{vivekf@mit.edu}}
\AUTHOR{J\'{o}nas Oddur J\'{o}nasson}\AFF{MIT Sloan School of Management, \EMAIL{joj@mit.edu}}
\AUTHOR{Erez Yoeli}\AFF{MIT Sloan School of Management, \EMAIL{eyoeli@mit.edu}}
}
\HISTORY{\today}


\ABSTRACT{

Behavioral health interventions, delivered through digital platforms, have the potential to significantly improve health outcomes, through education, motivation, reminders, and outreach. 
We study the problem of optimizing personalized interventions for patients to maximize a long-term outcome, where interventions are costly and capacity-constrained. 
\edit{We assume there exists a dataset collected from an initial pilot study that we can leverage.}
We present a new approach for this problem that we dub $\DPI$, which approximates one step of policy iteration.
Implementing $\DPI$ simply consists of a prediction task using the dataset, alleviating the need for online experimentation.
$\DPI$ is a generic model-free algorithm that can be used irrespective of the underlying patient behavior model.
We derive theoretical guarantees on a simple, special case of the model 
that is representative of our problem setting.
We establish an approximation ratio for $\DPI$ with respect to the \textit{improvement} beyond a null policy that does not allocate interventions.
Specifically, when the initial policy used to collect the data is randomized, the approximation ratio of the improvement approaches 1/2 as the intervention capacity of the initial policy decreases. 
We show that this guarantee is robust to estimation errors.
We conduct a rigorous empirical case study using real-world data from a mobile health platform for improving treatment adherence for tuberculosis.
Using a validated simulation model, we demonstrate that $\DPI$ can provide the same efficacy as the status quo approach with approximately \textit{half} the capacity of interventions.
$\DPI$ is simple and easy to implement for organizations aiming to improve long-term behavior through targeted interventions, and this paper demonstrates its strong performance both theoretically and empirically.
}

\KEYWORDS{Health Analytics, Behavioral Health, Policy Optimization, Reinforcement Learning, Tuberculosis, Global Health}

\HISTORY{\today}

\maketitle

\section{Introduction}\label{s.intro}
\input{sections/introduction.tex}


\section{Literature Review}\label{s.litreview}
\input{sections/lit_review.tex}

\section{Full Model and Policy}\label{s.model}
\input{sections/model.tex}


\section{Case Study: TB Treatment Adherence}\label{s.casestudy}
\input{sections/case_study}

\section{Conclusion and Future Directions}\label{s.conclusion}
\input{sections/conclusion}



\vspace*{-0.5em}
\bibliographystyle{ormsv080}
\bibliography{Keheala}

\clearpage

\setcounter{page}{1} \renewcommand{\theequation}{A\arabic{equation}}
\setcounter{equation}{0}
\renewcommand{\thelemma}{A\arabic{lemma}}
\setcounter{lemma}{0}
\renewcommand{\theproposition}{A\arabic{proposition}}
\setcounter{proposition}{0}
\renewcommand{\thesection}{A\arabic{section}}
\setcounter{section}{0}
\renewcommand{\thefigure}{A\arabic{figure}}
\setcounter{figure}{0}
\renewcommand{\theremark}{A\arabic{remark}}
\setcounter{remark}{0}
\renewcommand{\thetable}{A\arabic{table}}
\setcounter{table}{0}

\section*{E-companion for ``Targeted interventions for TB treatment adherence''}
~


\section{Table of Notation} \label{s.app.tablenotation}

\begin{table}[h]
\TableSpaced %
\caption{
List of notation used in the paper and the proofs in \cref{s.app.proof}.
} \label{tab.coefs}
\vspace{2mm}
\begin{center}
\begin{tabular}{@{}cl@{}}
\toprule
Notation & Meaning\\ \midrule
$N$ & Number of patients \\ 
$T$ & Number of time steps \\ 
$B$ & Budget \\ 
$\cS$ & State space for a single patient\\ 
$\cA$ & Action space for a single patient\\ 
$\cA^N$ & Action space for the system \\ 
$P_i(s, s', a)$ & Transition probability function for patient $i$ \\
$R_i(s, s', a)$ & Reward function for patient $i$ \\
$S_{it}^\pi$ & State of patient $i$  at time $t$ under policy $\pi$ \\
$A_{it}^\pi$ & Action for patient $i$  at time $t$ under policy $\pi$ \\
$q_{it}^{\pi}(s, a)$ & Patient-level $q$-value defined in \eqref{eq:q} \\
$z_{it}^{\pi}(s)$ & Intervention value used for $\DPI(\pi)$ \\
$p_i, q_i, \tau_i$ & Parameters for the 2-state model of \cref{ss.2statemodel} \\
$\gamma$ & Probability of an intervention for the policy $\RAND(\gamma)$ \\
$\bar{M}$ & Instance-dependent parameter used in \cref{thm:approx_ratio_b} \\
$V_{it}$ & Whether patient $i$ verifies at time $t$ \\
$P_{it}, Q_{it}, K_{it}, W_{it}$ & Bernoulli variables used in the sample path coupling of \cref{sec:coupling} \\
$\bar{z}_{it}(s)$ & Null intervention values defined as $\lim_{\gamma \to 0} z_{it}^{\gamma}(s)$ \\
$\DPI_0$ & Index policy that ranks patients by the null intervention values \\
$I_{t}$ & Subset of patients in state 0 at time $t$ \\
$D_t(I)$ & Subset of patients that $\DPI_0$ would choose out of $I \subseteq [N]$ \\
$\ONE(i, t)$ & Policy that chooses patient $i$ once at time $t$ \\
$\tilde{S}_{ir|t}$ & State of patient $i$ at time $r$ under $\ONE(i, t)$ \\
$Z_{it}$ & Number of times state of patient $i$ differ in $\ONE(i, t)$ compared to $\NULL$, defined in \eqref{eq:define_Y} \\
$\tau_i(t)$ & Last time before $t$ that $i$ was in state 0, defined in \eqref{eq:definetau} \\
\bottomrule
\end{tabular}
\end{center}
\end{table}

\section{Proof of \cref{thm:approx_ratio_b} and \cref{corr:approx}}  \label{s.app.proof}
\input{sections/appendix_modified}


\section{Decomposition Bias Example} \label{s.app.decompbias}
\input{sections/decomp_bias}


\section{Details on Keheala Case Study} \label{s.app.keheala}
\input{sections/appendix_case_study}





\end{document}