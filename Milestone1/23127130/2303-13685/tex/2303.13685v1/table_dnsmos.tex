%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Table 3, DNSMOS results
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \begin{table}[thb!]

% \centering
% \caption{Average MOS ratings of the speech enhancement modes on CHiME-4 and CHiME-5 datasets using DNSMOS P.835~\cite{reddy2022dnsmos}. Best results are shown in \textbf{bold}.}
% \label{tab:dnsmos_results}
% % \vspace{-0.5em}
% \resizebox{\columnwidth}{!}{%
% \begin{tabular}{| l | c c | }
% \cline{2-3}
%   \multicolumn{1}{c|}{}         & {CHiME-4} & {CHiME-5} \\ \hline
   
% Mixture   & 1.54 ($\pm$0.85)         & 1.3 ($\pm$1.1)                \\
% PMOS+SE                      & 4.28 ($\pm$0.9)       & 3.67 ($\pm$1.3)\\
% MetricGAN                    & 4.26 ($\pm$0.87) & 3.5 ($\pm$1.34)          \\
% Proposed                     & \textbf{4.32} ($\pm$0.8)& \textbf{3.8} ($\pm$1.41)            \\ \hline
% Clean                     & 4.67 ($\pm$1.2) & -      \\
% \hline
% \end{tabular}
% }
% % \vspace{-2em}
% \end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fig 3, DNSMOS results plot
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{figure}[b!]
    \centering
\begin{tikzpicture}
	\begin{axis}[
	    cycle list/Dark2-4,
		boxplot/draw direction = y,
		boxplot/box extend=0.8,
% 		x=3em,
% 		x axis line style = {opacity=0.6},
		axis x line* = bottom,
		axis y line = left,
		enlarge y limits,
		ymajorgrids,
		xtick = {1, 2, 3, 4, 5, 6, 7, 8},
		xticklabel style = {align=center, font=\small, rotate=60, alias={xtick-\ticknum}},
		xticklabels = {Mixture, SE+PMOS, MetricGAN, Proposed, Mixture, SE+PMOS, MetricGAN, Proposed},
% 		xtick style = {draw=none}, % Hide tick line
		ylabel = {MOS},
		ytick = {1, 2, 3, 4, 5},
	]
	
	\addplot+[
        boxplot prepared={
        lower whisker=1, lower quartile=1.45,
        median=1.74,
        upper quartile=2.5, upper whisker=4.05, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
    \addplot+[
        boxplot prepared={
        lower whisker=1.38, lower quartile=1.84,
        median=2.28,
        upper quartile=3.1, upper whisker=4.3, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
    \addplot+[
        boxplot prepared={
        lower whisker=1.3, lower quartile=1.75,
        median=2.13,
        upper quartile=3.2, upper whisker=4.1, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
    \addplot+[
        boxplot prepared={
        lower whisker=1.4, lower quartile=1.9,
        median=2.46,
        upper quartile=3.16, upper whisker=4.34, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
        
    \addplot+[
        boxplot prepared={
        lower whisker=1.0, lower quartile=1.35,
        median=1.64,
        upper quartile=2.39, upper whisker=4.18, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
    \addplot+[
        boxplot prepared={
        lower whisker=1.31, lower quartile=1.8,
        median=2.18,
        upper quartile=2.76, upper whisker=4.24, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
    \addplot+[
        boxplot prepared={
        lower whisker=1.26, lower quartile=1.71,
        median=2.06,
        upper quartile=3.17, upper whisker=4.32, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
    \addplot+[
        boxplot prepared={
        lower whisker=1.34, lower quartile=1.85,
        median=2.25,
        upper quartile=3.07, upper whisker=4.48, }, fill, draw=black]
        coordinates {}
        node[above, color=black] at
        (boxplot box cs: \boxplotvalue{median},.5)
        {\scriptsize \pgfmathprintnumber{\boxplotvalue{median}}};
        
	\end{axis}
	
	\path (0,0) coordinate (P);
    \draw [thick,decoration={brace,mirror,raise=5em},decorate] (xtick-0|-P) -- (xtick-3.5|-P) 
        node[midway,yshift=-6em]{CHiME-4};
    \draw [thick,decoration={brace,mirror,raise=5em},decorate] (xtick-4|-P) -- (xtick-7.5|-P) 
        node[midway,yshift=-6em]{CHiME-5};

    % \node[text width=3cm] at (1.54,0.5) 
    % {\scriptsize 1.54};

\end{tikzpicture}

\caption{MOS ratings of the speech enhancement modes on CHiME-4 and CHiME-5 datasets using DNSMOS P.835.}
    % \vspace{-2em}
\label{fig:dnsmos_results}
    % \vspace{-0.4cm}
\end{figure}