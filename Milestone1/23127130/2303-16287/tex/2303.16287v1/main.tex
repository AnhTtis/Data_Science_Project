\newif\ifLIPICS
\LIPICSfalse
% \LIPICStrue % last one wins

\ifLIPICS
    \documentclass[a4paper,UKenglish,cleveref, autoref, thm-restate,numberwithinsect]{lipics-v2021}
    \usepackage{paper}
\else
    \documentclass[11pt]{article}
    \usepackage{paper}
    \usepackage{cleveref, thm-restate}
\fi



\newif\ifDRAFT 
\DRAFTfalse
% \DRAFTtrue % last one wins


\usepackage{ulem}


\ifDRAFT
    \usepackage{lineno}
    \linenumbers
    % \renewcommand{\baselinestretch}{1.15} % bigger line spacing
\fi


\title{
Lower Bounds for Pseudo-Deterministic Counting in a Stream
}

\ifLIPICS
    % Shay: copied these from the example article. Most of it doesn't matter for the anonymus submission.
    
    \author{Jane {Open Access}}{Dummy University Computing Laboratory, [optional: Address], Country \and My second affiliation, Country \and \url{http://www.myhomepage.edu} }{johnqpublic@dummyuni.org}{https://orcid.org/0000-0002-1825-0097}{(Optional) author-specific funding acknowledgements}%TODO mandatory, please use full name; only 1 author per \author macro; first two parameters are mandatory, other parameters can be empty. Please provide at least the name of the affiliation and the country. The full address is optional. Use additional curly braces to indicate the correct name splitting when the last name consists of multiple name parts.
    
    \author{Joan R. Public\footnote{Optional footnote, e.g. to mark corresponding author}}{Department of Informatics, Dummy College, [optional: Address], Country}{joanrpublic@dummycollege.org}{[orcid]}{[funding]}


    % \author{Shay Sapir}{Weizmann Institute of Science}{shay.sapir@weizmann.ac.il}{}{(Optional) author-specific funding acknowledgements} % TODO

    
    \authorrunning{J. Open Access and J.\,R. Public} %TODO mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et al.'
    
    \Copyright{Jane Open Access and Joan R. Public} %TODO mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/
    
    % mandatory: Please choose ACM 2012 classifications from https://dl.acm.org/ccs/ccs_flat.cfm 
    \input{ccsdesc_PD_streams} % in seperated tex file

    % mandatory; please add comma-separated list of keywords
    \keywords{streaming algorithms, pseudo-deterministic, approximate counting} % Shift Finding?
    
    \category{} %optional, e.g. invited paper
    
    \relatedversion{} %optional, e.g. full version hosted on arXiv, HAL, or other respository/website
    %\relatedversiondetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93]{Classification (e.g. Full Version, Extended Version, Previous Version}{URL to related version} %linktext and cite are optional
    
    %\supplement{}%optional, e.g. related research data, source code, ... hosted on a repository like zenodo, figshare, GitHub, ...
    %\supplementdetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93, subcategory={Description, Subcategory}, swhid={Software Heritage Identifier}]{General Classification (e.g. Software, Dataset, Model, ...)}{URL to related version} %linktext, cite, and subcategory are optional
    
    %\funding{(Optional) general funding statement \dots}%optional, to capture a funding statement, which applies to all authors. Please enter author specific funding statements as fifth argument of the \author macro.
    
    \acknowledgements{I want to thank \dots}%optional
    
    %\nolinenumbers %uncomment to disable line numbering
\else
    \author{
    Vladimir Braverman%
    \thanks{Work partially supported by ONR Award N00014-18-1-2364 and NSF awards 1652257, 1813487 and 2107239}\\ Rice University \\ \texttt{vb21@rice.edu} \and 
    Robert Krauthgamer%
    \thanks{Work partially supported by ONR Award N00014-18-1-2364,
      by a Weizmann-UK Making Connections Grant,
      by a Minerva Foundation grant,
      and the Weizmann Data Science Research Center.
      } \\ Weizmann Institute of Science \\ \texttt{robert.krauthgamer@weizmann.ac.il} \and 
    Aditya Krishnan%
    \thanks{Work partially done while the author was at Johns Hopkins University and supported by the MINDS Data Science Fellowship.} \\Pinecone \\ \texttt{aditya@pinecone.io} \and 
    Shay Sapir%
    \thanks{This research was partially supported by the Israeli Council for Higher Education (CHE) via the Weizmann Data Science Research Center.} \\ Weizmann Institute of Science \\ \texttt{shay.sapir@weizmann.ac.il} }

    \date{}
\fi


\begin{document}
\maketitle

\normalem


\begin{abstract}
Many streaming algorithms provide only a high-probability relative approximation.
These two relaxations,
of allowing approximation and randomization,
seem necessary --
for many streaming problems, both relaxations must be employed simultaneously, 
to avoid an exponentially larger (and often trivial) space complexity.
A common drawback of these randomized approximate algorithms
is that independent executions on the same input have different outputs,
that depend on their random coins.
\emph{Pseudo-deterministic} algorithms combat this issue, and for every input,
they output with high probability the same ``canonical'' solution.


We consider perhaps the most basic problem in data streams,
of counting the number of items in a stream of length at most $n$.
Morris's counter [CACM, 1978] is a randomized approximation algorithm
for this problem that uses $O(\log\log n)$ bits of space,
for every fixed approximation factor (greater than $1$).
Goldwasser, Grossman, Mohanty and Woodruff [ITCS 2020] asked whether
pseudo-deterministic approximation algorithms can match this space complexity.
Our main result answers their question negatively, and shows that such algorithms
must use $\Omega(\sqrt{\log n / \log\log n})$ bits of space.


Our approach is based on a problem that we call \emph{Shift Finding},
and may be of independent interest.
In this problem, one has query access
to a shifted version of a known string $F\in\{0,1\}^{3n}$,
which is guaranteed to start with $n$ zeros and end with $n$ ones, 
and the goal is to find the unknown shift using a small number of queries.
We provide for this problem an algorithm that uses $O(\sqrt{n})$ queries. 
It remains open whether $\poly(\log n)$ queries suffice;
if true, then our techniques immediately imply a nearly-tight
$\Omega(\log n/\log\log n)$ space bound for pseudo-deterministic approximate counting.
\end{abstract}


\input{Introduction}
\input{Preliminaries}
\input{Connection_ShiftFind_and_PDcounting}
\input{LBforPD_ApproximateCounting}
% Shift finding
\input{Shift_Finding_Alg}

\ifLIPICS
    \bibliographystyle{plainurl}% the mandatory bibstyle
\else
    \bibliographystyle{alphaurl}
\fi
\bibliography{references.bib}
\end{document}


