\newif\ifLIPICS
\LIPICSfalse
% \LIPICStrue % last one wins

\ifLIPICS
    \documentclass[a4paper,UKenglish,cleveref, autoref, thm-restate,numberwithinsect]{lipics-v2021}
    % \bibliographystyle{plainurl}% the mandatory bibstyle - at the end
    \usepackage{paper}
\else
    \documentclass[11pt]{article}
    \usepackage{paper}
    \usepackage{cleveref, thm-restate}
\fi



\newif\ifDRAFT 
\DRAFTfalse
% \DRAFTtrue % last one wins


\usepackage{ulem}


\ifDRAFT
    \usepackage{lineno}
    \linenumbers
\fi


\title{
Lower Bounds for Pseudo-Deterministic Counting in a Stream
}
%\titlerunning{Dummy short title} %TODO optional, please use if title is longer than one line

\ifLIPICS

    \author{Vladimir Braverman}{Rice University}{vb21@rice.edu}{}{Work partially supported by ONR Award N00014-18-1-2364 and NSF awards 1652257, 1813487 and 2107239.} 

    \author{Robert Krauthgamer}{Weizmann Institute of Science}{robert.krauthgamer@weizmann.ac.il}{https://orcid.org/0009-0003-8154-3735}
    {Work partially supported by ONR Award N00014-18-1-2364,
      by a Weizmann-UK Making Connections Grant,
      by a Minerva Foundation grant,
      and the Weizmann Data Science Research Center.} 

    \author{Aditya Krishnan}{Pinecone}{aditya@pinecone.io}{}{Work partially done while the author was at Johns Hopkins University and supported by the MINDS Data Science Fellowship.} 

    \author{Shay Sapir}{Weizmann Institute of Science \and \url{https://sites.google.com/view/shaysapir}}{shay.sapir@weizmann.ac.il}{https://orcid.org/0000-0001-7531-685X}{This research was partially supported by the Israeli Council for Higher Education (CHE) via the Weizmann Data Science Research Center.} 

    
    \authorrunning{V. Braverman, R. Krauthgamer, A. Krishnan and S. Sapir} %TODO mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et al.'
    
    \Copyright{Vladimir Braverman, Robert Krauthgamer, Aditya Krishnan and Shay Sapir} %TODO mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/
    
    % mandatory: Please choose ACM 2012 classifications from https://dl.acm.org/ccs/ccs_flat.cfm 
    \input{ccsdesc_PD_streams} % in seperated tex file

    % mandatory; please add comma-separated list of keywords
    \keywords{streaming algorithms, pseudo-deterministic, approximate counting}
    
    % \category{} %optional, e.g. invited paper
    \category{Track A: Algorithms, Complexity and Games}
    
    \relatedversion{} %optional, e.g. full version hosted on arXiv, HAL, or other respository/website
    \relatedversiondetails{}{https://arxiv.org/abs/2303.16287}
    %\relatedversiondetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93]{Classification (e.g. Full Version, Extended Version, Previous Version}{URL to related version} %linktext and cite are optional
    
    %\supplement{}%optional, e.g. related research data, source code, ... hosted on a repository like zenodo, figshare, GitHub, ...
    %\supplementdetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93, subcategory={Description, Subcategory}, swhid={Software Heritage Identifier}]{General Classification (e.g. Software, Dataset, Model, ...)}{URL to related version} %linktext, cite, and subcategory are optional
    
    %\funding{(Optional) general funding statement \dots}%optional, to capture a funding statement, which applies to all authors. Please enter author specific funding statements as fifth argument of the \author macro.
    
    % \acknowledgements{I want to thank \dots}%optional
    
    \nolinenumbers %uncomment to disable line numbering

    
%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\EventEditors{Kousha Etessami, Uriel Feige, and Gabriele Puppis}
\EventNoEds{3}
\EventLongTitle{50th International Colloquium on Automata, Languages, and Programming (ICALP 2023)}
\EventShortTitle{ICALP 2023}
\EventAcronym{ICALP}
\EventYear{2023}
\EventDate{July 10--14, 2023}
\EventLocation{Paderborn, Germany}
\EventLogo{}
\SeriesVolume{261}
\ArticleNo{69}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\else
    \author{
    Vladimir Braverman%
    \thanks{Work partially supported by ONR Award N00014-18-1-2364 and NSF awards 1652257, 1813487 and 2107239}\\ Rice University \\ \texttt{vb21@rice.edu} \and 
    Robert Krauthgamer%
    \thanks{Work partially supported by ONR Award N00014-18-1-2364,
      by a Weizmann-UK Making Connections Grant,
      by a Minerva Foundation grant,
      and the Weizmann Data Science Research Center.
      } \\ Weizmann Institute of Science \\ \texttt{robert.krauthgamer@weizmann.ac.il} \and 
    Aditya Krishnan%
    \thanks{Work partially done while the author was at Johns Hopkins University and supported by the MINDS Data Science Fellowship.} \\Pinecone \\ \texttt{aditya@pinecone.io} \and 
    Shay Sapir%
    \thanks{This research was partially supported by the Israeli Council for Higher Education (CHE) via the Weizmann Data Science Research Center.} \\ Weizmann Institute of Science \\ \texttt{shay.sapir@weizmann.ac.il} }

    \date{}
\fi


\begin{document}
\maketitle

\normalem


\begin{abstract}
Many streaming algorithms provide only a high-probability relative approximation. These two relaxations, of allowing approximation and randomization, seem necessary -- for many streaming problems, both relaxations must be employed simultaneously, to avoid an exponentially larger (and often trivial) space complexity. A common drawback of these randomized approximate algorithms is that independent executions on the same input have different outputs, that depend on their random coins. \emph{Pseudo-deterministic} algorithms combat this issue, and for every input, they output with high probability the same ``canonical'' solution.


We consider perhaps the most basic problem in data streams, of counting the number of items in a stream of length at most $n$. Morris's counter [CACM, 1978] is a randomized approximation algorithm for this problem that uses $O(\log\log n)$ bits of space, for every fixed approximation factor (greater than $1$). Goldwasser, Grossman, Mohanty and Woodruff [ITCS 2020] asked whether pseudo-deterministic approximation algorithms can match this space complexity. Our main result answers their question negatively, and shows that such algorithms must use $\Omega(\sqrt{\log n / \log\log n})$ bits of space.


Our approach is based on a problem that we call \emph{Shift Finding}, and may be of independent interest. In this problem, one has query access to a shifted version of a known string $F\in\{0,1\}^{3n}$, which is guaranteed to start with $n$ zeros and end with $n$ ones, and the goal is to find the unknown shift using a small number of queries. We provide for this problem an algorithm that uses $O(\sqrt{n})$ queries. It remains open whether $\poly(\log n)$ queries suffice; if true, then our techniques immediately imply a nearly-tight $\Omega(\log n/\log\log n)$ space bound for pseudo-deterministic approximate counting.


\end{abstract}


\input{Introduction}
\input{Preliminaries}
\input{Connection_ShiftFind_and_PDcounting}
\input{LBforPD_ApproximateCounting}
% Shift finding
\input{Shift_Finding_Alg}

\ifLIPICS
    \bibliographystyle{plainurl}% the mandatory bibstyle
\else
    \bibliographystyle{alphaurl}
\fi
\bibliography{references.bib}
\end{document}


