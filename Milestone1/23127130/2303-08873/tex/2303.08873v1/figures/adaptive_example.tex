\begin{minted}[numbersep=1pt, highlightlines={2-4}, highlightcolor=celadon!50, fontsize=\footnotesize,linenos,escapeinside=!!,breaklines=true]{c++}
void vecAdd(double *A, double *B, double *C, size_t N) {
  !\label{lst3:adapt:begin}!#pragma omp begin adaptation \
    model_name(by_len) features(N) \
    !\label{lst3:adapt:end}!variants(cpu, gpu)
\end{minted}
\begin{minted}[firstnumber=5, numbersep=1pt, highlightlines={5-9}, highlightcolor=beaublue!50, fontsize=\footnotesize,linenos,escapeinside=!!,breaklines=true]{c++}
  !\label{lst3:meta2:begin}!#pragma omp metadirective \
    when(user={adaptation(by_len==cpu)} : parallel for) \
    when(user={adaptation(by_len==gpu)} : \
      target map(to: A[0:N], B[0:N]) map(from: C[0:N]) \
      !\label{lst3:meta2:end}!teams distribute parallel for
\end{minted}
\begin{minted}[firstnumber=11, highlightlines={11,12}, highlightcolor=lightgray!50, numbersep=1pt,fontsize=\footnotesize,linenos,escapeinside=!!,breaklines]{c++}   
  for(size_t i = 0; i < N; ++i)
      C[i] = A[i] + B[i];
\end{minted}
\begin{minted}[firstnumber=13, numbersep=1pt, highlightlines={13}, highlightcolor=bubblegum!50, fontsize=\footnotesize,linenos,escapeinside=!!]{c++}
  !\label{lst3:adaptend}!#pragma omp end adaptation model_name(by_len)
}
\end{minted}
