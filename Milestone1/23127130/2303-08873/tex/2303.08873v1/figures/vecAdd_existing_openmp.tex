\begin{minted}[numbersep=1pt,fontsize=\footnotesize,linenos,frame=lines,escapeinside=!!]{c++}
void vecAdd(double *A, double *B, double *C, size_t N) 
{
  !\label{ex1:begin}!#pragma omp metadirective \ 
   !\label{ex1:when1:begin}!when(user={condition(N<1024)} : !\label{ex1:when1:end}!parallel for) \
   !\label{ex1:when2:begin}!when(user={condition(N>=1024)} : \
   !\label{ex1:when2:end}!target map(to: A[0:N], B[0:N]) map(from: C[0:N]) \
   !\label{ex1:end}!teams distribute parallel for)
  for(size_t i = 0; i < N; ++i)
   C[i] = A[i] + B[i];
}
\end{minted}