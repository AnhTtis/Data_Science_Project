\begin{minted}[numbersep=1pt, highlightlines={2-15}, highlightcolor=celadon!50, fontsize=\footnotesize,linenos,escapeinside=!!,breaklines]{c++}
void vecAdd(double *A, double *B, double *C, size_t N) {
  float GPU_FRAC;
  
  !\label{lst5:adapt:begin}!#pragma omp begin adaptation model_name(by_len) \
    features(N) \
    variants([0.0:1.0:0.1]) \
    model(dtree) min_training_data(11 * 10) \
    !\label{lst5:adapt:end}!model_output(GPU_FRAC)")
\end{minted}
\begin{minted}[firstnumber=9, numbersep=1pt, highlightlines={9-21}, highlightcolor=beaublue!50, fontsize=\footnotesize,linenos,escapeinside=!!,breaklines]{c++}
  !\label{lst5:enter:begin}!#pragma omp target enter data \
    map(to: A[0:GPU_FRAC*N], B[0:GPU_FRAC*N]) \
    !\label{lst5:enter:end}!map(from: C[0:GPU_FRAC*N])
  // GPU execution
  !\label{lst5:gpu:begin}!#pragma omp target teams distribute parallel for nowait
  for(size_t i = 0; i < GPU_FRAC*N; ++i)
      !\label{lst5:gpu:end}!C[i] = A[i] + B[i];
  // CPU execution
  !\label{lst5:cpu:begin}!#pragma omp parallel for
  for(size_t i = GPU_FRAC*N; i < N; ++i)
      !\label{lst5:cpu:end}!C[i] = A[i] + B[i];
  !\label{lst5:taskwait}!#pragma omp taskwait
  !\label{lst5:exit}!#pragma target exit data map(from: C[0:GPU_FRAC*N])
\end{minted}
\begin{minted}[firstnumber=22, numbersep=1pt, highlightlines={22}, highlightcolor=bubblegum!50, fontsize=\footnotesize,linenos,escapeinside=!!,breaklines]{c++}    
  #pragma omp end adaptation model_name(by_len)
}
\end{minted}
