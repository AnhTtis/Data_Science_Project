

Consider the following canonical space
\begin{equation}\label{mf:canonical_space}
    \Omega^*=\R^d \times \contrd, \quad \F^*=\boreliani{\R^d} \otimes \boreliani{\contrd},\quad \prob^*=\nu\otimes\wienermeasure.
\end{equation}
Define $\xi$ and $W=(W_t)_{t \in [0,T]}$ as
\begin{equation}
    \xi(\omega_*)=\xi(x,w)=x, \quad W_t(\omega_*)=W_t(x,w)=w_t.
\end{equation}
By definition of $\prob^*$, $\xi$ and $W$ are independent, $\xi$ is an $\R^d$-valued random variable with law $\nu$ and $W$ is a standard Brownian motion.
Define the filtration $\mathbb{F}^*$ as the $\prob^*$-augmentation of the filtration generated by $\xi$ and $W$.

\medskip
Consider the set $\A$ of $\mathbb{F}^*$-progressively measurable processes taking values in $A$:
\begin{equation}\label{mf:strategie_open_loop}
    \A = \insieme{\alpha:[0,T]\times\Omega^*\to A \; \Big\vert \;  \text{$\alpha$ is $\mathbb{F}^*$-progressively measurable } }.
\end{equation}
Provided that we identify processes which are equal $Leb_{[0,T]}\otimes\prob^*$-a.e., we can regard $\A$ as
\begin{equation*}
    \A=L^2 \tonde{[0,T]\times\Omega^*,\mathcal{P}^*,Leb_{[0,T]} \otimes \prob^*;A},
    \end{equation*}
where $\mathcal{P}^*$ stands for the progressive $\sigma$-algebra on $[0,T]\times\Omega^*$, using the filtration $\mathbb{F}^*$.
We call any element $\alpha\in\A$ an open loop strategy for the mean field game.
We endow such a space $\A$ with the norm
\begin{equation}\label{mf:semi_norm}
    \norm{\alpha}_{L^2}=\E^{\prob^*}\quadre{\int_0^T \abs{\alpha_t}^2 dt}^\frac{1}{2}
\end{equation}
and consider the Borel $\sigma$-algebra $\boreliani{\A}$ associated to that.
We observe that, since $([0,T]\times\Omega^*,\boreliani{[0,T]\times\Omega^*})$ is Polish and $A$ is closed, $\A$ is a separable Banach space.
Finally, we will make no distinction between an $\mathbb{F}^*$-progressively measurable process $\alpha$ and any other process $\alpha'$ which is equal to it $Leb_{[0,T]}\otimes\prob^*$-almost everywhere.

\begin{definition}[Admissible recommendation for the mean field game]\label{mf:admissible_recommendation}
We call \emph{admissible recommendation} a pair $((\Omega^0,\F^{0-},\prob^0),\Lambda)$ where:
\begin{enumerate}
    
    \item $(\Omega^0,\mathcal{F}^{0-}$, $\prob^0)$ is a complete probability space; $\Omega^0$ is a Polish space and $\F^{0-}$ is its corresponding Borel $\sigma$-algebra.

    \item $\Lambda$ is a random variable with values in $\A$:
    \begin{equation}\label{mf:raccomandazione}
    \begin{aligned}
    \Lambda: (\Omega^0,\mathcal{F}^{0-},\prob^0) & \longrightarrow (\A,\boreliani{\A}) \\
    \omega_0 & \longmapsto \Lambda(\omega_0)=\alpha:[0,T]\times\Omega^*\to A.
    \end{aligned}
    \end{equation}

    \item \label{mf:condizione_ammissibilita} $\Lambda$ is admissible, in the following sense: let $(\Omega,\F,\prob)$ be the product space of $(\Omega^0,\F^{0-},\prob^0)$ and $(\Omega^*,\F^*,\prob^*)$:
    \begin{equation*}
        (\Omega,\F,\prob)= (\Omega^0 \times \Omega^*,\F^{0-}\otimes\F^*,\prob^0\otimes\prob^*).
    \end{equation*}
    We complete the $\sigma$-algebra $\F$ with the $\prob$-null sets and endow the product probability space with the $\prob$-augmentation of the filtration
    \begin{equation*}
    \mathbb{F}= \F^{0-} \otimes \mathbb{F}^* = (\F^{0-}\otimes\F^*_t)_{t\in[0,T]}.
    \end{equation*}
    Given an $(\A,\boreliani{\A})$-valued random variable $\Lambda$ as in \eqref{mf:raccomandazione}, we say that $\Lambda$ is admissible if there exists an $A$-valued process $\lambda=(\lambda_t)_{t\in[0,T]}$, defined on $(\Omega,\F,\prob)$ and $\mathbb{F}$-progressively measurable, so that, for $\prob^0$-a.e. $\omega_0 \in \Omega^0$, the section $(\lambda_t(\omega_0,\cdot))_{t \in [0,T]}$ is equal to $\Lambda(\omega_0)$ in $\A$:
    \begin{equation}\label{mf:uguaglianza_ammissibilita}
        \norm{(\lambda_t(\omega_0,\cdot))_{t \in [0,T]}-\Lambda(\omega_0)}_{L^2([0,T] \times \Omega^*)}=0, \quad \prob^0\text{-a.s.}
    \end{equation}
\end{enumerate}
If $\Lambda$ is an admissible recommendation, we write
\begin{equation}\label{mf:controllo_indotto}
    \lambda_t(\omega)= \lambda_t(\omega_0,\omega_*)=\Lambda(\omega_0)_t(\omega_*),
\end{equation}
where equality is to be understood in the sense of \eqref{mf:uguaglianza_ammissibilita}.
We call \emph{strategy associated to the admissible recommendation} $((\Omega^0,\F^{0-},\prob^0),\Lambda)$ the $\mathbb{F}$-progressively measurable process $\lambda=(\lambda_t)_{t\in[0,T]}$ satisfying \eqref{mf:controllo_indotto}.
\end{definition}
We remark that, by Proposition \ref{esempi:unicita_strategia_associata}, given any admissible recommendation $((\Omega^0,\F^{0-},\prob^0),\Lambda)$, the strategy $\lambda$ associated to it is unique $Leb_{[0,T]}\otimes\prob$-almost everywhere.

\begin{definition}[Correlated flow]\label{def_correlated_flow}
A \emph{correlated flow} is a triple $((\Omega^0,\F^{0-},\prob^0),\Lambda,\mu)$ where:
\begin{enumerate}
    \item $((\Omega^0,\F^{0-},\prob^0),\Lambda)$ is an admissible recommendation.

    \item $\mu:(\Omega^0,\F^{0-},\prob^0)\to (\contpdue,\boreliani{\contpdue})$ is a random continuous flow of measures in $\mathcal{P}^2(\R^d)$.
\end{enumerate}
\end{definition}
The same considerations as in Remark \ref{finite_players:remark_estensioni} about the extension of random variables on the product space $(\Omega,\F,\prob)$ hold for correlated flows as well.

\medskip
Let $((\Omega^0,\F^{0-},\prob^0),\Lambda,\mu)$ be a correlated flow.
On the product probability space $(\Omega,\mathcal{F},\prob)$ defined at point \ref{mf:condizione_ammissibilita} of Definition \ref{mf:admissible_recommendation}, we assign state dynamics.
If the representative player decides to play according to the admissible recommendation $\Lambda$, the dynamics is given by the following SDE:
\begin{equation}\label{dinamica_MF_no_deviazione}
    \begin{cases}
    dX_t = b(t,X_t,\mu_t,\lambda_t)dt +dW_t, \qquad  0\leq t \leq T, \\
    X_0 = \xi.
    \end{cases}
\end{equation}
If instead the representative player decides to ignore the mediator's recommendation and to use a possibly different strategy $\beta\in\A$, the dynamics is given by the following SDE:
\begin{equation}\label{dinamica_MF_deviation}
    \begin{cases}
    dX_t = b(t,X_t,\mu_t,\beta_t)dt +dW_t, \qquad 0\leq t \leq T, \\
    X_0 = \xi.
    \end{cases}
\end{equation}
By Assumptions \ref{standing_assumptions}, on any space $(\Omega,\F,\mathbb{F},\prob)$ there exists a solution to equation \eqref{dinamica_MF_no_deviazione} and pathwise uniqueness holds.
By Theorem \ref{teorema_di_unicita_legge}, uniqueness in law holds.
Analogous considerations apply to equation \eqref{dinamica_MF_deviation}.


\medskip
Let $((\Omega^0,\F^{0-},\prob^0),\Lambda,\mu)$ be a correlated flow.
The cost functionals for the representative player and the deviating player, whose state dynamics follow \eqref{dinamica_MF_no_deviazione} and \eqref{dinamica_MF_deviation}, respectively, are given by:
\begin{equation}\label{costi_mfg}
\begin{aligned}
    & \J(\Lambda,\mu)=\E\quadre{\int_0^T f(t,X_t,\mu_t,\lambda_t)dt + g(X_T,\mu_T)}, \\
    & \J(\beta,\mu)=\E\quadre{\int_0^T f(t,X_t,\mu_t,\beta_t)dt + g(X_T,\mu_T)}.
\end{aligned}
\end{equation}
As in the $N$-player game, the expectation in the cost functional is taken with respect to the product probability measure $\prob = \prob^0 \otimes \prob^*$; in particular, it depends on the mediator's randomization $\prob^0$ also when the representative player deviates. Finally, we give the definition of coarse correlated solution of the mean field game:
\begin{definition}[Coarse correlated solution]\label{def_mean_field_sol}
A correlated flow $((\Omega^0,\F^{0-},\prob^0),\Lambda,\mu)$ is a \emph{coarse correlated solution} of the mean field game if the following properties hold:
\begin{enumerate}[label=(\roman*)]
    \item Optimality: for every deviation $\beta \in \A$, it holds
    \begin{equation}\label{def_mean_field_sol:opt}
        \J(\Lambda,\mu)\leq \J(\beta,\mu).
    \end{equation}
    \item Consistency: for every time $t \in [0,T]$, $\mu_t$ is a version of the conditional law of $X_t$ given $\mu$, that is,
    \begin{equation}\label{def_mean_field_sol:cons}
        \mu_t(\cdot)=\prob(X_t \in\cdot \; \vert \; \mu ) \quad \prob\text{-a.s.} \;\; \forall t \in [0,T].
    \end{equation}
\end{enumerate}
We will refer to coarse correlated solutions of the mean field game as coarse correlated mean field solutions and mean field coarse correlated equilibria (CCE) as well.
\end{definition}

\begin{remark}[Role of $(\Omega^0,\F^{0-},\prob^0)$]
Analogously as in the $N$-player game, although the probability space $(\Omega^0,\mathcal{F}^{0-},\prob^0)$ is part of the definitions of admissible recommendation and correlated flow, when it is clear from the context we refer to $\Lambda$ and $(\Lambda,\mu)$, instead of the pair $((\Omega^0,\F^{0-},\prob^0),\Lambda)$ and the triple $((\Omega^0,\F^{0-},\prob^0),\Lambda,\mu)$, as admissible recommendation and correlated flow, respectively.
\end{remark}

As in \cite{bonesiniCE,campifischer2021}, the consistency condition \eqref{def_mean_field_sol:cons} should be read in the following way: the mediator imagines what the flow of measures will be, up to the terminal horizon $T$, before the game starts, and gives a recommendation to each player according to his idea. Since the flow of measures is expected to be stochastic as a result of the mediator's randomization only, we request it to be measurable with respect to $\F^{0-}$, and, since the randomization is performed before the game starts, we have $ \F^{0-} \subseteq \F_t$ for any $t \geq 0$. If all players commit to the mediator's lottery for generating recommendations, then the flow of measures should arise from aggregation of the individual behaviors, consistently with what imagined by the mediator. Since the generation of the recommendation is performed on the basis of the whole flow of measures, we formulate consistency condition \eqref{def_mean_field_sol:cons} with respect to conditioning on the whole flow.
Regarding the strategy of the deviating player, as in the $N$-player game, if the player deviates, she chooses her strategy on her own, without using any of the information carried by $\Lambda$ or $\mu$:
the only information she has about $\Lambda$ or $\mu$ comes from the knowledge of the distribution $\prob^0$, which is assumed to be known by the representative player, in analogy to the $N$-player game.



\begin{remark}[Relation with MFGs with common noise]
Given the consistency condition \eqref{def_mean_field_sol:cons}, it is worth comparing coarse correlated solutions to the MFG and solutions to MFGs with common noise (see, e.g., \cite{carmona2016commonnoise,lacker2016,lacker_leflem2022} and in \cite[Volume II]{librone}).
In the latter, the flow of measures is stochastic due to a common noise that equally impacts the state dynamics of all players in the underlying $N$-player game.
As a consequence, the flow of measures is expected to be adapted to the filtration generated by the common noise (the so called \emph{strong solutions}); if this is not the case, compatibility conditions between the noises and the flow of measures itself are needed in order to guarantee that the flow $\mu$ picks into the future in a minimal way (the so called \emph{weak solutions}).
In the case of a coarse correlated solution to the MFG, on the other hand, the flow of measures is expected to be stochastic as a result of the mediator's randomization only, which is generated before the beginning of the game. More formally, this implies that the flow of measure is $\F^{0-}$-measurable with $\F^{0-} \subseteq \F_t$ for any $t \geq 0$. Recommendations to the representative player are given according to the mediator's idea of the whole flow, which leads to the consistency condition with conditioning with respect to the whole flow up to terminal time. In this sense, the mediator sees into the future, and consequently no compatibility condition is needed.

One might be tempted to regard the randomness driving the mediator's lottery for selecting recommendations as a common noise that affects the state dynamics only through the control. There are at least two major differences though: First, such a common noise will have no impact on the controls of a deviating player. To put it differently, only the pre-committing players' dynamics are directly affected by the mediator's lottery over strategy profiles.
Second, such a common noise would not be exogenous; instead, it is built into the correlation device used by the mediator, as represented by the auxiliary probability space $(\Omega^0,\F^{0-},\prob^0)$, and as such is part of the solution.
\end{remark}


\begin{example}[Admissible recommendations]\label{mf:example:admissible_recommendations}
Fix a complete probability space $(\Omega^0,\F^{0-},\prob^0)$.
We provide some simple examples of random variables $\Lambda:(\Omega^0,\F^{0-},\prob^0) \to (\A,\boreliani{\A})$ which are admissible recommendations in the sense of Definition \ref{mf:admissible_recommendation}.

\begin{enumerate}[wide]
\item \label{mf:example:finitely_many_values}
Suppose that $\Lambda$ takes only finitely many values, say $\alpha^1,\dots,\alpha^k \in \A$, $k \geq 1$, i.e. $\prob^0(\Lambda=\alpha^i)=p_i$, with $p_i \geq 0$ for every $i=1,\dots,k$, $\sum_{i=1}^k p_i=1$.
We can easily define the associated strategy $(\lambda_t)_{t \in [0,T]}$ as
\begin{equation*}
    \lambda_t(\omega_0,\omega_*)=\sum_{i=1}^k \1_{\insieme{\Lambda=\alpha^i}}(\omega_0)\alpha^i_t(\omega_*).
\end{equation*}
We explicit the dependence upon the scenario $\omega=(\omega_0,\omega_*)$:
\begin{equation*}
    \Lambda(\omega_0)_t(\omega_*) = \sum_{i=1}^k \1_{\insieme{\alpha^i}}(\Lambda(\omega_0))\alpha^i_t(\omega_*).
\end{equation*}
By the same line of reasoning of Remark \ref{finite_players:remark_estensioni}, we have that this process is $\mathbb{F}$-progressively measurable, since the processes $\alpha^i$, $i=1,\dots,k$, are $\mathbb{F}$-progressively measurable and the $\F^{0-}$-measurable real-valued random variables $\1_{\{\alpha^1\}}(\Lambda(\omega_0))$ can be regarded as defined on the product space $\Omega^0\times\Omega^*$ and $\F^{0-}\otimes \{\emptyset, \Omega^*\}$-measurable, therefore $\mathbb{F}$-progressively measurable.
Finally, condition \eqref{mf:uguaglianza_ammissibilita} is satisfied by $\lambda$ itself.

\item Suppose $\Lambda$ takes at most countably many values.
We can define $\lambda=(\lambda_t(\omega_0,\omega_*))_{t \in [0,T]}$ as
\begin{equation*}
    \lambda_t(\omega_0,\omega_*)= \sum_{i=1}^\infty\1_{\insieme{\Lambda=\alpha^i}}(\omega_0)\alpha^i_t(\omega_*).
\end{equation*}
Set $\lambda^n_t(\omega_0,\omega_*)=\sum_{i=1}^n \1_{\{\Lambda=\alpha^i\}}(\omega_0)\alpha^i_t(\omega_*)$ and observe that, by the same argument of the previous point, $\lambda^n_t$ is an $\mathbb{F}$-progressively measurable process for each $n\geq 1$.
Furthermore, for each $(t,\omega_0,\omega_*) \in [0,T]\times\Omega^0\times\Omega^*$, the sequence $\lambda^n_t(\omega_0,\omega_*)$ is eventually constant, being $(\{\Lambda=\alpha^i\})_{i\geq 1}$ a partition of $\Omega^0$.
Therefore, the sequence $\lambda^n$ converges pointwise to $\lambda=(\lambda_t)_{t \in [0,T]}$.
Being $\lambda$ the pointwise limit of $\lambda^n$, we deduce that $\lambda$ is a progressively measurable process with values in $A$ which satisfies \eqref{mf:uguaglianza_ammissibilita}, so that $\Lambda$ is admissible.

\item Let $(\Omega^0,\F^{0-},\prob^0)$ be a complete probability space, with $\Omega^0$ Polish and $\F^{0-}$ the corresponding Borel $\sigma$-algebra, and let $(\lambda_t)_{t \in [0,T]}$ be an $A$-valued process defined on the $\prob^0\otimes\prob^*$-completion of the product space $(\Omega^0\times\Omega^*,\F^{0-}\otimes\F,\prob^0\otimes\prob^*)$ with values in $A$.
Assume that it is progressively measurable with respect to the $\prob^0\otimes\prob^*$-augmentation of the filtration $\mathbb{F}=(\F^{0-}\otimes\F^*_t)_{t \in [0,T]}$.
We can define a function $\Lambda:\Omega^0\to \A$ by setting
\begin{equation}\label{raccomandazione_indotta}
\begin{aligned}
    \Lambda(\omega_0)=\left \{ \: \begin{aligned}
        & \begin{aligned}
            (\lambda_{t}(\omega_0,\cdot))_{t \in [0,T]} &  :\space [0,T] \times \Omega^* \to A \\
        & (t,\omega_*) \to \lambda_t(\omega_0,\omega_*), 
        \end{aligned} &&  \omega^0 \in \Omega^0\setminus N, \\ 
        & a_0 && \omega_0 \in N.
    \end{aligned} \right.
\end{aligned}
\end{equation}
where $N\subset \Omega^0$ is a $\prob^0$-null set and $a_0$ is an arbitrary point in $A$.
By Lemma \ref{esempi:lemma_misurabile} in Appendix \ref{appendix_recommendations}, the pair $((\Omega^0,\F^{0-},\prob^0),\Lambda)$ is an admissible recommendation, with strategy associated to the recommendation $\Lambda$ given by the process $\lambda$ itself.
\end{enumerate}
\end{example}
