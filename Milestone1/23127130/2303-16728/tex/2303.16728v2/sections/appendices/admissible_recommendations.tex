


\begin{lemma}\label{esempi:lemma_misurabile}
Let $(\Omega^0,\F^{0-},\prob^0)$ be a complete probability spaces and $(\Omega^*,\F^*,\mathbb{F}^*,\prob^*)$ be a filtered probability space satisfying the usual assumptions.
Fix a bounded $A$-valued process $(\lambda_t)_{t \in [0,T]}$ defined on the completion of the product space $(\Omega^0\times\Omega^*,\F^{0-}\otimes\F,\prob^0\otimes\prob^*)$.
Assume that it is progressively measurable with respect to the filtration $\mathbb{F}=(\F_t)_{t \in [0,T]}$, where $\mathbb{F}$ is the $\prob^0\otimes\prob^*$-augmentation of the filtration $(\F^{0-}\otimes\F^*_t)_{t \in [0,T]}$.
Define a function $\Lambda:\Omega^0\to \A$ by setting
\begin{equation}\label{appendix:raccomandazione_indotta}
\begin{aligned}
    \Lambda(\omega_0)=\left \{ \: \begin{aligned}
        & \begin{aligned}
            (\lambda_{t}(\omega_0,\cdot))_{t \in [0,T]} &  :\space [0,T] \times \Omega^* \to A \\
        & (t,\omega_*) \to \lambda_t(\omega_0,\omega_*), 
        \end{aligned} &&  \omega^0 \in \Omega^0\setminus N, \\
        & a_0 && \omega_0 \in N.
    \end{aligned} \right.
\end{aligned}
\end{equation}
where $N\subset \Omega^0$ is a $\prob^0$-null set and $a_0$ is some point in $A$.
The function $\Lambda$ defined in \eqref{appendix:raccomandazione_indotta} is an admissible recommendation.
\end{lemma}
\begin{proof}
Take any bounded $(\F)_{t \in [0,T]}$-progressively measurable process $(\lambda_t)_{t \in [0,T]}$ defined on the product space $(\Omega^0\times\Omega^*,\F^{0-}\otimes\F^*,\prob^0\otimes\prob^*)$ taking values in $\R$, and not necessarily in $A$.

\medskip
Observe that it is always possible to define a function $\Lambda$ from $(\Omega^0,\F^{0-},\prob^0)$ to $(L^2([0,T]\times \Omega^*;\mathcal{P}^*,Leb_{[0,T]}\otimes\prob^*),\boreliani{L^2})$ as in \eqref{appendix:raccomandazione_indotta}, where $\mathcal{P}^*$ denotes the progressive $\sigma$-algebra associated to the filtration $\mathbb{F}^*$.
Indeed, by construction of the filtration $\mathbb{F}$, since $\lambda$ is $\mathbb{F}$-progressively measurable, there exists a set $N \subset \Omega^0$, $\prob^0(N)=0$, so that the section $(\lambda_t(\omega_0,\cdot))_{t \in [0,T]}$ is $\mathcal{P}^*$-measurable for every $\omega_0 \in \Omega^0 \setminus N$.
Set $\Lambda(\omega_0)=(\lambda_t(\omega_0,\cdot)_{t \in [0,T]})$ for $\omega_0 \in \Omega^0 \setminus N$ and $\Lambda(\omega_0) \equiv a_0$ for $\omega_0 \in N$, where $a_0$ is any point in $\R$, which is exactly \eqref{appendix:raccomandazione_indotta}.

\medskip
Let $\mathcal{H}$ be the set of bounded progressively measurable processes $\lambda$ so that the function $\Lambda$ defined according to \eqref{appendix:raccomandazione_indotta} is a $\F^{0-}\setminus\boreliani{L^2}$ measurable random variable.
We show that $\mathcal{H}$ is a monotone class which contains the set $\mathcal{E}$ of progressively measurable processes $\lambda:[0,T]\times\Omega^0\times\Omega^* \to \R $ of the form
\begin{equation}\label{esempi:processi_semplici}
    \lambda_t=\sum_{i=1}^n \zeta^i\1_{[t_i,t_{i+1})}(t),
\end{equation}
where $n \geq 1$, $t_i \in [0,T]$, $t_i<t_{i+1}$ for every $i=1,\dots,n$, $\zeta^i$ are bounded $\F_{t_i}$-measurable random variables.
Having established such properties, we apply monotone class theorem (as stated, e.g., in \cite[Theorem II.3.1]{rogerswilliams_vol1}) to conclude that $\mathcal{H}$ contains the set of $\mathbb{F}$-progressively measurable bounded processes defined on the product space $\Omega^0\times\Omega^*$.


\medskip
To see that $\mathcal{H}$ is a monotone class, observe that $\mathcal{H}$ is clearly a vector space and contains all processes $\lambda$ so that $\lambda_t\equiv c$ for every $t \in [0,T]$, for all $c \in \R$.
Let $(\lambda^n)_{n \geq 1} \subseteq \mathcal{H}$, with $\lambda^n \uparrow \lambda$ as $n$ goes to infinity, $\lambda^n$ positive and bounded by the same constant $C\geq 0$ for every $n$.
By monotone convergence, $\lambda$ is bounded and $\F^{0-} \otimes \mathcal{P}^*$-measurable as well, so that we can define $\Lambda$ as in \eqref{appendix:raccomandazione_indotta}, as previously discussed.
Let $\Lambda^n$ be the $L^2$-valued random variables defined starting from $\lambda^n$ according to \eqref{appendix:raccomandazione_indotta}, which are $\F^{0-} \setminus \boreliani{L^2}$ measurable since $\lambda^n$ belongs to $\mathcal{H}$ for every $n \geq 1$, by assumption.
Without loss of generality, we can suppose that the $\prob^0$-null set $N$ appearing in the definition of $\Lambda^n$ and $\Lambda$ is the same for every $n \geq 1$.
Notice that, for every $\omega_0 \in \Omega^0 \setminus N$, the sections $(\lambda^n_t(\omega_0,\cdot)_{t \in [0,T]}) \uparrow (\lambda_t(\omega_0,\cdot)_{t \in [0,T]})$ for every $(t,\omega_*) \in [0,T] \times \Omega^*$.
Therefore, by monotone convergence, it holds 
\begin{equation}\label{esempi:approssimazione_raccomdandazione}
\begin{aligned}
    \norm{\Lambda^n(\omega_0)-\Lambda(\omega_0)}^2_{L^2} & = \norm{(\lambda^n_t(\omega_0,\cdot)_{t \in [0,T]}) -(\lambda_t(\omega_0,\cdot)_{t \in [0,T]})}^2_{L^2} \\
    & =\E^{\prob^*}\quadre{\int_0^T \abs{\lambda^n(t,\omega_0,\omega_*)-\lambda(t,\omega_0,\omega_*)}^2 dt}\to 0
\end{aligned}
\end{equation}
for every $\omega_0 \in \Omega^0\setminus N$, i.e. $\Lambda=\lim_{n\to\infty}\Lambda^n$ $\prob^0$-a.s., which implies that $\Lambda$ is $\F^{0-}\setminus\boreliani{L^2}$ measurable, since the probability space is complete and $L^2([0,T]\times\Omega^*,\mathcal{P}^*,Leb_{[0,T]}\otimes\prob^*)$ is a complete norm space.
Finally, $\Lambda$ is admissible, since the process $\lambda$ obviously satisfies \eqref{mf:uguaglianza_ammissibilita}, choosing the same $\prob^0$-null set $N$ used in the definition $\Lambda$.

\medskip
To see that $\mathcal{E} \subseteq \mathcal{H}$, suppose first that $\lambda$ is of the form 
\begin{equation*}
    \lambda_t=\sum_{i=1}^n \1_{A_i}(\omega_0)\1_{B_i}(\omega_*)\1_{[t_i,t_{i+1})}(t),
\end{equation*}
where $n \geq 1$, $t_i \in [0,T]$, $t_i<t_{i+1}$ for every $i=1,\dots,N$, $A_i\in\F^{0-}$ and $B_i\in\F^*_{t_i}$.
We can regard each variable $\1_{B_i}(\omega_*)\1_{[t_i,t_{i+1})}(t)$ as a bounded progressively measurable process $\alpha^i$.
Therefore, \eqref{appendix:raccomandazione_indotta} takes the following form:
\begin{equation*}
    \Lambda(\omega_0)=\begin{cases}
    \alpha^i \; & \omega_0 \in  A_i, \qquad i=1,\dots,N, \\
    0 \; & \omega_0 \in \tonde{\cup_{i=1}^n A_i}^c
    \end{cases}
\end{equation*}
which shows that $\Lambda$ is $\F^{0-}\setminus\boreliani{L^2}$-measurable.
By Dynkin Lemma, conclusion holds true for progressively measurable simple processes of the form
\begin{equation}\label{esempi:processo_intermedio}
    \lambda_t=\sum_{i=1}^n \1_{C_i}(\omega_0,\omega_*)\1_{[t_i,t_{i+1})}(t),
\end{equation}
where $n \geq 1$, $t_i \in [0,T]$, $t_i<t_{i+1}$ for every $i\in\insieme{1,\dots,n}$, $C_i\in\F^{0-}\otimes\F^*_{t_i}$.
Finally, let $\lambda$ be of the form \eqref{esempi:processi_semplici}.
Thanks to the boundedness assumption on $\zeta^i$, we can find a sequence of simple processes $(\lambda^n)_{n\geq 1}$ of the form \eqref{esempi:processo_intermedio} so that $\abs{\lambda^n}\leq \abs{\lambda}$ and $\lambda^{n}_t(\omega_0,\omega_*)\to\lambda_t(\omega_0,\omega_*)$ pointwise for every $(t,\omega_0,\omega_*)$.
Let $\Lambda^n$ and $\Lambda$ be defined according to \eqref{appendix:raccomandazione_indotta} starting by the processes $\lambda^n$.
Due to point 2.b) above, conclusion holds true for each $\Lambda^n$.
Using dominated convergence, we can prove that \eqref{esempi:approssimazione_raccomdandazione} holds for $\prob^0$-a.e. $\omega_0 \in \Omega^0$, so that $\Lambda$ is the a.s. pointwise limit  of $\Lambda^n$, which implies that $\Lambda$ is $\F^{0-}\setminus \boreliani{L^2}$ measurable. 
\end{proof}

\begin{prop}\label{esempi:unicita_strategia_associata}
\begin{enumerate}[label=\roman*), wide]
Let $(\Omega^0,\F^{0-},\prob^0)$ be a complete probability space.
\item \label{esempi:unicita_strategia_associata:unicita_associata}  Let $\Lambda:(\Omega^0,\F^{0-},\prob^0)\to(\A,\boreliani{\A})$ be an admissible recommendation.
Let $\lambda^1$ and $\lambda^2$ be two $\mathbb{F}$-progressively measurable processes with values in $A$ so that \eqref{mf:uguaglianza_ammissibilita} holds.
Then $\lambda^1=\lambda^2$ $Leb_{[0,T]}\otimes\prob$-almost surely.
\item \label{esempi:unicita_strategia_associata:unicita_raccomandazione} Let $\Lambda,\Gamma:(\Omega^0,\F^{0-},\prob^0)\to(\A,\boreliani{\A})$ be admissible recommendations; let $\lambda,\gamma$ be the strategies associated to $\Lambda,\Gamma$, according to \eqref{mf:uguaglianza_ammissibilita}.
Suppose that $\lambda=\gamma$ $Leb_{[0,T]}\otimes \prob$-almost surely.
Then, $\Lambda=\Gamma$ $\prob^0$-a.s.
\end{enumerate}
\end{prop}
\begin{proof}
As for point \ref{esempi:unicita_strategia_associata:unicita_associata}, let $N^i$, $i=1,2$, be two $\prob^0$-null sets so that, for every $\omega_0 \in \Omega_0\setminus N^i$ the sections $(\lambda^i_t(\omega_0,\cdot))_{t \in [0,T]}$ are $\mathbb{F}^*$-progressively measurable processes and equation \eqref{mf:uguaglianza_ammissibilita} holds true.
Without loss of generality, we can assume that $N^1=N^2=N$.
Since for every $\omega_0 \in \Omega^0 \setminus N$ it holds $\norm{\Lambda - (\lambda^i_t(\omega_0,\cdot))_{t \in [0,T]}}_{L^2}=0$, $i=1,2$, we deduce that
\begin{equation*}
    \norm{(\lambda^1_t(\omega_0,\cdot))_{t \in [0,T]} - (\lambda^2_t(\omega_0,\cdot))_{t \in [0,T]}}^2_{L^2} = 0
\end{equation*}
for every $\omega_0 \in \Omega^0 \setminus N$.
Therefore, by taking the integral with respect to $\prob^0$, we obtain
\begin{equation*}
\begin{aligned}
    0 & = \E^{\prob^0} \quadre{ \norm{(\lambda^1_t(\omega_0,\cdot))_{t \in [0,T]} - (\lambda^2_t(\omega_0,\cdot))_{t \in [0,T]}}^2_{L^2} } \\
    & = \E^{\prob^0} \quadre{ \E^{\prob^*} \quadre{ \int_0^T \vert \lambda^1_s(\omega_0,\omega_*) - \lambda^2_s(\omega_0,\omega_*) \vert^2 ds  } } = \E\quadre{ \int_0^T \vert \lambda^1_s(\omega_0,\omega_*) - \lambda^2_s(\omega_0,\omega_*) \vert^2 ds  }
\end{aligned}
\end{equation*}
by Fubini's theorem.
This is enough to conclude that $\lambda^1=\lambda^2$ $Leb_{[0,T]}\otimes\prob$-a.s.

\medskip
As for point \ref{esempi:unicita_strategia_associata:unicita_raccomandazione}, by the same line of reasoning, if $\lambda=\gamma$ $Leb_{[0,T]}\otimes\prob$-a.s., the the sections $(\lambda_t(\omega_0,\cdot))_{t \in [0,T]}$ and $(\gamma_t(\omega_0,\cdot))_{t \in [0,T]}$ are $Leb_{[0,T]}\otimes\prob^*$-almost everywhere equal, which implies that
\begin{equation*}
\begin{aligned}
    \norm{\Lambda(\omega_0)-\Gamma(\omega_0)}^2_{L^2} & = \norm{(\lambda_t(\omega_0,\cdot))_{t \in [0,T]} - (\gamma_t(\omega_0,\cdot))_{t \in [0,T]}}^2_{L^2} \\
    & = \E^{\prob^*}\quadre{\int_0^T \vert \lambda_t(\omega_0,\omega_*) - \gamma_t(\omega_0,\omega_*) \vert^2 dt } = 0
\end{aligned}
\end{equation*}
$\prob^0$-a.s., so that $\Lambda=\Gamma$ $\prob^0$-a.s..
\end{proof}