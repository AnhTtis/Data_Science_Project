\section{Future directions and challenges}
\label{sec:future}
\revise{In this section, we propose several future directions from the perspectives of ride-hailing supply (i.e., ride offers) and demand (i.e., ride requests) and emerging ML techniques in Secs.~\ref{sec:future-supplyanddemand} and \ref{sec:future-ml}, respectively.
\revise{The topics we present below appear well-motivated but are largely overlooked in existing ML-based ride-hailing planning literature.}
Fig.~\ref{fig:future} provides an outline of the proposed future directions.}


\begin{figure*}[h]
	\centering
	\includegraphics[width=0.9\linewidth]{figs/future_4.pdf}
    \caption{\revise{The future directions of ride-hailing planning.}}
	\label{fig:future}
\end{figure*}


\subsection{\revise{Topics Regarding Supply and Demand}}
\label{sec:future-supplyanddemand}
\revise{In this part, we first propose to study the problem of ride-hailing planning with heterogeneous supply and demand.
Then, we discuss malicious behaviors and unfairness issues in ride-hailing planning.}

\subsubsection{\revise{Heterogeneous Supply and Demand}}
\emph{Heterogenous} supply and demand exist in ride-hailing planning. 
\revise{With emerging self-driving technologies, leveraging driverless vehicles in ride-hailing planning is a promising direction \cite{mao2020dispatch, mo2022modeling, fan2022joint}.}
In this regard, vehicles can be categorized into driverless or driver-based.
\revise{Driverless vehicles are more flexible in planning than driver-based ones since there is no restriction on working hours and regional concerns, and no issue with driversâ€™ preferences %for the former ones
\cite{zhang2022autonomous}.} %when planning for the driverless vehicles. 
\revise{Heterogeneity is even more conspicuous in ride-hailing platforms such as DiDi, Uber, and Lyft as they provide ride services to not only the passengers but also food and parcel deliveries.}
\revise{Different types of deliverables have different requirements regarding %for example 
the tolerable waiting time and detour distance.}
For instance, in contrast to the ordered takeout food, users tend to be more tolerant about the delivery time of receipt of parcels.

\revise{A possible line of research is ride-hailing planning with heterogeneous supply and demand.}
An example is to take advantage of passengers' availability in ride-hailing planning to achieve better performance as compared to the traditional \emph{homogeneous} one.
\revise{For instance,
consider the situation where a passenger is willing to act as the delivery agent for parcels (or even food items) that are heading the same direction or share the same destination as the passenger. As an incentive the passenger is properly compensated for. It might sound somewhat far-fetched, but passengers acting as courier agent has for decades been a common practice in air travel.}
\revise{Such heterogeneity in supply and demand, despite its potential benefits as can be imagined,
introduces additional challenges in %tackling the problem of
ride-hailing planning.}
Specifically, more constraints on riders are added to the problem.
\revise{In the example above, we need to ensure that the rider would pick up and drop off the food items or parcels at prescribed locations quickly enough to satisfy all the deadlines or time tolerance.}
\revise{Obviously, the decision making process w.r.t.~matching would become more complex than the case of homogeneous ride-hailing.}
\revise{Repositioning is also more complicated since it is necessary to consider multiple distributions of various types of vehicles across different regions when trying to balance the supply and demand.}

\subsubsection{\revise{Malicious Behaviors of Drivers and Riders}}
\revise{Malicious behaviors of drivers and riders have been observed in ride-hailing systems.}
\revise{To incentivize more drivers to enrol in ride-hailing systems, platforms offer monetary rewards %(in addition to the regular fee received in trips)
to drivers when they manage to obtain certain achievements, e.g.,
number of riders served reaching a respectable level.
To secure such an award, rogue drivers may abuse the mechanism by generating fake passenger accounts, ride requests, etc.}%with nearby origins by %for example,
\revise{Existing planning algorithms that are oblivious of such behaviors
would match the fake ride requests like normal ones, and thus reduce the number of vehicles that are available to the real requests.}
\revise{Malicious riders can also cancel their ride requests deliberately while the assigned drivers are on the way to their origins.}
Fink \cite{cnn2014uber} reveals that employees from one of the leading ride-hailing companies made more than 5,000 ride requests on their rival platform but canceled them at last in one month.
The planning algorithms can be deceived by these riders and allocate vehicle resources to meet their phony ride requests.
\revise{Such malicious behaviors impact the availability of drivers, and reduce the utility of drivers, platforms, and other honest riders.
They can lead to poor performance of existing methods as reviewed in Sec.~\ref{sec:review} in terms of total number of served requests and riders' waiting time, etc.}
\revise{To study the problem of ride-hailing planning in the presence of malicious behaviours of drivers and riders could be an important future direction.}

It is challenging to design such robust planning algorithms.
\revise{With no sign of misbehaviour,
malicious entities interact with ride-hailing platforms and make requests for rides. 
They may then subdue the planning strategies, e.g., the RL-based matching and repositioning policies through attacks such as blackbox adversarial attacks \cite{zhao2020blackbox}.
Therefore, possible malicious behaviors must be adequately dealt with in an ML-based planning strategy.
It complicates the design space of effective ride-hailing planning decisions.}


\subsubsection{\revise{Fairness Among Drivers and Riders}}
\revise{Fairness is about the equality of treatment.
There are evidences indicating that profit-oriented policies of ride-hailing platforms can lead to discrepancies in the incomes of drivers of different genders and/or different races \cite{cook2018gender, tjaden2018ride, wang2020disruptive}.}
As for the riders, platforms' planning decisions do not always coincide with the desirability of every rider \cite{wolfson2017fairness}. 
\revise{That is, some riders might be offered purposely a better treatment than the others, e.g., less waiting time or less detour distance.}
Efforts have been made in using non ML-based ride-hailing planning strategies to counter unfairness for drivers \cite{lesmana2019balancing, xu2020trade, nanda2020balancing} or riders \cite{wolfson2017fairness, suhr2019two, raman2021data}.
However, existing ML-based ride-hailing planning methods (as reviewed in Sec.~\ref{sec:review}) have largely overlooked the fairness issues.
ML is effective and allows us to make decisions intelligently by training models using real-world data. 
Unfairness therefore inevitably arises as the real-world data have recorded and encoded unfairness happening in the real world. 
\revise{Such blemishes in the data are also learnt in the model training process \cite{barocas2017fairness}, thus causing the inequality of treatments in subsequent ride-hailing planning.}

\revise{The main challenge of designing ML-based ride-hailing planning strategies while ensuring fairness on the part of the drivers and riders is that the system utility, e.g., the profit of platforms, could run into conflict with the fairness metrics \cite{xu2020trade}, e.g., the per unit time profit of different drivers.}
Specifically, when the system utility is improved, fairness may worsen, and vice versa.
\revise{It is important and challenging to find a strategy with a trade-off between the utility and fairness that is as \emph{tight} as possible, meaning that the achieved utility (resp.~fairness) cannot be improved without making the fairness (resp.~utility) worse, i.e., the state of Pareto optimum.}
\revise{Further, when fairness among both riders and drivers is considered, many constraints need to be addressed, e.g., equal waiting times among riders and equal profits among different drivers.}
\revise{Clearly,
achieving a satisfactory system utility that upholds fairness is more challenging than the traditional ride-hailing problem.}

\subsection{\revise{Topics Regarding Emerging ML Techniques}}
\label{sec:future-ml}
\revise{Next, we shed light on some emerging ML techniques that can potentially improve the performance of ride-hailing planning, including ML augmented online computations and graph neural networks.}

\subsubsection{\revise{ML-Augmented Online Computation}}

\revise{As mentioned in Sec.~\ref{sec:background}, as ensuing supplies and demands are uncertain in general, the ride-hailing planning decisions need to be made in an online manner.
Online algorithms is a well-known paradigm for tackling this kind of online decision-making problems with performance guarantees.}
Some existing works have proposed online ride-hailing planning schemes, e.g., \cite{dickerson2018allocation, zhao2019preference, xu2020trade, nanda2020balancing, xu2020unified, lowalekar2020competitive}.
These works assume no knowledge about the future during the online process.
However, in the real world, some parts of such knowledge, e.g., the future distribution of ride requests, can be estimated via advanced ML techniques.
Thus, the assumption of zero knowledge made in the above works is too pessimistic in practice \cite{lykouris2018competitive}.
\revise{A fast-growing trend in addressing this issue is to augment online algorithms with ML predictions in order to achieve better performance, even in practical systems, while guaranteeing the worst-case performance %is still guaranteed
\cite{lykouris2018competitive, purohit2018improving, anand2020customizing, NEURIPS2020_e834cb11, rohatgi2020near, mitzenmacher2020algorithms}. }


The challenges of applying such techniques are mainly twofold.
First, we need to decide what predictions to rely on.
Different predictions lead to different online decision-making processes and outcomes.
Existing ML-augmented online algorithms use problem-specific predictions. 
\revise{For example, online ski-rental uses the predicted weather conditions to assist the decision making process which decides whether to rent or buy the ski so as to minimize the cost \cite{purohit2018improving}.}
\revise{Such problem settings and the corresponding algorithmic analysis are much more than a simple extension of the original ride-hailing planning problem.}
Second, predictions can easily be inaccurate, which complicates the design for a planning scheme that requires performance guarantee.
A desirable online planning algorithm should be one that is unaware of and make no assumptions on the prediction accuracy.
Specifically, the performance of the algorithm is expected to be close to the best offline oracle for our problem when the predictions are accurate.
When the predictions are completely inaccurate, its performance should be close to that of the best online planning algorithm without predictions.

\subsubsection{\revise{Graph Neural Networks}}
Existing works of ML-based ride-hailing planning usually use coarse-grained abstractions of geographical locations, i.e., grid-based formulation, to model road networks \cite{ke2019optimizing, li2019efficient, lin2018efficient, zhou2019multi}.
However, grid-level planning is not practical \cite{verma2017augmenting}.
\revise{For example, when a driver is assigned to a certain grid according to the decision made by an algorithm, the driver has no idea as to which specific location inside the grid s/he should head towards.}
This is particularly problematic when a grid corresponds to a large region in the real world.
Instead, we can use graph models for ride-hailing planning  \cite{guo2020spatiotemporal, kim2020optimizing}.
%For example, the
\revise{Road networks can be modeled as graphs.
In a road graph, nodes are geographical locations, and edges are travel paths.}
Additional information, such as the number of riders and drivers, and the travel costs on paths, can be used as representations of the nodes and edges.
Such graphs are represented in a non-Euclidean space which is difficult for knowledge extraction using traditional ML techniques.
In response, graph neural networks (GNNs), the deep learning models that are capable of tackling graph-related tasks, were proposed \cite{wu2020comprehensive}.
We propose to use GNN to solve the ride-hailing planning problem in an end-to-end manner.  
\revise{Specifically, we can model road networks via graphs, design a GNN-based model to extract features from the graphs, and then map them to planning decisions.}
\revise{There are existing works that have employed GNNs in the transportation area, e.g., to calculate traffic predictions \cite{li2018diffusion, yu2018spatio} and demand predictions \cite{yao2018deep, kim2020idle}.
\revise{Only a limited number of works however have used GNN in ride-hailing planning, e.g., \cite{kim2020optimizing, li2022decentralized}.}
\revise{The algorithm in \cite{kim2020optimizing} can only match drivers and riders that are located on the same road segment, which restricts many other drivers and riders from being matched, and thus could lead to poor performance of their proposed method in terms of measures such as the total waiting times of riders.
As for the approach proposed in \cite{li2022decentralized}, it models the drivers and riders as nodes in a graph and but overlooks the road conditions, e.g., critical road intersections, popular pick-up locations, and drop-off locations, which may lead to planning decisions that are too coarse.}
}
\revise{To achieve better performance, we need to design new GNN-based models for ride-hailing planning that can address the issue more effectively.}

It is challenging to use GNNs in ride-hailing planning.
\revise{First, we need to identify how to model real-world information, e.g., the pickup and drop-off points, the number of riders and drivers, and the travel costs, as nodes and edges and to encode in them sufficient knowledge that can be learned by the GNN-based model to guide the planning process accordingly.}
The core of a GNN-based model is the \emph{information diffusion scheme} which aggregates and extracts knowledge from nodes and edges.
In ride-hailing, the temporal and spatial relations among different nodes and edges, e.g., the travel costs among various locations in different time periods, are critical to the planning decisions.
\revise{To improve the capability of a GNN-based model in learning such relations, an elaborately designed information diffusion scheme is desired.}

    


