\section{Discussion and Future Work}\label{sec:discussion}
Generalizable manipulation through contact requires that robots be able to incorporate and account for uncertainties during planning. However, designing the robust controller for achieving such manipulation remains an open problem and remains largely unexplored.  
This paper presents \textit{frictional stability}-aware optimization, a strategy that exploits friction for robust planning of pivoting manipulation. By considering a variety sources of uncertainty such as mass, CoM location, \revise{finger contact location,} and friction coefficients, we discussed the stability margin for pivoting manipulation with slipping contact. We presented CIBO, which solves novel bilevel optimization for pivoting manipulation while optimizing the worst-case stability margin of pivoting manipulation for (non-convex) objects. The proposed method was evaluated in simulation using several test settings. We showed that our proposed bilevel optimization method is able to design trajectories which are robust to larger uncertainties compared to a baseline trajectory optimization method. The proposed method was also demonstrated on a physical robotic system by implementing the computed trajectories on a large variety of objects of different geometries and physical properties. \revise{Furthermore, we also designed an MPC controller using the proposed algorithm which can successfully tracking and regulate the pose of objects during manipulation providing additional robustness during execution.}

Although this paper focuses on pivoting manipulation as a demonstration of our framework, our work can be generalized to other manipulation primitives such as pivoting with one-point contact, pushing, and grasping. This is because our stability margin analysis and CIBO are derived from \revise{quasi-static equilibrium}
\eq{force_eq} and the corresponding friction cone constraints \eq{general_FC}. These conditions are very common across most manipulation problems, and thus our framework can be applicable to the aforementioned manipulation primitives as long as they satisfy \eq{force_eq} and \eq{general_FC}.


There are a number of limitations in this work:

\textbf{Contact-Rich CIBO}
This work assumes that dynamics of an object with quasi-static equilibrium. For objects with non-convex geometry, CIBO is still able to design robust open-loop controller using mode-based optimization. CIBO using mode-based optimization is able to find feasible solutions if users can provide CIBO with physically feasible mode sequences. However, for objects with a very complex shape, it is quite challenging to identify mode sequences prior to optimization~\cite{zhang2023simultaneous}. As a result, CIBO might not be able to find feasible solutions. In order to avoid providing mode sequences, CIBO needs to consider mode sequences by itself. This can be realized by considering complementarity constraints or integer constraints inside the lower-level optimization problem of CIBO. However, as we explained in Sec~\ref{subsec:mode_based_optimization}, CIBO considering these non-convex constraints inside the lower-level optimization problem is not guaranteed to find globally optimal safety margins. 

% Another important limitation regarding the complexity of dynamics is that CIBO is conditioned with states at $t = 0$ (i.e., $x_0$), which is true for other trajectory optimization frameworks. During the implementation of CIBO, we observed that it is not trivial to find "good" $x_0$ and the behavior of CIBO dramatically changes as  $x_0$ changes. For example, for a certain $x_0$, CIBO is able to find a solution while for another $x_0$, CIBO is not able to find a solution. Finding a good $x_0$ is not trivial at all and it requires domain knowledge. Thus, ideally, we should formulate CIBO where $x_0$ is also a decision variable so that the solver can optimize the trajectory over $x_0$ as well. 

\revise{
\textbf{Geometric Uncertainty}
Although we consider a variety of uncertainties, we do not explicitly consider the uncertainty in the geometry of an object. Because geometric uncertainty is one of the main uncertainties due to imperfect vision sensing and can change the contact mode such as from making to breaking contact, considering geometric uncertainty is important. This paper discusses the uncertainty in the finger contact location, which indirectly considers geometric uncertainty. This is because the relative pose between the object and the robot changes due to the finger contact location uncertainty. Since geometric uncertainty also changes the relative pose, we believe considering the uncertainty in robot finger contact location is one way to get started working on geometric uncertainty. 
}

\textbf{Dynamic Manipulation with Uncertainty Propagation}
In this work, we make quasi-static assumption during manipulation. The natural extension of this work is to relax this assumption and consider quasi-dynamic model during manipulation.
To work on these cases, we need to explicitly consider dynamic version of the stability margin. However, this is not trivial. We need to understand how we can propagate uncertainty for contact dynamics as it is not well understood. The stability margin needs to incorporate this uncertainty propagation for such cases. See \cite{shirai2023covariance} for more discussion on uncertainty propagation for contact-rich dynamical systems.
% However, this requires the modification of the model

\textbf{Accurate Contact Mechanics} One of the contributions of this paper is that we consider patch contact. However, in reality, the robot should be able to switch contact mode from patch contact to point contact and vice versa. This enables CIBO to have a larger stability margin but, again, makes the lower-level optimization of CIBO non-convex. 

Another limitation here is modeling of compliant contact. We observed that introducing compliant contact improves the stability of the object. However, modeling compliant contact is difficult. One approach to model compliant contact can be learning-based approach. One of the assumptions of this work is that we consider pivoting in 2D. Thus, extending our work in 3D is promising, which requires the discussion of generalized friction cones \cite{doi:10.1177/027836499401300306}.  

\textbf{Closed Loop Tactile Control} We also implemented the proposed CIBO in a closed-loop fashion with real-time feedback from a vision system.  
\revise{However, once uncertainty of the system is \textit{too} large (e.g., the mass of the object used in CIBO and the actual mass of the object is so different), we observed slipping between the robot end-effector and the object. It is difficult to observe slip using vision sensors alone. 
% However, for most of practical applications we want closed-loop control of manipulation using sensory feedback. 
% Without a closed-loop controller, even the robust trajectories need to be initialized precisely and the system can not recover from a failure. 
In the future, we would like to design a closed-loop controller using tactile sensing to obtain the slip information between the robot and the object for precise closed-loop control~\cite{shirai2023tactile, https://doi.org/10.48550/arxiv.2303.03385}.}


% \textbf{Analysis of Numerical Stability}
% Our CIBO is formulated as one large-scale NLP with complementarity constraints through the KKT condition. During the implementation, we observed that CIBO is sensitive to our choice of optimization parameters such as initial guesses of decision variables and the weighting matrix of the cost function. Therefore, it is interesting if we can introduce CIBO with much less sensitivity to parameters. 

% During the hardware experiments, we observed that patch contact provides additional robustness during manipulation. In the future, we would analyze pivoting with patch contact.
% We would also like to consider other uncertainties such as coefficient of friction, kinematics uncertainty, etc, but these uncertainties require the discussion in e.g., \cite{drnach2021robust, yuki2021chance}. %We would also like to use the proposed technique in a feedback fashion using tactile sensors e.g., \cite{donlon2018gelslim}.  %that the frictional stability would increase with active feedback control 

% In the future we will try to understand the following questions:

% \textbf{Frictional Stability of Patch Contact}: During the hardware experiments, we observed that patch contact provides additional robustness to the manipulation. We would presume that modeling patch contacts in our proposed framework would expand frictional stability margin. We need to use other friction cone formulation such as generalized friction cone \cite{doi:10.1177/027836499401300306} to discuss the effect of patch contact in frictional stability.

% \textbf{General Frictional Stability}: This work assumes that uncertainty arises from either mass or CoM location. Ideally, we should consider other uncertainty such as coefficient of friction, kinematics uncertainty, etc, but these uncertainties lead to stochastic complementarity system, which require the discussion in e.g., \cite{drnach2021robust, yuki2021chance}.

% \textbf{Feedback Control using Frictional Stability}: The proposed method was implemented in an open-loop fashion. We would argue that the frictional stability would increase with active feedback control using tactile sensors e.g., \cite{donlon2018gelslim}.