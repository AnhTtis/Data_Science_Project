\caption{}
\label{alg:propagar}

\begin{algorithmic}[1]

\Function{\texttt{$\mathtt{try\_merge\_orbits}$}}{$\gamma$, \texttt{orbits}}

	\For{$k\in\mathtt{spec}$}

		\For{$\bar{a}\in(Dom(\gamma))^{(k)}$}

			\If{$\mathtt{orbit}(\bar{a})\neq\mathtt{orbit}(\gamma(\bar{a}))$}

				\State{$(\mathtt{B},\mathtt{RT},\mathtt{T},\mathtt{U})=\mathtt{orbit}(\bar{a})$}

				\State{$(\mathtt{B'},\mathtt{RT'},\mathtt{T'},\mathtt{U'})=\mathtt{orbit}(\gamma(\bar{a}))$}

				\If{$\mathtt{RT}\neq\mathtt{RT'}$}

					\State{\Return $\false$}\Comment{RelTypes differ}

				\EndIf

				\State{$\mathtt{B\_merge}=\mathtt{B}\cup\mathtt{B'}$}\Comment{blocks
are merged}

				\State{$\mathtt{RT\_merge}=\mathtt{RT}$}

				\If{$\mathtt{T}\neq\unk$}\Comment{first block was tagged}

					\State{$\mathtt{T\_merge}=\mathtt{T}$}

					\State{$\mathtt{U\_merge}=\mathtt{U}$}

				\ElsIf{$\mathtt{T'}\neq\unk$}\Comment{second block was tagged}

					\State{$\mathtt{T\_merge}=\mathtt{T'}$}

					\State{$\mathtt{U\_merge}=\mathtt{U'}$}

				\Else\Comment{no block is tagged}

					\State{$\mathtt{T\_merge}=\unk$}

					\State{$\mathtt{U\_merge}=\unk$}

				\EndIf

				\State{delete $(\mathtt{B},\mathtt{RT},\mathtt{T},\mathtt{U})$
and $(\mathtt{B'},\mathtt{RT'},\mathtt{T'},\mathtt{U'})$ from $\mathtt{orbits}_{k}$}

				\State{add $(\mathtt{B\_merge},\mathtt{RT\_merge},\mathtt{T\_merge},\mathtt{U\_merge})$
to $\mathtt{orbits}_{k}]$}

			\EndIf

		\EndFor

	\EndFor

\State{\Return$\true$}

\EndFunction

\end{algorithmic}