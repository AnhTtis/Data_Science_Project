\section{Experimental Results}
\label{sec:exp_results}


The DevelSet framework is developed with the popular deep learning framework \texttt{PyTorch} and CUDA platform.
All the tests are performed on Linux system with 2.2GHz CPU and a single Nvidia Titan Xp GPU.
The lithography engine is from ICCAD 2013 CAD Contest~\cite{OPC-ICCAD2013-Banerjee},
which also provides the ten industrial M1 designs on 32$nm$ design node as evaluation dataset.
The scripts for shot count evaluation are obtained from the authors of Neural-ILT~\cite{NEURAL-ILT-ICCAD2020-Jiang} to guarantee comparable results.
The training set of DevelSet-Net is obtained from the author of GAN-OPC~\cite{OPC-TCAD2020-Yang}.
We pick $\sigma_{z} = 50$, $N_h = 24$, $\alpha = 1$, $\beta = 7.5$, $\lambda = 0.9$, $\varepsilon = 0.03$, and $\eta = 0.85$ for DevelSet optimization.


\subsection{Comparison with State-of-the-art.}
\subsubsection{Mask Printability and Complexity}

\begin{table}[tb!]
  \setlength{\tabcolsep}{.1pt}
  % \renewcommand{\arraystretch}{.1}
  \begin{tabular}{lcccc}
      \small
    & \texttt{case1} & \texttt{case3} & \texttt{case5} &  \texttt{case9} \\
    (a) PGAN~\cite{OPC-TCAD2020-Yang}         & \includegraphics[width=.21\linewidth,valign=m]{ganopc_c1} & \includegraphics[width=.21\linewidth,valign=m]{ganopc_c3} & \includegraphics[width=.21\linewidth,valign=m]{ganopc_c5} & \includegraphics[width=.21\linewidth,valign=m]{ganopc_c9} \\
    (b) GLS~\cite{OPC-TR2020-Yu}              & \includegraphics[width=.21\linewidth,valign=m]{date_c1}   & \includegraphics[width=.21\linewidth,valign=m]{date_c3}   & \includegraphics[width=.21\linewidth,valign=m]{date_c5}   & \includegraphics[width=.21\linewidth,valign=m]{date_c9}   \\
    (c) NILT~\cite{NEURAL-ILT-ICCAD2020-Jiang}& \includegraphics[width=.21\linewidth,valign=m]{nilt_c1}   & \includegraphics[width=.21\linewidth,valign=m]{nilt_c3}   & \includegraphics[width=.21\linewidth,valign=m]{nilt_c5}   & \includegraphics[width=.21\linewidth,valign=m]{nilt_c9} \\
    (d) DSO                                   & \includegraphics[width=.21\linewidth,valign=m]{dso_c1}    & \includegraphics[width=.21\linewidth,valign=m]{dso_c3}    & \includegraphics[width=.21\linewidth,valign=m]{dso_c5}    & \includegraphics[width=.21\linewidth,valign=m]{dso_c9}   \\
    (e) DevelSet                              & \includegraphics[width=.21\linewidth,valign=m]{devel_c1}  & \includegraphics[width=.21\linewidth,valign=m]{devel_c3}  & \includegraphics[width=.21\linewidth,valign=m]{devel_c5}  & \includegraphics[width=.21\linewidth,valign=m]{devel_c9} \\
  \end{tabular}
  \captionof{figure}{Mask visualizations of: (a) PGAN-OPC~\cite{OPC-TCAD2020-Yang},
  (b) GLS-ILT~\cite{OPC-TR2020-Yu}, (c) Neural-ILT~\cite{NEURAL-ILT-ICCAD2020-Jiang},
  (d) DSO, and (e) DevelSet framework (DSN + DSO).}
  \label{fig:vis_masks}
\end{table}


We compare the performance of the proposed DevelSet with other SOTA mask optimization methods,
and the detailed values are listed in \Cref{tab:develset_results}.
Compared with the conventional ILT, the $L_2$ and PVB are reduced by $14.6\%$ and $4.6\%$ respectively.
Compared with the conventional level set mask optimization GLS-ILT, the $L_2$ and PVB could reduce by $0.6\%$ and $2.8\%$.
Our framework also displays superiority when compared with PGAN-OPC and Neural-ILT, which are two high-performance machine learning-based mask optimization frameworks.
The performance of $L_2$ could achieve $4.0\%$ and $0.3\%$ improvements and PVB could obtain $2.6\%$ and $9.6\%$ improvements, respectively.
As shown in \Cref{fig:vis_masks}, these results prove the high quality of DevelSet generated masks.

Among the above-mentioned methods, the shot numbers of DevelSet reduced by $85.8\%$, $38.4\%$ and $1.0\%$ compared with ILT, GLS-OPC and PGAN-OPC.
For Neural-ILT which also considers mask complexity, DevelSet generated masks contain $20.2\%$ more shots.
As depicted in \Cref{fig:vis_masks}, although the masks of DSO and DevelSet contain fewer stains, more shots are needed to keep the boundaries smooth.
And the quality and simplicity of masks are a trade-off, we are more concerned about the mask printability, this performance is acceptable.

\input{doc/tat_table.tex}


\subsubsection{Runtime Comparison}
To prove the efficiency of our DevelSet mask optimization framework quantitively, we evaluate the turn around time (TAT) of different methods, as is shown in \Cref{tab:develset_tat_results}.
Compared with above-mentioned four methods, DevelSet could achieve significant speedup from $10\times$ to $710\times$.
With DSN as pre-processing, DevelSet can achieve $2.64\times$ speedup compared with DSO only,
this strongly proves the runtime performance improvement brought by DSN.
% In DSO method we abandon the DSN and apply CUDA acceleration only,
% the complete DevelSet adopting DSN as pre-processing could achieve $2.64\times$ speedup compared with it,





\subsection{Ablation Study.}
We conduct a set of ablation studies to evaluate the influence of each module in DevelSet.
As shown in \Cref{tab:abla_study}, we list the results of DSO with curvature term and without curvature term,
and the influence of modulation branch for end-to-end joint optimization of DevelSet (the DSN+DSO column).
The $L_2$, PVB, \#shots represent the square $L_2$ error, the area of PVBand, and the number of shots respectively.
We use the score to evaluate mask printability and mask complexity comprehensively, where the score is calculated as
the sum of the $L_2$, PVB, and $10 \times$\#shots.
The result is better if the score is smaller.

\input{doc/abla_table.tex}

\ifshowfig
\begin{table}
  % \renewcommand{\arraystretch}{2}
  \centering
  \setlength{\tabcolsep}{2pt}
  \begin{tabular}{c|c|c|c|c|c|c|c}
    % \hline
    \toprule
    w/o.~curv. & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo0}   & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo1} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo2} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo3} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_wo0} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_wo1} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_wo2} \\ \midrule
    w.~curv.  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w0}    & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w1}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w2}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w3}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_w0}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_w1}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_w2}   \\ \bottomrule
  \end{tabular}
  \captionof{figure}{Visualizations for ablation study of the curvature term.}
  \label{fig:vis_curv}
\end{table}
\fi


\subsubsection{The Effectiveness of Curvature Term}
We analyze the influence of the curvature term on mask complexity and printability.
As the data listed in the DSO column in \Cref{tab:abla_study},
The DSO gets 805 \#shots without curvature term but reduces to 726 when with the guidance of the curvature.
In \Cref{fig:vis_curv}, we compare several parts of different masks to illustrate the influence of the curvature term.
As shown in figures, the curvature term makes the mask boundaries more smooth and eliminates the isolated stains and edge glitches.
Although the $L_2$ and PVB all become somewhat worse, which confirms our assumption that the curvature will harm mask printability a bit,
the total score drops indicating the loss caused by the curvature term is acceptable.
% This approves the necessity of the modulation branch.


\subsubsection{The Necessity of DSN and Modulation Branch}
Comparing the column DSO and the DSN+DSO in \Cref{tab:abla_study},
we find that the DSN boosts the overall performance of DevelSet by the end-to-end joint optimization.
The DSN provides better initial LSF which help the DSO overcome the local minima and obtain better masks.
The \#shots number also drops because the upsample functions of the neural network make the mask generated by DSN more regular.

% 8 pics
% \begin{table}
%   % \renewcommand{\arraystretch}{2}
%   \setlength{\tabcolsep}{1pt}
%   \begin{tabular}{|c|c|c|c|c|c|c|c|c|}
%     \hline
%     w. curv.  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w0}    & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w1}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w2}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_w3}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_w0}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_w1}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_w2}  & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_w3} \\ \hline
%     wo. curv. & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo0}   & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo1} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo2} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case1_wo3} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_wo0} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_wo1} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_wo2} & \includegraphics[width=.1\linewidth,valign=m]{curv_abla/case3_wo3} \\ \hline
%   \end{tabular}
% \end{table}
Further, we apply the modulation branch with curvature term to improve the overall score,
the result in DSN+DSO with mod. column reveals that the modulation branch improves mask printability and reduces complexity.
With the modulation branch, we have maximized the benefits of the curvature term while minimizing its adverse impacts.

