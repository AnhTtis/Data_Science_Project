\newcommand{\from}[3]{\textbf{FROM} #1 \textbf{TO} #2: #3}
%Complexity classes
\def\FP{\text{\rm FP}}
\def\spanL{\text{\rm SpanL}}
\def\spanLL{\text{\rm SpanLL}}
\def\sharpP{\text{\rm \#P}}
\def\sharpL{\text{\rm \#L}}
\def\NL{\text{\rm NL}}
\def\PTIME{\text{\rm PTIME}}
\def\PH{\text{\rm PH}}
\def\NP{\text{\rm NP}}
\def\LOGSPACE{\text{\rm L}}
\def\NSPACE{\rm NSPACE}
\def\NTIME{\rm NTIME}
\def\co{\rm co\text{-}}
\def\PSPACE{\rm PSPACE}
\def\EXPTIME{\rm EXPTIME}
\def\NEXP{\rm NEXPTIME}
\def\TWOEXPTIME{\rm 2EXPTIME}
\def\AEXSPACE{\rm AEXSPACE}
\def\ACZ{\rm AC_0}
\def\hard{\rm \text{-}hard}
\def\complete{\text{-{\rm complete}}}
\def\assign{ \text{:--} }
%\def\assign{\leftarrow}

\newcommand\sem[1]{{[\![ #1 ]\!]}}
\newcommand{\db}[1]{\mathsf{db}(#1)}
\newcommand{\depth}[1]{\mathsf{depth}(#1)}
\newcommand{\scount}[1]{\mathsf{scount}(#1)}
\newcommand{\mintdepth}[3]{\mathsf{min\!-\!tree\!-\!depth}(#1,#2,#3)}
\newcommand{\mingdepth}[3]{\mathsf{min\!-\!dag\!-\!depth}(#1,#2,#3)}
\newcommand{\mintrees}[3]{\mathsf{min\!-\!trees}(#1,#2,#3)}
\newcommand{\hmintrees}[3]{\mathsf{hmin\!-\!trees}(#1,#2,#3)}
\newcommand{\mindags}[3]{\mathsf{min\!-\!dags}(#1,#2,#3)}
\newcommand{\hmindags}[3]{\mathsf{hmin\!-\!dags}(#1,#2,#3)}
\newcommand{\tuptrees}[3]{\mathsf{trees}(#1,#2,#3)}
\newcommand{\tupdags}[3]{\mathsf{dags}(#1,#2,#3)}
\newcommand{\rank}[2]{\mathsf{rank}_{#2}(#1)}
\newcommand{\sdepth}[1]{\star\text{-}\mathsf{depth}(#1)}
\newcommand{\mh}[1]{\mathsf{mh}(#1)}
\newcommand{\ma}[1]{\mathsf{ma}(#1)}
\newcommand{\md}[1]{\mathsf{md}(#1)}
\newcommand{\smd}[1]{\star\text{-}\mathsf{md}(#1)}
\newcommand{\omd}[1]{\obl\text{-}\mathsf{md}(#1)}
%graph structures
\newcommand{\gforest}[1]{\mathsf{gforest}(#1)}
\newcommand{\gtree}[1]{\mathsf{gtree}(#1)}
\newcommand{\slinpath}[1]{simple linear $#1$-path}
\newcommand{\linpath}[1]{linear $#1$-path}
\newcommand{\guardedpath}[1]{guarded $#1$-path}
\newcommand{\stickypath}[1]{sticky $#1$-path}
\newcommand{\R}{\mathcal{R}}
\newcommand{\Lang}{\mathcal{L}}
\newcommand{\mi}[1]{\mathit{#1}}
\newcommand{\ins}[1]{\mathbf{#1}}
\newcommand{\adom}[1]{\mathsf{dom}(#1)}
%\renewcommand{\paragraph}[1]{\textbf{#1}}
\newcommand{\ra}{\rightarrow}
\newcommand{\fr}[1]{\mathsf{fr}(#1)}
\newcommand{\dep}{\Sigma}
\newcommand{\sch}[1]{\mathsf{sch}(#1)}
\newcommand{\esch}[1]{\mathsf{edb}(#1)}
\newcommand{\isch}[1]{\mathsf{idb}(#1)}
\newcommand{\sign}{\ins{S}}
\newcommand{\body}[1]{\mathsf{body}(#1)}
\newcommand{\head}[1]{\mathsf{head}(#1)}
\newcommand{\guard}[1]{\mathsf{guard}(#1)}
\newcommand{\class}[1]{\mathsf{#1}}
\newcommand{\pos}[1]{\mathsf{pos}(#1)}
\newcommand{\spos}[1]{\mathsf{spos}(#1)}
%\newcommand{\app}[2]{\xrightarrow{#1,#2}}
\newcommand{\app}[2]{\langle #1,#2 \rangle}
\newcommand{\tup}[1]{\langle #1 \rangle}
\newcommand{\crel}[1]{\prec_{#1}}
\newcommand{\tcrel}[1]{\prec_{#1}^{\star}}
\newcommand{\rctaa}{\class{CT}_{\forall \forall}^{\mathsf{res}}}
\newcommand{\rctaapr}{\mathsf{CT}_{\forall \forall}^{\mathsf{res}}}
\newcommand{\rctae}{\class{CT}_{\forall \exists}^{\mathsf{res}}}
\newcommand{\rctaepr}{\mathsf{CT}_{\forall \exists}^{\mathsf{res}}}
\newcommand{\base}[1]{\mathsf{base}(#1)}
\newcommand{\eqt}[1]{\mathsf{eqtype}(#1)}
\newcommand{\var}[1]{\mathsf{var}(#1)}
\newcommand{\vr}[1]{\langle #1 \rangle}
\newcommand{\const}[1]{\mathsf{const}(#1)}
\newcommand{\result}[2]{\mathsf{result}(#1,#2)}
\newcommand{\soresult}[2]{\sobl\text{-}\mathsf{result}(#1,#2)}
\newcommand{\oresult}[2]{\obl\text{-}\mathsf{result}(#1,#2)}
\newcommand{\sresult}[2]{\star\text{-}\mathsf{result}(#1,#2)}

\newcommand{\lsign}[1]{\mathsf{b}(#1)}
\newcommand{\lvar}[1]{\mathsf{v}(#1)}

\newcommand{\reach}[1]{\rightsquigarrow_{#1}}
%\newcommand{\terms}[1]{\mathsf{terms}(#1)}
\newcommand{\obl}{\mathsf{o}}
\newcommand{\sobl}{\mathsf{so}}
\newcommand{\std}{\mathsf{std}}
\newcommand{\cta}[1]{\class{CT}_{\forall \forall}^{#1}}
\newcommand{\cte}[1]{\class{CT}_{\forall \exists}^{#1}}

\newcommand{\ctda}[2]{\class{CT}_{\forall,#2}^{#1}}
\newcommand{\ctde}[2]{\class{CT}_{\exists,#2}^{#1}}

\newcommand{\ct}[1]{\class{CT}_{\forall}^{#1}}
\newcommand{\ctd}[2]{\class{CT}^{#1}_{#2}}
\newcommand{\ctapr}[1]{\mathsf{CT}_{\forall \forall}^{#1}}
\newcommand{\ctepr}[1]{\mathsf{CT}_{\forall \exists}^{#1}}
\newcommand{\ctdapr}[1]{\mathsf{CT}_{\forall}^{#1}}
\newcommand{\ctdepr}[1]{\mathsf{CT}_{\exists}^{#1}}
\newcommand{\ctpr}[1]{\mathsf{CT}_{\forall}^{#1}}
\newcommand{\ctdpr}[1]{\mathsf{CT}^{#1}}
\newcommand{\cri}[1]{\mathsf{cr}(#1)}
\newcommand{\lin}[1]{\mathsf{Lin_{\class{S}}}(#1)}
\newcommand{\ling}[1]{\mathsf{lin}(#1)}
\newcommand{\shape}[1]{\mathsf{shape}(#1)}
\newcommand{\svar}[1]{\mathsf{svar}(#1)}
\newcommand{\constfree}[1]{\mathsf{c\text{-}free}(#1)}
\newcommand{\id}[2]{\mathsf{id}_{#1}(#2)}
\newcommand{\unique}[1]{\mathsf{unique}(#1)}
\newcommand{\simple}[1]{\mathsf{simple}(#1)}
\newcommand{\gsimple}[1]{\mathsf{gsimple}(#1)}
\def\sub{\sqsubseteq}
\def\substrict{\sqsubset}

\newcommand{\support}[1]{\mathsf{support}(#1)}
%\newcommand{\C}[1]{\mathsf{C}(#1)}
\newcommand{\norm}[1]{\mathsf{Norm}(#1)}
\newcommand{\depg}[1]{\mathsf{dg}(#1)}
\newcommand{\edepg}[1]{\mathsf{edg}(#1)}
\newcommand{\sodg}[1]{\mathsf{so\text{-}dg}(#1)}
\newcommand{\odg}[1]{\mathsf{o\text{-}dg}(#1)}
\newcommand{\ex}[1]{\mathsf{exvar}(#1)}
\newcommand{\mgu}[2]{\mathsf{mgu}(#1,#2)}
\newcommand{\res}[1]{\mathsf{res}(#1)}
\newcommand{\f}[2]{f_{#1}(#2)}
\newcommand{\arity}[1]{\mathsf{ar}(#1)}
\newcommand{\atoms}[1]{\mathsf{atoms}(#1)}
\newcommand{\lfacts}[1]{\mathsf{LFacts}(#1)}
\newcommand{\why}[3]{\mathsf{why}(#1,#2,#3)}
\newcommand{\nrwhy}[3]{\mathsf{why}_{\mathsf{NR}}(#1,#2,#3)}
\newcommand{\mdwhy}[3]{\mathsf{why}_{\mathsf{MD}}(#1,#2,#3)}
\newcommand{\mtd}[3]{\mathsf{min\text{-}tree\text{-}depth}(#1,#2,#3)}
\newcommand{\mgd}[3]{\mathsf{min\text{-}dag\text{-}depth}(#1,#2,#3)}
\newcommand{\unwhy}[3]{\mathsf{why}_{\mathsf{UN}}(#1,#2,#3)}

\newcommand{\birth}[2]{\mathsf{birth}_{#1}(#2)}
\newcommand{\OMIT}[1]{}
\newcommand{\crt}[1]{\texttt{cr}(#1)}
\newcommand{\precd}[1]{\prec_{#1}}
\newcommand{\lvl}[2]{\texttt{lv}_{#1}(#2)}
\newcommand{\posvar}[2]{\mathsf{pos}(#1,#2)}
\newcommand{\posterm}[2]{\mathsf{pos}(#1,#2)}
\newcommand{\varpos}[2]{\mathsf{var}(#1,#2)}
\newcommand{\termpos}[2]{\mathsf{term}(#1,#2)}
\newcommand{\CT}[2]{\mathsf{CT}^{#1}_{#2}}
\newcommand{\frpos}[1]{\mathsf{frpos}(#1)}
\newcommand{\dom}{\mathbf{C}}
\newcommand{\freshdom}{\mathbf{N}}
\newcommand{\frontier}[1]{\mathsf{fr}(#1)}
\newcommand{\eqtype}[1]{\mathsf{eqtype}(#1)}
\def\iso{\simeq}
\newcommand{\can}[1]{\mathsf{can}(#1)}
\newcommand{\proj}[2]{\Pi_{#1}(#2)}
\newcommand{\pred}[1]{\mathit{pred}(#1)}
\newcommand{\predt}[1]{[#1]}
\newcommand{\atom}[1]{\underline{#1}}
\newcommand{\tuple}[1]{\bar{#1}}
\newcommand{\resolv}[1]{[#1]}
\newcommand{\parent}[1]{\mathit{par}(#1)}
\newcommand{\dept}[1]{\mathit{depth}(#1)}
\newcommand{\chase}[2]{\mathsf{chase}(#1,#2)}
\newcommand{\chasesize}[2]{\mathsf{chsize}(#1,#2)}
\newcommand{\starchasei}[3]{\star\text{-}\mathsf{chase}^{#3}(#1,#2)}
\newcommand{\starchase}[2]{\star\text{-}\mathsf{chase}(#1,#2)}
\newcommand{\sochasei}[3]{\sobl\text{-}\mathsf{chase}^{#3}(#1,#2)}
\newcommand{\sochase}[2]{\sobl\text{-}\mathsf{chase}(#1,#2)}
\newcommand{\ochasei}[3]{\obl\text{-}\mathsf{chase}^{#3}(#1,#2)}
\newcommand{\ochase}[2]{\obl\text{-}\mathsf{chase}(#1,#2)}
\newcommand{\completion}[2]{\mathsf{complete}(#1,#2)}
\newcommand{\mar}[1]{\hat{#1}}
\newcommand{\nullobl}[3]{\bot^{#1}_{#2,#3}}
\newcommand{\nullsobl}[3]{\bot^{#1}_{#2,#3_{|\frontier{#2}}}}
\newcommand{\startype}[1]{\star\textrm{-}\mathsf{type}(#1)}
\newcommand{\type}[2]{\mathsf{type}_{#1}(#2)}
\newcommand{\types}[2]{#1\textrm{-}\mathsf{types}(#2)}
\newcommand{\src}[1]{\mathsf{src}(#1)}
\newcommand{\IDTGD}{\class{ID}}
\newcommand{\DLLITETGD}{\mathsf{DL\textrm{-}Lite^{TGD}}}
\newcommand{\SLTGD}{\class{SL}}
\newcommand{\LDAT}{\class{LDat}}
\newcommand{\NRDAT}{\class{NRDat}}
\newcommand{\GDAT}{\class{G}}
\newcommand{\WGTGD}{\class{WG}}
\newcommand{\RATGD}{\class{RA}}
\newcommand{\LARATGD}{\class{LARA}}
\newcommand{\LCRATGD}{\class{LCRA}}
\newcommand{\LCWATGD}{\class{LCWA}}
\newcommand{\WATGD}{\class{WA}}
\newcommand{\DAT}{\class{Dat}}
\newcommand{\UCQ}{\class{UCQ}}
\newcommand{\SLRATGD}{\class{SLRA}}
\newcommand{\SLWATGD}{\class{SLWA}}
\newcommand{\LRATGDP}{\class{LRA}^{+}}
\newcommand{\LWATGDP}{\class{LWA}^{+}}
\newcommand{\oblrew}[1]{\mathsf{enrichment}(#1)}

\def\eqtree{\approx}
\newcommand{\downof}[2]{#1_{\downarrow#2}}
\newcommand{\gri}[2]{\mathsf{gri}(#1,#2)}
\newcommand{\downc}[3]{\mathsf{down}(#1,#2,#3)}
\newcommand{\quot}[1]{#1_{/\eqtree}}
\newcommand{\leaves}[1]{\mathsf{leaves}(#1)}
\newcommand{\dgt}[1]{\mathsf{dag}(#1)}
\newcommand{\cq}[1]{\mathsf{cq}(#1)}
\newcommand{\cqs}[2]{\mathsf{cq}(#1,#2)}
\newcommand{\cqsu}[2]{\mathsf{cq}(#1,#2)}
\newcommand{\cqseq}[2]{\mathsf{cq}^{=}(#1,#2)}
\newcommand{\cqeq}[1]{\mathsf{cq}^{\approx}(#1)}
\newcommand{\cqeqs}[1]{\mathsf{cqs}^{=}(#1)}
\newcommand{\fo}[1]{\Psi_{#1}}
\newcommand{\fod}[1]{\Xi_{#1}}
\newcommand{\cnf}[3]{\phi_{#1,#2,#3}}
\newcommand{\trees}[1]{\mathsf{TR}(#1)}
\newcommand{\treesf}{\mathsf{TR}}
\newcommand{\utrees}[1]{\mathsf{UTR}(#1)}
\newcommand{\utreesf}{\mathsf{UTR}}
\newcommand{\spec}[1]{\mathsf{sp}(#1)}

\newcommand{\usupportp}[1]{\mathsf{USUPPORT}[#1]}
\newcommand{\nrsupportp}[1]{\mathsf{NRSUPPORT}[#1]}
\newcommand{\asupportp}[1]{\mathsf{SUPPORT}[#1]}
\newcommand{\mdsupportp}[1]{\mathsf{MDSUPPORT}[#1]}
\newcommand{\hmdsupportp}[1]{\mathsf{HMDSUPPORT}[#1]}
\def\usupportpname{\mathsf{USUPPORT}}
\def\nrsupportpname{\mathsf{NRSUPPORT}}
\def\asupportpname{\mathsf{SUPPORT}}
\def\mdsupportpname{\mathsf{MDSUPPORT}}
\def\hmdsupportpname{\mathsf{HMDSUPPORT}}

\newcommand{\qap}[1]{\mathsf{QA}[#1]}
\newcommand{\termeq}{\equiv}
\newcommand{\skolem}[3]{\bot_{#1,#2}^{#3}}
%%%%%%%%%%%%%%%%%%%%%%%%% Environment delimiters

\def\qed{\hfill{\qedboxempty}      % qed with empty box
  \ifdim\lastskip<\medskipamount \removelastskip\penalty55\medskip\fi}

\def\qedboxempty{\vbox{\hrule\hbox{\vrule\kern3pt
                 \vbox{\kern3pt\kern3pt}\kern3pt\vrule}\hrule}}

\def\qedfull{\hfill{\qedboxfull}   % qed with full box
  \ifdim\lastskip<\medskipamount \removelastskip\penalty55\medskip\fi}

\def\qedboxfull{\vrule height 4pt width 4pt depth 0pt}

\newcommand{\markfull}{\qedboxfull}
\newcommand{\markempty}{\qed} 

\newtheorem{manualtheoreminner}{Theorem}
\newenvironment{manualtheorem}[1]{%
  \renewcommand\themanualtheoreminner{#1}%
  \manualtheoreminner
}{\endmanualtheoreminner}

\newtheorem{manualpropositioninner}{Proposition}
\newenvironment{manualproposition}[1]{%
  \renewcommand\themanualpropositioninner{#1}%
  \manualpropositioninner
}{\endmanualpropositioninner}

\newtheorem{manuallemmainner}{Lemma}
\newenvironment{manuallemma}[1]{%
  \renewcommand\themanuallemmainner{#1}%
  \manuallemmainner
}{\endmanuallemmainner}