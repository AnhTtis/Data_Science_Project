% \RSTODO{riscrivi \S3 e \S4 di
% conseguenza, spiegando prima l'intuiizione e poi l'esempio.}
In this section, we present a theoretical analysis of the impact of different
CNF-izations on the enumeration of short partial truth assignments. In
particular, we focus on
\TseitinCNF~\cite{tseitinComplexityDerivationPropositional1983} and
\PlaistedCNF~\cite{plaistedStructurepreservingClauseForm1986}. %\ignoreinlong{the AllSAT task}\ignoreinshort{%}. 
% \ignoreinshort{ %
% }
We point out how CNF-izing AllSAT problems using these transformations can
introduce unexpected drawbacks for enumeration. In fact, we show that the
resulting encodings can force the enumerator to produce partial assignments
that are larger in size and in number than necessary. % when they are used to preprocess non-CNF formulas. 
%
In our analysis we refer to AllSAT, but it applies to All\smt{} as well by
restricting to theory-satisfiable truth assignments.\@ Moreover, the analysis
applies to both disjoint and non-disjoint enumeration.

\subsection{The impact of Tseitin CNF transformation}%
\label{sec:problem:label}

We show that using the \TseitinCNF{}
transformation~\cite{tseitinComplexityDerivationPropositional1983} can be
problematic for enumeration. %preprocessing the input formula
%
In particular, we point out a fundamental weakness of \TseitinCNF{}:
%
%\ADDED{
%\GMSIDENOTE{RSTODO: Change ``suffices to satisfy''?}
\begin{fact}%
    \label{fact:tseitin}
    If a partial assignment \muA{} satisfies $\vi$, this does not imply that \muA{} satisfies $\exists
        \allB.\vicnfts$.
\end{fact}
\noindent
In fact, we recall that \TseitinCNF{} works by applying recursively the rewriting step (\sref{sec:bg:cnf}):
\begin{eqnarray}
    \label{eq:rewritingTseitin}
    \vi\Longrightarrow\vi[\vi_i|B_i] \wedge (B_i\iff\vi_i)
\end{eqnarray}
\noindent and then by recursively CNF-izing the two conjuncts.
%
A {\em partial} assignment \muA{} may satisfy a non-CNF formula $\vi(\allA)$
because it does not need to assign a truth value to the atoms in {\em all}
sub-formulas of $\vi$. (E.g., \muA{} can satisfy $\vi\defas\vi_1\vee\vi_2$
without assigning values to the atoms in $\vi_2$ if it satisfies $\vi_1$.)
%
Consider \eqref{eq:rewritingTseitin} s.t.\ $\vi_i$ is some sub-formula of \vi{}
whose atoms are not assigned by \muA{}. Although \muA{} satisfies $\vi$, \muA{}
does not satisfy $\exists B_i.( \vi[\vi_i|B_i]\wedge (B_i\iff\vi_i))$. In fact,
to satisfy the second conjunct it is necessary to assign some truth value not
only to $B_i$ but also to some of the unassigned atoms in $\vi_i$, so that to
make $\vi_i$ evaluate to the same truth value assigned to $B_i$.

%   \noindent
% %    In general, \cref{fact:tseitin} can be explained as follows.
%     In fact, a
%     {\em partial} assignment \muA{} may suffice to satisfy a non-CNF formula 
%     $\vi(\allA)$  because it does not need to assign a truth value to the
%     atoms in \emph{all}
%     subformulas of $\vi$. (E.g., \muA{} can satisfy
%     $\vi\defas\vi_1\vee\vi_2$ without assigning values to the atoms in
%     $\vi_2$ if it satisfies $\vi_1$.)
%     %
%     Consider some subformula  $\vi_i$ of \vi{} whose atoms are not assigned by \muA{}.
%     %
%     We recall that \TseitinCNF{} works by applying recursively the rewriting step (\sref{sec:bg:cnf}):
%     %\GMSIDENOTE{In \sref{sec:bg:cnf} abbiamo usato \DeMorganCNF($B_i\iff\vi_i$)}
%     \begin{eqnarray}
%     \label{eq:rewritingTseitin}
%     \vi\Longrightarrow\vi[\vi_i|B_i] \wedge (B_i\iff\vi_i)
%     \end{eqnarray}
%     %\vi\Longrightarrow\vi[\vi_i|B_i] \wedge \DeMorganCNF(B_i\iff\vi_i)$$
%     %
%     %$$\TseitinCNF{(\vi)}=\TseitinCNF{(\vi[\vi|B_i])}\wedge\DeMorganCNF{(B_i\iff\vi_i)}$$.
%     \noindent and then by recursively CNF-izing the two conjuncts.
%     Unfortunately, although \muA{} suffices to satisfy $\vi$,
%     \muA{} does not
%     suffice to satisfy $\exists B_i.( \vi[\vi_i|B_i]\wedge
%     (B_i\iff\vi_i))$, because to satisfy the second conjunct it
%     is necessary to assign some truth value not only to $B_i$ but also
%     to some of the atoms in $\vi_i$, so
%     that to make $\vi_i$ evaluate to the same truth value given to $B_i$.

As a consequence of \cref{fact:tseitin}, given $\muA$ satisfying \vi{}, in
order to produce an assignment \muAprime{} satisfying $\exists \allB.\vicnfts$
the enumerator is most often forced to assign other atoms in \allA{}, so that
$\muAprime\supset\muA$. %(unnecessarily)
%
Given the fact that the amount of total assignments covered by a partial
assignment decreases exponentially with its length (see
\sref{sec:background:propositional-logic}), the above weakness causes a blow-up
in the number of partial assignments
%which we need generating
needed to cover all models. This may drastically affect the effectiveness and
efficiency of the enumeration.

This is illustrated in the following example, where instead of one single short
partial assignment the enumerator is forced to enumerate 9 longer ones.

%We first illustrate this issue with an example.
%\newpage
\begin{example}%
    \label{ex1}
    Consider the propositional formula  over %the set of atoms
    $\allA\defas\set{A_1, A_2, A_3, A_4, A_5, A_6, A_7}$:
    \begin{equation}
        \label{eq:ex1:vi}
        % \vi \defas 
        %     \overbrace{(\underbrace{(A_1 \wedge A_2)}_{B_1} \vee  A_3)}^{B_2} \iff
        %     \overbrace{ (\underbrace{(A_4 \wedge A_5 )}_{B_3} \vee  A_6) }^{B_4}
        % \overbrace{(A_1 \wedge A_2)}^{B_1} \vee  
        % \overbrace{(A_3 \iff \underbrace{((A_4\vee A_5) \wedge 
        % \overbrace{(A_6 \vee A_7)}^{B_2})}_{B_3})}^{B_4}
        \vi \defas
        \overbrace{(A_1\wedge A_2)}^{B_1}\vee
        \overbrace{(
            \overbrace{(
                \overbrace{(A_3\vee A_4)}^{B_2}\wedge
                \overbrace{(A_5\vee A_6)}^{B_3}
                )}^{B_4}\iff
            A_7
            )}^{B_5}.
    \end{equation}
    \noindent
    $\vi$ is not in CNF, and thus it must be CNF-ized before starting the enumeration process.
    If \TseitinCNF{} is used, then the following CNF formula is obtained:

    \begin{subequations}%
        \label{eq:ex1:vicnf}
        \begin{alignat}{2}
            % \vicnf \defas
            % &(\neg B_1\vee\pos A_1)\wedge(\neg B_1\vee\pos A_2)\wedge(\pos B_1\vee\neg A_1\vee\neg A_2)&\wedge\label{eq:ex1:vicnf:line1}\\
            % &(\pos B_2\vee\neg B_1)\wedge(\pos B_2\vee\neg A_3)\wedge(\neg B_2\vee\pos B_1\vee\pos A_3)&\wedge\label{eq:ex1:vicnf:line2}\\
            % &(\neg B_3\vee\pos A_4)\wedge(\neg B_3\vee\pos A_5)\wedge(\pos B_3\vee\neg A_4\vee\neg A_5)&\wedge\label{eq:ex1:vicnf:line3}\\
            % &(\pos B_2\vee\neg B_3)\wedge(\pos B_2\vee\neg A_6)\wedge(\neg B_2\vee\pos B_3\vee\pos A_6)&\wedge\label{eq:ex1:vicnf:line4}\\
            % &(\neg B_4 \vee\pos B_2)\wedge(\pos B_4\vee\neg B_2)&\label{eq:ex1:vicnf:line5}
            %-------------------------------
            % \psi\defas
            % &(\neg B_1\vee\pos A_1)\wedge(\neg B_1\vee\pos A_2)\wedge(\pos B_1\vee\neg A_1\vee\neg A_2)&\wedge\label{eq:ex1:vicnf:line1}\\
            % &(\pos B_2\vee\neg A_5)\wedge(\pos B_2\vee\neg A_6)\wedge(\neg B_2\vee\pos A_5\vee\pos A_6)&\wedge\label{eq:ex1:vicnf:line2}\\
            % &(\neg B_3\vee\pos A_4)\wedge(\neg B_3\vee\pos B_2)\wedge(\pos B_3\vee\neg A_4\vee\neg B_2)&\wedge\label{eq:ex1:vicnf:line3}\\
            % &(\neg B_4\vee\neg A_3\vee B_3)\wedge(\neg B_4\vee A_3\vee\neg B_3)\wedge
            % ( B_4\vee A_3\vee B_3)\wedge( B_4\vee\neg A_3\vee\neg B_3)
            % &\wedge\label{eq:ex1:vicnf:line4}\\
            % &(\pos B_1\vee\pos B_4)&
            % --------------------------------------
             & \vicnfts\defas\nonumber                                                                                                         \\
             & \enspace(\neg B_1\vee\pos A_1)\wedge(\neg B_1\vee\pos A_2)\wedge(\pos B_1\vee\neg A_1\vee\neg A_2) & \wedge
             & \quad\eqcomment{(B_1\iff (A_1\wedge A_2))}\label{eq:ex1:vicnf:line1}                                                            \\
             & \enspace(\pos B_2\vee\neg A_3)\wedge(\pos B_2\vee\neg A_4)\wedge(\neg B_2\vee\pos A_3\vee\pos A_4) & \wedge
             & \quad\eqcomment{(B_2\iff (A_3\vee A_4))}\label{eq:ex1:vicnf:line2}                                                              \\
             & \enspace(\pos B_3\vee\neg A_5)\wedge(\pos B_3\vee\neg A_6)\wedge(\neg B_3\vee\pos A_5\vee\pos A_6) & \wedge
             & \quad\eqcomment{(B_3\iff (A_5\vee A_6))}\label{eq:ex1:vicnf:line3}                                                              \\
             & \enspace(\neg B_4\vee\pos B_2)\wedge(\neg B_4\vee\pos B_3)\wedge(\pos B_4\vee\neg B_2\vee\neg B_3) & \wedge
             & \quad\eqcomment{(B_4\iff (B_2\wedge B_3))}\label{eq:ex1:vicnf:line4}                                                            \\
             & \enspace(\neg B_5\vee\pos B_4\vee\neg A_7)\wedge(\neg B_5\vee\neg B_4\vee\pos A_7)                 & \wedge
             & \quad\eqcomment{(B_5\iff (B_4\iff A_7))}\label{eq:ex1:vicnf:line5}                                                              \\
             & \enspace(\pos B_5\vee\pos B_4\vee\pos A_7)\wedge(\pos B_5\vee\neg B_4\vee\neg A_7)                 & \wedge\nonumber            %\tag{...}
            \\
             & \enspace(\pos B_1\vee\pos B_5)                                                                     & \label{eq:ex1:vicnf:line6}
        \end{alignat}
    \end{subequations}
    where the fresh atoms $\allB\defas\set{B_1, B_2, B_3, B_4, B_5}$ label
    sub-formulas as in~\eqref{eq:ex1:vi}.

    Consider the (minimal) partial truth assignment:
    \begin{equation}
        \label{eq:ex1:muA}
        \muA\defas\set{\neg A_3,\neg A_4,\neg A_7}.
    \end{equation}
    \muA{} satisfies $\vi$ \eqref{eq:ex1:vi}, {even though it does not assign a truth value to the sub-formulas $(A_1\wedge A_2)$ and $(A_5\vee A_6)$.} % since the atoms $A_1, A_2, A_5, A_6$ are not assigned.
        %
        %Unfortunately, 
        {Yet, }$\muA$ does not
    satisfy $\exists\allB.\vicnfts$.
    In fact,  {there is no total truth
            assignment $\etaB$ on \allB{} such that
            $\muA\cup\etaB\pmodels\vicnfts$},
    because~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line3}
    cannot be satisfied by assigning only variables in $\allB$;
    rather, it is necessary to further assign  at least one atom in
    $\set{A_1,A_2}$ to satisfy~\eqref{eq:ex1:vicnf:line1} and at least one
    in $\set{A_5,A_6}$ to satisfy~\eqref{eq:ex1:vicnf:line3}.
    %

    Suppose an enumerator assigns first the literals in \muA~\eqref{eq:ex1:muA},
    which force to assign also $\muB\defas\set{\neg B_2, \neg B_4, B_5}$ due
    to~\eqref{eq:ex1:vicnf:line2},~\eqref{eq:ex1:vicnf:line4},
    and~\eqref{eq:ex1:vicnf:line5} respectively. Since $\muA\cup\muB$ satisfies all
    clauses except those in~\eqref{eq:ex1:vicnf:line1}
    and~\eqref{eq:ex1:vicnf:line3}, then the enumerator needs extending
    $\muA\cup\muB$ by enumerating the partial assignments on the unassigned atoms
    \set{A_1,A_2,A_5,A_6,B_1,B_3} which satisfy~\eqref{eq:ex1:vicnf:line1}
    and~\eqref{eq:ex1:vicnf:line3}. Regardless of the search strategy adopted, this
    requires generating no less than $9$ satisfying partial assignments on
    $\set{A_1,A_2,A_5,A_6}$.~%
    %$\set{A_1,A_2,A_5,A_6,B_1,B_3}$.~%
    \footnote{
        The set of models for \eqref{eq:ex1:vicnf:line1}
        is
        \set{
            \set{\pos B_1,\pos A_1,\pos A_2},
            \set{\neg B_1,\pos A_1,\neg A_2},
            \set{\neg B_1,\neg A_1,\pos A_2},
            \set{\neg B_1,\neg A_1,\neg A_2}
        }, which can be covered only either by
        \set{
            \set{\pos B_1,\pos A_1,\pos A_2},
            \set{\neg B_1,\neg A_1},
            \set{\neg B_1,\pos A_1,\neg A_2}
        } or by
        \set{
            \set{\pos B_1,\pos A_1,\pos A_2},
            \set{\neg B_1,\neg A_2},
            \set{\neg B_1,\neg A_1,\pos A_2}
        }
        in the case of disjoint enumeration,
        and by
        \set{
            \set{\pos B_1,\pos A_1,\pos A_2},
            \set{\neg B_1,\neg A_1},
            \set{\neg B_1,\neg A_2}
        } in the case of non-disjoint enumeration.
        In all cases,   we need no less than 3 distinct partial assignments on
        \set{A_1,A_2}. Similar considerations hold for
        \eqref{eq:ex1:vicnf:line3}. Thus, we need no
        less than
        $3\times3=9$ partial assignments on $\set{A_1,A_2}\cup\set{A_5,A_6}$.
        %$3\times3=9$ partial assignments on $\set{B_1,A_1,A_2}\cup\set{B_3,A_5,A_6}$.
        %representing the $4\times4=16$ total ones.
        % \GMNOTE{
        % Bisogna coprire tutti i modelli totali projected su \set{A_1, A_2}
        % }
    }
    %
    For instance, in the case of disjoint AllSAT, instead of the single partial
    assignment $\muA$~\eqref{eq:ex1:muA}, the solver may return the following list
    of 9 partial assignments satisfying $\exists\allB.\vicnfts$ which extend
    \muA{}:%\ignoreinshort{%}
    \begin{equation}%
        \label{eq:ex1:muA:all}
        \begin{array}{llllllll}
            \multicolumn{2}{c}{\overbrace{\rule{1.5cm}{0pt}}^{B_1}} &           &           & \multicolumn{2}{c}{\overbrace{\rule{1.5cm}{0pt}}^{B_3}} &           &                        \\
            \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\neg B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\pos B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \neg A_5, & \pos A_6, & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\pos B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\pos A_1,                                             & \neg A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\neg B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\pos A_1,                                             & \neg A_2, & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\pos B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\pos A_1,                                             & \neg A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \pos A_6, & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\pos B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
            \quad\eqcomment{\set{\pos B_1,\neg B_2,\neg B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
            \quad\eqcomment{\set{\pos B_1,\neg B_2,\pos B_3,\neg B_4,\pos B_5}}                                                                                                            \\
            \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \pos A_6, & \neg A_7\}
            \quad\eqcomment{\set{\pos B_1,\neg B_2,\pos B_3,\neg B_4,\pos B_5}}                                                                                                            \\
        \end{array}
    \end{equation}
    In the case of non-disjoint AllSAT, the solver may enumerate a similar
    set of partial assignments, with \set{\neg A_2} instead of \set{A_1,\neg A_2} and \set{A_6}
    instead of  \set{\neg A_5,A_6}.\exdone{}
    % \begin{IGNORE}

    %     % In fact, three clauses of $\vicnfts$ in~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line3} are not satisfied by $\muA\cup\etaB$, since
    %     % $\residual{\vicnfts}{\muA\cup\etaB}=
    %     %     (\neg A_1\vee\neg A_2)\wedge(\neg A_5)\wedge(\neg A_6)$.
    %     % We remark that this is not a coincidence, since {there is no $\etaBprime$ such that $\muA\cup\etaBprime\pmodels\vicnfts$}, because~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line3} cannot be satisfied without assigning any atom in $\set{A_1,A_2}$ and $\set{A_5,A_6}$ respectively.

    % %

    % For instance, suppose we adopt the procedure producing disjoint
    % minimal models described in \sref{sec:background:allsat}, and assume
    % it assigns  first the literals in  \muA \eqref{eq:ex1:muA}.

    % % For instance, we consider the procedure in \sref{}  

    %     The solver proceeds to compute $\TA{\exists\allB.\vicnfts}$ by enumerating the assignments satisfying $\vicnfts$ projected over \allA{}.
    %     % As described in~\cref{sec:background}, the solver first enumerates a total truth assignment $\mu\defas\muA\cup\etaB$ such that $\mu\pmodels\vicnf$. Then, the minimization step finds a minimal $\muAprime\subseteq\muA$ s.t.\ $\muAprime\cup\etaB\pmodels\vicnf$.
    %     % Suppose the solver finds the total model
    %     % \begin{equation}
    %     %     \mu\defas\set{\underbrace{\neg B_1, B_2, B_3, B_4}_{\etaB}, \underbrace{\neg A_1,\neg A_2, A_3, A_4, A_5, \neg A_6}_{\muA}}
    %     % \end{equation}
    %     % and then the minimization step outputs
    %     % $\muAprime\defas\set{\neg A_1, A_3, A_4, A_5}$ s.t.\ $\muAprime\cup\etaB\pmodels\vicnf$. Notice that $\muAprime$ is minimal, even though it assigns a truth value also to $A_1$. Whereas the first two clauses in~\eqref{eq:ex1:vicnf:line1} are satisfied by $\neg B_1$, the last one must be satisfied by assigning either $\neg A_1$ or $\neg A_2$.
    %     Suppose, e.g., that the solver picks non-deterministic choices, deciding the atoms in the order
    %     % they appear in $\vicnf$ 
    %     $\set{B_1, A_1, A_2, B_2, A_3, A_4, B_3, A_5, A_6, B_4, B_5, A_7}$ and branching with negative value first. Then, the first (sorted) total truth assignment found is:
    %     \begin{equation}
    %         \label{eq:ex1:eta}
    %         \eta\defas\set{
    %             \underbrace{\neg B_1,\neg B_2,\neg B_3,\neg B_4, B_5}_{\etaB},
    %             \underbrace{\neg A_1,\neg A_2,\neg A_3,\neg A_4,\neg A_5,\neg A_6, \neg A_7}_{\etaA}
    %         }
    %     \end{equation}
    %     which contains $\muA$~\eqref{eq:ex1:muA}.
    %     The minimization procedure looks for a \emph{minimal} subset
    %     $\muAprime$ of $\etaA{}$ s.t.\
    %     $\muAprime\cup\etaB{}\pmodels\vicnfts$.
    %     One possible output of this procedure is the minimal assignment:
    %     \begin{equation}%
    %         \label{eq:ex1:muAprime}
    %         \muAprime\defas\set{\neg A_1,\neg A_3,\neg A_4,\neg A_5,\neg A_6,\neg A_7}.
    %     \end{equation}
    %     %Notice that $\muAprime$ is minimal for $\vicnf$, meaning that any subset $\muAsecond\subset\muAprime$ is s.t.\ $\muAsecond\cup\etaB\not\pmodels\vicnf$. %We remark that this is not a coincidence there does not exist any $\etaBprime$ s.t.\ $\muAprime\cup\etaBprime\pmodels\vicnf$.
    %     %$\residual{\vicnf}{\muAprime\cup\etaB}\neq\top$. 
    % \ignore{    We notice that the partial truth assignment
    %     $\muA$~\eqref{eq:ex1:muA} satisfies $\vi$ and it is s.t.\
    %     $\muA\subset\muAprime$, but it {\em does not satisfy $\exists\allB.\vicnfts$}.
    %     In fact, three clauses of $\vicnfts$ in~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line3} are not satisfied by $\muA\cup\etaB$, since
    %     $\residual{\vicnfts}{\muA\cup\etaB}=
    %         (\neg A_1\vee\neg A_2)\wedge(\neg A_5)\wedge(\neg A_6)$.
    %     We remark that this is not a coincidence, since {there is no $\etaBprime$ such that $\muA\cup\etaBprime\pmodels\vicnfts$}, because~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line3} cannot be satisfied without assigning any atom in $\set{A_1,A_2}$ and $\set{A_5,A_6}$ respectively.
    % }
    %     Finding $\muAprime$~\eqref{eq:ex1:muAprime} instead of $\muA$~\eqref{eq:ex1:muA} clearly causes an %\ignoreinlong{efficiency}\ignoreinshort{
    %     effectiveness
    %     %} 
    %     problem, since finding longer partial truth assignments implies that the total number of enumerated truth assignments could be up to exponentially larger.
    %     For instance, %\ignoreinshort{
    %     in the case of disjoint AllSAT, %}
    %     instead of the single partial assignment $\muA$~\eqref{eq:ex1:muA}, the solver may return the following list of 9 partial assignments satisfying $\exists\allB.\vicnfts$:
    %     \begin{equation}%
    %         \label{eq:ex1:muA:all}
    %         \begin{array}{llllllll}
    %             \multicolumn{2}{c}{\overbrace{\rule{1.5cm}{0pt}}^{B_1}} &           &           & \multicolumn{2}{c}{\overbrace{\rule{1.5cm}{0pt}}^{B_3}} &           &                        \\
    %             \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\neg B_3}}                                                                                                                                       \\
    %             \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \neg A_5, & \pos A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \neg A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\neg B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \neg A_2, & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \neg A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \pos A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\pos B_1,\neg B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
    %             \quad\eqcomment{\set{\pos B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \pos A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\pos B_1,\pos B_3}}                                                                                                                                       \\
    %         \end{array}
    %     \end{equation}
    %     where $\muAprime$~\eqref{eq:ex1:muAprime} is the first in the list.
    %     % \ignoreinshort{
    %     In the case of non-disjoint AllSAT, instead, a possible output is the following:
    %     \begin{equation}%
    %         \label{eq:ex1:muA:all:rep}
    %         \begin{array}{llllllll}
    %             \multicolumn{2}{c}{\overbrace{\rule{1.5cm}{0pt}}^{B_1}} &           &           & \multicolumn{2}{c}{\overbrace{\rule{1.5cm}{0pt}}^{B_3}} &           &                        \\
    %             \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\neg B_3}}                                                                                                                                       \\
    %             \{                                                      & \neg A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\neg B_3}}                                                                                                                                       \\
    %             \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\neg A_1,                                             &           & \neg A_3, & \neg A_4,                                               &           & \pos A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{                                                      & \neg A_2, & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{                                                      & \neg A_2, & \neg A_3, & \neg A_4,                                               &           & \pos A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\neg B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\pos B_1,\neg B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
    %             \quad\eqcomment{\set{\pos B_1,\pos B_3}}                                                                                                                                       \\
    %             \{\pos A_1,                                             & \pos A_2, & \neg A_3, & \neg A_4,                                               &           & \pos A_6, & \neg A_7\}
    %             \quad\eqcomment{\set{\pos B_1,\pos B_3}}                                                                                                                                       \\
    %         \end{array}
    %     \end{equation}
    %     where $\muAprime$~\eqref{eq:ex1:muAprime} is the first in the list. Notice that in this case the assignments may be shorter and not pairwise disjoint.
    %     % }
    %     \exdone{}
    %     % Consider the partial truth assignment $\mu$ and its projection over $\allA$ as follows:
    %     % \begin{equation}
    %     %     \label{eq:ex1:mu}
    %     %     \mu\defas\set{A_3, A_4, A_5, \neg B_1, B_2, B_3, B_4}, \qquad
    %     %     \muA\defas\set{A_3, A_4, A_5}
    %     % \end{equation}
    %     % Whereas $\muA$ evaluates $\vi$ to true, $\mu$ does not evaluate to true $\vicnf$.
    %     % In fact, $\residual{\vicnf}{\mu}=(\neg A_1\vee\neg A_2)$.
    %     % Thus, in order to evaluate $\vicnf$ to true, $\mu$ must also assign either $\neg A_1$ or $\neg A_2$.
    %     %     % Suppose, for instance, that the solver finds $\mu$ and its projection over $\allA$ as follows
    %     %     % \begin{equation}
    %     %     %     \mu'\defas\set{\neg A_1, A_3, A_4, A_5, \neg B_1, B_2, B_3, B_4}, \qquad
    %     %     % \muAprime\defas\set{\neg A_1, A_3, A_4, A_5}
    %     %     % \end{equation}
    %     %     % and then adds the blocking clauses $(A_1\vee A_3, )$
    %     %     % Suppose such an assignment exists. Then, $\mu'$ must assign $B_2$, $B_3$ and $B_4$ to true because of the clauses in~\eqref{eq:ex1:vicnf:line2,,eq:ex1:vicnf:line3,,eq:ex1:vicnf:line4},
    %     %     % which represent the label definitions $(B_2\iff(B_1\vee A_3))$, $(B_3\iff(A_4\wedge B_2))$ and $(B_4\iff(A_3\iff B_3))$ respectively. 
    %     %     % Such an assignment does not yet evaluate to true the clauses in~\eqref{eq:ex1:vicnf:line1}, which represents the label definitions $(B_1\iff(A_1\wedge A_2))$.
    %     %     % In order to do so, $\mu'$ must also assign a truth value to $B_1$. However, if it assigns $B_1$ to true, then both $A_1$ and $A_2$ must be assigned to true. 
    %     %     % Similarly, if it assigns $B_1$ to false, then either $A_1$ or $A_2$ must be assigned to false.
    %     %     % Thus, $\mu'$ must assign a truth value also to some other atoms in \allA{} to evaluate $\vicnf$ to true, which contradicts the hypothesis.\exdone{}
    % \end{IGNORE}
\end{example}

%\ADDED{The example above shows an intrinsic problem of \TseitinCNF{} when used for enumeration.}
% \begin{IGNORE}    
%     In general, \cref{fact:tseitin} can be explained as follows. A
%     partial assignment \muA{} may suffice to satisfy a non-CNF formula 
%     $\vi(\allA)$  because it does not need to assign a truth value to the
%     atoms in \emph{all}
%     subformulas of $\vi$.
%     (In~\cref{ex1}, $\muA\defas\set{\neg A_3, \neg A_4, \neg A_7}$
%     satisfies \vi{} \eqref{eq:ex1:vi} without assigning a truth value to
%     the atoms in
%     the subformulas $\vi_1\defas(A_1\wedge A_2)$ and 
%     $\vi_3\defas(A_5\vee A_6)$.)
%     Let $\vi_i$ be one such subformula.
%     %
%     We recall that \TseitinCNF{} works by applying recursively the rewriting step (\sref{sec:bg:cnf}):
%     %\GMSIDENOTE{In \sref{sec:bg:cnf} abbiamo usato \DeMorganCNF($B_i\iff\vi_i$)}
%     \begin{eqnarray}
%     \label{eq:rewritingTseitin}
%     \vi\Longrightarrow\vi[\vi_i|B_i] \wedge (B_i\iff\vi_i)
%     \end{eqnarray}
%     %\vi\Longrightarrow\vi[\vi_i|B_i] \wedge \DeMorganCNF(B_i\iff\vi_i)$$
%     %
%     %$$\TseitinCNF{(\vi)}=\TseitinCNF{(\vi[\vi|B_i])}\wedge\DeMorganCNF{(B_i\iff\vi_i)}$$.
%     \noindent and then by recursively CNF-izing the two conjuncts.
%     Unfortunately, although \muA{} suffices to satisfy $\vi$,
%     \muA{} does not
%     suffice to satisfy $\exists B_i.( \vi[\vi_i|B_i]\wedge
%     (B_i\iff\vi_i))$, because to satisfy the second conjunct it
%     must assign a value also to some unassigned \allA{}-atoms in $\vi_i$,
%     no matter the value of $B_i$.
%     (In~\cref{ex1}, \eqref{eq:ex1:vicnf:line1} forces assigning also some
%     atom in \set{A_1,A_2} and \eqref{eq:ex1:vicnf:line3}  forces assigning also some
%     atom in \set{A_5,A_6}.)
% \end{IGNORE}
%   \RSTODO{RISCRITTO FIN QUi}

% \begin{IGNORE}
% %In fact, consider 
% \ADDED{Consider} a generic non-CNF formula $\vi(\allA)$ and a %minimal
% partial truth assignment $\muA$ that satisfies $\vi$, and
% let $\vi_i$ be some sub-formula of \vi{} which is not assigned a truth
% value by $\muA$
% % suppose $\muA$ does not assign
% % a truth value to some sub-formula $\vi_i$
% ---for
% instance, because $\vi_i$ occurs into some positive sub-formula $\vi_i\vee\vi_j$ and $\muA$ satisfies $\vi_j$. (In~\cref{ex1}, $\muA\defas\set{\neg A_3, \neg A_4, \neg A_7}$, $\vi_i\defas(A_1\wedge A_2)$ %and $\vi_j\defas(((A_3\vee A_4)\wedge(A_5\vee A_6))\iff A_7)$
% or $\vi_i\defas(A_5\vee A_6)$ respectively.)
% Then
% \TseitinCNF{}
% conjoins to the main formula the definition $(B_i\iff \vi_i)$, so that
% every
% % satisfying 
% partial truth assignment $\muAprime$
% \ADDED{satisfying $\exists \allB.\vicnfts$}
% is forced to
% assign a truth value to $\vi_i$ and thus to some of its atoms,
% which may not occur in $\muA$, so that $\muAprime\supset\muA$.
% %\end{rschange}
% %
% (In the example, the clauses
% in~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line3} force
% $\muAprime$ to assign a truth value also to $(A_1\wedge A_2)$ and
% $(A_5\vee A_6)$ respectively.)

% %
% Thus, by using \TseitinCNF{}, instead of enumerating one
% minimal partial truth assignment $\muA$ for \vi, the solver may {be forced to} enumerate
% many partial truth assignments $\muAprime$ that are minimal for
% ${\exists \allB.}\TseitinCNF(\vi)$ but %\ignoreinshort{
% they are %}
% not %\ignoreinshort{
% minimal %}
% for
% $\vi$, so that their number can be up to exponentially larger in the
% number of unassigned atoms in \muA.
% In fact, each such truth assignment \muAprime{} conjoins to \muA{} one of the (up to $2^{|\allA|-|\muA|}$) partial
% assignments which are needed to evaluate  to either $\top$ or $\bot$ all unassigned $\vi_i$'s.
% (E.g., in~\eqref{eq:ex1:muA:all} %\ignoreinshort{\ 
% and~\eqref{eq:ex1:muA:all:rep}, %}, 
% the solver enumerates nine
% $\muAprime$s by conjoining $\muA$~\eqref{eq:ex1:muA} with an
% exhaustive enumeration of partial assignments to $A_1,A_2,A_5,A_6$
% that  evaluate $(A_1\wedge A_2)$ and $(A_5\vee A_6)$ to either $\top$ or $\bot$.)
% This may drastically affect the effectiveness of the enumeration.

% \ignore{%%
%     The example above shows an intrinsic problem of \TseitinCNF{} when used for enumeration.\@ Consider a generic non-CNF formula $\vi(\allA)$ and a minimal
%     partial truth assignment $\muA$ that satisfies $\vi$ without
%     assigning a truth value to some sub-formula $\vi_i$ ---for
%     instance, because $\vi_i$ occurs into some positive sub-formula $\vi_i\vee\vi_j$ and $\muA$ satisfies $\vi_j$. (In~\cref{ex1}, $\muA\defas\set{\neg A_3, \neg A_4, \neg A_7}$, $\vi_i\defas(A_1\wedge A_2)$ %and $\vi_j\defas(((A_3\vee A_4)\wedge(A_5\vee A_6))\iff A_7)$
%     or $\vi_i\defas(A_5\vee A_6)$ respectively.)
%     \em Then, there is no guarantee that $\muA$ suffices to
%     satisfy $\exists \allB.\vicnfts$, i.e., that there exists some $\etaB$
%     such that $\muA\cup\etaB$ satisfies $\vicnfts$. In fact,
%     \TseitinCNF{}
%     conjoins to the main formula the definition $(B_i\iff \vi_i)$, so that every satisfying partial truth assignment $\muAprime$ is forced to assign a truth value to $\vi_i$ and to some of its atoms as well. (In the example, the clauses
%     in~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line3} force
%     $\muAprime$ to assign a truth value also to $(A_1\wedge A_2)$ and $(A_5\vee A_6)$ respectively).
%     As a consequence, by using \TseitinCNF{}, the solver may enumerate
%     partial truth assignments that, although minimal for $\exists \allB.\TseitinCNF(\vi)$, are not minimal for $\vi$ so that their number can be up to exponentially bigger in the number of unassigned atoms, thus affecting the effectiveness of the enumeration.
% }

% \end{IGNORE}

\subsection{The impact of Plaisted and Greenbaum CNF transformation}%
\label{sec:problem:polarity}

We point out that also the \PlaistedCNF{}
transformation~\cite{plaistedStructurepreservingClauseForm1986} suffers for the
same weakness as \TseitinCNF{} ---that is, \cref{fact:tseitin} holds also for
\PlaistedCNF{}--- although its effects are mitigated.

%   \noindent
In fact, we recall that \PlaistedCNF{} works by applying recursively the
rewriting step (\sref{sec:bg:cnf}):
\begin{eqnarray}
    \label{eq:rewritingPlaisted}
    \vi\Longrightarrow\vi[\vi_i|B_i] \wedge \left \{
    \begin{array}{lll}
        (B_i\imp\vi_i)  & \mbox{if $\vi_i$ occurs only positively in $\vi$}                \\
        (B_i\limp\vi_i) & \mbox{if $\vi_i$ occurs only negatively in $\vi$}                \\
        (B_i\iff\vi_i)  & \mbox{if $\vi_i$ occurs both positively and negatively in $\vi$} \\
    \end{array}\right \},
\end{eqnarray}
\noindent and then by recursively CNF-izing the two conjuncts.
%
As with \TseitinCNF{}, consider~\eqref{eq:rewritingPlaisted} s.t.\ $\vi_i$ is
some sub-formula of \vi{} whose atoms are not assigned by \muA{}.

If $\vi_i$ occurs both positively and negatively in $\vi$,
then~\eqref{eq:rewritingPlaisted} reduces to~\eqref{eq:rewritingTseitin} and
\PlaistedCNF{} behaves like \TseitinCNF{}, so that \muA{} does not satisfy
$\exists B_i.( \vi[\vi_i|B_i]\wedge (B_i\iff\vi_i))$.

If instead $\vi_i$ occurs only positively \resp{negatively} in $\vi$, then it
is possible to extend \muA{} by assigning $B_i$ to $\bot$ \resp{$\top$} to
satisfy $(B_i\imp\vi_i)$ \resp{$(B_i\limp\vi_i)$} without assigning any atom in
$\vi_i$. Thus $\muA$ satisfies $\exists B_i.( \vi[\vi_i|B_i]\wedge
    (B_i\imp\vi_i))$ \resp{$\exists B_i.( \vi[\vi_i|B_i]\wedge (B_i\limp\vi_i))$}.

As with \TseitinCNF{}, given $\muA$ satisfying \vi{}, in order to produce an
assignment \muAprime{} satisfying $\exists \allB.\vicnfpg$ the enumerator is
most often forced to assign other atoms in \allA{}, so that
$\muAprime\supset\muA$. We notice, however, that the effect of this problem is
mitigated by the presence of single-polarity sub-formulas among those left
unassigned by \muA{}. As an extreme case, if all sub-formulas in $\vi$ occur
with single polarity, then no further assignment to atoms in \allA{} is needed. %as a consequence of \cref{fact:tseitin},%(unnecessarily)
%

\begin{example}%
    \label{ex2}
    Consider the formula $\vi$~\eqref{eq:ex1:vi} as in
    \cref{ex1}. Suppose that $\vi$ is converted into CNF using
    \PlaistedCNF{}. Then, we have:
    \begin{subequations}%
        \label{eq:ex2:vicnf}
        \begin{alignat}{2}
             & \vicnfpg\defas\nonumber                                                                                                         \\
             & \enspace(\neg B_1\vee\pos A_1)\wedge(\neg B_1\vee\pos A_2)                                         & \wedge
             & \quad\eqcomment{(B_1\imp (A_1\wedge A_2))}\label{eq:ex2:vicnf:line1}                                                            \\
             & \enspace(\pos B_2\vee\neg A_3)\wedge(\pos B_2\vee\neg A_4)\wedge(\neg B_2\vee\pos A_3\vee\pos A_4) & \wedge
             & \quad\eqcomment{(B_2\iff (A_3\vee A_4))}\label{eq:ex2:vicnf:line2}                                                              \\
             & \enspace(\pos B_3\vee\neg A_5)\wedge(\pos B_3\vee\neg A_6)\wedge(\neg B_3\vee\pos A_5\vee\pos A_6) & \wedge
             & \quad\eqcomment{(B_3\iff (A_5\vee A_6))}\label{eq:ex2:vicnf:line3}                                                              \\
             & \enspace(\neg B_4\vee\pos B_2)\wedge(\neg B_4\vee\pos B_3)\wedge(\pos B_4\vee\neg B_2\vee\neg B_3) & \wedge
             & \quad\eqcomment{(B_4\iff (B_2\wedge B_3))}\label{eq:ex2:vicnf:line4}                                                            \\
             & \enspace(\neg B_5\vee\pos B_4\vee\neg A_7)\wedge(\neg B_5\vee\neg B_4\vee\pos A_7)                 & \wedge
             & \quad\eqcomment{(B_5\imp (B_4\iff A_7))}\label{eq:ex2:vicnf:line5}                                                              \\
             & \enspace(\pos B_1\vee\pos B_5).                                                                    & \label{eq:ex2:vicnf:line6}
        \end{alignat}
    \end{subequations}
    We remark that~\eqref{eq:ex2:vicnf:line1}
    and~\eqref{eq:ex2:vicnf:line5} are shorter
    than~\eqref{eq:ex1:vicnf:line1} and~\eqref{eq:ex1:vicnf:line5}
    respectively, since the corresponding sub-formulas $(A_1\wedge
        A_2)$ and $((\dots)\iff A_7)$ occur only with
    positive polarity in \vi{}~\eqref{eq:ex1:vi}, so that only the one-way implication
    $(B_i\imp\vi_i)$ is needed.

    As in \cref{ex1}, consider the partial assignment $\muA\defas\set{\neg A_3,\neg
            A_4,\neg A_7}$~\eqref{eq:ex1:muA} which satisfies $\vi{}$~\eqref{eq:ex1:vi}. As
    before, $\muA$ does not satisfy $\exists\allB.\vicnfpg$. In fact, {there is no
            total truth assignment $\etaB$ on \allB{} such that
            $\muA\cup\etaB\pmodels\vicnfpg$}, because~\eqref{eq:ex2:vicnf:line3} cannot be
    satisfied by assigning only variables in $\allB$; rather, it is necessary to
    further assign at least one atom in
    %    $\set{A_1,A_2}$ to satisfy ~
    %    \eqref{eq:ex2:vicnf:line1}.
    %    and at least one in
    $\set{A_5,A_6}$ to satisfy~\eqref{eq:ex2:vicnf:line3}.
    Notice that, unlike with \cref{ex1}, in order to satisfy~\eqref{eq:ex2:vicnf:line1} %and  \eqref{eq:ex2:vicnf:line5}
    it is sufficient to set $B_1=\bot$ with no need to assign any atom in $\set{A_1,A_2}$.

    Suppose an enumerator assigns first the literals in \muA, which force it to
    assign also $\muB\defas\set{\neg B_2, \neg B_4}$ due
    to~\eqref{eq:ex2:vicnf:line2} and~\eqref{eq:ex2:vicnf:line4} respectively.
    %
    Since $\muA\cup\muB$ satisfies all clauses except those in
    \eqref{eq:ex2:vicnf:line1}, \eqref{eq:ex2:vicnf:line3},
    %\eqref{eq:ex2:vicnf:line5},
    and \eqref{eq:ex2:vicnf:line6}, the enumerator needs extending $\muA\cup\muB$
    by enumerating partial assignments on the unassigned atoms
    \set{A_1,A_2,A_5,A_6,B_1,B_3,B_5} which satisfy them.
    %
    Regardless of the search strategy adopted, {to
            satisfy~\eqref{eq:ex2:vicnf:line3} it is necessary to generate no less than $3$
            partial assignments} on $\set{A_5,A_6}$ (see \cref{ex1}); to satisfy
    \eqref{eq:ex2:vicnf:line1},
    %\eqref{eq:ex2:vicnf:line5},
    and \eqref{eq:ex2:vicnf:line6}, instead, the enumerator needs only assigning
    $B_1=\bot$, which forces it to assign $B_5=\top$ due to
    \eqref{eq:ex2:vicnf:line6}.

    % , and
    % \eqref{eq:ex2:vicnf:line5} respectively. 
    For instance, in the case of disjoint AllSAT, instead of the single partial
    assignment $\muA$, the solver may return the following list of 3 partial
    assignments satisfying $\exists\allB.\vicnfpg$ which extend \muA{}:%\ignoreinshort{%}
    \begin{equation}%
        \label{eq:ex2:muA:all}
        \begin{array}{llllllll}
            \multicolumn{2}{c}{} &  &           & \multicolumn{2}{c}{\overbrace{\rule{1.5cm}{0pt}}^{B_3}} &           &                        \\
            \{                   &  & \neg A_3, & \neg A_4,                                               & \neg A_5, & \neg A_6, & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\neg B_3,\neg B_4,\pos B_5}}                                                                \\
            \{                   &  & \neg A_3, & \neg A_4,                                               & \pos A_5, &           & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\pos B_3,\neg B_4,\pos B_5}}                                                                \\
            \{                   &  & \neg A_3, & \neg A_4,                                               & \neg A_5, & \pos A_6, & \neg A_7\}
            \quad\eqcomment{\set{\neg B_1,\neg B_2,\pos B_3,\neg
            B_4,\pos B_5}}                                                                                                                     \\
        \end{array}
    \end{equation}
    In the case of non-disjoint AllSAT, the solver may enumerate a similar
    set of partial assignments, with
    \set{A_6}
    instead of  \set{\neg A_5,A_6} in the third assignment.\exdone{}

    % Indeed, sub-formulas occurring with double polarity are labeled using double implications as for \TseitinCNF{}, raising the same problems as the latter. For instance, the sub-formula $(A_5\vee A_6)$ occurs with double polarity, since it is under the scope of an ``$\iff$''. Hence, the clauses in~\eqref{eq:ex2:vicnf:line3} must be satisfied by assigning a truth value also to $A_5$ or $A_6$, and so the partial truth assignment $\muA$ in~\eqref{eq:ex1:muA} does not suffice to satisfy $\exists\allB.\vicnfpg$. %because $\residual{\vicnfpg}{\muA\cup\etaB}=(\neg A_5)\wedge(\neg A_6)$.
    % \exdone{}
\end{example}

% The example above shows that \PlaistedCNF{} has an advantage over
% \TseitinCNF{} when enumerating partial assignments, but it overcomes
% its effectiveness issues only in part, {\em because a minimal assignment
%         $\muA$ satisfying $\vi$ may not suffice to satisfy
%         $\exists\allB.\vicnfpg$}, as with \TseitinCNF.

% \begin{IGNORE}
%     Consider, as in~\sref{sec:problem:label}, a generic non-CNF formula $\vi(\allA)$ and a partial truth assignment $\muA$ that satisfies $\vi$ without assigning a truth value to some sub-formula $\vi_i$. Suppose that $\vi_i$ occurs only positively in $\vi$ ---for the negative case the reasoning is dual. (In~\cref{ex2}, $\muA\defas\set{\neg A_3, \neg A_4, \neg A_7}$, $\vi_i\defas(A_1\wedge A_2)$.)\@
%     % and $\vi_j\defas((A_3\vee A_4)\wedge(A_5\vee A_6))\iff A_7$
%     Since \PlaistedCNF{} introduces only the clauses representing $(B_i\imp\vi_i)$
%     ---and not those representing $(B_i\limp\vi_i)$--- the solver is no longer
%     forced to assign a truth value to $\vi_i$, because it suffices to assign
%     $\etaB(B_i)=\bot$. (In the example, $(A_1\wedge A_2)$ is labelled with $B_1$
%     in~\eqref{eq:ex2:vicnf:line1}.) In this case, $\vi_i$ plays the role of a
%     ``don't care'' term, and this property allows for the enumeration of shorter
%     partial assignments.

%     Nevertheless, a sub-formula can be ``don't care'' only if it occurs with single
%     polarity. In fact, if $\vi_i$ occurs with double polarity ---as it is the case,
%     e.g., of sub-formulas under the scope of an ``$\iff$''--- then $\vi_i$ is
%     labeled with a double implication $(B_i\iff\vi_i)$, yielding the same drawbacks
%     as with \TseitinCNF{}. (In the example, $(A_5\vee A_6)$ occurs with double
%     polarity, and $\muAprime$ is forced to assign a truth value also to $A_5$ or
%     $A_6$ to satisfy the clauses in~\eqref{eq:ex2:vicnf:line3}.)
% \end{IGNORE}

Notice that, to maximize the benefits of \PlaistedCNF{}, the sub-formulas
occurring with positive \resp{negative} polarity only must have their label
assigned to false \resp{true}. {In practice, this can be achieved in part by
instructing the solver to split on negative values in decision
branches.~\footnote{To exploit this heuristic also for sub-formulas occurring
    only negatively, the latter can be labeled with a negative label $\neg B_i$ as
    $(\neg B_i\limp\vi_i)$.} Even though the solver is not guaranteed to always
assign to false these labels, we empirically verified that this heuristic
provides a good approximation of this behavior.}

% \end{rschange}

