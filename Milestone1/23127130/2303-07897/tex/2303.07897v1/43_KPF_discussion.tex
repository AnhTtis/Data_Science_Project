\section{Kalman and particle filters discussion}


Table~\ref{tab::kf_vs_pf} presents the overview of the main equations of Kalman and particle filters~\cite{kf_overview}.
We highlight the complementary properties of these methods that motivate us to develop a novel method that will take the best from Kalman and particle filters.

\begin{table}[!ht]
    \centering
    \caption{Kalman and particle filter equations}
    \begin{tabular}{ c c c}
\toprule
Stage & Extended Kalman filter & Particle filter\\
\midrule
 Predict                            &  
 $\rvx_{t+1}^- = f(\rvx_t, \rvu_t)$                  &
 $\rvx_{t+1}^i = f(\rvx_t^i, \rvu_t, \eta^i)$       \\
                                       &
$\mP_{t+1}^- = \mF \mP_{t} \mF^T + \mQ_{t+1}$    &
                                      \\
& $\mF = \left.\frac{\partial f(\rvx, \rvu_{t+1})}{\partial \rvx}\right|_{\rvx = \rvx_t}$                           \\                                      
                                      \midrule
 Update                           &
 $\rvz_{t+1} = g(\rvx_{t+1}^-)$              &
 $\rvz_{t+1}^i = g(\rvx_{t+1}^i) + \zeta^i$  \\
                                       &
$\mH_{t+1} = \frac{\partial g(\rvx)}{\partial \rvx}|_{\rvx = \rvx^-_{t+1}}$                    &
$w_{t+1}^i\sim w_t^i p(\rvz_{t+1}^i|\rvx_{t+1}^i)$
                                       \\
                                       &
$\mS = \mH_{t+1} \mP_{t+1}^- \mH_{t+1}^T + \mR$        &
$i_1..i_N \sim Multinomial(w^1_{t+1}..w^N_{t+1})$                   \\
     &
$\mK_{t+1} = \mP_{t+1}^- \mH_{t+1}^T \mS^{-1}$ & 
$\rvx^1_{t+1}..\rvx^N_{t+1} \leftarrow  \rvx^{i_1}_{t+1}..\rvx^{i_N}_{t+1}$                \\
                                       &
$\rvx_{t+1} = \rvx_{t+1}^- + \mK_{t+1} (\rvz_{t+1} - \tilde{\rvz}_{t+1}^i)$ 
                                       &
$w^i_t=\frac{1}{N}$              \\
                                       &
$\mP_{t+1} = (\mI - \mK_{t+1} \mH_{t+1})\mP_{t+1}^-$
                                       &
                                       \\
\bottomrule
\end{tabular}
\label{tab::kf_vs_pf}
\end{table}



% Kalman filter is much faster and requires less memory than the particle filter.
% However, it has strict assumptions like Gaussian noise assumption, initial state knowledge, etc.
% It causes its popularity despite the constraints such as Gaussian noise assumption, initial state knowledge, etc. 
% multiple modifications try to extend the Kalman filter to the broader class of problems. 
% At the same time, particle filters are very popular due to their simplicity, increasing power of modern computers, and the opportunity to perform parallel computations.

