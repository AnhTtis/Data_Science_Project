\section{Appendix for DTRs}\label{app:DTRs}
We give the following identification equations showing how to integrate the learning of $\pob(x_2\given x_1, a_1)$, 
\begin{gather}
    \EEob\sbr{h_1(A_1, Y_1, A_2, Y_2) - Y_2\given Y_1=y_1}=0,\nend
    \EEob\sbr{h_2(X_1, A_1, X_2, A_2)-h_1(A_1, Y_1, A_2, Y_2) \given (X_1, A_1, X_2, A_2, Y_1)=(x_1, a_1, x_2, a_2, y_1), (R_{X_1}, R_{X_2})=\ind}\nend
    =0, \nend
    \EEob\sbr{h_3^{\pi}(Y_1, X_1, A_1) - \sum_{a'_2\in\cA}h_2(X_1, A_1, X_2, a'_2)\pi_2(a'_2\given X_1, A_1, X_2)\given X_1, A_1, X_2, (R_{X_1}, R_{X_2})=\ind}=0, \nend
    \EEob\sbr{h_4^\pi(X_1, A_1)-h_3^\pi(Y_1, X_1, A_1)\given X_1, A_1, R_{X_1}=1}=0, \nend
    \EEob\sbr{g^\pi(X_1)-\sum_{a'_1\in\cA}h_4^{\pi}(X_1, a'_1)\pi_1(a'_1\given X_1)\given X_1, A_1, R_{X_1}=1}.
\end{gather}
Here, we have $g^\pi(x_1)=\EEob\sbr{Y_2\given x_1, \doopt^{\pi_1}(A_1), \doopt^{\pi_2}(A_2)}$.
For learning $\EEob\sbr{Y_1\given x_1, \doopt(a_1), x_2}$, we note that 
\begin{align}
    \EEob\sbr{Y_1\given x_1, \doopt(a_1), x_2} = \EEob\sbr{Y_1\given x_1, a_1, x_2}=\EEob\sbr{Y_1\given x_1, a_1, x_2, (R_{X_1}, R_{X_2})=\ind}, 
\end{align} 
where the first equality holds by noting that $Y_1\indep\pib_1\given (X_1, A_1, X_2)$ and the second equality holds by noting that $R_{X_i}$ is only caused by $(X_i, A_i)$ for both $i\in\{1, 2\}$. Thereby, we only need to learn an additional function $\zeta(x_1, a_1, x_2)$ by
\begin{align}
    \EEob\sbr{\zeta(X_1, A_1, X_2)-Y_1\given X_1, A_1, X_2, (R_{X_1}, R_{X_2})=\ind}=0.
\end{align}
