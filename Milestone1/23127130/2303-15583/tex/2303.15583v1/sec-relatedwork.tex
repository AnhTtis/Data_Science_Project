
Visual encodings in multiclass scatterplots significantly affect people's ability to interpret categorical data correctly.
However, we still do not understand the perceptual impact of encoding choices across varying numbers of categories.
We briefly review the topics of graphical perception in scatterplots, color palette design, and tasks in scatterplots to ground our work.

\subsection{Graphical Perception in Scatterplots}

Understanding categorical perception is a fundamental task in both cognitive science~\cite{harnad2003categorical} and visualization~\cite{munzner2014visualization}. Past work has introduced a range of techniques for eliciting patterns in categorical data, such as Flexible Linked Axes~\cite{kosara2006parallel}, Parallel Sets~\cite{lex2010comparative}, and Matchmaker~\cite{claessen2011flexible}.
However, these techniques leverage specialized approaches with high learning costs, 
%and required knowledge base make it hard to employ these techniques 
making them difficult for lay audiences to work with.
Scatterplots, alternatively, are more familiar for many audiences and commonly encode categorical data~\cite{sarikaya2018scatterplots}. Consequently, 
understanding how to best design scatterplots for categorical datasets is essential for effective data communication.
%the effectiveness of visual design for scatterplots is crucial including evaluating the graphical perception.
%since scatterplot is still the most commonly used categorical visualization technique~\cite{sarikaya2018scatterplots}.
%We mainly review perceptual studies in scatterplots and a complete review of such studies in different visualizations is beyond the scope of this paper, we refer to Quadri and Rosen~\cite{quadri2021survey}.

Graphical perception studies investigate how effectively people can estimate different properties from visualized data (see Quadri \& Rosen~\cite{quadri2021survey} for a survey). 
%Graphical perception in scatterplot has been studied for decades since Cleveland and McGill~\cite{cleveland1984graphical, cleveland1986experiment} analyzed several low-level judgment tasks in bi-variate graphs.
Scatterplots are commonly used in graphical perception experiments as they are sufficiently complex to reflect real-world challenges and simultaneously sufficiently simple to control~\cite{rensink2014prospects, rensink2010perception, harrison2014ranking, kay2016beyond}.   
%Heer and Bostock~\cite{heer2010crowdsourcing} further confirmed that Weberâ€™s Law can capture perceptual precision in graphical perception problems.
Existing studies have analyzed how scatterplots can support a variety of perceptual tasks across a range of channels. 
For example, Kim \& Heer use scatterplots as a means to assess how different visual channels support 
%a range of 
various tasks~\cite{kim2018assessing}.
Hong et al.~\cite{hong2021weighted} found that varying point size and lightness can lead to perceptual bias in mean judgments in scatterplots. Scatterplot studies commonly investigate how design influences people's abilities to estimate aggregate statistics, such as correlation~\cite{harrison2014ranking,rensink2010perception,kay2016beyond}, clustering~\cite{quadri2022automatic,sedlmair2012taxonomy,quadri2020modeling}, and means~\cite{hong2021weighted,gleicher2013perception,wei2019evaluating,whitlock2020graphical}. 
Other studies model the influence of different channels on scatterplot design, such as opacity~\cite{micallef2017towards}, color~\cite{szafir2018modeling}, and shape~\cite{burlinson2017open}. 

Most graphical perception studies focus on statistical relationships within a single category of scatterplots. However, studies of multiclass scatterplots often characterize people's abilities to separate classes by measuring just-noticeable differences in categorical encodings~\cite{smart2019measuring,burlinson2017open}. Alternatively, Gleicher et al.~\cite{gleicher2013perception} studied how different categorical encodings influenced people's abilities to compare the means of different classes 
%relative mean values of different classes were perceived in multiclass scatterplots. They conducted a crowd-sourced user study to compare the accuracy of mean value judgments 
with varying numbers of points and
%$hardness$ levels (denoted by $\Delta$ and computed by the pixel distance between classes' centers), 
differences in means, colors, and shapes.
%of scatterplots. 
%Their results revealed that hardness level and color are the most significant factors that impact human judgment, while the numbers of points are less influential.
%Based on the empirical results, they suggested the following guidelines: 1) scatterplots are capable to reveal the inter-class differences and viewers can extract that information, 2) conflicting cues do not hinder performance in the assessment of aggregates, and 3) since additional classes have little impact on performance, multi-class scatterplots should not be exempted in visualization design.
They found that scatterplots can effectively reveal interclass differences and that the design of a scatterplot influenced people's abilities to compare classes, with color being the strongest categorical cue. However, in contrast to other work on categorical visualization~\cite{haroz2012capacity}, they found that increasing the number of classes from two to three did not decrease performance.  
%Prior work in categorical visualization indicates that 
%However, they neither studied complex multiclass scatterplots with more than 3 classes nor took various color palettes into consideration.
%Since color palettes~\cite{zhou2015survey} and the number of classes~\cite{haroz2012capacity} both are important factors for human perception in visualizations, in this paper, we conduct a crowd-sourced experiment to evaluate various factors in multiclass scatterplots.
%Our studies focus on complex multiclass scatterplots from
We build on these observations to explore how robust people's estimates are in scatterplots with between 2 and 10 classes with varying hardness levels, color palettes, and numbers of points, (see Section \ref{sec-methodology}) to more deeply understand factors involved in effective multiclass scatterplot design. 
%aiming to provide a guideline with the human accuracy rate based on the number of categories, color palettes, and other variables such as hardness level (see \autoref{sec-discussion}).


\subsection{Color Palette Design}
Gleicher et al.'s findings about the effectiveness of color in multiclass scatterplots echo existing design guidance and results from other studies of categorical data encodings~\cite{gleicher2013perception,haroz2012capacity,trumbo1981theory,munzner2014visualization}.
%Color is one of the most common encoding channels in visualization. 
Choosing a proper categorical color palette\footnote{We define a color \emph{palette} as a set of colors specifically designed for categorical data.} for visualizing categorical data is a crucial task~\cite{trumbo1981theory, zhou2015survey}. Designers employ a combination of color models and heuristics to generate palettes (see Zhou \& Hansen~\cite{zhou2015survey}, Kovesi~\cite{kovesi2015good}, Bujack et al.~\cite{bujack2017good}, and Nardini et al.~\cite{nardini2019making} for surveys).
A range of studies has explicitly examined color perception for continuous data, such as characterizing limitations of rainbow colormaps \cite{ware1988color,reda2020rainbows,borland2007rainbow,quinan2019examining}, comparing the task-based effectiveness of continuous colormap designs~\cite{padilla2016evaluating,reda2018graphical,liu2018somewhere}, modeling color discrimination~\cite{ware2018measuring}, examining color semantics~\cite{anderson2021affective}, quantifying the impact of size and shape on encoding perception~\cite{smart2019measuring, szafir2018modeling} and examining perceptual biases~\cite{schloss2018mapping}.
However, significantly fewer studies have characterized color use for categorical data encoding.  

%Various aspects related to color perception have been studied empirically.
%Cleveland and McGill~\cite{cleveland1984graphical} found that compared to size and position, human perception of visual encoding of color channels would be at a lower precision in the most basic bi-variate graphs.
%For multiclass scatterplots, Gleicher et al.~\cite{gleicher2013perception} suggest that in the mean judgment task, color schema shows a stronger cue compared to other visual channels such as shape or orientation.
%Several existing studies focused on the co-effect between color and other visual encodings, such as size~\cite{szafir2018modeling}, shape~\cite{smart2019measuring} and uncertainty-relevant factors~\cite{maceachren2012visual}.
%For more details about color perception, we refer to recent surveys~\cite{zhou2015survey, kovesi2015good, nardini2019making}. 

Several principles and metrics of effective color palette design have been proposed~\cite{brewer1994guidelines,harrower2003colorbrewer,stone2006choosing,gramazio2016colorgorical}. 
%For example, Trumbo~\cite{trumbo1981theory} suggested that i) the order of colors should be comparable if presenting an ordered statistical variable and ii) the difference among colors should be obvious if presenting the differences of a variable.
Past work recommends that color palettes optimize the mapping between data semantics and color semantics~\cite{lin2013selecting,schloss2020semantic,setlur2016linguistic}; select colors that emphasize color harmonies~\cite{stone2006choosing,zeileis2009escaping}, affect~\cite{bartram2017affective}, or pair preference~\cite{schloss2011aesthetic}; and maximize perceptual and categorical separability between colors~\cite{healey1996choosing} (see Silva et al. \cite{silva2011using} for a survey).
%More recently, Zeileis et al.~\cite{zeileis2009escaping} recommended that colors should be attractive and harmonic with each other.
Designers can use predefined metrics to describe aesthetic 
%are some optimizing metrics proposed to measure aesthetic preference such as Pair Preference
(e.g., pair preference~\cite{schloss2011aesthetic}), perceptual (e.g., %or to measure color discrimination, such as Perceptual Distance (
CIEDE 2000~\cite{sharma2005ciede2000}), 
and categorical (e.g., color name difference or uniqueness~\cite{heer2012color})
%, and Name Uniqueness~\cite{heer2012color}.
attributes of color to implement these guidelines and constrain effective palette design. 
While these metrics underlie many palette design guidelines, implementing these guidelines effectively takes significant expertise. 
%We utilize the above-mentioned 3 color discrimination measures in our analysis.
%Additionally, the length or variance on paths of color spaces such as CIELCh~\cite{ihaka2003colour} can be used to model color distributions and differences in a palette.
%CIELCh is an equal space to CIELAB, but with perceptual path representations where $L*$ counts the \emph{lightness} of a color, $C*$ approximates its \emph{chroma}, and $h*$ measures the \emph{hue}.
%Compared to CIELAB ($\alpha*$ counts red-to-green ratio and $\beta*$ counts blue-to-yellow ratio) or RGB spaces, the perception-based CIELCh can better represent the property of colors~\cite{zeileis2009escaping}.
%As a consequence, we utilize the variance and length of the CIELCh paths to evaluate color palettes in our paper.

%Besides, Haroz and Whitney~\cite{haroz2012capacity} analyzed categorical binned images with different colors and found that the $subitizing$ phenomenon~\cite{kaufman1949discrimination,mandler1982subitizing}, can significantly impact the accuracy and responding time in categorical visualization.
%Their findings suggest that 5 may be the capacity limit of human attention in category numbers which could heavily impact the effectiveness of visualization design.

Several methods for creating effective color palettes have been introduced.
For example, Healey~\cite{healey1996choosing} considers linear separability, color difference, and color categorization to design discriminable color palettes.
Harrower and Brewer~\cite{harrower2003colorbrewer} introduced ColorBrewer for providing designer-crafted distinguishable color palettes for cartography.
Gramazio et al.~\cite{gramazio2016colorgorical} developed Colorgorical, which can generate categorical palettes by optimizing several perceptual and aesthetic metrics. 
%Lin et al. ~\cite{lin2013selecting} introduced categorical colors assignment with semantically-resonant colors by mapping values to representative images, and Schloss et al. ~\cite{schloss2020semantic} models semantic space distance on semantic discriminability. Bartram et al. ~\cite{bartram2017affective} and Anderson et al. ~\cite{9318559} proposed proper affective color properties selection can enhance visual communications. 
Recent efforts have also explored how palettes might be extracted from images~\cite{zheng2022image} or colors from a given palette optimally assigned to a visualization~\cite{lee2012perceptually, lin2013selecting,wang2018optimizing}. Tools such as Colorgorical~\cite{gramazio2016colorgorical} and ColorBrewer~\cite{harrower2003colorbrewer} enable people to generate or choose from a range of palette designs (see Zhou \& Hansen~\cite{zhou2015survey} for a survey).  
%Smart et al.~\cite{smart2019color} created effective color encodings based on a corpus of 222 expert-designed seed color ramps. 
%Wang et al.\cite{} combined the impact of spatial relation, density, cluster overlap, and background to assign colors.
In this study, we compare preconstructed palettes from a range of sources, 
%Since our studies do not contain comparisons of color assignment technologies, we choose pre-defined colors from existing designer-crafted palettes 
including ColorBrewer~\cite{harrower2003colorbrewer}, 
%Paul Tol~\cite{tol2012colour}, and Swiss Federal Statistical Office (SFSO)~\cite{sfso} but also from commercial visualization tools~\cite{4376133} like 
Tableau~\cite{tableau}, D3~\cite{6064996}, Stata Graphics~\cite{statagraphics19}, and Carto~\cite{carto} (see \autoref{fig:palettes} for the details of our selected color palettes). Following the model for comparing the effectiveness of continuous color ramps in Liu \& Heer \cite{liu2018somewhere}, we leverage these palettes to understand how effectively common best-practice color palettes encode data over a range of data parameters.  


%\subsection{Tasks in Scatterplot}
% Moved to 2 sentences in Sec. 4.1.

%Amar et al.~\cite{amar2005low} generalized a task-based taxonomy such as cluster, sort, and value retrieval that might impact analytics in information visualization.
%Since then, a number of perceptual studies have been proposed to conduct various low-level tasks to assess the effectiveness of scatterplots, such as assessing trend estimation in multivariate scatterplots~\cite{nguyen2016correlation}, modeling correlation perception with Weber's Law~\cite{harrison2014ranking}, evaluating outlier perception~\cite{sarikaya2018design}, and modeling cluster perception topologically~\cite{quadri2020modeling}.

%Among them, the relative mean judgment task, which is required to estimate the mean position of classes and compare its value in scatterplots, is commonly employed in perceptual experiments to evaluate the differences across multiple classes of points~\cite{sarikaya2018scatterplots}.
%For example, Gleicher et al.~\cite{gleicher2013perception} performed this task to evaluate perception accuracy for basic multiclass scatterplots.
%Karmer et al.~\cite{kramer2017visual} found by comparing the mean and variances of variables over time, people can capture trend information within data.
%Hong et al.~\cite{hong2021weighted} introduced perceptual biases in judging mean positions in scatterplots with varying colors and sizes of points.
%For multiclass scatterplots, the mean judgment task requires  making accurate judgments of mean localization and mean comparison, thus it combines the ability of both value retrieval and sort tasks, and enables to assess of the visual aggregation from human perception~\cite{gleicher2013perception, sarikaya2018scatterplots}.
%As a consequence, we perform the mean judgment task to assess human perception in multiclass scatterplots.
