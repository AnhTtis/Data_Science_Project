\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{latexsym}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\newtheorem{theorem}{Theorem}
\newtheorem{axiom}[theorem]{Axiom}
\newtheorem{law}[theorem]{Law}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{question}[theorem]{Question}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{system}[theorem]{System}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{assumption}[theorem]{Assumption}
\newtheorem{principle}[theorem]{Principle}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{rmk}[theorem]{Remark}
\newtheorem{factrule}[theorem]{Rule}
\newtheorem{example}[theorem]{Example}
\newtheorem{test}[theorem]{Test}
\newtheorem{method}[theorem]{Method}
\newtheorem{prop}[theorem]{Proposition}
\usepackage{todonotes}
\usepackage{mathtools}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{float}
\usepackage{pgfplots}
\usepackage{caption}  
\pgfplotsset{compat = newest}
\DeclareMathOperator{\interior}{int}
\makeatletter
\hypersetup{
	backref,colorlinks=true,linkcolor=blue,citecolor=blue,urlcolor=blue,citebordercolor={0 0 1},urlbordercolor={0 0 1},linkbordercolor={0 0 1}}
 
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\dd}{\delta}
\newcommand{\SW}{\mathcal{SW}}
\title{Algebraic capacity as tropical polynomial over $c_1$-nef symplectic cone}
\author{Tian-Jun Li, Shengzhen Ning }
\AtEndDocument{\bigskip{\footnotesize
		\textsc{School of Mathematics, University of Minnesota, Minneapolis, MN, US} \par
		\textit{E-mail address}: \texttt{tjli@math.umn.edu} \par
		\addvspace{\medskipamount}
		\textsc{School of Mathematics, University of Minnesota, Minneapolis, MN, US} \par
		\textit{E-mail address}: \texttt{ning0040@umn.edu} \par
		
}}
\date{\today}

\begin{document}

\maketitle

\begin{abstract}
  In a series of work \cite{Algebraic},\cite{BenEhrhart} and \cite{rationalobs},    algebraic capacity was introduced in an algebraic manner for polarized surfaces and applied to the symplectic embedding problems. In this note, we give a reformulation of algebraic capacity in terms of almost complex geometry. For rational surfaces with $c_1\cdot \omega>0$, we further introduce a sequence of tropical polynomials which will describe those capacities viewed as functions over the space of such symplectic forms. As an application, we give a direct proof of the correspondence between algebraic capacity and ECH capcity for smooth toric surface without terminology from algebraic geometry.
\end{abstract}

\tableofcontents

\section{Introduction}


Let $(X,\omega,J)$ be the triple where $X$ is a closed $4$-manifold with symplectic form $\omega$ and tamed almost complex structure $J$. We consider the following quantitative invariant which we call the {\bf $k$-th tamed capacity} $$f_k(X,\omega,J):=\inf \{\omega(A)\,|\,A\in H_2(X;\ZZ),A\text{ is } J\text{-nef}, ind(A)\geq 2k\}.$$ 
Here $J$-nefness is the almost complex analogue of the nefness in algebraic geometry and $ind(A)$ denotes the real Gromov-Taubes dimension $A^2-K\cdot A$.
When $(\omega,J)$ is a K\"{a}hler pair, this definition naturally coincides with the algebraic capacity $c_k^{alg}$ for a polarized surface in \cite{Algebraic}. Note that $c_k^{alg}$ can be defined for possibly non-smooth algebraic surfaces, and our $f_k$ can be defined for possibly non-integrable $J$ which is only assumed to be tamed by $\omega$.

This definition seems to heavily depend on the almost complex structure $J$. However, we have the following observation:

\begin{prop}[Proposition \ref{prop:equivalentdef}]
    If $X$ is a rational surface $\CC\PP^2\#n\overline{\CC\PP}^2$, $f_k$ only depends on the cohomology class $[\omega]$.
\end{prop}
 Therefore, in this case $f_k$ can be naturally viewed as a function over the region in $H^2(X;\RR)$ which admits symplectic classes. The main result of this note is that after further assuming the condition $c_1\cdot\omega>0$ (which contains all toric surfaces and del Pezzo surfaces), the pattern of $f_k$ can be described by tropical polynomials.

Recall that the tropical addition and multiplication are given by 
$$x\oplus y:=\min\{x,y\},\quad\quad\quad x\odot y:=x+y. $$
Let $B\subset\ZZ^n$ be a finite set and $c_{\vec{a}}$ a real number for each $\vec{a}\in B$. Under this redefined arithmetic operation, a tropical polynomial is
\[f(x_1,\cdots,x_n):=\sum_{\vec{a}\in B}c_{\vec{a}}\vec{x}^{\vec{a}}=\text{min}\{c_{\vec{a}}+\langle{\vec{x}},\vec{a}\rangle\,|\,\vec{a}\in B\}.\]

The first interesting example is $\CC\PP^2\#\overline{\CC\PP}^2$. In this case the domain of $f_k$ has only one parameter $x\in (0,1)$. Let $f_k(x)=f_{k}(X,[\omega])$ with $\omega(H)=1, \omega(E)=x$ where $H$ is the line class and $E$ is the exceptional class. Then with a bit of effort one can write down the first few terms (see figure \ref{fig:graph}):
\[f_1(x)=1\odot x^{-1}, f_2(x)=(2\odot x^{-2}) \oplus 1, f_3(x)=(3\odot x^{-3})\oplus (2\odot x^{-1}),\] 
\[f_4(x)=(4\odot x^{-4})\oplus(2\odot x^{-1}), f_5(x)=(5\odot x^{-5})\oplus(3\odot x^{-2})\oplus 2,
f_6(x)=(6\odot x^{-6})\oplus(3\odot x^{-2}),\]
\[f_7(x)=(7\odot x^{-7})\oplus(4\odot x^{-3})\oplus(3\odot x^{-1}), f_8(x)=(8\odot x^{-8})\oplus(4\odot x^{-3})\oplus(3\odot x^{-1}),\, \cdots\]

\begin{center}
\begin{tikzpicture}
\begin{axis}[
    xmin = 0, xmax = 1,
    ymin = 0, ymax = 3.1]
    \addplot[
        domain = 0:1,
    ] {1-x};
     \addplot[draw=red,
        domain = 0:1,
    ] {min(2-2*x,1)};
    \addplot[draw=orange,
        domain = 0:1,
    ] {min(3-3*x,2-x)};
      \addplot[draw=yellow,
        domain = 0:1,
    ] {min(4-4*x,2-x)};
    \addplot[draw=green,
        domain = 0:1,
    ] {min(5-5*x,3-2*x,2)};
    \addplot[draw=blue,
        domain = 0:1,
    ] {min(6-6*x,3-2*x)};
    \addplot[draw=cyan,
        domain = 0:1,
    ] {min(7-7*x,4-3*x,3-x)};
    \addplot[draw=violet,
        domain = 0:1,
    ] {min(8-8*x,4-3*x,3-x)};
\end{axis}

\end{tikzpicture}
\captionof{figure}{The graphs for the first eight capacity functions.}\label{fig:graph}
\end{center}
However there is no guarantee that all $f_k$ are indeed tropical polynomials when $k$ is getting large. Namely we have to show the finiteness of the tropical sum. Thus our main theorem can be interpreted as the following:

\begin{theorem}[Theorem \ref{thm:main}]
    There exists finitely many minimizers $A_1,\cdots,A_m$ such that $f_k(X,[\omega])=\min\{\omega(A_1),\cdots,\omega(A_m)\}$ for all $[\omega]\in\mathcal{P}^{c_1>0}$.
\end{theorem}

Here $\mathcal{P}^{c_1>0}$ denotes the $c_1$-nef cone which will be introduced in section \ref{section:symplecticcone}. Unfortunately, the tropical property is not valid without this $c_1$-nef condition, see remark \ref{rmk:nonc1nef}.

As an application, we give an alternative proof of the correspondence between algebraic capacity and ECH capacity for toric surfaces (already known in \cite{BenEhrhart}) without involving the language of toric algebraic geometry.

\begin{prop}[Proposition \ref{prop:ech}]
Assume $(X,\omega)$ has a toric action with moment polygon $\Omega$. Let $X_{\Omega}$ be the convex toric domain in $\CC^2$ associated to $\Omega$. Then $f_k(X,\omega)=c_k^{ECH}(X_{\Omega})$.
\end{prop}

\hfill \break
{\bf Acknowledgement:} The authors would like to thank Julian Chaidez, Dan Cristofaro-Gardiner, Michael Hutchings, Jun Li and Jie Min for showing interest in this work and helpful communications.


\section{Subtlety with $SW,Gr,Gr'$ when $b_2^+=1$}\label{section:SWGrGr'}

 We briefly recall the minimum knowledge needed in this paper about the story of Seiberg-Witten, Gromov-Taubes and McDuff's modified version of Gromov-Taubes invariants. We refer to \cite{Salamonbook}, \cite{Taubes1} and \cite{McDufflecture} for more details. 

In this section, $X$ is always assumed to be a closed oriented $4$-manifold satisfying $b_2^+> 0$ and $H_1(X;\ZZ)=0$ (for simplicity), together with a fixed orientation on $H^0(X;\RR)$, $H^1(X;\RR)$ and $H^2_+(X;\RR)$. The Seiberg-Witten invariant is defined on the set of Spin$^c$ structures $\mathcal{S}_X$. There is a rank $2$ complex vector bundle $\mathcal{L}$, called the positive spinor bundle, associated to each element in $\mathcal{S}_X$. We also need its determinant line bundle $det(\mathcal{L})$. Now choose a Riemannian metric $g$ and a self-dual two form $\mu$. One can then write down the Seiberg-Witten equation and study the moduli space $\mathcal{M}(X,\mathcal{L})$ of the solutions which contain the pairs of a connection on $det(\mathcal{L})$ and a section of $\mathcal{L}$. For generic choice of $(g,\mu)$, $\mathcal{M}(X,\mathcal{L})$ is a compact manifold of real dimension $\frac{c_1(\mathcal{L})^2-2\chi(X)-3\tau(X)}{4}$. There will be an integer associated to previous datum. When $b_2^+>1$, this number doesn't depend on the generic choices and we thus obtain a well-defined map $$SW:\mathcal{S}_X\rightarrow \ZZ.$$

When $b_2^+=1$, the choice of $(g,\mu)$ matters. Introduce the discriminant $$\Delta_{\mathcal{L}}(g,\mu):=\int_X(c_1(\mathcal{L})-\mu)\wedge\omega_g,$$
where $\omega_g$ is the unique $g$-harmonic self-dual two form in the positive forward cone (given by the orientation on $H^2_+(X;\RR)$) satisfying the normalized condition $\int_X\omega_g^2=1$. Depending on whether $\Delta_{\mathcal{L}}(g,\mu)$ is positive or negative, there will be positive and negative chambers in the space of pairs $(g,\mu)$. Therefore we will obtain two well-defined maps
$$SW_{\pm}:\mathcal{S}_X\rightarrow \ZZ.$$

When the manifold $X$ comes up with a symplectic structure $\omega$ whose canonical class is $K$, there is a distinguished element in $\mathcal{S}_X$ which gives $\mathcal{L}_{K^{-1}}$ with $c_1(\mathcal{L}_{K^{-1}})=-K$. The symplectic form $\omega$ also naturally determines an orientation of $H_+^2(X;\RR)$ (and thus the positive forward cone), which we require to coincide with the one we fixed at the beginning. Moreover, given a homology class $e\in H_2(X;\ZZ)$ and its associated complex line bundle $\mathcal{L}_A$, one will have another spin$^c$ structure whose spinor bundle is given by $\mathcal{L}_{K^{-1}}\otimes \mathcal{L}_A$ with $c_1(\mathcal{L}_{K^{-1}}\otimes \mathcal{L}_A)=-K+2A$. It turns out this correspondence between $\mathcal{S}_X$ and $H_2(X;\ZZ)$ is bijective. So it makes sense to use the following two maps
$$SW_{\omega,\pm}:H_2(X;\ZZ)\rightarrow \ZZ.$$

Now we introduce the index of a class $A\in H_2(X;\ZZ)$ as 
$$ind(A):=A^2-K\cdot A.$$
This number coincides with the real dimension of the moduli space $\mathcal{M}(X,\mathcal{L}_{K^{-1}}\otimes \mathcal{L}_A)$. If the index is non-negative, the wall crossing formula in \cite{LiLiuWallcrossing} tells us
$$|SW_{\omega,+}(A)-SW_{\omega,-}(A)|=1.$$

If $g$ is a metric of positive scalar curvature, then \cite{Witten} tells us the moduli space is empty when using the pair $(g,0)$. When $X=\CC\PP^2\#n\overline{\CC\PP}^2$, there is a classical result by Hitchin:
%\todo{Write a proof in the appendix?}
\begin{lemma}[\cite{Hitchin}]
    If $\{H,E_1,\cdots,E_n\}$ is the standard basis of $H_2(X;\ZZ)$, then there always exists a K\"{a}hler structure $(J,\omega,g)$ such that $g$ has positive scalar curvature and $[\omega]$ is arbitrarily close to the Poincar\'e dual of $H$.
\end{lemma}

Note that for the K\"{a}hler triple $(J,\omega,g)$, $\omega$ is automatically $g$-harmonic and self-dual. As a result, we get the following criterion which will be used later:
\begin{lemma}\label{lem:criterion}
    Let $(X,\omega)$ be a symplectic rational surface with standard canonical class $K_0=-3H+E_1+\cdots +E_n$. If $A\in H_2(X;\ZZ)$ satisfies $A\cdot H\geq 0$ and $ind(A)\geq 0$, then $SW_{\omega,-}(A)\neq 0$.
\end{lemma}
\begin{proof}
    Note that for the K\"{a}hler positive scalar curvature metric $g$, we have  $$\Delta_{\mathcal{L}_{K_0^{-1}}\otimes\mathcal{L}_A}(g,0)=2\omega(A)-K_0\cdot [\omega]. $$
    If we take $[\omega]$ to be very close to the Poincar\'e dual of $H$, the discriminant will be very close to $2A\cdot H+3>0$. This shows $(g,0)$ is in the positive chamber and we thus have $SW_{\omega,+}(A)=0$ and $SW_{\omega,-}(A)\neq 0$.
\end{proof}

Similar criterion for non-vanishing of the invariant has been used for a long time, see remark \ref{rmk:compare} for the comparison.

Now we review Taubes' program on counting pseudo-holomorphic curves on symplectic $4$-manifold $(X,\omega)$. Let $A\in H_2(X;\ZZ)$ be a non-zero class with $ind(A)\geq 0$.
By choosing a generic compatible almost complex structure $J$ and $\frac{ind(A)}{2}$ generic points on $X$, the Gromov-Taubes invariant $Gr_{\omega}(A)$ is defined by a delicate weighted counting of the moduli space $\mathcal{H}_J(A)$ consisting of $\{(C_i,m_i)\}$ such that
\begin{itemize}
    \item $C_i$'s are disjoint embedded connected $J$-holomorphic submanifolds, $m_i$'s are positive integer numbers, $m_i=1$ unless $C_i$ is a torus with trivial normal bundle.
    \item $\sum m_i[C_i]=A$, $ind([C_i])\geq 0$ for all $i$, each $C_i$ passes through $\frac{ind([C_i])}{2}$ chosen points. 
\end{itemize}

 An immediate observation by adjunction formula and index constraint is that when $[C_i]^2<0$, then $C_i$ must be an exceptional sphere. Now if one further defines $Gr_{\omega}$ to be $1$ for the zero class and $0$ for the classes with negative index, there will be a well-defined map
 $$Gr_{\omega}:H_2(X;\ZZ)\rightarrow \ZZ.$$

 One basic fact is $Gr_{\omega}$ is invariant under the deformation of the symplectic structures. If $X$ is a rational manifold, by \cite{LiLiuruled} Theorem D, any two symplectic forms with the same canonical class are deformation equivalent. By \cite{LiLiu01} Theorem 1, up to a diffeomorphism we may always assume the symplectic form on $X$ has the standard canonical class $K_0=-3H+E_1+\cdots+E_n$.  Therefore, later when we only consider the symplectic forms with canonical class $K_0$, we will just write $Gr$ instead of $Gr_{\omega}$. 

By a series of work \cite{Taubes1},\cite{Taubes2},\cite{Taubes3},\cite{Taubes4}, if $b_2^+>1$ one can safely speak
$$SW_{\omega}=Gr_{\omega}:H_2(X;\ZZ)\rightarrow \ZZ.$$

If $b_2^+=1$, one wishes to have $SW_{\omega,-}=Gr_{\omega}$. However, as explained in \cite{McDufflecture} Example 6, for $X=\CC\PP^2\#\overline{\CC\PP}^2$ and $A=H+2E$, the Taubes' moduli space $\mathcal{H}_J(A)$ must be empty since the multiply covered exceptional spheres are not allowed, which gives $Gr_{\omega}(A)=0$. On the other hand, by lemma \ref{lem:criterion} we see that $SW_{\omega,-}(A)\neq 0$. To remedy this, McDuff introduced a modified version of Gromov-Taubes invariant $Gr_{\omega}'$ for $b_2^+=1$ which we now recall.

Introduce the following sets for $(X,\omega)$ with canonical class $K$,
 $$\mathcal{E}_X:=\{E\in H_2(X;\ZZ)\,|\,E\text{ can be represented by smooth exceptional sphere}\},$$
$$\mathcal{E}_{\omega}:=\{E\in H_2(X;\ZZ)\,|\,E\text{ can be represented by symplectic exceptional sphere}\},$$ 
 $$\mathcal{E}_{K}:=\{E\in\mathcal{E}_X\,|\,E\cdot K=-1\}.$$A useful fact from \cite{LiLiuWallcrossing} is that $\mathcal{E}_{\omega}=\mathcal{E}_{K}$ so that we will just denote them by $\mathcal{E}$. Now suppose $A\in H_2(X;\ZZ)$ is a non-zero class with $ind(A)\geq 0$, we will look at the following set
 $$\mathcal{E}_A:=\{E\in\mathcal{E}\,|\,E\cdot A\leq -2\}.$$

Note that there is no guarantee this set must be finite. For example, one can take $X=\CC\PP^2\#n\overline{\CC\PP}^2$ with $n>9$ and $A=K-H$. Note that $ind(A)=4$ and the condition $n>9$ makes $\mathcal{E}$ infinite. Moreover, other than $E_1,\cdots,E_n$, all the classes in $\mathcal{E}$ must have positive pairings with $H$. This means $\mathcal{E}_A$ must be infinite. So we need to impose some condition to make $\mathcal{E}_A$ finite so that $Gr'$ could be defined.

\begin{definition}
    We say $Gr'(A)$ {\bf can be defined} if the intersection number of any two distinct elements in $\mathcal{E}_A$ is $0$.
\end{definition}

Note that this naturally makes $\#\mathcal{E}_A\leq b_2^{-}<\infty$. Now we outline the process how to define $Gr'(A)$ under the assumption of the above definition. Firstly, introduce the modified index
$$ind'(A):=ind(A)+\sum_{E\in\mathcal{E}_A}(|E\cdot A|^2-|E\cdot A|),$$choose a generic almost complex structure $J$ and $\frac{ind'(A)}{2}$ generic points on $X$ and then consider the moduli space $\mathcal{H}'_J(A)$ consisting of $\{(C_i,m_i)\}$ such that 
\begin{itemize}
      \item $C_i$'s are disjoint embedded connected $J$-holomorphic submanifolds, $m_i$'s are positive integer numbers, $m_i=1$ unless $C_i$ is a torus with trivial normal bundle or an exceptional sphere.
    \item $\sum m_i[C_i]=A$, $ind'([C_i])\geq 0$ for all $i$, each $C_i$ passes through $\frac{ind'([C_i])}{2}$ chosen points. 
\end{itemize}
Then we define $Gr_{\omega}'(A)$ to be an appropriate count of this $\mathcal{H}'_J(A)$. Note that when $\mathcal{E}_A=\varnothing$, one has $Gr'_{\omega}(A)=Gr_{\omega}(A)$. A typical example showing how this works that one should keep in mind is the previous class $A=H+2E$. The number $Gr_{\omega}'(A)$ actually counts the configuration of a rational curve in class $H$ passing two points and a multiplicity $2$ exceptional sphere in class $E$, which gives $Gr_{\omega}'(A)=Gr_{\omega}(H)=1$. Finally, when $ind(A)< 0$ or $A=0$ we still let $Gr_{\omega}'(A)=Gr_{\omega}(A)$. The main result of \cite{LLSWGr} says
$$SW_{\omega,-}=Gr'_{\omega}:\{A\in H_2(X;\ZZ)\,|\,Gr_{\omega}'(A)\text{ can be defined}\}\rightarrow \ZZ.$$

This identification can be extended over the entire $H_2(X;\ZZ)$ under suitable convention, see remark \ref{rmk:convention}.

\section{Equivalent definitions of tamed capacity}

\subsection{Almost complex geometry of $4$-manifolds}\label{section:almostcpx}
For any triple $(X,\omega,J)$ such that the almost complex structure $J$ is tamed by the symplectic form $\omega$, we will define our capacities $f_k(X,\omega,J)$. We thus need the terminology from almost complex geometry. We refer to \cite{Taubes5}, \cite{almostkahler}, \cite{nefclass}, \cite{curvecone} and \cite{Weiyi21} for more details.

\begin{definition}
    An {\bf irreducible $J$-holomorphic subvariety} is a closed subset $C\subset M$ such that
    \begin{itemize}
        \item its $2$-dimensional Hausdorff measure is finite and non-zero;
        \item it has no isolated points;
        \item away from finitely many singular points, $C$ is a smooth submanifold with $J$-invariant tangent space.
    \end{itemize}
    A {\bf $J$-holomorphic subvariety} $\Theta$ is a finite set of pairs $\{(C_i,m_i)\}$ such that each $C_i$ is an irreducible $J$-holomorphic subvariety, $m_i$ is a positive integer and $C_i\neq C_j$ for $i\neq j$.
\end{definition}

Every irreducible $J$-holomorphic subvariety is the image of a $J$-holomorphic map $\phi:\Sigma\rightarrow X$ from a Riemann surface $\Sigma$. Therefore we can define the class of the subvariety $[C]$ as $\phi_*([\Sigma])$. For a class $A\in H_2(X;\ZZ)$, we let the moduli space $\mathcal{M}_A$ be the space of subvarieties $\Theta=\{(C_i,m_i)\}$ such that $[\Theta]:=\sum m_i[C_i]=A$, which can be naturally equipped with a topology in the Gromov-Hausdorff sense.

\begin{definition}
    A class $A\in H_{2}(X;\ZZ)$ is called {\bf $J$-effective} if $\mathcal{M}_A$ is non-empty; is called {\bf $J$-nef} if its intersection pairings with all $J$-effective classes are non-negative.
\end{definition}

\begin{definition}
    For tamed triple $(X,\omega,J)$, define the {\bf $k$-th tamed capacity} $$f_k(X,\omega,J):=\inf_{A\text{ is J-nef}, ind\geq2k}\omega(A)$$
\end{definition}

In a series of work \cite{BenEhrhart},\cite{Algebraic} and \cite{rationalobs}, for a $\QQ$-factorial projective surface $Y$ with an ample $\RR$-divisor $A$, the $k$-th algebraic capacity is defined as
$$c_k^{alg}(Y,A):=\inf_{D\in \text{Nef}(Y)_\ZZ}\{D\cdot A\,|\,\chi(D)\geq k+\chi(\mathcal{O}_Y)\}.$$
When $Y$ is a smooth complex rational surface, the ample divisor $A$ gives a K\"{a}hler form $\omega_A$. The above definition can be read as
$$c_k^{alg}(Y,A):=\inf_{D\in \text{Nef}(Y)_\ZZ}\{\omega_A(D)\,|\,ind(D)\geq 2k\}.$$
Then if we denote the complex structure by $J$, we naturally have $$c_k^{alg}(Y,A)=f_k(Y,\omega_A,J).$$


\begin{lemma}\label{lem:eff=sw}
   For any tamed triple $(X,\omega,J)$ with $X$ being a rational manifold, $$\{\text{J-effective classes with } ind\geq 0\}=\{SW_{\omega,-}\neq 0\}.$$
\end{lemma}

\begin{proof}
    The inclusion $\supseteq$ essentially comes from Taubes' work (see also section 2.4 in \cite{Weiyi21}). For $\subseteq$, firstly note that $H$ must be $J$-effective since $Gr(H)\neq 0$. Then use positivity of intersection and apply lemma \ref{lem:criterion}.
\end{proof}

\begin{lemma}\label{lem:Gr'defined}
    For tamed triple $(X,\omega,J)$ where $X$ is a rational manifold with standard basis $\{H,E_1,\cdots,E_n\}$ and canonical class $K_0=-3H+E_1+\cdots+E_n$, if the class $A\in H_2(X;\ZZ)$ with $ind(A)\geq 0$ satisfies $A\cdot H>0$ then $Gr'(A)$ can be defined.
\end{lemma}
\begin{proof}
Note that $A\cdot H>0$ gives $SW_{\omega,-}(A)\neq 0$ by lemma \ref{lem:criterion}. By lemma \ref{lem:eff=sw}, $A$ can also be represented some $J$-holomorphic subvariety $\Theta=\{(C_i,m_i)\}$. Assume $[e_1]$ and $[e_2]$ are two classes in $\mathcal{E}_A$ such that $[e_1]\cdot [e_2]\geq 1$. Since $[e_1]\cdot A\leq -2$, by positivity of intersection, there must be some $[C_i]$ equal to $[e_1]$. For the same reason there is some $[C_j]$ equal to $[e_2]$. But then one will have the contradiction 
$$-4\geq ([e_1]+[e_2])\cdot A\geq ([e_1]+[e_2])\cdot(m_1[C_i]+m_2([C_j]))\geq (-m_1+m_2)+(m_1-m_2)=0.$$
\end{proof}

\begin{rmk}\label{rmk:convention}
    Another convention is to extend the definition of $Gr'$ to be $0$ for those classes that can not be defined in our sense. From the proof of lemma \ref{lem:Gr'defined} we see that if $Gr'(A)$ can not be defined, then we must have $SW_{\omega,-}(A)=0$. In this sense one can say $Gr'=SW_{\omega,-}$ holds for all homology classes.
\end{rmk}

\begin{rmk}\label{rmk:compare}
    \cite{MO} lemma 2.1.5 and \cite{Danconcave} proposition 4.3 give two sufficient conditions for a class having non-zero Gromov invariant. Their Gromov invariants, although written as $Gr$, should be understood as $Gr'$ in the sense of remark \ref{rmk:convention}. Keeping this in mind, we can compare them with lemma \ref{lem:criterion}:
    \begin{itemize}
        \item \cite{MO}'s condition: $A^2\geq 0$, $\omega(A)>0$ and $ind(A)\geq 0$. Note that by light cone lemma, this implies our condition $A\cdot H>0$. There exists classes like $H+E_1+E_2$ with non-zero invariant, which satisfy the condition in lemma \ref{lem:criterion} but doesn't satisfy this criterion. 
        \item \cite{Danconcave}'s condition: $\omega(PD(K_0)-A)<0$ and $ind(A)\geq 0$. Since $Gr'$ doesn't depend on the deformation class of $\omega$, we can take $\omega$ to be the symplectic form coming from small blowups so that $PD([\omega])$ is very close to $H$. In this case, $\omega(PD(K_0))$ is very close to $-3$ and we have $A\cdot H\geq -3$. By index constraint, it's easy to exclude $A\cdot H=-3,-2,-1$. Therefore it coincides with our criterion in lemma \ref{lem:criterion}.
    \end{itemize}
\end{rmk}



\subsection{A hierarchy of subsets in $\{ind\geq 2k\}$}
In this section, $X$ will always be a rational manifold. Consider a tamed triple $(X,\omega,J)$ with a standard basis $\{H,E_1,\cdots,E_n\}$ and anti-canonical class $K_0=-3H+E_1+\cdots+E_n$. We introduce the following subsets $U_i:=\{A\,|\,ind(A)\geq 2k,\star\}$\footnote{For simplicity we don't use the notations like $U_i^{(k)}$, although these $U_i$'s do depend on $k$.} in $H_2(X;\ZZ)$ where $\star$ is the $i$-th requirement in the followings:
\begin{enumerate}
    \item $J$-nef;
    \item $A\cdot H>0$, $A^2\geq 0$ and $A\cdot E\geq 0$ for all $E\in\mathcal{E}_{K_0}$;
    \item $Gr(A)\neq 0$;
    \item $Gr'(A)$ can be defined and $Gr'(A)\neq 0$;
    \item $A\cdot H>0$;
    \item $SW_{\omega,-}(A)\neq 0$;
    \item $J$-effective.
\end{enumerate}

It turns out, except for $U_1$, all these subsets will not change as $(\omega,J)$ deforms due to the following result.

\begin{prop}
With the settings as above, we have\footnote{Here the strict inclusions should be understood as `not always equal'. That is, there exists some $(X,\omega,J)$ such that $U_1,U_2,U_3,U_4$ are not equal.} $$U_1\subsetneq U_2\subsetneq U_3\subsetneq U_4= U_5=U_6=U_7.$$
\end{prop}

\begin{proof}
First of all, observe that if $J$ comes from the complex blowup or three points on the same line in $\CC\PP^2$, then there is a curve in class $H-E_1-E_2-E_3$ and thus $2H-E_1-E_2-E_3\in U_2\setminus U_1$; $H+E_1+E_2\in U_3\setminus U_2$; $H+2E_1\in U_4\setminus U_3$. Then we explain each inclusion relation one by one:
    \begin{itemize}
        \item ($U_1\subseteq U_2$) If $A$ is $J$-nef, then by positivity of intersection, we have $A\cdot E\geq 0$ for all $E\in\mathcal{E}_{K_0}$ and $A\cdot H\geq 0$. The condition $ind(A)\geq 2k\geq 2$ also forces $A\cdot H>0$. Therefore by the discussion of section \ref{section:SWGrGr'} we know that $Gr(A)=Gr'(A)=SW_{\omega,-}(A)\neq 0$. To see $A^2\geq 0$, note that $Gr(A)\neq 0$ means for some generic almost complex structure (maybe not the same as $J$), there is some subvariety $\{(C_i,m_i)\}$ in Taubes' moduli space representing the class $A$. All $C_i$'s are disjoint and the only components with negative self-intersection must be embedded exceptional spheres whose classes live in $\mathcal{E}_{K_0}$. However, since we already know the class $A$ pairs non-negatively with any element in $\mathcal{E}_{K_0}$, there couldn't be any $C_i$ with negative self-intersection. Therefore $A^2=\sum_im_i^2[C_i]^2\geq 0$. 
        \item ($U_2\subseteq U_3$) The conditions $A\cdot E\geq 0$ for all $E\in\mathcal{E}_{K_0}$ and $A\cdot H>0$ guarantee $Gr(A)=Gr'(A)=SW_{\omega,-}(A)\neq 0$.
        \item ($U_3\subseteq U_4$) The element $\{(C_i,m_i)\}$ in Taubes' moduli space has the property that if $C_i^2<0$ then $C_i^2=-1$ and $m_i=1$. By positivity of intersection, $A\cdot E\geq -1$ for all $E\in\mathcal{E}_{K_0}$. So $Gr'(A)=Gr(A)\neq 0$.
        \item ($U_4\subseteq U_5$) Positivity of intersection.
        \item ($U_5\subseteq U_6$) By lemma \ref{lem:criterion}.
        \item ($U_6=U_7$) By lemma \ref{lem:eff=sw}.
        \item ($U_6\subseteq U_4$) By lemma \ref{lem:Gr'defined} and the identification in \cite{LLSWGr}.
    \end{itemize}
\end{proof}

%\begin{rmk}
 %   When removing the $c_1$-positive condition, some of the relations in the above result might fail. For example,
%\end{rmk}




\subsection{Proof of equivalence}
We fix a positive integer $k$ and keep the same settings as the last section. The aim of this section is to show:

\begin{prop}\label{prop:equivalentdef}
We have equal values 
 $$\inf_{A\in U_1}\omega(A)=\inf_{A\in U_2}\omega(A)=\cdots=\inf_{A\in U_7}\omega(A).$$ 
\end{prop}

Firstly note that if there is a sequence of $J$-holomorphic subvarieties $\Theta_i$ whose $\omega$-areas converge to the infimum over $U_7$, then by Gromov compactness theorem, after passing to a subsequence it will have a limit $\Theta$. Note that $[\Theta_i]=[\Theta]$ for large $i$ so that $[\Theta]\in U_7$. To summarize, we then get

\begin{lemma}\label{lem:min}
    There always exists $A_{min}\in U_7$ such that $\omega (A_{min})$ attains the infimum over $U_7$. 
\end{lemma}

\begin{proof}[Proof of proposition \ref{prop:equivalentdef}]
    By the above lemma, it suffices to show $A_{min}$ is $J$-nef. Since $A_{min}\in U_7$ has effective representation $\{(C_i,m_i)\}$, if $e$ is an irreducible curve such that $[e]\cdot A_{min}\leq -1$, $e$ must be equal to some $C_i$ by positivity of intersection. Now let's consider the class $A_{min}-[e]$, which is also effective. Its index satisfies
    $$(A_{min}-[e])^2+c_1(A_{min}-[e])=ind(A_{min})+[e]^2+K_0\cdot [e]-2A_{min}\cdot [e]\geq ind(A_{min})$$ 
    by assumption and adjunction inequality. But then $A_{min}-[e]$ will have smaller area which is a contradiction.
\end{proof}

Therefore, when $X$ is a rational manifold, the tamed capacity $f_k(X,\omega,J)$ only depends on the cohomology class $[\omega]$. So we can omit the almost complex structure $J$ and just write $f_k(X,[\omega])$. 


%Given a symplectic rational manifold $(X,\omega)$ with a framing $\{H,E_1,\cdots,E_n\}$ and anti-canonical class $K_0=-3H+E_1+\cdots+E_n$ , for each $k\in\ZZ_{+}$, we consider the following subsets of homology classes

%\[\mathcal{SW}_k(X):=\{A\in H_2(X;\ZZ)\,|\,ind(A)\geq 2k,\,A\cdot H>0\};\]
%\[\mathcal{GT}_k(X):=\{A\in H_2(X;\ZZ)\,|\,ind(A)\geq 2k,\,Gr(A)\neq 0\};\]
%\[\mathcal{SW}_k(X,\omega):=\{A\in H_2(X;\ZZ)\,|\,ind(A)\geq 2k,\,SW_{\omega,-}(A)\neq 0\}.\]

%Note that we always have $\mathcal{GT}_k(X)\subset \SW_k(X)$ due to positivity of intersection. Also, this inclusion is strict since $H+2E_1\in \SW_1(X)\setminus \mathcal{GT}_1(X)$.
%\begin{lemma}
 %   For any $[\omega]\in \mathcal{C}_{K_0}$ and $A\in\mathcal{SW}_k$, we have $\omega(A)>0$. As a consequence, $\SW_k(X)\subseteq\SW_k(X,\omega)$.
%\end{lemma}

%\begin{proof}
%    Firstly, let's notice that the action of $D_{K_0}$ preserves $\SW_k$, which is to say, for any $f\in D_{K_0}$, $f(\SW_k)=\SW_k$. This is because 
%$f$ is generated by reflections along $H_{123}$ and $E_i-E_j$. For $A=aH-\sum_{i=1}^nb_iE_i\in\SW_k$, reflection along $H_{123}$ will turn $A$ into $(2a-b_1-b_2-b_3)H-(a-b_2-b_3)E_1-(a-b_1-b_3)E_2-(a-b_1-b_2)E_3-\cdots$. If $2a-b_1-b_2-b_3\leq 0$, then $b_1^2+b_2^2+b_3^2\geq \frac{4}{3}a^2$ and thus $ind(A)=a^2+3a-\sum_{i=1}^n(b_i^2+b_i)\leq -\frac{1}{3}a^2+a<2$, which is a contradiction.
 %   Now if $A^2\geq 0$, by light cone lemma we have $\omega(A)>0$. Otherwise, $A^2<0$ will imply $c_1(A)\geq 3$. Note that a fundamental region in $\mathcal{C}_{K_0}$ under the action of $D_{K_0}$ is included in the cone generated by the vectors $(1,1,0,\cdots,0),(1,\frac{1}{2},\frac{1}{2},0,\cdots),\cdots$. The condition of $ind(A)\geq 2k$ $c_1(A)\geq 3$ guarantee the positivity on this cone and thus the entire $K$-cone by first paragraph. 
%\end{proof}

%\begin{lemma}
%$\SW_k(X)=\SW_k(X,\omega)$ for all $c_1$-positive $\omega$.
%\end{lemma}

%\begin{proof}[Sketch of proof]
 %   We use Lagrange multiplier to show if $A=-aH+\sum b_iE_i$ with $a,b_i\geq 0$ satisfies $ind(A)\geq 2$, then for $[\omega]$ in the vertex of reduced $c_1$-positive polytope, $\omega(A)<0$. Note that we have $a^2-3a-2\geq \sum (b_i^2-b_i)$ and by reduced condition we can further assume $b_1\geq b_2\geq\cdots$. It's immediate to see at $(1,0,\cdots),(\frac{1}{2},\frac{1}{2},0,\cdots),(\frac{1}{3},\frac{1}{3},\frac{1}{3},0,\cdots)$ we have $\omega(A)<0$. For $(\frac{1}{3},\cdots)$ with $9$ entries being $\frac{1}{3}$, consider the hypersurface (actually a sphere centered at $(\frac{1}{2},\frac{1}{2},\cdots)$) $$\Sigma_a:=\{(b_1,\cdots,b_n)\,|\,\sum(b_i^2-b_i)=a^2-3a-2\}\subseteq \RR^n_{\geq 0}.$$
  %  The function $\sum_{i=1}^9\frac{1}{3}b_i$ attains its maximum either at the boundary (which is actually impossible by thinking about a sphere interesecting a plane) or the point $(b,\cdots,b,0,\cdots)$ with $9$ entries being $b$ such that $b^2-b=\frac{a^2-3a-2}{9}$. One can then compute $-a+3b<0$. For other vertices, one needs more complicated calculations...
    
   % For non-reduced but $\omega$, one still use the arguement that $D_{K_0}$ can not turn a class $A$ with $A\cdot H\leq 0$ and $ind(A)\geq 2$ into a class $\cdot H>0$.
%\end{proof}

%One can have the example of $-4H+E_1+\cdots+E_{40}\in\SW_{2}(X,\omega)\setminus\SW_2(X)$ for some $\omega$ which is not $c_1$-positive.

%\textcolor{red}{All such classes have nontrivial Gromov-Taubes invariants. This set is actually invariant under the variation of symplectic forms with same $c_1$. So next we always assume $\omega$ is normalized reduced with standard $c_1$ which enables us to write $\mathcal{GT}_k(X)$. The $k$-th algebraic capacity is then defined as }

%\begin{definition}
%For $\omega\in\mathcal{C}_{K_0}$ and $k\in\ZZ_+$, define
%$$c_{k}^{SW}(X,\omega):=\inf_{A\in \mathcal{SW}_k(X)}\omega(A)$$
%$$c_{k}^{GT}(X,\omega):=\inf_{A\in \mathcal{GT}_k(X)}\omega(A)$$
%\end{definition}

%\begin{lemma}
%For $\omega\in\mathcal{C}_{K_0}$, $c_k^{SW}(X,\omega)=c_k^{GT}(X,\omega)=f_k(X,\omega)$.
%\end{lemma}

%\begin{proof}[Sketch of proof]
%Only need to show the minimizer $A$ in $\SW_k(X)$ have non-trivial $Gr$. For reduced $\omega$, by Lemma \ref{lem:reduced}, $A$ must be reduced so that $A\cdot\mathcal{E}_{K_0}\geq 0$ so that $Gr(A)=SW_{\omega,-}(A)\neq 0$. For non-reduced $\omega$, use $f(\SW_k(X))=\SW_k(X)$ for all $f\in D_{K_0}$.
%\end{proof}

%For $c_1$-positive $\omega$, we thus use the unified notation $f_k(X,\omega)$ to denote both of them. As a corollary of Gromov compactness, one immediately sees that there exists $A\in\mathcal{GT}_k(X)$ such that $\omega(A)=f_{k}(X,\omega)$. However such a class $A$ will change as $\omega$ varies. As $\omega$ varies, $f_k$ may be viewed as a function over the normalized reduced symplectic cone.

\section{Tropical property}
From now on, $X$ will always be a rational manifold. We want to treat $f_k(X,[\omega])$ as a function with variable $[\omega]\in H^2(X;\RR)$. The first thing is to figure out the suitable domain for this function.

\subsection{Various kinds of symplectic cones}\label{section:symplecticcone}
Assume $X=\CC\PP^2\#n\overline{\CC\PP}^2$ with standard basis $\{H,E_1,\cdots,E_n\}\subset H_2(X;\ZZ)$. We can naturally identify $\RR^{n+1}$ with $H^2(X;\RR)$ using this basis by associating $(x_0,x_1,\cdots,x_n)$ to $x_0PD(H)-\sum_{i=1}^nx_iPD(E_i)$. Define the {\bf symplectic cone} to be
$$\mathcal{C}:=\{[\omega]\,|\,\omega\text{ is a symplectic form on }X\}\subset \RR^{n+1}.$$
By \cite{LiLiu01}, up to a diffeomorphism, any symplectic form on $X$ has the standard canonical class $K_0=PD(-3H+E_1+\cdots+E_n)$. This leads to the definition of the {\bf symplectic $K_0$-cone}
$$\mathcal{C}_{K_0}:=\{[\omega]\,|\,[\omega]\in\mathcal{C},K_{\omega}=K_0\}\subset \RR^{n+1}.$$

Let $D_{K_0}\subseteq Aut(H_2(X;\RR))$ be the group of homological actions by diffeomorphisms preserving the canonical class $K_0$. Note that $D_{K_0}$ naturally acts on $\mathcal{C}_{K_0}$. This action has a fundamental domain $\mathcal{P}$, which is called the {\bf reduced cone}, given by
\begin{itemize}
    \item $0<x_1<x_0$ when $n=1$;
    \item $0<x_2\leq x_1$, $x_1+x_2<x_0$ when $n=2$;
    \item $0<x_n\leq\cdots\leq x_1$, $x_1+x_2+x_3\leq x_0$ and $\sum_{i=1}^nx_i^2<x_0^2$ when $n\geq 3$.
\end{itemize}
Note that the condition $\sum_{i=1}^nx_i^2<x_0^2$ is redundant if $3\leq n\leq 8$ by Cauchy inequality. For the proof and more details, see \cite{ALLP-stability} and the references therein. By \cite{spaceofsymp} theorem 3.18, we actually have a bijection
$$\{\text{symplectic forms on }X\}/\text{symplectomorphisms}\xleftrightarrow[]{1-1} \mathcal{P}.$$ 
 If we want to also ignore the scalar multiplications, we can consider the {\bf normalized reduced region}
$$\tilde{\mathcal{P}}:=\{[\omega]\in\mathcal{P}\,|\,\omega(H)=1\}.$$

When $n\leq 9$, $\tilde{\mathcal{P}}$ has the shape of a polytope with some parts of the boundary points removed; when $n\geq 10$, $\tilde{\mathcal{P}}$ looks like a polytope with a chopped corner determined by a quadratic equation.

Finally, we introduce the {\bf $c_1$-nef cone} 
$$\mathcal{P}^{c_1>0}:=\{[\omega]\in\mathcal{P}\,|\,\omega(3H-E_1-\cdots -E_n)>0\},$$
and its normalized version {\bf $c_1$-nef region}
$$\tilde{\mathcal{P}}^{c_1>0}:=\{[\omega]\in\mathcal{P}^{c_1>0}\,|\,\omega(H)=1\}.$$
Note that when $n\leq 9$, $\tilde{\mathcal{P}}^{c_1>0}=\tilde{\mathcal{P}}$; when $n\geq 10$, a good thing is $\tilde{\mathcal{P}}^{c_1>0}$ still has the shape of a polytope by \cite{Enumerate} lemma 3.1. We describe the pattern of its vertices for the preparation of next section (to avoid tautology, we drop the first constant coordinate $x_0=1$ and only write $(x_1,\cdots,x_n)$ below) 
\begin{itemize}
    \item $n\leq 9$: $P_1=(0,0,\cdots,0),P_2=(1,0,\cdots,0),P_3=(\frac{1}{2},\frac{1}{2},0\cdots,0)$ and $P_i=(\underbrace{\frac{1}{3},\cdots,\frac{1}{3}}_{i-1},0,\cdots,0)$ for $4\leq i\leq n+1$;
    \item $n\geq 10$: $P_1,\cdots,P_{10}$ as $n\leq 9$, and $Q_{ij}:=t_{ij}P_i+(1-t_{ij})P_{j+1}$ for each $1\leq i\leq 9$, $10\leq j\leq n$, where $t_{ij}$ is the unique number such that the sum of all entries of $Q_{ij}$ is $3$.
    
\end{itemize}

\subsection{Finiteness}
Now we can view the tamed capacity $f_k$ as a function over $\mathcal{C}$ or some of its subsets described in the previous section. The aim of this section is to prove the following:
\begin{theorem}\label{thm:main}
    $f_k$ is a tropical polynomial over the $c_1$-nef cone $\mathcal{P}^{c_1>0}$; when $n\leq 8$, the tropical property still holds over the larger symplectic $K_0$-cone $\mathcal{C}_{K_0}$.
\end{theorem}



By proposition \ref{prop:equivalentdef}, we will consider the optimization problem over the set 
$$U_5=\{A\in H_2(X;\ZZ)\,|\,ind(A)\geq 2k,A\cdot H>0\}$$
which doesn't depend on either $\omega$ or $J$ when we fix the canonical class $K_0$. Firstly, we require the following fact:

\begin{lemma}\label{lemma:U5preserve}
    (1) Any $\phi\in D_{K_0}$ satisfies $\phi(U_5)=U_5$.
    
    (2) Assume $n\leq 8$, then for any $A\in U_5$, the orbit set $\{\phi(A)\,|\,\phi\in D_{K_0}\}\subset U_5$ is finite.\end{lemma}

\begin{proof}
    (1) We only need to prove $\phi(U_5)\subseteq U_5$ and then apply it to $\phi^{-1}$. By \cite{LiWuLag} Proposition 4.7 (see also \cite{Ellipsoidannals} Proposition 1.2.12), $\phi$ is generated by reflections along $E_i-E_j$ and $H-E_1-E_2-E_3$. For $A=aH-\sum_{i=1}^nb_iE_i\in U_5$,the reflections along $E_i-E_j$ obviously will stay in $U_5$ since they merely switch $b_i$ and $b_j$. For reflection along $H-E_1-E_2-E_3$, it will turn $A$ into $$(2a-b_1-b_2-b_3)H-(a-b_2-b_3)E_1-(a-b_1-b_3)E_2-(a-b_1-b_2)E_3-\sum_{i\geq 4} b_iE_i.$$ If $2a-b_1-b_2-b_3\leq 0$, then $b_1^2+b_2^2+b_3^2\geq \frac{4}{3}a^2$ and thus $$ind(A)=a^2+3a-\sum_{i=1}^n(b_i^2+b_i)\leq -\frac{1}{3}a^2+a<2,$$ which is a contradiction. So it also preserves $U_5$.

    (2) Note that $K_0\cdot \phi(A)=K_0\cdot A$. Therefore if $\phi(A)=cH-\sum _{i=1}^nd_iE_i$, we have
    $$ind(\phi(A))=c^2-\sum_{i=1}^nd_i^2-K_0\cdot A\leq c^2-\frac{1}{8}(\sum_{i=1}^nd_i)^2-K_0\cdot A$$
    $$=c^2-\frac{1}{8}(3c+K_0\cdot A)^2-K_0\cdot A=-\frac{1}{8}c^2-\frac{3K_0\cdot A}{4}c-((K_0\cdot A)^2+K_0\cdot A).$$
    We see that for $ind(\phi(A))\geq 2k$, $c$ must be bounded and thus the orbit is finite.
\end{proof}

    
To prove Theorem \ref{thm:main}, we now introduce a partial order $\geq$ on the set $U_5$. For $A,B\in U_5$ we say $A\geq B$ if $\omega(A)\geq \omega(B)$ for all $[\omega]$ in the $c_1$-nef cone $\mathcal{P}^{c_1>0}$. We say $A\in U_5$ is minimal if there doesn't exist any other $B\in U_5$ such that $A\geq B$. A class of the form $aH-\sum_{i=1}^nb_iE_i$ with $a>0,b_1\geq b_2\geq\cdots b_n\geq 0,a\geq b_1+b_2+b_3$ is called {\bf reduced}.

\begin{lemma}\label{lem:stabilize}
 Every chain $A_1\geq A_2\geq\cdots$ in $(U_5,\geq)$ will stabilize. 
 \end{lemma}
\begin{proof}
    Pick finitely many generic points in the interior of $c_1$-nef cone so that the evaluation of a class on those points determines the evaluation on the entire polytope. If the chain doesn't stabilize, there must exist one $[\omega]$ among those points such that $\omega(A_1)>\omega(A_2)>\cdots$.  Then it will contradict Gromov compactness as lemma \ref{lem:min}.
\end{proof}

 \begin{lemma}\label{lem:reduced}
Every minimal element $A=aH-\sum_{i=1}^nb_iE_i\in U_5$ must be reduced and satisfies $3a-\sum_{i=1}^nb_i\geq 1$.
\end{lemma}
\begin{proof}
 We may assume $a>3$ by checking all the cases for $a=1,2,3$ from the index constraint. If $b_i<0$ for some $1\leq i \leq n$, then $A':=A+b_iE_i\in U_5$ will satisfy $A\geq A'$; if $b_i<b_j$ for some $1\leq i<j\leq n$, then $A':=A-(b_j-b_i)(E_i-E_j)\in U_5$ will satisfy $A\geq A'$; if $a<b_1+b_2+b_3$, then $A':=A-(H-E_1-E_2-E_3)\in U_5$ will satisfy $A\geq A'$. Thus $A$ must be reduced. If $3a-\sum_{i=1}^nb_i\leq 0$, then $A':=A-(3H-\sum_{i=1}^n E_i)$ has $ind(A')=ind(A)-2(3a-\sum_{i=1}^nb_i)\geq ind(A)$. This implies $A'\in U_5$ and $A\geq A'$. We thus know $3a-\sum_{i=1}^nb_i\geq 1$.
\end{proof}


\begin{lemma}\label{lem:c1bound}
    For each $n,k$, there exist constants $A_{n,k},C_{n,k}$ such that if $A=aH-\sum_{i=1}^nb_iE_i\in \mathcal U_5$ with $a>A_{n,k}, 3a-\sum_{i=1}^{\min\{n,9\}}b_i>C_{n,k},3a-\sum_{i=1}^nb_i\geq 1$ and is reduced, then $A\geq kH-kE_1$. In particular, $A$ is not minimal.
\end{lemma}

\begin{proof}
The strategy is to test the values of $A$ and $kH-kE_1$ at all the vertices of the $c_1$-nef polytope $\tilde{\mathcal{P}}^{c_1>0}$. When $n\leq 9$, the $c_1$-nef polytope has vertices $P_1=(0,\cdots,0),P_2=(1,0,\cdots,0),P_3=(\frac{1}{2},\frac{1}{2},0,\cdots,0),P_4=(\frac{1}{3},\frac{1}{3},\frac{1}{3},0,\cdots,0),\cdots, P_{n+1}=(\underbrace{\frac{1}{3},\cdots,\frac{1}{3}}_{n})$. When $n\geq 10$, the additional vertices will be the point on the segment connecting $(\underbrace{\frac{1}{3},\cdots,\frac{1}{3}}_{\geq 10},0,\cdots,0)$ and some $P_j$ satisfying the sum of all entries is $3$. They are of the forms $Q_{jl}:=tP_j+(1-t)(\underbrace{\frac{1}{3},\cdots,\frac{1}{3}}_{l-1\geq 10},0,\cdots,0)$ with $0< t< 1$. The values of $A$ at $P_1,P_2,P_3$ are $a,a-b_1,\frac{1}{2}(a+a-b_1-b_2)\geq \frac{1}{2}a$. So when $a>k$, those values will be larger than the values of $kH-kE_1$ at $P_1,P_2,P_3$ which are $k,0,\frac{k}{2}$.

At the vertices $Q_{2l},Q_{3l}$, the values of $A$ are 
\[t(a-b_1)+\frac{1-t}{3}(3a-\sum_{i=1}^lb_i)\,,\,t(a-\frac{1}{2}b_1-\frac{1}{2}b_2)+\frac{1-t}{3}(3a-\sum_{i=1}^lb_i).\] Since $0<t<1$, both of them would be greater than $\varepsilon\max\{a-b_1,3a-\sum_{i=1}^lb_i\}$ for some positive number $\varepsilon=\min\{t,\frac{1-t}{3}\}$. Now we use the fact:
\begin{itemize}
	\item For any $X,Y>0$, there exists a constant $\alpha_{X,Y}$ such that if $a>\alpha_{X,Y},a-b_1<X$, then $3a-\sum_{i=1}^lb_i>Y$.
\end{itemize} 
This is because by reduced condition on the class $A$, $a-b_1<X$ will imply $b_3\leq \frac{X}{2}$. Then one can see $$3a-\sum_{i=1}^lb_i\geq 2a+(a-b_1-b_2)-(l-2)b_3\geq 2a-(l-2)\frac{X}{2}.$$ Therefore there exists $A_{n,k}$ such that if $a\geq A_{n,k}$ then $\max\{a-b_1,3a-\sum_{i=1}^lb_i\}$ is large enough.

 For all the other vertices, we claim that the values of $A$ must be greater than $a-\frac{1}{3}\sum_{i=1}^{\min\{n,9\}}b_i$. This is obvious for $P_4,P_5,\cdots$. For other $Q_{jl}$'s with $j\neq 2,3$, we can use another fact which is the consequence of Chebyshev's sum inequality and the reduced condition $b_1\geq \cdots\geq b_n$:
\begin{itemize}
    \item $-\sum_{i=1}^l\lambda_ib_i\geq -\frac{1}{3}\sum_{i=1}^9b_i$ if $\sum_{i=1}^l\lambda_i=3$ and $0\leq \lambda_i\leq \frac{1}{3}$ for all $i$.
\end{itemize}
 Finally it suffices to let $C_{n,k}$ be the triple of maximum among the values of $kH-kE_1$ at all the vertices. 
\end{proof}






Now our main result can be converted to the following:
\begin{prop}\label{prop:finite}
    The set of minimal elements in $U_5$ is finite.
\end{prop}

\begin{proof}
 We will show minimal elements $A=aH-\sum_{i=1}^nb_iE_i\in U_5$ have a common upper bound of the coefficient $a$. By Lemma \ref{lem:reduced} and \ref{lem:c1bound} we can further assume $A$ is reduced and satisfies \[3a-\sum_{i=1}^nb_i\geq 1\,,\, 3a-\sum_{i=1}^{\min\{n,9\}}b_i\leq C_{n,k}.\] When $n<9$ we can pretend that we are in the case when $n=9$ with $b_{n+1}=\cdots=b_9=0$. So next we always suppose $n\geq 9$. Note that from the assumptions, \[\sum_{i>9}b_i=(3a-\sum_{i=1}^{9}b_i)-(3a-\sum_{i=1}^{n}b_i)< C_{n,k}.\]
 Denote $3H-\sum_{i=1}^8E_i$ by $B$. We can write \[A=cH-\sum_{i=1}^8d_iE_i+\sum_{i=9}^nb_i(B-E_i),\]
 where $c=a-3\sum_{i\geq 9}b_i, d_i=b_i-\sum_{j\geq 9}b_j$. Since $3c-\sum_{i=1}^8d_i=3a-\sum_{i=1}^nb_i$ we have $1\leq 3c-\sum_{i=1}^8d_i\leq C_{n,k}$. By reduced condition on $A$, \[X_1:=c-d_1-d_2-d_3,X_2:=c-d_4-d_5-d_6,X_3:=c-d_7-d_8\] will satisfy $0\leq X_1\leq X_2\leq X_3$. For any $1\leq i\leq 8$, the inequality $X_1+X_2+X_3\leq C_{n,k}$ would then imply $$d_i\leq d_1\leq d_1+(d_2-d_7)+(d_3-d_8)=X_3-X_1\leq C_{n,k}.$$ On the other hand, we also have $$d_i=(b_i-b_9)-\sum_{j>9}b_j>-C_{n,k}.$$ Thus we have a bound $D_{n,k}$ for all $|d_i|$ and $|c|$. We then compute \[ind(A)=c^2-\sum _{i=1}^8d_i^2+\sum_{9\leq i<j\leq N}2b_ib_j+(1+\sum_{i=9}^n2b_i)(3c-\sum_{i=1}^8d_i)\]
 \[\geq c^2-\sum _{i=1}^8d_i^2+\sum_{i=9}^n2b_i\geq -8D_{n,k}^2+\sum_{i=9}^n2b_i .\]
As a consequence, whenever $\sum_{i=9}^nb_i>4D_{n,k}^2+k$, $A-(B-E_i)$ still has index $\geq 2k$ for any $9\leq i\leq n$. Since we may assume $a>3$, $A-(B-E_i)\in U_5$. One can see that $A\geq A-(B-E_i)$. Therefore for a minimal element $A$, we then have $a=c+3\sum_{i=9}^nb_i\leq D_{n,k}+12D_{n,k}^2+3k$.
\end{proof}


\begin{proof}[Proof of Theorem \ref{thm:main}]
Combining lemma \ref{lem:stabilize} and proposition \ref{prop:finite} we get the tropical property over the $c_1$-nef cone: there exists finitely many $A_1,\cdots,A_m\in U_5$ such that the capacity function is given by 
$$f_k|_{\mathcal{P}^{c_1>0}}([\omega])=\min \{\omega(A_1),\cdots,\omega(A_m)\}.$$

Now for any $[\omega']\in\mathcal{C}_{K_0}$, it is given by $g^*([\omega])$ for some $g^*\in D_{K_0}$\footnote{Here we are sloppy about the notation: we use $D_{K_0}$ to denote also the cohomological actions.} and $[\omega]\in\mathcal{P}^{c_1>0}$. We then have
$$f_k|_{\mathcal{C}_{K_0}}([\omega'])=\min \{\omega'(g_*(A_i))\,|\,g_*\in D_{K_0},1\leq i\leq m\}.$$ Therefore, when $n\leq 8$, by lemma \ref{lemma:U5preserve} the set on the right hand side must be finite and we have the tropical property over $\mathcal{C}_{K_0}$.
\end{proof}

\begin{rmk}\label{rmk:nonc1nef}
    One can not hope to extend the tropical property from $\mathcal{P}^{c_1>0}$ to the larger cone $\mathcal{P}$ removing the $c_1$-nef condition. Consider the following classes for $n=10$:
    \[N_{a}=3H-E_1-\cdots-E_8+\frac{a^2+a}{2}(3H-E_1-\cdots-E_9)-aE_{10}.\] Then one can compute \[ind(N_{a})=N_a^2-K_0\cdot N_a=(1-a^2+a^2+a)-(-1+a)=2.\] So by taking $a\in\ZZ_+$, we obtain an infinite family of classes with index $2$. Note that $$N_{a+1}-N_a=(a+1)(3H-E_1-\cdots-E_9)-E_{10},$$ and one can take $\varepsilon_a>0$ small enough such that $$[\omega_a]:=(1,\frac{1-\varepsilon_a}{3},\cdots,\frac{1-\varepsilon_a}{3},(3a+4)\varepsilon_a)\in\mathcal{P}.$$
    Then $N_{a+1}$ will have minimal area among the classes $\{N_1,\cdots,N_a,N_{a+1}\}$. This means we will need infinitely many minimizers for those non $c_1$-nef $[\omega_a]$'s.

    Also one can not expect the tropical property over $\mathcal{C}_{K_0}$ for $n\geq 9$. This is because the orbit of classes in $U_5$ under the action $D_{K_0}$ becomes infinite when $n\geq 9$.
\end{rmk}

We prove an immediate corollary of the tropical property which will be used in the next section.
\begin{corollary}\label{cor:blowup}
Assume $[\omega]$ is a $c_1$-nef symplectic class on $X$. Let $\omega_{\varepsilon}$ be the symplectic form on $X\#\overline{\CC\PP}^2$ with small blowup size $\varepsilon$. Then we have
$$\lim_{\varepsilon\rightarrow 0}f_k(X\#\overline{\CC\PP}^2,\omega_{\varepsilon})=f_k(X,\omega).$$
\end{corollary}

\begin{proof}
    On the one hand, since the natural inclusion $$i:H_2(X;\ZZ)\hookrightarrow H_2(X\#\overline{\CC\PP}^2;\ZZ)$$ preserves the index, the minimizers for $(X,\omega)$ can also be the minimizers for $(X\#\overline{\CC\PP}^2,\omega_{\varepsilon})$ by composing this $i$. So we have $f_k(X\#\overline{\CC\PP}^2,\omega_{\varepsilon})\leq f_k(X,\omega)$. On the other hand, by theorem \ref{thm:main} we only need to consider finitely many minimizers $A_j$'s for $(X\#\overline{\CC\PP}^2,\omega_{\varepsilon})$ to compute its $f_k$. Note that the natural projection $$p:H_2(X\#\overline{\CC\PP}^2;\ZZ)\rightarrow H_2(X;\ZZ)$$ doesn't decrease index. So if $\varepsilon$ goes to zero, by finiteness $\min_j\{\omega_{\varepsilon}(A_j)\}$ will go to $\min_j\{\omega(p(A_j))\}$, which is no less than $f_k(X,\omega)$.
\end{proof}

\section{Relation with ECH capacity}
From now on, $(X,\omega)$ is further restricted to be a symplectic toric rational manifold. Note that this means $\omega$ must be $c_1$-nef. If the moment polygon is $\Omega$, after an $AGL(2;\ZZ)$ transformation, we can make it sit in the first quadrant. The preimage of $\Omega$ under the map $$\mu:\CC^2\rightarrow \RR^2,\,\,\,\,\,\,\,(z_1,z_2)\mapsto (\pi|z_1|^2,\pi|z_2|^2)$$ is a convex toric domain in the sense of \cite{Danconcave}. We denote it by $X_{\Omega}$, which can also be thought as the complement of $b_2(X)$ components of the toric boundary divisors in $X$. For such a domain there is a sequence of capacities $c_k^{ECH}(X_{\Omega})$ associated to it coming from embedded contact homology (\cite{Hutquantitative},\cite{Hutlecture}).  We are going to prove the following result which relates the algebraic capacity of $(X,\omega)$ with the ECH capacity of $X_{\Omega}$:

\begin{prop}\label{prop:ech}
If $(X,\omega)$ has a toric action with moment polygon $\Omega$ then $f_k(X,\omega)=c_k^{ECH}(X_{\Omega})$.
\end{prop}

In particular, it implies an interesting phenomenon: if $(X,\omega)$ admits different toric actions with different moment polygons $\Omega_1,\Omega_2$, the ECH capacities of $X_{\Omega_1}$ and $X_{\Omega_2}$ are all the same. This result is not new and has been proved in \cite{BenEhrhart} in a more general sense: $\Omega$ is only assumed to be rational convex which might not be Delzant, and the ECH capacity is identified with the algebraic capacity of a possibly non-smooth projective surface. However, our proof doesn't involve algebraic toric geometry and can be viewed as an application of the previous tropical property.


\subsection{Weight sequence and symplectic cone}\label{section:weightsequence}

Given a Delzant polygon $\Omega$ sitting in the first quadrant, one can associate a sequence of positive numbers $(a,b_1,\cdots,b_k,c_1,\cdots,c_l)$, which is called the weight sequence and denoted by $w(\Omega)$. See \cite{Danconcave} for its definition. We need the following two properties of weight sequence.
\begin{itemize}
    \item When walking clockwisely around $\partial\Omega$, one will get the primitive vectors for all the edges. If there is an edge whose vector is $(1,-1)$, then the triangle enclosed by the line extending that edge and $x$-axis, $y$-axis must be the one used to define the first component $a$ in $w(\Omega)$. In this circumstance, the other weights $b_*,c_*$ can be interpreted as the sizes of the corner chopping procedure from the triangle of size $a$ to the Delzant polygon $\Omega$. Therefore, its corresponding closed symplectic manifold must be $\CC\PP^2\#(k+l)\overline{\CC\PP}^2$ with some $c_1$-nef symplectic form $\omega$. After composing some element in $D_{K}$, the weight sequence $w(\Omega)$ will be turned into a unique element in $\mathcal{P}^{c_1>0}$. See figure \ref{fig:weight1} below for an example.
     \begin{figure}[H]
		\includegraphics*[width=\linewidth]{weight1}
 
		\caption{The weight sequence of this $\Omega$ is given by $(7,3,1,2,1)$. The closed symplectic toric manifold is $\CC\PP\#4\overline{\CC\PP}^2$ with $[\omega]=(7,3,2,1,1)\in\mathcal{P}^{c_1>0}$.\label{fig:weight1}}
	\end{figure}
    \item If there is no such a vector $(1,-1)$, then there must be a unique vertex $p$ of $\Omega$ lying on the segment from $(0,a)$ to $(a,0)$. Now one can perform corner choppings near $p$ of small sizes $\varepsilon_1(t),\cdots,\varepsilon_r(t)$ to get a new Delzant polygon $\Omega'_t$ with one edge whose primitive vector is $(1,-1)$. If we let all $\varepsilon_i(t)$ go to $0$ as $t$ goes to $0$, the weight sequence $w(\Omega_t')$ will converge to $w(\Omega)$ after making all of them in a descending order. Therefore, by composing some automorphism in $D_{K}$ as above, we will obtain an element in $\overline{\mathcal{P}^{c_1>0}}$, the closure of $c_1$-nef cone of the manifold $\CC\PP^2\#(k+l)\overline{\CC\PP}^2$. See figure \ref{fig:weight2} below.
    \begin{figure}[H]
		\includegraphics*[width=\linewidth]{weight2}
 
		\caption{The weight sequence of this $\Omega$ is given by $(8,5,3,3)$. One can do toric blowups twice to get those $\Omega'_t$, where the sizes are $\varepsilon_1(t_1)=0.75,\varepsilon_2(t_1)=0.25$; $\varepsilon_1(t_2)=1,\varepsilon_2(t_2)=0.5$; $\varepsilon_1(t_3)=2,\varepsilon_2(t_3)=1$. We see that $w(\Omega'_{t_3})=(5,2,2,1)$, $w(\Omega'_{t_2})=(6.5,3.5,2.5,2)$ and $w(\Omega'_{t_1})=(7,4,2.75,2.25)$ are converging to $w(\Omega)$. By composing an automorphism in $D_K$ on $w(\Omega)$ make it reduced, we will get $(5,2,0,0)$ in the closure of $c_1$-nef cone $\overline{\mathcal{P}^{c_1>0}}$ of the manifold $\CC\PP\#3\overline{\CC\PP}^2$.  \label{fig:weight2}}
	\end{figure}
\end{itemize}


\subsection{Proof of $f_k=c_k^{ECH}$}
We rely on the formula of \cite{Danconcave}, for ECH capacity in terms of weight sequences:

\begin{lemma}[\cite{Danconcave},\cite{CCFHR},\cite{BenEhrhart}]\label{lem:formula}
    If $\Omega$ has weight sequence $w(\Omega)=(a,b_1,\cdots,b_k,c_1,\cdots,c_l)$, then 
    $$c_k^{ECH}(X_{\Omega})=\min_{k_i,m_j\in\ZZ_{\geq 0}}\{c^{ECH}_{k+\sum_ik_i+\sum_jm_j}(B(c))-\sum_ic^{ECH}_{k_i}(B(a_i))-\sum_jc^{ECH}_{m_j}(B(b_j))\}$$
    $$=\min_{x(x+3)-\sum_iy_i(y_i+1)-\sum_jz_j(z_j+1)\geq 2k}\{xc-\sum_i y_ia_i-\sum_jz_jb_j\}$$
\end{lemma}
Note that the first equality already appeared in section 5.2 of \cite{BenEhrhart}. The second equality comes from the fact that 
$$c_k^{ECH}(B(a))=da,\,\,\,\text{where }d \text{ satisfies } d(d+1)\leq 2k\leq d(d+3).$$

\begin{proof}[Proof of proposition \ref{prop:ech}]
    Note that the requirement $$x(x+3)-\sum_iy_i(y_i+1)-\sum_jz_j(z_j+1)\geq 2k$$ of the formula in lemma \ref{lem:formula} is actually the same thing as $ind(A)\geq 2k$ for a homology class $A=xH-\sum_i x_iE_i-\sum_j y_jE_j$. If we are in the first case of section \ref{section:weightsequence}, then the weight sequence corresponds to an element of $\mathcal{P}^{c_1>0}$. So the optimization problems for $f_k$ and $c_k^{ECH}$ are completely the same. If we are in the second case, we then apply corollary \ref{cor:blowup} to write $$f_k(X,\omega)=\lim_{t\rightarrow 0}f_k(X\#r\overline{\CC\PP}^2,\omega_t),$$ where $\omega_t$ is given by small blowups of sizes $\varepsilon_1(t),\cdots,\varepsilon_r(t)$ as in section \ref{section:weightsequence}. Note that by the first case, $$f_k(X\#r\overline{\CC\PP}^2,\omega_t)=c_k^{ECH}(X_{\Omega'_t}).$$
    Since ECH capacity is continuous with respect to the deformation of the contact boundary, 
    $$\lim_{t\rightarrow 0}c_k^{ECH}(X_{\Omega_t'})=c_k^{ECH}(X_{\Omega}).$$
    Finally we can combine them to get $$f_k(X,\omega)=c_k^{ECH}(X_{\Omega}).$$
\end{proof}







\bibliographystyle{amsalpha}
	\bibliography{mybib}{}
\end{document}
