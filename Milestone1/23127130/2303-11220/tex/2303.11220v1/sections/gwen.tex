% !TeX root = ../main.tex

\makeatletter
\AC@reset{gwen}
\makeatother

\section{GWEn}\label{sec:gwen}
\noindent 
% \begin{figure}[!t]
%     \centering
%     \input{figures/tikz/gwen_3d_rendering.tex}
%     \caption{$3$D rendering of fully assembled GWEn with all available parts.}\label{fig:GWEn_complete}
% \end{figure}
The main goal of this work is to determine the ranging accuracy and reliability of \ac{uwb} smartphones in a standardized, repeatable, reproducible, and automated way.
This enables a systematic evaluation and comparison of our \acp{dut}.

To accomplish this, we develop, build, and evaluate a \ac{gwen}. \Cref{fig:gwen_rotation_axes} shows a labeled build of \ac{gwen}. 
It is equipped with two rotation axes, one in the base and one in the arm as depicted in \cref{fig:gwen_rotation_axes}.
Throughout this paper, the angle $\phi$ denotes the arm rotation around the x-axis and the angle $\theta$ denotes the base rotation around the y-axis. 

\subsection{Measurements with GWEn}
\Ac{gwen} is a multipurpose tool for conducting wireless measurements and evaluating antennas at a small scale. 

\begin{figure}[!t]
    \centering
    % \input{figures/tikz/gwen_3d_rendering_axes.tex}
    \includegraphics[width=\linewidth]{figures/GWEN_3d_render_axes_notation.pdf}
    \caption{$3$D rendering of an assembled build of GWEn, highlighting the two rotation axes in red. Both axes can rotate independently for a full 360° each.}\label{fig:gwen_rotation_axes}
\end{figure}

Each axis can rotate the full 360° making it possible to position the \ac{dut}, attached to the holding plate, in any desired orientation with a resolution of $\sim$0.01°.
A variety of devices can be attached to the holding plate, allowing all kinds of wireless transmission measurements or antenna evaluations. 
For an optimal measurement, the antenna of the \ac{dut} must be as close as possible to the intersection of the two rotation axes.
The tower on the rotation plate can be moved further outward or inward to accommodate devices of different lengths.
The holding plate on the tower can be moved further up or down to adapt \ac{gwen} to devices of different thicknesses.
To be able to extract the measurement data from the \ac{dut}, it is connected to \ac{gwen} via a USB connection.

\ac{gwen} can be controlled over a web interface that is reachable via its own Wi-Fi hotspot. Furthermore, it's also possible to create custom Python scripts that allow different movement patterns. 

To create meaningful and repeatable measurements, we have developed a workflow for \ac{gwen} measurements:
\begin{enumerate}
    \item \ac{gwen} setup: This includes setting up \ac{gwen} at the test location, mounting the \ac{dut} and setting up the measurement parameters.
    \Cref{ssec:general_setup} goes into more detail on the specific setup used in our work.
    \item Start the measurement.
    From now on, \ac{gwen} will automatically move the \ac{dut} to previously specified orientations, take the desired number of measurements, and store them accordingly.
    \item A measurement between two iPhones with the settings described in \cref{ssec:general_setup} takes $\sim$90 minutes. No monitoring of the system is required during this period. 
    \item Download the measurement.
    After finishing the measurements, the recordings can be downloaded as zip files.
    Our evaluation software directly works on the generated zip files and generates graphs to evaluate the performance. 
\end{enumerate}

\subsection{Manufacturing}\label{ssec:gwen_manufacturing}
We designed \ac{gwen} to be $3$D-printed using a fused deposition modeling $3$D printer.
Besides belts, screws, bearings and the electrical components all parts are $3$D-printed.
We use \ac{pla} as a printing material. \Ac{pla} has only very little influence on electromagnetic signals \cite{boussatourDielectricCharacterizationPolylactic2018}.
\SI{1}{\centi\metre} of solid \ac{pla} adds about \SI{0.6}{\centi\metre} of measured distance to an \ac{uwb} signal.
We evaluate the interference introduced by \ac{gwen} with more detail in \cref{sec:eval_gwen}.

$3$D-printing is a low-cost and widely available option that allows easy reproduction of desired parts.
Furthermore, it enables modifications, as new parts can be designed and $3$D-printed rapidly.
It takes about $4.5$ days to print all parts on a Prusa i3 MK3S+~\cite{prusaresearcha.s.OriginalPrusaI3}. 
However, this time depends heavily on the printer and the print settings.
Assembling \ac{gwen} and soldering up the electrical components requires additional $\sim$80 hours of manual work.

The parts that cannot be $3$D-printed are off-the-shelf parts.
In total, the material cost for \ac{gwen} was $\sim$410~€.
We released the $3$D files, a list with all additional components required, detailed build instructions, as well as wiring diagrams and source code in our Zenodo repository~\cite{krollmannGWEnGimbalBased2022}.


The software of \ac{gwen} consists of three individual parts:
\begin{enumerate*}
    \item ~the~\textit{web interface} written in Python,
    \item ~the~\textit{measurement software} written in Python, and
    \item ~the~\textit{hardware controller} written in C/C++.
\end{enumerate*}
This modularity allows anyone to rebuild \ac{gwen} as well as expand and adapt it to individual needs.


\subsection{Measurement recording}\label{ssec:sources}

We programmed \ac{gwen} to interact with a variety of devices (see \cref{tab:available_uwb}) and process their \ac{uwb} measurements.
Since the devices come from different manufacturers and run with different software, \ac{gwen} offers the possibility to add new communication options with the help of \textit{sources}.
Each \textit{source} is a plugin written in Python that has to be defined once and provides functions for \ac{gwen} to extract the necessary data from the device.
For smartphones, we use device logs to extract ranging data from the device (see \cref{ssec:dev_conf}).
The \textit{source} to be used for each measurement can be specified at the start of a measurement.

At the end of each measurement, \ac{gwen} creates a recording file.
It contains a JSON file with the setup settings used to create the recording as well as all made distance measurements ordered by their respective base and arm angle.
It is furthermore possible to add additional files, e.g., a complete log of the measurement.
All measurement data is backed up constantly and can be restored. 



