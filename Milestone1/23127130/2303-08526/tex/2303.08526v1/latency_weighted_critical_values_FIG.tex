% For FOG ENVIRONMENT ONLY

\usepgfplotslibrary{groupplots}

\begin{figure}[t]
% 	\centering
\begin{tikzpicture}
%/*
\pgfplotsset{
    % scaled y ticks = false,
    width=0.25\textwidth,
    height=40mm,
    % axis on top,
    xtick={50,60,70,80,90,100},
    xticklabels={50,60,70,80,90,100},
    x tick label style={rotate=90,anchor=east,font=\tiny},
    xmin=50,xmax=100,
    ymin=5,ymax=200,
    % xminorticks=true,
    % yminorticks=true,
    % ylabel shift={-1.5em},
    ylabel style={align=center},
    every axis/.append style={font=\scriptsize},
    every axis title/.style={below right,at={(0.37,-0.11)}},
}     
    \begin{groupplot}[ 
        group style={
            group size=4 by 1,
            % vertical sep=10mm,  
            horizontal sep=15mm,
        },
    ]
    % ------------------------------------------------
    % Plot [1, 1]
    %-----------
    \nextgroupplot[
            title={(a)},            
            % yshift=10pt,
            % xlabel={},
            ylabel={Avg. latency (in ms)},            
    ]
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=fog_p5]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=fog_p4]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=fog_p3]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=fog_p2]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=fog_p1]{\latencyWCVweightuniform}; 
    % (Relative) Coordinate at top of the first plot
    % \coordinate (c1) at (rel axis cs:0,1);
    %-----------
    % Plot [1, 2]
    %-----------
    \nextgroupplot[
            title={(b)},
            % yshift=10pt,
            % xlabel={},
            % ylabel={}
    ]
        
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=fog_p5]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=fog_p4]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=fog_p3]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=fog_p2]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=fog_p1]{\latencyWCVweightonresource};
    % (Relative) Coordinate at top of the second plot
    \coordinate (c2) at (rel axis cs:0,0);% I moved this to the upper right corner
    %-----------
    % Plot [1, 3]
    %-----------
    \nextgroupplot[
            title={(c)},
            % yshift=10pt,
            % xlabel={},
            % ylabel={},
            legend style={legend columns=5,fill=none,draw=black,anchor=center,align=center, font=\scriptsize},
            legend to name=fred
    ]
        
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=fog_p5]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=fog_p4]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=fog_p3]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=fog_p2]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=fog_p1]{\latencyWCVweightonpriority};  
    \addlegendentry{p5};    
    \addlegendentry{p4};    
    \addlegendentry{p3};    
    \addlegendentry{p2};    
    \addlegendentry{p1};
    % (Relative) Coordinate at top of the third plot
    \coordinate (c3) at (rel axis cs:0,0);% I moved this to the upper right corner
    %-----------    
    % Plot [1, 4]
    %-----------
    \nextgroupplot[
            % yshift=10pt,
            % xlabel={},
            title={(d)},
    ]             
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=fog_p5]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=fog_p4]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=fog_p3]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=fog_p2]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=fog_p1]{\latencyWCVweightonmakespan};  
    % (Relative) Coordinate at top of the forth plot
    % \coordinate (c4) at (rel axis cs:0,1);% I moved this to the upper right corner
    \end{groupplot}
    \coordinate (c6) at ($(c2)!1.0!(c3)$);    
    \node[below] at (c6 |- current bounding box.south)
      {\footnotesize Number of tasks (in thousands)};    

    \coordinate (c6) at ($(c2)!1.0!(c3)$);    
    \node[above] at (c6 |- current bounding box.north)
      {\pgfplotslegendfromname{fred}};    
\end{tikzpicture}
\caption{Latency of different priority tasks in Fog environment under different weighted critical values\\ ($WV$) \scriptsize (a) $w_1=w_2=w_3$, (b) $w_1=0.2, w_2=0.3, w_3=0.5$, (c) $w_1=0.2, w_2=0.5, w_3=0.3$, (d) $w_1=0.5, w_2=0.3, w_3=0.2$} \vspace{-4mm}
\label{fig:sim:Ltncy_F}
\end{figure}


% ----------------------------------
% For CLOUD ENVIRONMENT ONLY ---------------------------------------------------------------------------
% ----------------------------------
\begin{figure}[h]
% 	\centering
\begin{tikzpicture}
%/*
\pgfplotsset{
    % scaled y ticks = false,
    width=0.25\textwidth,
    height=40mm,
    % axis on top,
    xtick={50,60,70,80,90,100},
    xticklabels={50,60,70,80,90,100},
    x tick label style={rotate=90,anchor=east,font=\tiny},
    xmin=50,xmax=100,
    ymin=50,ymax=2000,
    % xminorticks=true,
    % yminorticks=true,
    % ylabel shift={-1.5em},
    ylabel style={align=center},
    every axis/.append style={font=\scriptsize},
    every axis title/.style={below right,at={(0.37,-0.11)}},
}     
    \begin{groupplot}[ 
        group style={
            group size=4 by 1,
            % vertical sep=25pt,  % 
            horizontal sep=15mm,
        },
    ]
    % ------------------------------------
    % Plot [1, 1]
    %-----------
    \nextgroupplot[
            title={(a)},            
            % yshift=10pt,
            % xlabel={},
            ylabel={Avg. latency (in ms)},            
    ]
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=cloud_p5]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=cloud_p4]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=cloud_p3]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=cloud_p2]{\latencyWCVweightuniform}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=cloud_p1]{\latencyWCVweightuniform};
    % (Relative) Coordinate at top of the first plot
    % \coordinate (c1) at (rel axis cs:0,1);
    %-----------
    % Plot [1, 2]
    %-----------
    \nextgroupplot[
            title={(b)},
            % yshift=10pt,
            % xlabel={},
            % ylabel={}
    ]
        
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=cloud_p5]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=cloud_p4]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=cloud_p3]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=cloud_p2]{\latencyWCVweightonresource}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=cloud_p1]{\latencyWCVweightonresource};
    % (Relative) Coordinate at top of the second plot
    \coordinate (c2) at (rel axis cs:0,0);% I moved this to the upper right corner
    %-----------
    % Plot [1, 3]
    %-----------
    \nextgroupplot[
            title={(c)},
            % yshift=10pt,
            % xlabel={},
            % ylabel={},
            legend style={legend columns=5,fill=none,draw=black,anchor=center,align=center, font=\scriptsize},
            legend to name=fred
    ]
        
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=cloud_p5]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=cloud_p4]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=cloud_p3]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=cloud_p2]{\latencyWCVweightonpriority}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=cloud_p1]{\latencyWCVweightonpriority};  
    \addlegendentry{p5};    
    \addlegendentry{p4};    
    \addlegendentry{p3};    
    \addlegendentry{p2};    
    \addlegendentry{p1};
    % (Relative) Coordinate at top of the third plot
    \coordinate (c3) at (rel axis cs:0,0);% I moved this to the upper right corner
    %-----------    
    % Plot [1, 4]
    %-----------
    \nextgroupplot[
            % yshift=10pt,
            % xlabel={},
            title={(d)},
    ]             
        \addplot[smooth,mark=o,black] table[x=noofTasks,y=cloud_p5]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=x,red] table[x=noofTasks,y=cloud_p4]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=triangle*,blue] table[x=noofTasks,y=cloud_p3]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=square*,green] table[x=noofTasks,y=cloud_p2]{\latencyWCVweightonmakespan}; 
        \addplot[smooth,mark=diamond*,magenta] table[x=noofTasks,y=cloud_p1]{\latencyWCVweightonmakespan};  
    % (Relative) Coordinate at top of the forth plot
    % \coordinate (c4) at (rel axis cs:0,1);% I moved this to the upper right corner
    \end{groupplot}
    \coordinate (c6) at ($(c2)!1.0!(c3)$);    
    \node[below] at (c6 |- current bounding box.south)
      {\footnotesize Number of tasks (in thousands)};  % This is common x-label  

    \coordinate (c6) at ($(c2)!1.0!(c3)$);    
    \node[above] at (c6 |- current bounding box.north)
      {\pgfplotslegendfromname{fred}};    % this is for common Legend
\end{tikzpicture}
\caption{Latency of different priority tasks in Cloud environment under different weighted critical values \\($WV$) \scriptsize (a) $w_1=w_2=w_3$, (b) $w_1=0.2, w_2=0.3, w_3=0.5$, (c) $w_1=0.2, w_2=0.5, w_3=0.3$, (d) $w_1=0.5, w_2=0.3, w_3=0.2$} \vspace{-4mm}
\label{fig:sim:Ltncy_C}
\end{figure}