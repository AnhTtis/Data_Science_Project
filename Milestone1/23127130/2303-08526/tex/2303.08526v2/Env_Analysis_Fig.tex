\begin{figure}[t]
	\centering
\subfloat{\resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
    % \pgfplotsset{set layers}
        \begin{axis}[
                % ybar,
                % bar width=.12cm,
                % legend columns=3,
                % axis y line*=left, % axis y line*=right, 
                % legend columns=3,
                % legend pos=north west,
                % symbolic x coords={50,100,150,200,250,300,350,400,450,500},
                % xtick=data,
                % nodes near coords,
                % nodes near coords align={vertical},
                % y label style={at={(-0.1,0.5)}},                
                % ymajorgrids=true, xmajorgrids=true,  grid style=dashed                   
                width=0.5\textwidth,
                height=.4\textwidth,                
                ymin=50,ymax=100,xmin=0,xmax=550,
                axis y line*=left,
                ylabel={Avg. CPU capacity},                
                xlabel={Number of FNs},
                title style={at={(0.5,-0.23)},anchor=north},
                title = (a)
            ]
            \addplot[smooth,mark=o,black] table[x=noofFNs,y=avgCPUcapa]{\envAnalysisFNresCapacity}; 
            \label{CPU} 
        \end{axis}
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=.4\textwidth,
              axis x line=none,
              ymin=100, ymax=180,
              xmin=0,xmax=550,
              ylabel={Avg. Memory Capacity},
              legend columns=2,
              legend style={at={(0.84,0.97)}, draw=none,  /tikz/every even column/.append style={column sep=5mm}},
        ]
        \addlegendimage{/pgfplots/refstyle=CPU}\addlegendentry{CPU}
        \addplot[fill opacity=0.5, color=blue, pattern=crosshatch dots] table[x=noofFNs,y=avgMEMcapa]{\envAnalysisFNresCapacity};  
        \addlegendentry{Memory}
        \end{axis}
    \end{tikzpicture} \label{fig:sim:envAnalysis:FNresCapacity}}}\hspace{1cm}
\subfloat{
    \resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
        \begin{axis}[              
                width=0.5\textwidth,
                height=.4\textwidth,                
                ymin=320,ymax=360,xmin=0,xmax=550,
                axis y line*=left,
                ylabel={Avg. bandwidth with FCI},                
                xlabel={Number of FNs},
                title style={at={(0.5,-0.23)},anchor=north},
                title = (b)
            ]
            \addplot[smooth,mark=o,black] table[x=noofFNs,y=avgBWwithFCI]{\envAnalysisFNNWCapacity}; 
            \label{BW} 
        \end{axis}
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=.4\textwidth,
              axis x line=none,
              ymin=60, ymax=85,
              xmin=0,xmax=550,
              ylabel={Avg. latency with FCI},
              legend columns=2,
              legend style={at={(0.84,0.97)}, draw=none, /tikz/every even column/.append style={column sep=5mm}},
        ]
        \addlegendimage{/pgfplots/refstyle=BW}\addlegendentry{Bandwidth}
        \addplot[fill opacity=0.5, color=blue, pattern=crosshatch dots] table[x=noofFNs,y=avgLatencywithFCI]{\envAnalysisFNNWCapacity};  
        \addlegendentry{Latency}
        \end{axis}        
    \end{tikzpicture}\label{fig:sim:envAnalysis:FNNWCapacity}} } \\
\subfloat{\resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
        \begin{axis}[              
                width=0.5\textwidth,
                height=.4\textwidth,                
                ymin=50,ymax=550,xmin=0,xmax=220,
                axis y line*=left,
                ylabel={Total no. of FNs},                
                xlabel={Number of FCIs},
                title style={at={(0.5,-0.23)},anchor=north},
                title = (c)
            ]
            \addplot[smooth,mark=o,black] table[x=noofFCIs,y=totalFNs]{\envAnalysisFCIwithFNs}; 
            \label{FNs} 
        \end{axis}
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=.4\textwidth,
              axis x line=none,
              ymin=2, ymax=3,xmin=0,xmax=220,
              ylabel={Avg. no. of FNs},
              legend columns=2,
              legend style={at={(0.84,0.97)}, draw=none, /tikz/every even column/.append style={column sep=5mm}},
        ]
        \addlegendimage{/pgfplots/refstyle=FNs}\addlegendentry{Total FNs}
        \addplot[fill opacity=0.5, color=blue, pattern=crosshatch dots] table[x=noofFCIs,y=avgFNs]{\envAnalysisFCIwithFNs};  
        \addlegendentry{Avg. FNs}
        \end{axis} 
    \end{tikzpicture}\label{fig:sim:envAnalysis:FCIwithFNs}} } \hspace{1cm}
\subfloat{\resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
        \begin{axis}[              
                width=0.5\textwidth,
                height=.4\textwidth,                
                ymin=650,ymax=800,xmin=0,xmax=220,
                axis y line*=left,
                ylabel={Avg. bandwidth with cloud},                
                xlabel={Number of FCIs},
                title style={at={(0.5,-0.23)},anchor=north},
                title = (d)
            ]
            \addplot[smooth,mark=o,black] table[x=noofFCIs,y=avgBWwithCloud]{\envAnalysisFCIwithCloudNWres}; 
            \label{BW} 
        \end{axis}
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=.4\textwidth,
              axis x line=none,
              ymin=120, ymax=180,xmin=0,xmax=220,
              ylabel={Avg. latency with cloud},
              legend pos=north east,
              legend columns=2,
              legend style={draw=none, /tikz/every even column/.append style={column sep=5mm}}
        ]
        \addlegendimage{/pgfplots/refstyle=BW}\addlegendentry{Bandwidth}
        \addplot[fill opacity=0.5, color=blue, pattern=crosshatch dots] table[x=noofFCIs,y=avgLatencyWithCloud]{\envAnalysisFCIwithCloudNWres};  
        \addlegendentry{Latency}
        \end{axis} 
    \end{tikzpicture}\label{fig:sim:envAnalysis:FCIwithCloudNWres}} }
    \caption{Analysis of the MFC environment (i.e. FNs, FCIs, and cloud) and their resource availability and connectivity.}
	\label{fig:sim:envAnalysis} 
\end{figure}