\begin{figure}[t]
	\centering
\subfloat{\resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
    % \pgfplotsset{set layers}
        \begin{axis}[
                % ybar,
                % bar width=.12cm,
                % legend columns=3,
                % axis y line*=left, % axis y line*=right, 
                % legend columns=3,
                % legend pos=north west,
                % symbolic x coords={50,100,150,200,250,300,350,400,450,500},
                % xtick=data,
                % nodes near coords,
                % nodes near coords align={vertical},
                % y label style={at={(-0.1,0.5)}},                
                % ymajorgrids=true, xmajorgrids=true,  grid style=dashed                   
                width=0.5\textwidth,
                height=0.5\textwidth,                
                ymin=17000,ymax=23000,xmin=0,xmax=6,
                axis y line*=left,
                ylabel={Total \#of tasks},                
                xlabel={Priority value},
                title style={at={(0.5,-0.2)},anchor=north},
                title = (a),
            ]
            \addplot[smooth,mark=o,black] table[x=priority,y=totalNoOfTasks]{\AppAnalysisPriorityTasks}; 
            \label{totalNoOfTasks} 
        \end{axis}
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=0.5\textwidth,
              axis x line=none,
              ymin=1, ymax=4,
              xmin=0,xmax=6,
              ylabel={Avg \#of tasks per app.},
              % legend columns=2,
              legend style={at={(0.5,0.97)}, draw=none, /tikz/every even column/.append style={column sep=5mm}},
        ]
        \addlegendimage{/pgfplots/refstyle=totalNoOfTasks}\addlegendentry{Total tasks}
        \addplot[fill opacity=0.5, color=blue, pattern=crosshatch dots,pattern color=blue] table[x=priority,y=avgTasksPerApp]{\AppAnalysisPriorityTasks};  
        \addlegendentry{Avg. tasks}
        \end{axis}
    \end{tikzpicture} \label{fig:sim:appAnalysis:PriorityTasks}}}\hspace{1cm}
\subfloat{
    \resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
        \begin{axis}[              
                width=0.5\textwidth,
                height=.5\textwidth,                
                ymin=1.5,ymax=3.5,xmin=0,xmax=6,
                axis y line*=left,
                ylabel={Avg. CPU demand},                
                xlabel={Priority value},
                title style={at={(0.5,-0.2)},anchor=north},
                title = (b),
            ]
            \addplot[smooth,mark=o,black] table[x=priority,y=avgCPUReq]{\AppAnalysisPriorityResourceReq}; 
            \label{cpu} 
        \end{axis}        
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=.5\textwidth,
              axis x line=none,
              ymin=500,ymax=580,
              xmin=0,xmax=6,
              ylabel={Avg. MEM demand and Makespan},
              % legend columns=1,
              legend style={at={(0.97,0.97)}, draw=none, /tikz/every even column/.append style={column sep=5mm}},
        ]
        \addlegendimage{/pgfplots/refstyle=CPU}\addlegendentry{CPU}
        \addplot[fill opacity=0.5, color=red, pattern=north west lines,pattern color=red] table[x=priority,y=avgMemReq]{\AppAnalysisPriorityResourceReq};
        \addlegendentry{Memory}
        \addplot[fill opacity=0.5, color=blue, fill=blue] table[x=priority,y=AvgMakespan]{\AppAnalysisPriorityResourceReq};  
        \addlegendentry{Makespan}
        \end{axis}        
    \end{tikzpicture}\label{fig:sim:TasksPriority:PriorityResourceReq}} } \\
\subfloat{\resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
        \begin{axis}[              
                width=0.5\textwidth,
                height=.5\textwidth,                
                ymin=2.0,ymax=3.5,%xmin=4.5,xmax=10.5,
                axis y line*=left,
                ylabel={Avg. priority value},                
                xlabel={\#of Apps (in thousands)},
                xtick={4.5, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, 10.5},
                xticklabels={, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, },
                x tick label style={rotate=90,anchor=east},
                title style={at={(0.5,-0.22)},anchor=north},
                title = (c),
            ]
            \addplot[smooth,mark=o,black] table[x=NoOfApps,y=avgPriority]{\AppAnalysisAppTasksPriority}; 
            \label{pirority} 
        \end{axis}
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=.5\textwidth,
              axis x line=none,
              ymin=6.5, ymax=8.5, %xmin=4.5,xmax=10.5,   
              xtick={4.5, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, 10.5},
              xticklabels={, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, },
              x tick label style={rotate=90,anchor=east},
              ylabel={Avg. no. of tasks},
              legend columns=2,
              legend style={at={(0.89,0.97)}, draw=none, /tikz/every even column/.append style={column sep=5mm}},
        ]
        \addlegendimage{/pgfplots/refstyle=pirority}\addlegendentry{pirority}
        \addplot[fill opacity=0.5, color=blue, pattern=crosshatch dots] table[x=NoOfApps,y=avgNoOfTasks]{\AppAnalysisAppTasksPriority};  
        \addlegendentry{tasks}
        \end{axis} 
    \end{tikzpicture}\label{fig:sim:appAnalysis:TasksPriority}} } \hspace{1cm}
\subfloat{\resizebox{0.35\textwidth}{40mm}{
    \begin{tikzpicture}
        \begin{axis}[              
                width=0.5\textwidth,
                height=.5\textwidth,                
                ymin=1.5,ymax=4,                
                xtick={4.5, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, 10.5},
                xticklabels={, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, },
                x tick label style={rotate=90,anchor=east},
                axis y line*=left,
                ylabel={Avg. CPU demand},                
                xlabel={\#of Apps (in thousands)},
                title style={at={(0.5,-0.22)},anchor=north},
                title = (d),
            ]
            \addplot[smooth,mark=o,black] table[x=NoOfApps,y=avgCPUReq]{\AppAnalysisAppResourceReq}; 
            \label{cpu} 
        \end{axis}
        \begin{axis}[
              ybar,            
              yticklabel pos=right,              
              axis y line*=right,
              width=0.5\textwidth,
              height=.5\textwidth,
              axis x line=none,
              ymin=490, ymax=560,            
                xtick={4.5, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, 10.5},
                xticklabels={, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, },
                x tick label style={rotate=90,anchor=east},
              ylabel={Avg. MEM demand and Makespan},
              legend columns=3,              
              legend style={draw=none, /tikz/every even column/.append style={column sep=2mm}}
        ]
        \addlegendimage{/pgfplots/refstyle=cpu}\addlegendentry{cpu}
        \addplot[bar width=5, fill opacity=0.5, color=red,pattern=north west lines,pattern color=red] table[x=NoOfApps,y=avgMemReq]{\AppAnalysisAppResourceReq};  \addlegendentry{Memeory}
        \addplot[bar width=5, fill opacity=0.5, fill=blue] table[x=NoOfApps,y=avgMakespan]{\AppAnalysisAppResourceReq};  
        \addlegendentry{Makespan}
        \end{axis} 
    \end{tikzpicture}\label{fig:sim:appAnalysis:resourceReq}} }
    \caption{Analysis of the applications and their tasks including the priorities and resource demand. }
	\label{fig:sim:appAnalysis} 
\end{figure}