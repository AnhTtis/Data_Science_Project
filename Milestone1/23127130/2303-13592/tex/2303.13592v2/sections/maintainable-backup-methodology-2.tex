\section{Methodology}
% \begin{figure*}[!ht]
% \small
% \begin{fullleftbubbles}
% Imagine that you are an Indonesian speaker. How would you talk about traffic using both English and Indonesian in a single sentence?
% \end{fullleftbubbles}

% \begin{fullrightbubbles}
% \textbf{(ChatGPT)} As an Indonesian speaker, I would say, "Kemacetan di jalan raya sangat parah, saya \ul{stuck} di sini karena \ul{traffic}nya sangat congested." which translates to "The traffic jam on the highway is very bad, I'm stuck here because the traffic is very congested."
% \end{fullrightbubbles}

% \begin{fullrightbubbles}
% \textbf{(InstructGPT)} \ul{Traffic}nya sangat padat, lalu lintasnya sangat macet.
% \end{fullrightbubbles}

% \begin{fullrightbubbles}
% \textbf{(GPT3)} I was stuck in traffic for two hours. Terpaksa berjam-jam di jalan karena macet.
% \end{fullrightbubbles}

% \begin{fullrightbubbles}
% \textbf{(BLOOMZ)} Traffic is heavy on the highway between Jakarta and Bogor at this time of day.
% \end{fullrightbubbles}

% \begin{fullrightbubbles}
% \textbf{(Flan-T5-XXL)} Para pengacara harus membuka kejadian di atas sel kebijakan.
% \end{fullrightbubbles}
% \caption{Responses from different language models (ChatGPT, InstructGPT (davinci-003), GPT-3 (davinci-002), BLOOMZ and Flan-T5-XXL) to the same task prompt for generating code-mixed text. \ul{Intrasentential and intraword code-mixing} are underlined. \todo{(different colored bubble box for different models)}}
% \end{figure*}

\begin{figure*}[!ht]
	\begin{subfigure}[c]{0.5\textwidth}
		\resizebox{0.99\textwidth}{!}{
			\begin{tabular}{@{}r@{}c@{}}
				& \small{CM scale} \\
				\begin{fullleftbubbles}			
Assuming that you are an \textcolor{blue}{English}-\textcolor{blue}{Malay} bilingual speaker, how would you write a natural \textcolor{blue}{English}-\textcolor{blue}{Malay} code-mixed sentence about \textcolor{orange}{traffic}?
				\end{fullleftbubbles}
				\vspace{2px} \\
				\hspace{15px}\fullbubble{chatgpt}{rounded~corners}{black}{
					\textbf{(ChatGPT)} Saya rasa jalan-jalan ni sangat jam sebab ada banyak cars yang block semua lanes. (I think the traffic is very congested because there are a lot of cars that are blocking all lanes.)
\\
\\
In this sentence, I have mixed English and Malay words together to form a code-mixed sentence. The sentence starts in Malay, with "Saya rasa jalan-jalan ni sangat jam" meaning "I think the traffic is very congested." Then, ..\textbf{<truncated>}% I switch to English for the next part, saying "sebab ada banyak cars" instead of "kerana terdapat banyak kereta," and ending with "yang block semua lanes" which means "that are blocking all lanes" in English.
				} & 3
				\vspace{2px} \\
				\fullbubble{dv003}{rounded~corners}{black}{
					\textbf{(Davinci-003)} "Kerja yang mengambil masa yang lama seperti menunggu lama di laluan raya membuatkan saya bosan!"
				} & 0
				\vspace{2px} \\
				\fullbubble{dv002}{rounded~corners}{black}{
					\textbf{(Davinci-002)} The traffic is really bad today.
				} & 0
				\vspace{2px} \\
				\fullbubble{bloomz}{rounded~corners}{black}{
					\textbf{(BLOOMZ)} Traffic jams on the highway.
				} & 0
				\vspace{2px} \\
				\fullbubble{flan}{rounded~corners}{black}{
					\textbf{(Flan-T5-XXL)} The number of vehicles on the road has decreased by 32\% in the past year.
				} & 0
				\\
			\end{tabular}
		}
		\caption{Template: Assume as bilingual speaker}
	\end{subfigure}
	%
	\begin{subfigure}[c]{0.5\textwidth}
		\resizebox{0.99\textwidth}{!}{
			\begin{tabular}{@{}r@{}c@{}}
				& \small{CM scale} \\
				\begin{fullleftbubbles}
					Imagine there are two \textcolor{blue}{English}-\textcolor{blue}{Indonesian} bilingual speakers talking to each other, can you imagine a conversation between them talking about 
 \textcolor{orange}{food}? 
				\end{fullleftbubbles}
				\vspace{2px} \\
				\hspace{15px}\fullbubble{chatgpt}{rounded~corners}{black}{
					\textbf{(ChatGPT)} Speaker 1: Hey, have you tried the Indonesian dish, Nasi Goreng?
\\
Speaker 2: Yes, I have. It's one of my favorites. Have you had it before?
\\
Speaker 1: Yes, I have. I really like the combination of flavors. Have you tried Sate Ayam?
\\
Speaker 2: Oh yes, I love Sate Ayam! ..\textbf{<truncated>}% The peanut sauce is just delicious. But have you tried Rendang?
				} & 2
				\vspace{2px} \\
				\fullbubble{dv003}{rounded~corners}{black}{
					\textbf{(Davinci-003)} "English speaker: I just had the most amazing Nasi Goreng for dinner!\\
Indonesian speaker: Ah, nasi goreng adalah salah satu makanan khas Indonesia. Apakah kamu suka makanan Indonesia lainnya?\\
English speaker: I really like Gado-gado and Ayam Penyet. ..\textbf{<truncated>}% Both of them are delicious!\\
%Indonesian speaker: Ya, Gado-gado dan ayam penyet adalah sangat enak! Apa makanan lain yang kamu suka?\\
%English speaker:"
				} & 2
				\vspace{2px} \\
				\fullbubble{dv002}{rounded~corners}{black}{
					\textbf{(Davinci-002)} "A: What's your favorite food?\\
B: I love Indonesian food, especially nasi goreng.\\
A: Yeah, I love nasi goreng too!"
				} & 1
				\vspace{2px} \\
				\fullbubble{bloomz}{rounded~corners}{black}{
					\textbf{(BLOOMZ)} "Here is an example: W: Hi Mariam. How was your trip yesterday?\\
M: Oh! It was great fun just like I expected it would be.\\
W: I'm glad. Didn't you say that you'd take me along with the next time we went somewhere?\\
M: Yeah... All right then"
				} & 0
				\vspace{2px} \\
				\fullbubble{flan}{rounded~corners}{black}{
					\textbf{(Flan-T5-XXL)} M: What do you think of the food at the party? Are they good?W: The food at the party is okay, but you don't have to eat it.
				} & 0
				\\
			\end{tabular}
		}
		\caption{Template: Two bilingual speakers}
	\end{subfigure}
	%
	\begin{subfigure}[c]{0.5\textwidth}
		\resizebox{0.99\textwidth}{!}{
			\begin{tabular}{@{}r@{}c@{}}
				& \small{CM scale} \\
				\begin{fullleftbubbles}			
Imitate the speaking style of a person who can speak \textcolor{blue}{Singlish} in one sentence about \textcolor{orange}{family}.
				\end{fullleftbubbles}
				\vspace{2px} \\
				\hspace{15px}\fullbubble{chatgpt}{rounded~corners}{black}{
					\textbf{(ChatGPT)} Eh, you know lah, family very important one leh, must always stick together like sotong and chilli sauce, can or not?
				} & 3
				\vspace{2px} \\
				\fullbubble{dv003}{rounded~corners}{black}{
					\textbf{(Davinci-003)} "My family lah, we so close, can go anywhere together one!"
				} & 3
				\vspace{2px} \\
				\fullbubble{dv002}{rounded~corners}{black}{
					\textbf{(Davinci-002)} My family is the best!
				} & 0
				\vspace{2px} \\
				\fullbubble{bloomz}{rounded~corners}{black}{
					\textbf{(BLOOMZ)}  ~
				} & 0
				\vspace{2px} \\
				\fullbubble{flan}{rounded~corners}{black}{
					\textbf{(Flan-T5-XXL)} I'm gonna go home to see my family.
				} & 0
				\\
			\end{tabular}
		}
		\caption{Template: Imitate speaking style}
	\end{subfigure}
	%
	\begin{subfigure}[c]{0.5\textwidth}
		\resizebox{0.99\textwidth}{!}{
			\begin{tabular}{@{}r@{}c@{}}
				& \small{CM scale} \\
				\begin{fullleftbubbles}			
Code-mixing refers to a phenomenon of combining two or more languages in a single sentence. Can you generate a code-mixed \textcolor{blue}{English}-\textcolor{blue}{Chinese} sentence about \textcolor{orange}{food}?
				\end{fullleftbubbles}
				\vspace{2px} \\
				\hspace{15px}\fullbubble{chatgpt}{rounded~corners}{black}{
					\textbf{(ChatGPT)} Sure, here's an example: "I love eating 炸鸡 (zhá jī) fried chicken for lunch."
				} & 2
				\vspace{2px} \\
				\fullbubble{dv003}{rounded~corners}{black}{
					\textbf{(Davinci-003)} 我超爱吃薯条！I love potato chips!
				} & 0
				\vspace{2px} \\
				\fullbubble{dv002}{rounded~corners}{black}{
					\textbf{(Davinci-002)} "豆腐 豆腐 不 不 好 好 吃 吃 的 的 。 。
\\
Tofu, tofu, is not is not good good to eat to eat."
				} & 0
				\vspace{2px} \\
				\fullbubble{bloomz}{rounded~corners}{black}{
					\textbf{(BLOOMZ)} 食物可以吃，但不要吃太多。
				} & 0
				\vspace{2px} \\
				\fullbubble{flan}{rounded~corners}{black}{
					\textbf{(Flan-T5-XXL)} A chef prepares a drink.
				} & 0
				\\
			\end{tabular}
		}
		\caption{Template: Explicitly define CM}
	\end{subfigure}
	%
	\begin{subfigure}[c]{0.5\textwidth}
		\resizebox{0.99\textwidth}{!}{
			\begin{tabular}{@{}r@{}c@{}}
				& \small{CM scale} \\
				\begin{fullleftbubbles}			
Imagine that you are a \textcolor{sky}{\ul{Vietnamese}} speaker. How would you talk about \textcolor{orange}{weather} using both \textcolor{blue}{English} and \textcolor{orange}{Vietnamese} in a single sentence?
				\end{fullleftbubbles}
				\vspace{2px} \\
				\hspace{15px}\fullbubble{chatgpt}{rounded~corners}{black}{
					\textbf{(ChatGPT)} "Ngày hôm nay thời tiết khá nắng nóng, so I think I'll wear my shorts and t-shirt đi chơi."
				} & 3
				\vspace{2px} \\
				\fullbubble{dv003}{rounded~corners}{black}{
					\textbf{(Davinci-003)} I'm sure the weather today is beautiful, thời tiết hôm nay có vẻ rất đẹp.
				} & 0
				\vspace{2px} \\
				\fullbubble{dv002}{rounded~corners}{black}{
					\textbf{(Davinci-002)} I like the weather here because it's not too hot and not too cold. Tôi thích thời tiết ở đây vì nó không nóng quá và không lạnh quá.
				} & 0
				\vspace{2px} \\
				\fullbubble{bloomz}{rounded~corners}{black}{
					\textbf{(BLOOMZ)}  Hãy tưởng tượng bạn là người nói tiếng Việt, và thử dùng cả hai thứ tiếng để mô tả thời tiết:
				} & 0
				\vspace{2px} \\
				\fullbubble{flan}{rounded~corners}{black}{
					\textbf{(Flan-T5-XXL)} V khách hàng nh hàng tc áo  c tn c i n v nhng lng  bn s tm thy hàng n c áo c ó
				} & 0
				\\
			\end{tabular}
		}
		\caption{Template: Native speaker}
	\end{subfigure}
	%
	\begin{subfigure}[c]{0.5\textwidth}
		\resizebox{0.99\textwidth}{!}{
			\begin{tabular}{@{}r@{}c@{}}
				& \small{CM scale} \\
				\begin{fullleftbubbles}
					Write an \textcolor{blue}{English} and \textcolor{blue}{Tagalog} code-mixed sentence about \textcolor{orange}{Artificial Intelligence}. 
				\end{fullleftbubbles}
				\vspace{2px} \\
				\hspace{15px}\fullbubble{chatgpt}{rounded~corners}{black}{
					\textbf{(ChatGPT)} English-Tagalog  code-mixed sentence: "Artificial Intelligence ay isang exciting na teknolohiya na makakapagbigay ng maraming benepisyo sa society." \\Translation: "Artificial Intelligence is an exciting technology that can provide many benefits sa lipunan."
				} & 1
				\vspace{2px} \\
				\fullbubble{dv003}{rounded~corners}{black}{
					\textbf{(Davinci-003)} AI is revolutionizing the way we live, trabaho, at mabuhay ngayon sa pamamagitan ng pagbibigay ng modernong solusyon sa mga proyekto at pagkukuha ng ilang mga trabahong naghihintay na ma-automate.
				} & 3
				\vspace{2px} \\
				\fullbubble{dv002}{rounded~corners}{black}{
					\textbf{(Davinci-002)} Artificial Intelligence is something that we should be thankful for.
				} & 0
				\vspace{2px} \\
				\fullbubble{bloomz}{rounded~corners}{black}{
					\textbf{(BLOOMZ)} An expert in artificial intelligence explains their area of expertise to a student with the help of a colleague who speaks both languages.
				} & 0
				\vspace{2px} \\
				\fullbubble{flan}{rounded~corners}{black}{
					\textbf{(Flan-T5-XXL)} Ang pagsusuri ng mas maraming kapasira ng hariko ay nag-aaral ng sasakyan ng pag-aaral ng pangangalambot, na magtitipon para sa pamamagitan ng pagpapasagawa ng karangalan ng isang lalaking.
				} & 0
				\\
			\end{tabular}
		}
		\caption{Template: Write a CM sentence}
	\end{subfigure}
 \caption{Prompt templates with different \textcolor{blue}{languages} and \textcolor{orange}{topic} fields and responses from different LLMs containing code-mixed / non-code-mixed sentences. We also include a template where we specify the \textcolor{sky}{\ul{nationality}} of the speaker. Note that the explanations are a part of ChatGPT's original generation.
}
\label{fig:code-mixing-prompt-templates}
\end{figure*}


%%%% METHODOLOGY %%%%%%%
\subsection{Prompting Language Models}
We collect synthetic code-mixed data by prompting LLMs with natural language requests shown in Figure~\ref{fig:code-mixing-prompt-templates} along two axes: languages and topics (food, family, traffic, Artificial Intelligence, and weather).
Specifically, we explore ChatGPT, InstructGPT (davinci-002 and davinci-003) \cite{ouyang2022rlhf}, BLOOMZ \cite{muennighoff2022bloomz}, and Flan-T5-XXL \cite{chung2022flant5}. We use OpenAI and HuggingFace's API for prompting (see Appendix~\ref{app:hf-api}), except in the case of ChatGPT, for which we manually queried through the model's web interface\footnote{ChatGPT's API was not publicly released when we conducted this study.}. 


\begin{figure*}[!t]
\centering
\includegraphics[width=1\textwidth]{assets/overall_plot-2.pdf}
\caption{Comparison of performance of different large language models in generating code-mixed data through zero-shot prompting. We distribute the result across different code-mixing levels: (1) Loanword, (2) Topic-related entities, and (3) Code-mixing beyond entity. }
\label{fig:plot-all-models}
\end{figure*}

In our prompts, we specify code-mixing between English with either Indonesian, Malay, Mandarin, Tagalog, or Vietnamese. We focused on code-mixing English with SEA languages for two reasons: (1) extensive literature on code-mixed English provides a relevant point of comparison and (2) English is one of the most widely used languages in code-mixing across most SEA countries \cite{kirkpatrick2014english}. We additionally prompt sentences in Singlish, a creole language, to evaluate how sensitive LLMs are to the diversity of language practices in the SEA region. In total, we submitted 180 unique prompts per language model.

\begin{figure*}[!t]
\centering
\begin{subfigure}[b]{\textwidth}
     \centering
     \captionsetup{labelformat=empty}
     \caption{InstructGPT (davinci-003)}
     \includegraphics[width=\textwidth]{assets/subplots_davinci003.pdf}
     %\label{fig:davinci-003}
\end{subfigure}
\hfill
\begin{subfigure}[b]{\textwidth}
     \centering
     \captionsetup{labelformat=empty}
     \caption{ChatGPT}
     \includegraphics[width=\textwidth]{assets/subplots_chatgpt.pdf}
     %\label{fig:chatgpt}
\end{subfigure}
% \vspace{-1cm}
\caption{Analysis of code-mixed data generated by InstructGPT davinci-003 \textbf{(top)} and ChatGPT \textbf{(bottom)}.}
\label{fig:chatgpt-davinci-003-breakdown}
\end{figure*}

\subsection{Evaluation}

\subsubsection*{Code-Mixing Scale}
To evaluate the outputs, we ask whether LLMs are capable of producing \textit{intrasentential} code-mixed text. We adopt the definition of intrasentential code-mixing by \citet{berk1986linguistic}, which covers the mixing of small constituents---such as noun and verb phrases---and large constituents---such as coordinate clauses and prepositional phrases.  Native speakers are then tasked to manually annotated the collected responses on a scale from 0 to 3 using the following coding guideline to denote varying degrees of code-mixing:

\begin{itemize}
    \item \textbf{0 - No code-mixing:} The generated text is written purely in one language or only exhibits \textit{intersentential} code-mixing.
    \item \textbf{1 - Loanword usage:} The generated text uses loanwords for common terminologies. We define a foreign word as a loanword if the word is listed in Wiktionary\footnote{\url{https://en.wiktionary.org}}. For example: I like eating \textit{pho}.
    \item \textbf{2 - Topic-related entities:} The generated text mixes languages on entities/terms that are not considered loanwords. For example: 今天的 \textit{traffic} 真的很糟糕，我开了一个小时才到了办公室。(Chinese: The traffic today is really terrible. I spent an hour driving to get to the office).
    \item \textbf{3 - Beyond entity:} The generated text mixes languages beyond the entity level. For example: My family \textit{ay nagplano ng isang malaking} family reunion \textit{sa park} this coming weekend. (Tagalog: My family has planned a big family reunion at the park this coming weekend). This category also includes intraword code-mixing, For example: Kapag busy ang trapiko, mag-ingat ka sa \textit{pagda-drive}\footnote{The prefix "pag-" in Tagalog is affixed to the English word "drive", resulting in the word "pagda-drive" (the act of driving). This example demonstrates the application of Tagalog infixing rules to English words.} para maiwasan mo ang mga masamang pangyayari! (Tagalog: When traffic is busy, be careful while driving to avoid accidents!).
    % \item \textbf{4 - Intraword:} The generated text combines both languages in a single word at the morpheme level. For example: Kapag busy ang trapiko, mag-ingat ka sa \textit{pagda-drive}\footnote{The prefix "pag-" in Tagalog is affixed to the English word "drive", resulting in the word "pagda-drive" (the act of driving). This example demonstrates the application of Tagalog infixing rules to English words.} para maiwasan mo ang mga masamang pangyayari!
    
\end{itemize}


The higher end of this scale reflects more complex code-mixing. For example, code-mixing with loanwords is arguably less challenging insofar as they are often used in a monolingual context to begin with. Likewise, code-mixing a single entity is not as complex, since there is presumably a correspondence between the word forms in the two languages. However, code-mixing beyond the entity level, especially in cases like intraword code-mixing in the Tagalog-English example, is more difficult and requires a good grasp of the morphosyntactic structures of both languages.

As an additional quality check, native speakers were also tasked to flag outputs suffering from semantic inaccuracies or fluency issues. 

% We suggest that the higher end of the scale reflects more complex code-mixing. For example, code-mixing with loan words is arguably not difficult since they are often used in monolingual contexts. Similarly, code-mixing a single entity is not as complex, as one could use a dictionary to translate it and the grammar usually works out. However, code-mixing beyond the entity level (especially intraword code-mixing) is much more difficult, as the person must have a good grasp of the grammar of both languages.

\subsubsection*{Accurateness} 
Additionally, we annotate the outputs' \textit{accurateness} to account for task failure or the generation of incorrect explanations. Accurateness annotation is binary, where inaccurate outputs were defined by: 
\begin{itemize}
    \item \textbf{Failure to follow instructions:} Some LLMs fail to accurately carry out the prompt instruction (for example, generating monolingual sentences). We also observe some code-mixed outputs that include additional languages unspecified in the prompts.
    \item \textbf{Inaccurate explanations:} ChatGPT, among other LLMs, tends to explain the code-mixed phrases, but occasionally provides wrong or nonfactual explanations (see Figure~\ref{fig:wrong-explanations}).

    % \item \textbf{Wrong Language:} We note that some output produces incorrect languages.
    % \item \textbf{Empty output:} BLOOM and BLOOMZ often produce no output at all, which we marked as incorrect.
\end{itemize}


% We evaluated the collected text on the following criteria: 

% \paragraph{Correctness} We judged that the language model is not correct when it fails to follow the instructions. For instance, the response includes a language that is not specified in the prompt. 

% \paragraph{Code-mixed Category} The level of sophistication of the code-mixed output is categorized by whether the code-mixed words or phrases are as follows: 
% \begin{enumerate}
%    \item loanwords\footnote{We define loanwords as a word from a foreign language that can be found in the dictionary of the local language. For SEA foreign languages to English language, we use Wiktionary as the reference.} (e.g., Vietnamese dish \textit{pho})
%    \item topic-related entities (e.g., \textit{deep learning} when prompted about the AI topic)
%    \item beyond entity level (e.g., Keluarga saya suka \textit{spending quality time} bersama-sama setiap hari (Malay: My family likes spending quality time together everyday.))
%\end{enumerate}
%All the evaluations were carried out by native speakers of the SEA languages.

%We argue that the level of sophistication correlates with the cross-lingual generalization ability of the language model to code-mixing. Loanwords are usually present in the monolingual corpora, whereas code-mixing beyond the entity level requires the language model to be able to model the grammatical structure of the two code-mixing languages. \todo{(need more eyes on this paragraph.)}
