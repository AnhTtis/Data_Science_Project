\PassOptionsToPackage{dvipsnames,table}{xcolor}

\usepackage{times}
\usepackage{epsfig}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{xspace}
\usepackage{subcaption}
\usepackage{multirow}
%\usepackage{cite}
\usepackage{booktabs}
\usepackage{multicol}
\usepackage{makecell}
\usepackage[table]{xcolor}  
%\usepackage{animate}
\usepackage{tikz}
\usepackage{tkz-euclide}
\usepackage{pgfplots}
\usepackage{amsthm}
%
% --- inline annotations
%
\newcommand{\red}[1]{{\color{red}#1}}
\newcommand{\todo}[1]{{\color{red}#1}}
\newcommand{\TODO}[1]{\textbf{\color{red}[TODO: #1]}}
% --- disable by uncommenting  
% \renewcommand{\TODO}[1]{}
% \renewcommand{\todo}[1]{#1}

\newcommand{\PAR}[1]{\vskip4pt \noindent{\bf #1~}}

\newcommand{\C}{{\mathbb C}}
\newcommand{\R}{{\mathbb R}}
\newcommand{\M}[1]{\mathtt{#1}}
\newcommand{\V}[1]{\mathbf{#1}}
\newcommand{\diag}{\textrm{diag}}
\newcommand{\vnorm}[1]{\left|\left|#1\right|\right|}

\newcommand{\confm}{{(S_5, S_5, S_5^3)}}
\newcommand{\confc}{{(S_4, S_4, S_4)}}
\newcommand{\conft}{{(S_4, S_4, S_4^3)}}
\newcommand{\confpm}{{(S_6, S_6, S_6^3)}}

\def\sfc{{\texttt{5pt}}\xspace}
\def\ss{{\texttt{5pt}}\xspace}
\def\sp{{\texttt{P3P}}\xspace}

\def\sft{{\texttt{5pt+P3P}}\xspace}
\def\sftENM{{\texttt{5pt+P3P+ENM}}\xspace}
\def\sftRCENM{{\texttt{5pt+P3P+R+F+ENM}}\xspace}
\def\sftRRCCENM{{\texttt{5pt+P3P+R+F+ENM - 2}}\xspace}
\def\sftRRCC{{\texttt{5pt+P3P+R+F - 2}}\xspace}
\def\sftRC{{\texttt{5pt+P3P+R+F}}\xspace}
\def\sst{{\texttt{6pt+P3P}}\xspace}
\def\sftl{{\texttt{4p3v(L)}}\xspace}
\def\sftlR{{\texttt{4p3v(L)+R}}\xspace}
\def\sftlRC{{\texttt{4p3v(L)+R+F}}\xspace}
\def\sftm{{\texttt{4p3v(M)}}\xspace}
\def\sftmENM{{\texttt{4p3v(M)+ENM}}\xspace}
\def\sftmR{{\texttt{4p3v(M)+R}}\xspace}
\def\sftmRC{{\texttt{4p3v(M)+R+F}}\xspace}
\def\sftmRCENM{{\texttt{4p3v(M)+R+F+ENM}}\xspace}
\def\sftmd{{\texttt{4p3v(M$\pm \delta$)}}\xspace}
\def\sftmdENM{{\texttt{4p3v(M$\pm \delta$)+ENM}}\xspace}
\def\sftmdR{{\texttt{4p3v(M$\pm \delta$)+R}}\xspace}
\def\sftmdRC{{\texttt{4p3v(M$\pm \delta$)+R+F}}\xspace}
\def\sftmdRCENM{{\texttt{4p3v(M$\pm \delta$)+R+F+ENM}}\xspace}
\def\sstmd{{\texttt{4p3vf(M$\pm \delta$)}}\xspace}
\def\sstmdR{{\texttt{4p3vf(M$\pm \delta$)+R}}\xspace}
\def\sstmdRC{{\texttt{4p3vf(M$\pm \delta$)+R+F}}\xspace}
\def\sftld{{\texttt{4p3v(L$\pm \delta$)}}\xspace}
\def\sftldR{{\texttt{4p3v(L$\pm \delta$)+R}}\xspace}
\def\sftldRC{{\texttt{4p3v(L$\pm \delta$)+R+F}}\xspace}
\def\sftlid{{\texttt{4p3v(L$\pm\delta$init)}}\xspace}
\def\sftlidR{{\texttt{4p3v(L$\pm\delta$init)+R}}\xspace}
\def\sftlidC{{\texttt{4p3v(L$\pm\delta$init)+R+F}}\xspace}
\def\sstld{{\texttt{4p3vf(L$\pm \delta$)}}\xspace}
\def\sstldR{{\texttt{4p3vf(L$\pm \delta$)+R}}\xspace}
\def\sstldRC{{\texttt{4p3vf(L$\pm \delta$)+R+F}}\xspace}
\def\sstlid{{\texttt{4p3vf(L$\pm \delta$init)}}\xspace}
\def\sstlidR{{\texttt{4p3vf(L$\pm \delta$init)+R}}\xspace}
\def\sstlidRC{{\texttt{4p3vf(L$\pm \delta$init)+R+F}}\xspace}
\def\sstl{{\texttt{4p3vf(L)}}\xspace}
\def\sstlR{{\texttt{4p3vf(L)+R}}\xspace}
\def\sstm{{\texttt{4p3vf(M)}}\xspace}
\def\sstmENM{{\texttt{4p3vf(M)+ENM}}\xspace}
\def\sstmR{{\texttt{4p3vf(M)+R}}\xspace}
\def\sstmRC{{\texttt{4p3vf(M)+R+F}}\xspace}
\def\sstmRCENM{{\texttt{4p3vf(M)+R+F+ENM}}\xspace}
\def\sfto{{\texttt{4p3v(O)}}\xspace}
\def\sftoR{{\texttt{4p3v(O)+R}}\xspace}
\def\sftoRC{{\texttt{4p3v(O)+R+F}}\xspace}
\def\ssto{{\texttt{4p3vf(O)}}\xspace}
\def\sstoR{{\texttt{4p3vf(O)+R}}\xspace}
\def\sstoRC{{\texttt{4p3vf(O)+R+F}}\xspace}
\def\step{{\texttt{3pt+ep}}\xspace}
\def\sfhc{{\texttt{4p3v(HC)}}\xspace}
\def\sfep{{\texttt{4p3v(N)}}\xspace}
\def\sfepo{{\texttt{4p3v(NO)}}\xspace}
\def\sfepoR{{\texttt{4p3v(NO)+R}}\xspace}
\def\sftlidRC{{\texttt{4p3v(L$\pm\delta$init)+R+F}}\xspace}

\def\sftp{{\texttt{4p3v}}\xspace}
\def\sstp{{\texttt{4p3vf}}\xspace}

\def\sfa{{\texttt{4p3v(A)}}\xspace}
% \def\sfaf{{\texttt{4p3v(AF)}}\xspace}
\def\sfaf{{\texttt{4p3v(A)}}\xspace}
\def\sfafENM{{\texttt{4p3v(A)+ENM}}\xspace}
% \def\sfafENM{{\texttt{4p3v(AF)+ENM}}\xspace}
\def\sfafR{{\texttt{4p3v(A)+R}}\xspace}
% \def\sfafR{{\texttt{4p3v(AF)+R}}\xspace}
\def\sfafRC{{\texttt{4p3v(A)+R+F}}\xspace}
% \def\sfafRC{{\texttt{4p3v(AF)+R+F}}\xspace}
\def\sfafRCENM{{\texttt{4p3v(A)+R+F+ENM}}\xspace}
% \def\sfafRCENM{{\texttt{4p3v(AF)+R+F+ENM}}\xspace}
\def\sfah{{\texttt{3p3v(AH)}}\xspace}
\def\sfae{{\texttt{3p3v(AE)}}\xspace}

\newtheorem{theorem}{Theorem}
%\linenumbers
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{definition}[theorem]{Definition}

\pgfplotsset{
compat=1.9,
legend image code/.code={
\draw[mark repeat=4,mark phase=1]
plot coordinates {
(0cm,0.02cm)
(0.1cm,0.02cm)        
(0.2cm,0.02cm)
(0.3cm,0.02cm)       
%(0.4cm,0.02cm)      
};%
}
}

\definecolor{Seaborn1}{HTML}{1f77b4}
\definecolor{Seaborn2}{HTML}{ff7f0e}
\definecolor{Seaborn3}{HTML}{2ca02c}
\definecolor{Seaborn4}{HTML}{d62728}
\definecolor{Seaborn5}{HTML}{9467bd}
\definecolor{Seaborn6}{HTML}{8c564b}
\definecolor{Seaborn7}{HTML}{e377c2}
\definecolor{Seaborn8}{HTML}{7f7f7f}
\definecolor{Seaborn9}{HTML}{bcbd22}
\definecolor{Seaborn10}{HTML}{17becf}

\pgfplotsset{width=10cm,compat=1.9}

\tikzstyle{bedge}=[line width=0.4pt, color=blue]
\tikzstyle{redge}=[line width=0.4pt, color=red]
\tikzstyle{gedge}=[line width=0.4pt, color=green]
\tikzstyle{bsvertex}=[circle, draw=black, fill=cyan, inner sep=0pt, minimum size=0.4pt]
\tikzstyle{rsvertex}=[circle, draw=black, fill=red, inner sep=0pt, minimum size=0.2pt]
\newcommand{\iccv}{
\begin{tikzpicture}
    \node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.55\columnwidth]{figures/rotunda2.PNG}};
    \begin{scope}[x={(image.south east)},y={(image.north west)}]
    
        \node[rsvertex] (10) at (0.205, 0.274) {};
        \node[rsvertex] (10) at (0.406, 0.194) {};
        
        \draw[bedge] (0.24, 0.71) -- (0.155, 0.235);
        \draw[bedge] (0.35, 0.56) -- (0.155, 0.235);
        \draw[bedge] (0.66, 0.55) -- (0.155, 0.235);
        \draw[bedge] (0.57, 0.31) -- (0.155, 0.235);

        \draw[bedge] (0.24, 0.71) -- (0.395, 0.155);
        \draw[bedge] (0.35, 0.56) -- (0.395, 0.155);
        \draw[bedge] (0.66, 0.55) -- (0.395, 0.155);
        \draw[bedge] (0.57, 0.31) -- (0.395, 0.155);

        \draw[bedge] (0.24, 0.71) -- (0.848, 0.14);
        \draw[bedge] (0.35, 0.56) -- (0.848, 0.14);
        \draw[bedge] (0.66, 0.55) -- (0.848, 0.14);
        \draw[bedge] (0.57, 0.31) -- (0.848, 0.14);

        \node[bsvertex] (0) at (0.168, 0.31) {};
        \node[bsvertex] (1) at (0.188, 0.29) {};
        \node[bsvertex] (2) at (0.225, 0.279) {};
        \node[bsvertex] (3) at (0.225, 0.247) {};

        \node[bsvertex] (4) at (0.374, 0.228) {};
        \node[bsvertex] (5) at (0.389, 0.207) {};
        \node[bsvertex] (5) at (0.423, 0.197) {};
        \node[bsvertex] (6) at (0.42, 0.176) {};

        \node[bsvertex] (7) at (0.792, 0.174) {};
        \node[bsvertex] (8) at (0.765, 0.21) {};
        \node[bsvertex] (9) at (0.758, 0.225) {};
        \node[bsvertex] (10) at (0.816, 0.21) {};

        

        \draw[->, red, thick, dashed] plot [smooth, tension=1] coordinates {(0.155, 0.21) (0.25, 0.09) (0.395, 0.11)};
        \node at (0.23, 0.05) {$\texttt{\scriptsize 5pt}$};

        \draw[->, orange, thick, dashed] plot [smooth, tension=1] coordinates {(0.87, 0.16) (0.92, 0.4) (0.68, 0.55)};
        \node at (0.97, 0.25) {$\texttt{\scriptsize P3P}$};
        %\clip (0.5,0.5) circle (1cm);
    \end{scope}
\end{tikzpicture}
}

\newcommand{\iccvnew}{
\begin{tikzpicture}
    %\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.47\columnwidth]{figures/new_teaser.png}};
    \node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[width=0.85\columnwidth]{figures/old_town.png}};
    \begin{scope}[x={(image.south east)},y={(image.north west)}]
        
        \draw[redge] (0.4521, 0.815) -- (0.06, 0.08);
        \draw[redge] (0.314, 0.627) -- (0.06, 0.08);
        \draw[redge] (0.39, 0.403) -- (0.06, 0.08);
        \draw[redge] (0.3321, 0.885) -- (0.06, 0.08);

        \draw[gedge] (0.4521, 0.815) -- (0.7202, 0.085);
        \draw[gedge] (0.314, 0.627) -- (0.7202, 0.085);
        \draw[gedge] (0.39, 0.403) -- (0.7202, 0.085);
        \draw[gedge] (0.3321, 0.885) -- (0.7202, 0.085);

        \draw[bedge] (0.4521, 0.815) -- (0.59, 0.06);
        \draw[bedge] (0.314, 0.627) -- (0.59, 0.06);
        \draw[bedge] (0.39, 0.403) -- (0.59, 0.06);
        \draw[bedge] (0.3321, 0.885) -- (0.59, 0.06);

        \draw[->, orange, thick, dashed] plot [smooth, tension=1] coordinates {(0.17, 0.05) (0.3, -0.02) (0.49, 0.04)};
        \node at (0.32, -0.07) {$\texttt{\scriptsize Approx. geometry}$};

        \draw[->, orange, thick, dashed] plot [smooth, tension=1] coordinates {(0.7302, 0.085) (0.7502, 0.425) (0.6202, 0.685)};
        \node at (0.7102, 0.675) {$\texttt{\scriptsize P3P}$};

    \end{scope}
\end{tikzpicture}
}

%\newcommand{\newtext}[1]{\textcolor{red}{#1}}