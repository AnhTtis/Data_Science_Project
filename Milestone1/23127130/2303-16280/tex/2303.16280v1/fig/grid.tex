

	\tikzstyle{header} = [
		inner sep=0, 
		anchor=south,
		rounded corners=2,
		fill=black!30,
		path fading=south,
        font=\fontsize{8}{8}\selectfont,
	]
	\tikzstyle{index} =[
		rotate=90,
		inner sep=0, 
		anchor=south,
		rounded corners=2,
		fill=black!30,
		path fading=east,
		font=\fontsize{8}{8}\selectfont,
	]

    \newcommand{\grid}[4][0]{
        % #1 (optional argument with default=0): example indexing offset
        % #2: problem name
        % #3: image indices (example: 0, ..., 5, or 1, 2, 3, 5)
        % #4: algorithms and their label (example: input/input, EGSDE1/\egsde, EGSDE2/\egsdeDG, UVCGAN2wo/\thename)
		\begin{tikzpicture}
			\foreach \name/\label [count=\row] in {#4} {
				\foreach \idx [count=\col] in {#3} {
					\def\fname{\folder/#2_\name_\idx.png.jpg}
                    \coordinate (C) at (\width * \expand * \col, -\width * \expand * \row);
					\node[inner sep=0, anchor=north] (\name_\col) at (C) {\includegraphics[width=\width]{\fname}};
                    \ifthenelse{\row=1}{
                        \pgfmathtruncatemacro\exampleNo{\col + #1}
                        \node[header, minimum width=\width, minimum height=.25 * \width, anchor=south] at (input_\col.north) {Example $\exampleNo$};}{}
				}
				\node[index, minimum width=\width, minimum height=.25 * \width] (index_\name) at (\name_1.west) {\label};
			}
		\end{tikzpicture}
	}
    \newcommand{\gridWithHeader}[5][0]{
        % #1 (optional argument with default=0): whether to have index
        % #2: problem name
        % #3: image indices (example: 0, ..., 5, or 1, 2, 3, 5)
        % #4: algorithms and their label (example: input/input, EGSDE1/\egsde, EGSDE2/\egsdeDG, UVCGAN2wo/\thename)
        % #5: header
        \begin{tikzpicture}
            \foreach \name/\label [count=\row] in {#4} {
                \foreach \idx [count=\col] in {#3} {
                    \def\fname{\folder/#2_\name_\idx.png.jpg}
                    \coordinate (C) at (\width * \expand * \col, -\width * \expand * \row);
                    \node[inner sep=0, anchor=north] (\name_\col) at (C) {\includegraphics[width=\width]{\fname}};
                }
                \ifthenelse{#1=1}{\node[index, minimum width=\width, minimum height=.25 * \width] (index_\name) at (\name_1.west) {\label}}{};
            }
            \tikzmath{ coordinate \C; \C = (input_3.north east) - (input_1.south west); }
            \node[header, minimum width=\Cx, minimum height=.3 * \Cy, anchor=south west] at (input_1.north west) {#5};
        \end{tikzpicture}
	}

