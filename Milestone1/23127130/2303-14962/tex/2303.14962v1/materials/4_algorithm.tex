\begin{algorithm}[ht]
  \caption{Winning SubNetworks (WSN) for TIL.}\label{alg:algorithm1}
    \small
    \begin{algorithmic}[1]
    \INPUT $\{\mathcal{D}_t\}_{t=1}^{\mathcal{T}}$, model weights $\bsy\theta$, score weights $\mathbf{s}$, binary mask $\mathbf{M}_0=\mathbf{0}^{|\bsy\theta|}$, layer-wise capacity $c$
    \STATE Randomly initialize $\bsy\theta$ and $\mathbf{s}$.
    \FOR{task $t = 1, . . . , \mathcal{T}$}
        \FOR{batch $\mathbf{b}_t\sim\mathcal{D}_t$} 
            \STATE Obtain soft-mask $\mathbf{m}_t$ of the top-$c\%$ scores $\mathbf{s}$ at each layer %\COMMENT{Weight ranking}
            \STATE Compute $\mathcal{L}\left( \bsy\theta \odot \mathbf{m}_t;\mathbf{b}_t \right)$
            \STATE $\bsy\theta \leftarrow \bsy\theta - \eta \left(\frac{\partial \mathcal{L}}{\partial \bsy\theta} \odot (\mathbf{1}-\mathbf{M}_{t-1})\right)$ \COMMENT{Weight update}     
            \STATE $\mathbf{s} \leftarrow \mathbf{s} - \eta(\frac{\partial \mathcal{L}}{\partial \mathbf{s}})$ \COMMENT{Weight score update}
        \ENDFOR
        \STATE $\mathbf{M}_{t} \leftarrow \mathbf{M}_{t-1} \newor \mathbf{m}_t$ \COMMENT{Accumulate binary mask}
    \ENDFOR
  \end{algorithmic}
\end{algorithm}