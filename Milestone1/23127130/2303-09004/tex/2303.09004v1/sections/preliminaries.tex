\section{Preliminaries} \label{sec:preliminaries}

% \subsection{Acronyms/Initialisms}
\input{sections/acronym}

\subsection{Notation} \label{subsec:notation}

\begin{tabular}{p{0.13\columnwidth}p{0.75 \columnwidth}}
$\R^n$ & Set of $n$-tuples of real numbers\\
$x,X,I$ & Vector, matrix, identity matrix\\
$\mathbf{1,0}$ & Vector/matrix of all 1s, 0s\\
$\left\|x \right\|_p$ & $\ell_p$-norm of vector $x$\\
$\left\|X \right\|_p$ & Induced $\ell_p$-norm of matrix $X$\\
$X\succeq 0$ & $X$ is positive semi-definite \\
$\otimes$ & Kronecker product\\
\text{vec}$(X)$ & Vectorized matrix along columns: \\ & $\text{vec}(X)= \left[ X(\colon,1)^T,\cdots,X(\colon,n)^T\right]^T$ \\
$\rho \in C^d$ & $\rho$ has a continuous $d^{th}$ derivative\\
$\nabla \rho$ & Gradient of scalar function $\rho$ \\
$\nabla \cdot f$ & Divergence of vector function $f$\\
$\Sigma[x]$ & Cone of \ac{SOS} polynomials in $x \in \R^n$
\end{tabular}

% \begin{itemize}
%     \item[A1] Assumption 1
%     \item[A2]  Assumption 2
% \end{itemize}

\subsection{Safe Systems}
Consider the continuous-time control-affine system of the form\footnote{For notational simplicity, single-input systems are considered, but the result can be extended to multi-input systems trivially.}
\begin{equation} \label{eq:dynamics}
    \dot{x} = f(x) + g(x) u,
\end{equation}
where $x\in \R^n$ is the state, $u\in \R$ is the control input, and $f,g$ are unknown vector-valued polynomial functions of dimension $n\times 1$. Let $f = F \phi$, $g = G \gamma$ (with $x$ omitted), where $F,G$ are unknown coefficient matrices and $\phi,\gamma$ are known monomial vectors. For example, a two-state second-order polynomial system could have $\phi,\gamma = [1,x_1,x_2,x_1^2,x_1x_2,x_2^2]^T$ and $F,G \in \R^{2\times 6}$ in the standard monomial basis.
\begin{definition}
Given an initial set $\mathcal{X}_0$ and an unsafe set $\mathcal{X}_u$, a system is safe under the control law $u$ if there exists no trajectory starting within $\mathcal{X}_0$ will enter $\mathcal{X}_u$ as $t\geq 0$.
\end{definition}
\begin{theorem}[\cite{rantzer2004analysis}] \label{thm:safety}
Given $\mathcal{X}_0$ and $\mathcal{X}_u$, system \eqref{eq:dynamics} is safe if there exists a scalar function $\rho(x)\in C^1$ such that
\begin{subequations} \label{eq:safe_rhou}
\begin{align}
\nabla \cdot [\rho (f + gu)] (x)&> 0, \ \forall x\in \R^n \label{eq:den} \\
\rho (x) &> 0, \ \forall x\in \mathcal{X}_0\\
\rho (x)&\leq 0, \ \forall x\in \mathcal{X}_u.
\end{align}
\end{subequations}
\end{theorem}
% \begin{theorem}
%     If the integrability condition $\int_{\R^n} \rho(x) dx < \infty$ holds in addition to \eqref{eq:safe_rhou}, then $x=0$ is asymptotically stable for all $x$ originating in $\mathcal{X}_0$ \urg{get the right source and denominator for this, if we use rational polynomials}
% \end{theorem}

% \begin{proof}
% This follows from ... \urg{to be finished}
% \end{proof}




%%%-------------------------------------------------
% \subsection{Farkas' Lemma (variant)}

% \begin{lemma}
% Let $A\in \R^{m\times n}$ and $b\in \R^n$. Then the following statements are strongly alternative, i.e., exactly one of them is true:
% \begin{enumerate}
%     \item There exists an $x\in \R^n$ such that $Ax \leq b$.
%     \item There exists a $y\geq 0, y\in\R^m$ such that $A^T y = 0$ and $b^T y <0$.
% \end{enumerate}
% \end{lemma}
%%%-------------------------------------------------

\subsection{Extended Farkas' Lemma}
This work attempts to find a state-feedback control law such that the set of all consistent systems is contained in the set of all safe systems. Such set-containment is enforced by using the Extended Farkas' Lemma:
\begin{lemma}[\cite{hennet1989farkas, henrion1999control}]
Consider polytopes $\mathcal{P}_1 =\left\{ x| A_1 x \leq b_1 \right\}$ and $\mathcal{P}_2 =\left\{ x| A_2 x \leq b_2 \right\}$. Then $\mathcal{P}_1 \subseteq \mathcal{P}_2$ if and only if there exists a nonnegative matrix $Y$ of appropriate dimensions such that
$$Y A_1= A_2\ \text{and} \ Y b_1 \leq b_2.$$
\end{lemma}


% \subsection{Kronecker Product}
% Let $A\in \R^{m\times n}$ and $B\in \R^{p\times q}$, the Kronecker product $A\otimes B$ is the $\R^{mp\times nq}$ matrix:\\
% $$A\otimes B = \begin{bmatrix} 
% a_{11} B & \cdots & a_{1n} B \\
% \vdots & \ddots & \vdots \\
% a_{m1} B & \cdots & a_{mn} B 
% \end{bmatrix}, $$
% and the following property will be used in this paper
% \begin{equation} \label{eq:kron}
%     \text{vec}(B^TX^TA^T) = (A\otimes B^T) \text{vec}(X^T).
% \end{equation}

\subsection{SOS Polynomials}
This paper shows that the data-driven safe control synthesis can be formulated as a polynomial feasibility problem, which is generally NP-hard (for polynomials of even degree $d\geq 4$). To tackle this, \ac{SOS} polynomials are used as a convex relaxation for nonnegative polynomials. Consider a polynomial $f$ of degree $2m$. A sufficient condition to $\forall x \in \R^n: f(x)\geq 0$ is that $f$ can be written as a sum of squares of polynomials $g_i$ of degree $m$:
$f = \textstyle \sum_i g_i^2.$
Let $v$ be a vector with all monomials of degree less than or equal to $m$. Then $f$ is \ac{SOS} if and only if there exists a positive semidefinite matrix $Q$ such that
$f = v^T Qv.$
Comparing term on the both sides leads to an \ac{SDP} program, which can be solved by off-the-shelf solvers.
