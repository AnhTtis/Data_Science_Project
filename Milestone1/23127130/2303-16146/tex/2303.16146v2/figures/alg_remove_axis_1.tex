% Thanks to Hydride team. Got part of the latex from there.

% It's not an algorithm but I liked the \begin{algorithm} format.
\floatname{algorithm}{Algorithm}

%%\renewcommand{\algorithmiccomment}[1]{\hfill\eqparbox{COMMENT}{#1}}
\renewcommand{\algorithmiccomment}[1]{\bgroup\hfill\footnotesize//~#1\egroup}
\algrenewcommand\algorithmicindent{1.0em}%

\begin{algorithm}[t!]
\caption{Preconditions for RemoveAxis1}
\label{alg:remove-axis-1-preconds}
\small{
\begin{algorithmic}[1]

\Function{IsCompatibleSub}{astNode}
  \State \textit{// Return True if astNode is a Subscript with}
  \State \textit{// Name for .value and Constant(str) for .slice.}
\EndFunction

\Function{CanRemoveAxis1}{funcBody, arg0Name}
\State theOneSeries : string = \textbf{None}

\State allowedNodes = \{ \\
  Return, For, While, If, Pass, Break, Continue  \\
  BoolOp, BinOp, UnaryOp, IfExp, Dict, Set, Compare, Constant, \\
  Subscript, Name, List, Tuple, Slice, Load
\}

\ForAll{[n \textbf{in} AstWalk(funcBody) \textbf{if} n \textbf{is} ast.Name]}
  \State parent := n's parent in the AST
  \If{type(n) not in allowedNodes \textbf{or} \\
      \hspace{25.2pt} name.id != arg0Name \textbf{or} \\
      \hspace{28pt}\textbf{not} IsCompatibleSub(parent)}
    \State \Return \textbf{False}
  \EndIf
  \State theSeries := parent.slice.value
  \If{theOneSeries \textbf{is not None and} \\
      \hspace{25.2pt} theOneSeries != theSeries}
    \State \Return \textbf{False}
  \EndIf
  \State theOneSeries := theSeries
\EndFor
\State \Return theOneSeries \textbf{is not None}

\EndFunction
\end{algorithmic}
}
\end{algorithm}

\setlength{\textfloatsep}{15pt}
