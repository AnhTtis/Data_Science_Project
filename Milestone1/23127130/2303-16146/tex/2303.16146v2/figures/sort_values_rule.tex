% \begin{figure}
%     \begin{minted}[bgcolor=light-gray,escapeinside=||]{python}

% @{expr: called_on}
%    .sort_values()
%    .head(n=@{Constant(int): first_n}) |$\mapsto$|
% @{called_on}.nsmallest(n=@{first_n})
%    |$\mathcal{C}$|(type(@{called_on}) == DataFrame)
%     \end{minted}

%     \caption{A rewrite rule example}
%     \label{fig:sort-values-rule}
% \end{figure}


\begin{figure}
    \begin{subfigure}{\columnwidth}
  \begin{minted}[bgcolor=light-gray,escapeinside=||]{python}
@{expr: called_on}.sort_values().head(n=@{Const(int): first_n})
|{\LARGE\color{brown}$\mapsto$}|
@{called_on}.nsmallest(n=@{first_n})
  \end{minted}
      \caption{LHS {\color{brown}$\mapsto$} RHS}
      \label{fig:sort-values-rule-lhs-rhs}
    \end{subfigure}
    \hfill
    \begin{subfigure}{\columnwidth}
  \begin{minted}[bgcolor=light-gray,escapeinside=||]{python}
type(@{called_on}) == pandas.Series
  \end{minted}
      \caption{Preconditions}
      \label{fig:sort-values-rule-preconds}
    \end{subfigure}
    \caption{\revis{An example of a rewrite rule, named \textbf{SortHead}}. If we match the LHS in the source code,
    we can replace it with the RHS only if the preconditions hold (at runtime).}
    \label{fig:sort-values-rule}
  \end{figure}