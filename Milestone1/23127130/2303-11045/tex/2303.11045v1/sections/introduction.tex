\section{Introduction}
\label{sect:introduction}

% This paragraph: DLT are becoming more and more popular
% Explain that DLT needs to (1) have good node scalability for decentralization, (2) good throughput to satisfy application requirements
Blockchain-based \ac{DLT} experienced increasing adaptation and growing popularity in recent years.
The original Bitcoin protocol uses a \ac{PoW} scheme to achieve agreement on blocks of transactions, also called Nakamoto consensus~\cite{nakamoto2008bitcoin}.
Bitcoin and many of its more recently upcoming competitors aim to realize secure and decentralized applications. 
While Bitcoin's application is to allow its users to send and receive digital peer-to-peer cash, other blockchains, such as Ethereum~\cite{buterin2014next}, even allow building more complex applications by submitting generic code (called smart contracts) to the blockchain, where functions of smart contracts can be invoked by users sending transactions. 
A blockchain's security and decentralization depend on a large number of network participants. 
At the same time, the system performance, \ie the throughput, should suffice to match the application's requirements. 
% \hr{Die Zitierangaben in \cite{buterin2014next} sind f√ºr mich nicht nachvollziehbar. et al. bei autoren? volume 3,37???, pages 2--1???}

% This paragraph: Agreement in large-scale blockchain network. 
% Why PoW was used successfully to scale agreement.
% Number of Bitcoin nodes.
% Drawbacks of PoW
\paragraph{Agreement for Blockchain Networks} Blockchains use an \textit{agreement protocol} to decide which block they append next to the ledger. 
Ideally, agreement should work on a large-scale (meaning \emph{many} nodes) and geographically dispersed environment. 
\ac{PoW} achieved agreement and successfully allowed open membership by securing the blockchain network against Sybil attacks~\cite{douceur2002sybil}. 
This is because \ac{PoW} couples the probability of a node being allowed to decide the next block towards the computational resources it utilized over a certain time span. 
Because \ac{PoW} achieves agreement \textit{without coordination between the nodes} other than disseminating the decided blocks, it can scale well for a large number of nodes. 
As of this writing,  there are over 15,000 reachable Bitcoin nodes\footnote{https://bitnodes.io/}.

Nevertheless, \ac{PoW} comes with inherent design problems. 
In particular, it (1) wastes energy and computing resources, (2) usually does not scale up its performance when utilizing more resources, thus making the scheme very inefficient, and (3) it does not guarantee consensus finality~\cite{vukolic2015quest}, a property that ensures a block, once decided, is never changed later on.


% This paragraph: Advantages that BFT could have over PoW
% Problem of BFT Protocols: They need coordination
\paragraph{Coordination-based \ac{BFT} Agreement}
Recent research papers try to work around these problems by proposing to utilize \textit{coordination-based BFT agreement protocols} (which we will simply refer to as BFT protocols as of now) used in well-conceived protocols like PBFT~\cite{castro1999practical}, initially proposed more than 20 years ago. 
The benefits of PBFT and related protocols like BFT-SMaRt~\cite{bessani2014state} lie in proven protocol properties and various performance optimizations allowing these protocols to achieve up to the magnitude of $10^5$ transactions per second. 

In particular, BFT algorithms can be used as a \ac{PoS} variant~\cite{buterin2017casper}, in which blockchain nodes are granted permission to participate in the agreement, depending on the stake (\ie native cryptocurrency of the blockchain) they own. 
In coordination-based BFT protocols, the decision about which block is being appended to the blockchain is canonical among all correct nodes~\cite{buterin2017casper}; thus, they ensure consensus finality, and they are at the same time energy-efficient, \ie energy is only consumed for meaningful computations.








% the scalability challenge for BFT protocols
% As an example, explain the scalability challenge on the example of PBFT


\subsection{Motivation}

\begin{figure}[t]
    %\includegraphics[width=\textwidth]{}
    \centering
     \input{diagram/scalabilityBFTSmart}
    \caption{Performance of BFT-SMaRt (measured by~\cite{yin2018hotstuff}).}
    \label{fig:intro:bftsmart-performance}
\end{figure}

\begin{figure}[t]
    \includegraphics[width=\columnwidth]{img/pbft-scalability-problems2.pdf}
    \caption{Scalability problems of PBFT and BFT-SMaRt.}
    \label{fig:intro:pbft-scalability}
\end{figure}


\paragraph{The Scalability Challenge for BFT Agreement}
Traditional BFT protocols have a problem with scaling to large system sizes. 
To illustrate this with a brief example, let us review the well-known PBFT protocol, which is efficient (with performance in the magnitude of $10^5$ transactions per second) for small-sized systems but suffers a noticeable performance decrease (of down to a magnitude of $10^3$) when several hundred nodes are in the system. 
\cref{fig:intro:bftsmart-performance} shows the declining performance of a newer protocol, BFT-SMaRt (with the same agreement pattern as PBFT), when the system size increases.

PBFT and BFT-SMaRt share two main problems (see \cref{fig:intro:pbft-scalability}): First, the \textit{normal operation} message complexity is $O(n^2)$ because all replicas exchange their votes using all-to-all broadcasts. 
This makes the underlying communication topology of the protocol  essentially a clique.
Further, the more nodes are in the system, the more resources are consumed for only verifying message authenticators from all other nodes. 
% \hr{mac vs sig?}
% I updated to verifying, since this is true for signatures as well.

%\changed{Second, the protocol flow seems imbalanced: An additional burden is being put on the node receiving and disseminating all transactions from the clients to the other nodes.
%This essentially makes this node's bandwidth or its computational capabilities to produce message authenticators a limiting factor for the performance of the BFT protocol since all transactions of the system need to be channeled through this single --- called leader --- node. 
%}
Second, the protocol flow seems imbalanced: An additional burden is being put on the leader because the leader needs to receive transactions from all clients and then disseminate them in a batch to all other replicas. 
This essentially makes the leader's bandwidth or its computational capabilities to produce message authenticators a limiting factor for the performance of the BFT protocol since all transactions of the system need to be channeled through a single leader. 





% This paragraph: Many new blockchains exist that use scalable BFT protocols. The use scalability-enhancing techniques.
% Name some examples: Tendermint, Avalanche and Algorand. Explain they become more popular.
% What were the research efforts on improving performance and scalability for achieving BFT (communication-based) agreement ?
\paragraph{The Age of Novel BFT Blockchains}
Research on BFT consensus becomes increasingly necessary and practical.  Recently, many BFT protocols have been proposed for usage in blockchain infrastructures, such as HotStuff~\cite{hotstuff19}, SBFT~\cite{gueta2019sbft}, Tendermint~\cite{buchman2016tendermint, cason2021design},  Algorand~\cite{gilad2017algorand}, Avalanche~\cite{rocket2020avalanche}, Mir-BFT~\cite{stathakopoulou2019mir}, RedBellyBC~\cite{crain2021red}, and Kauri~\cite{neiheiser2021kauri}. 

These protocols aim at making BFT consensus more scalable, thus delivering high throughput at low latency in systems with hundreds or even thousands of participants. Scalability is essential to allow a blockchain to grow its ecosystem and satisfy the demands of many \ac{DeFi} applications.

For instance, as of the time of writing, the Avalanche mainnet consists of 1294 validators\footnote{https://explorer-xp.avax.network/validators} and has a total value locked of 2.78 billion USD\footnote{https://defillama.com/chain/Avalanche}.
But which techniques does the blockchain generation of BFT protocols employ to improve its scalability over well-known BFT protocols such as PBFT? In this survey, we strive to explore the vast design space of novel protocols and analyze their ideas for scaling Byzantine consensus.

% Define what a scalability-enhancing technique is
% Explain the different dimensons to improve scalability
\paragraph{A Closer Look on Scalability-Enhancing Techniques}
As shown in \cref{fig:intro:pbft-scalability}, traditional \ac{BFT} protocols do not scale well.  
One way to improve the scalability of BFT protocols is to optimize the protocol logic in a way that (1) reduces bottleneck situations and distributes the transaction load as evenly as possible among the available capacities of every replica and (2) utilizes clever aggregation techniques to reduce the overall message (or: authenticator) complexity in the system.

Many more abstract ideas have been developed to make consensus more scalable --  these ideas concern, for example, optimizing communication flow, parallelizing consensuses (\ie \textit{sharding}), utilizing special cryptographic primitives, or using trusted hardware components. 


\subsection{Research Questions}

The newer \enquote{blockchain generation} of BFT protocols requires scalable Byzantine consensus, which made exploring, advancing, and combining several scalability-enhancing techniques a broad and ongoing research field. In this paper, we want to create a systematization of knowledge on these ongoing efforts, which leads to our two main research questions:

 \begin{itemize}
\item[\textbf{R1}] Which novel techniques exist for scaling Byzantine consensus?
\item[\textbf{R2}] How do recent research papers combine existing scalability-enhancing techniques or ideas in a novel way to achieve better scalability than traditional BFT protocols?
 \end{itemize}

Scalability here relates to the number of nodes in the system.
We analyze which techniques can improve scalability in BFT protocols, \eg compared to traditional protocols like PBFT, and also cover the selection of smaller committees as a scalability technique.
Surveying the mechanisms of how to provide open membership is not the focus of this work, and we do not focus on defenses against Sybils in open membership systems, \eg computing a proof of work or depositing stake.

\subsection{Contributions}

The main ambitions of our survey paper are to review state-of-the-art research papers on BFT protocols to identify and classify the scalability-enhancing techniques that have been developed.
We further investigate the assumptions, ambitions, and trade-offs with which these techniques are used. In particular, our main contributions are the following:
\begin{itemize}[leftmargin=1em, itemsep=.1em, parsep=.1em, topsep=.1em,partopsep=.1em]
	\item We conduct a systematic search for exploring scalability-enhancing techniques for \ac{BFT} consensus.
	\item Moreover, we create a taxonomy that classifies and summarizes all of the found techniques. 
	\item Further, we also create a comparison of the new generation of scalable \ac{BFT} protocol designs.
	\item We comprehensively discuss the different ideas on an abstract level and pinpoint the design space from which these \ac{BFT} protocols originate.
	%\item We outline what research directions may be relevant for future work.
\end{itemize}



\subsection{Outline}
In \cref{background}, we first give an overview of the basics of \ac{BFT} protocols. 
Next, we present our methodology in \cref{sect:methodology}, which is based on a systematic literature search. 
Further, in \cref{sect:scalability}, we present our survey on scalability-enhancing techniques for Byzantine consensus, trying to answer the research questions from above. 
After that, we summarize the efforts of related surveys in \cref{sect:related_work} and conclude in \cref{sect:conclusions}.

% Goals, why do we do this survey
% Analyze the different ambitions and assumptions of developed BFT protocols
% Categorize the employed scalability-enhancing techniques 
% Explore the design space for improving scalability: what is open for future research? Which techniques have not yet been combined (roadmap)?

