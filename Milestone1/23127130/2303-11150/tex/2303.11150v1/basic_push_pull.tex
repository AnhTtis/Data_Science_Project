\section{Application of our Method to the Classic Protocols}\label{sec:classics}

In this section, we define the classic push, pull, and push-pull protocols, give some background information on them, and show how the methods developed above easily give very sharp (tight apart from additive constants) rumor spreading times. For this, we easily convince ourselves that all three protocols satisfy the exponential growth conditions. The push protocol satisfies the exponential shrinking conditions, whereas the pull and push-pull protocols both satisfy the double exponential shrinking conditions. For all these conditions, we can show for the upper and lower bound part of the conditions the same value for the critical parameter $\gamma_n$, ${\rho_n}$, and~$\ell$), which is why we then obtain sharp estimates for the rumor spreading times.

We stick to the usual convention that for rumor spreading in complete graphs we allow that nodes call themselves, that is, the random communication partner is chosen uniformly at random from all nodes. By replacing all $(1-\tfrac 1n)$ terms with $(1-\tfrac 1 {n-1})$, the elementary proofs below can easily be transformed to the setting where nodes only call random neighbors in the complete graph.


%\merk{this too relaxed. do we need it somewhere?}
%Formally, in Theorem~\ref{th:example-push},~\ref{th:example-pull},~and~\ref{th:example-push-n-pull} and in Proposition~\ref{prop:example-push-w-failures},~\ref{prop:example-pull-w-failures},~\and~\ref{prop:example-push-n-pull-w-failures}, one should also verify the conditions of Lemma~\ref{lem:general-connect} to ensure that the transition from growth to shrinking regimes takes at most $O(1)$ rounds.
%This seems to be obvious for the protocols discussed in this section, so we don't provide the proofs.

\subsection{Push Protocol}

The push protocol appeared in the computer science literature first in the works of Frieze and Grimmett~\cite{FriezeG85} (as a technical tool to analyze the all-pairs shortest path problem on complete digraphs with random edge weights) and, under the name \emph{rumor mongering}, Demers et al.~\cite{Demers87}, the first work that proposed rumor spreading as a robust and scalable method to maintain consistency in replicated databases. In the push protocol, in each round each node knowing the rumor calls a random neighbor and gossips the rumor to it.

The push protocol is the most intensively studied rumor spreading process. It has been proven that with high probability it disseminates a rumor known to a single node to all others in time logarithmic in the number $n$ of nodes when the communication networks is a complete graph (see below), a random graph in the $G(n,p)$ model with $p \ge (1+\eps) \ln(n)/n$, that is, only very slightly above the connectivity threshold, or a hypercube~\cite{FeigePRU90}, or a random regular graph~\cite{FountoulakisP10} (and this list is not complete).

For the complete graph, Frieze and Grimmett~\cite{FriezeG85} show (among other results) that with high probability, the rumor spreading time is $\log_2 n + \ln n \pm o(\log n)$. This estimate was sharpened by Pittel~\cite{Pittel87}, who proved that for any $h = \omega(1)$, the rumor spreading time with high probability is $\log_2 n + \ln n \pm h(n)$. The first explicit bound for the expected runtime, $\lfloor \log_2 n \rfloor + \ln n - 1.116 \le E[S_n] \le \lceil \log_2 n \rceil + \ln n + 2.765 + o(1)$ was shown in~\cite{DoerrK14}. All these works are relatively technical (see, e.g., the 9-pages proof of~\cite{Pittel87}) and heavily exploit particular properties of the push process (e.g., a birthday paradox argument for the first $\log_2(o(\sqrt n))$ calls and a reduction to the coupon collector process for the last roughly $\ln n$ rounds in~\cite{DoerrK14}).

With the methods developed in this work, we only need to show that the push protocol satisfies the exponential growth and shrinking conditions (with $\gamma_n = 1$ and ${\rho_n}=1$), which is very easy. This reproves the bound of~\cite{DoerrK14} cited above apart from the additive constants, but with a, as we believe, much simpler proof.



%In the push protocol only informed nodes make calls and forward the rumor.
%\begin{def*}[Basic push protocol]
%    Let a graph $G$ given and its vertex $v$ initially knows the rumor.
%    %At some discrete instances of time called rounds
%    At each round, each node knowing the rumor chooses uniformly at random a neighbor in $G$ and transfers the rumor to it.
%\end{def*}

\begin{theorem}\label{th:example-push}
	The expected rumor spreading time of the push protocol on the complete graph with $n$ vertices is $\log_2 n + \ln n \pm O(1)$.
\end{theorem}

\begin{proof}
	Consider one round of the protocol. Let $x_1, x_2$ be two different uninformed nodes. Let $X_1$ and $X_2$ be the indicator random variables for events that $x_1$ resp.~$x_2$ become informed. Clearly, if we condition on that $x_1$ becomes informed, then it is slightly less likely that $x_2$ becomes informed. Consequently, $\Cov[X_1,X_2] < 0$ and the covariance part of the exponential growth and shrinking conditions is satisfied.
%	 one and another gets the rumor correspondingly.
%	It is easy to see that the corresponding random indicator variables are negatively correlated.
%	Indeed, if one of the nodes gets informed, the probability that another one also gets informed is less than in the unconditioned case, because some calls are already wasted to inform the first node.
%%	As this observation doesn't depend on the number of informed nodes, it remains only to bound the probability of one node to get informed.

	Therefore, it remains to analyze the probability $p_k$ of an uninformed node to become informed.
	
	For the exponential growth regime, suppose that $k$ nodes are informed.	An uninformed node remains uninformed when all informed nodes fail to call it.
%	The probability that nobody calls this node in current round is $\left(1-\tfrac1n\right)^k$.
	Consequently, it becomes informed with probability $p_k = 1 - \left(1-\tfrac1n\right)^k$. With the estimates
	\[\tfrac{k}{n} - \tfrac{k^2}{2n^2} \le p_k \le \tfrac{k}{n}\]
	we see that the protocol satisfies the exponential growth conditions with parameter $\gamma_n = 1$. More precisely, we can take $\gamma_n=1$, $f=1$, $b=0$ and $c=0$ is both the upper and lower bound exponential growth condition. Taking $a=1$ satisfies the upper exponential growth condition, taking $a=0$ suffices for the lower exponential growth condition.
%	\[
%		p_k = 1 - \left(1-\tfrac1n\right)^k
%		\le \tfrac{k}{n} + O\left(\tfrac{k^2}{n^2}\right),
%	\]
%	so the protocol satisfies the exponential growth conditions with parameter $\gamma_n = 1$.
	
	For the exponential shrinking conditions, suppose that there are $u$ uninformed nodes.	Again, the probability for a node to stay uninformed is $1-p_{n-u} = \left(1-\tfrac1n\right)^{n-u}$.
By Corollary~\ref{cor:prelim:(1-1/n)^(n-u)}, for any $u<n$ we have the following estimate.
\[\tfrac1e \le 1-p_{n-u} \le \tfrac1e + \tfrac2e\cdot\tfrac{u}{n}\]
	The push protocol hence satisfies the exponential shrinking conditions (from $gn := \tfrac12 n$ uninformed nodes on) with parameter ${\rho_n}=1$.
	
	By Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:exp-shrinking-upper},~and~\ref{th:exp-shrinking-lower}, the expected rumor spreading time of the push protocol is $\log_2 n + \ln n \pm O(1)$.
\end{proof}

\subsection{Pull Protocol}

The pull protocol is dual to the push protocol in the sense that now in each round, each uninformed node calls a random neighbor and becomes informed if the latter was informed. We are not aware of a convincing practical motivation for this protocol, however, it has been very helpful in proving performance guarantees for other protocols, e.g., in~\cite{Giakkoupis11}. Note that the duality between the two protocols immediately shows that the probability that the push protocol in $t$ rounds moves a rumor initially present at a node $u$ to a node $v$ equals the probability that the pull protocol gets the rumor from $v$ to $u$ in $t$ rounds, but this does not imply that both protocols have the same rumor spreading times (as also Theorems~\ref{th:example-push} and~\ref{th:example-pull} show).

We are not aware of any performance guarantees proven for the pull protocol. Some existing results for the push protocol obviously can be transformed into results for the pull protocol via the duality and union bounds. For complete graphs, we do not see how this would give bounds stronger than $\Theta(\log n)$.

Interestingly, the expansion phase of the pull protocol (when viewed from a distance) resembles the expansion phase of the push protocol---the probability that an uninformed node becomes informed in a round starting with $k$ informed nodes is $p_k = \tfrac kn$ and thus, for small $k$, very close to the $\tfrac kn - \Theta(\tfrac{k^2}{n^2})$ probability of the push protocol. Nevertheless, the precise processes are very different. For example, in the push protocol we almost surely observe a perfect doubling of the number of informed nodes as long as $o(\sqrt n)$ nodes are informed. For the pull protocol, the number of newly informed nodes in the first round is binomially distributed with parameters $n-1$ and $\frac 1n$, so the probability for a perfect doubling is asymptotically equal to $\tfrac 1e$. For this reason, the existing analyses of the push protocol cannot easily be transferred to the pull protocol. This is different for our method, which ignored many details of the process and only relies on the rough characteristics $p_k$ and $c_k$ of the process. We show below that the similar values of $p_k$ lead to the same $\log_2 n \pm O(1)$ time it takes to inform a constant fraction of the nodes. From that point on, the double exponential shrinking conditions are obvious, leading to a double logarithmic remaining time.

%Unlike the push protocol, in the pull protocol only uninformed nodes make calls trying to hit their informed neighbors and "pull" the rumor from them.
%
%\begin{def*}[Basic pull protocol]
%    Let a graph $G$ given and its vertex $v$ initially knows the rumor.
%%    At some discrete instances of time called rounds
%	Each round, each uninformed node calls one of its neighbors chosen uniformly at random.
%    If the called node knows the rumor, it transfers the rumor to its interlocutor.
%\end{def*}

\begin{theorem}\label{th:example-pull}
	The expected rumor spreading time of the pull protocol on the complete graph with $n$ vertices is $\log_2 n + \log_2 \ln n \pm O(1)$.
\end{theorem}

\begin{proof}
  Clearly, the events that uniformed nodes become informed are mutually independent. Hence the covariance conditions are exponential growth and double exponential shrinking regimes are satisfied.
	
	An uninformed node becomes informed if its call reaches an informed node. Hence for all $k \in [1..n-1]$, we have  $p_k = k/n$. This shows that both the upper and lower exponential growth conditions are satisfied with parameter $\gamma_n=1$ (and $f=1$, $a=0$, $b=0$, $c=0$).
	
	For the same reason, the probability $1-p_{n-u}$ that an uninformed node remains uninformed when $u$ nodes are uninformed, is $1- p_{n-u} = 1 - \tfrac{n-u}{n} = \tfrac un$. Consequently, the upper and lower double exponential shrinking conditions are satisfied with $\ell = 2$ (and $g=1$, $\alpha = 0$, $a=1$, and $c=0$).
	
%	Suppose then that there are $\eps n$ ($0<\eps<1$) uninformed nodes.
%	The probability that an uninformed node stays uninformed in current round is equal to $\eps$, so the protocol satisfies the double exponential shrinking conditions with parameter $\ell = 2$.

	By Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:double-exp-shrinking-upper},~and~\ref{th:double-exp-shrinking-lower}, the expected rumor spreading time is $\log_2 n + \log_2 \ln n \pm O(1)$.
\end{proof}

\subsection{Push-Pull Protocol}\label{sec:push-pull}

In the push-pull protocol, both informed and uninformed nodes contact a random neighbor in each round. If one of the two partners of such a conversation is informed, then also the other one becomes informed. The push-pull protocol is popular for a number of reasons.

The push-pull protocol (called \emph{anti-entropy} there) was found to be very reliable in the first experimental work on epidemic algorithms~\cite{Demers87}. The seminal paper by Karp et al.~\cite{KarpSSV00} proved that the push-pull protocol disseminates a rumor in a complete graph in $\log_3 n \pm O(\log\log n)$ rounds with high probability. This not only is faster than the push and pull protocols, but it allows implementations using only few messages per node. The just mentioned rumor spreading time stems from an exponential growths phase of length roughly $\log_3 n$ and a double exponential shrinking phase. Hence by making informed nodes stop their activity after the exponential growth phase, the total number of messages can be reduced massively.

The push-pull protocol was also investigated in models for social networks. Clearly, when modeling human communication, say people randomly meeting at parties and chatting, a push-pull spreading mechanism makes sense. However, also from the algorithmic viewpoint, it was observed that in graphs with a non-concentrated degree distribution the push-pull protocol greatly outperforms the push and pull protocols. This was first made precise by Chierichetti, Latanzi, and Panconesi~\cite{ChierichettiLP09}, who showed that the push-pull protocol spreads a rumor in a preferential attachment graph~\cite{BarabasiA99,BollobasR03} in time $O(\log^2 n)$, whereas both the push and the pull protocols need time $\Omega(n^\alpha)$ for some constant $\alpha > 0$ to inform all nodes. The precise rumor spreading time of $\Theta(\log n)$ of the push-pull protocol was shown in~\cite{DoerrFF11} (see also~\cite{DoerrFF12acm}). There is was also proven that the rumor spreading time reduces to $\Theta(\frac{\log n}{\log\log n})$ when the communication partners are chosen randomly but with the previous partner excluded. This first sublogarithmic rumor spreading time was quickly followed up by other fast rumor spreading times in networks modeling social networks, e.g.,~\cite{FountoulakisPS12,DoerrFF12,MehrabianP14}.

The push-pull protocol also performs well and admits strong theoretical analyses when the network has certain general expansion properties like a good vertex expansion~\cite{GiakkoupisS12,Giakkoupis14} or a low conductance~\cite{MoskAoyamaS06,ChierichettiLP10stoc,Giakkoupis11}.

%
%If we allow the push protocol and the pull protocol to run simultaneously, we get the push-pull protocol.
%\begin{def*}[Push-pull protocol]
%    Let a graph $G$ given and its vertex $v$ initially knows the rumor.
%%    Suppose we also have a clock shared by all nodes counting the rounds since the rumor appeared.
%    Each round each node chooses one of its neighbors in $G$ uniformly at random and communicates with it ("calls it").
%    If two nodes communicate in current round and one of them is informed, then another one also gets informed at the end of the round.
%\end{def*}

%As before let the random indicator variables $X_i$ are such that $X_i = 1$ if and only if uninformed node $i$ gets informed at current round.
%It is easy to see that $X_i = \max\{pull(i),pushed(i)\}$, where
%\begin{itemize}
%	\item $pull(i) = 1$ if and only if uninformed node $i$ makes successful \emph{pull} call, i.e., hits some informed node;
%	\item $pushed(i) = 1$ if and only if uninformed node $i$ is called by an informed node, we name such call a \emph{push} call.
%\end{itemize}

%As the basic push-pull protocol on the complete graph is a homogeneous epidemic protocol, it suffices to show that the it satisfies the corresponding exponential growth and exponential shrinking conditions.

%Before the proofs we will introduce some useful notations.
%We say that the call is \emph{successful} if it causes a new informed node, otherwise it is \emph{failed}
%If the call is made by an informed node, then it is a \emph{push} call, otherwise it is a \emph{pull} one.
%The following indicator random variables are used to reduction of formulas.
%\begin{itemize}
%	\item $pull(i)=1$ if and only if the $i$-th node calls an informed node.
%	\item $pushed(i)=1$ if and only if the $i$-th node is called by an informed node.
%	\item $X_i=1$ if and only if the $i$-th uninformed node becomes informed at current round.
%\end{itemize}
%Obviously, $X_i = \max\{pull(i),pushed(i)\}$.
%It is also easy to see that $X_i$ are pairwise negatively correlated.
%This observation is sufficient for the covariance for both exponential growth and shrinking regimes.

%\begin{lemma}~\label{lem:push-pull-cov}
%	For any $i \ne j$, $\Cov[X_i,X_j] \le 0$.
%\end{lemma}
%\begin{proof}
%	Since the protocol is uniform, it suffices to show that $\Cov[X_1, X_2] \le 0$.
%%	The covariation of binary random variables is equal to
%%	$$\Cov[X_i,X_j] = \Pr[X_i=X_j=1] - \Pr[X_i=1]Pr[X_j=1].$$
%%	Since the protocol is uniform, it suffices to show that $\Pr[X_i=1|X_j=1] \le \Pr[X_i=1]$, for any $i \ne j$.
%	Equivalently, we can show that $\Pr[X_1=1|X_2=1] \le \Pr[X_1=1]$.
%	Indeed,
%	\begin{align}
%		\Pr&[X_1=1|X_2=1] \notag\\
%		& = \Pr[X_1=1|pull(2)=1] \cdot \Pr[pull(2)=1|X_2=1] \notag \\
%		& \qquad + \Pr[X_1=1|pull(2)=0,X_2=1] \cdot \Pr[pull(2)=0|X_2=1]. \label{eq:push-pull-1}
%	\end{align}
%	
%	Obviously the event ``$pull(2)=1" \AND ``X_2=1$" is nothing but ``$pull(2)=1$".
%	Then we see that $\Pr[X_1=1|pull(2)=1] = \Pr[X_1=1]$, because the outcoming call of the uninformed node have no influence on the informing any other node.	
%	It is also easy to see that $\Pr[X_1=1|pull(2)=0,X_2=1] \le \Pr[X_1=1]$, because since one of two nodes is called by some informed node, there are less chances of another one to be informed.
%	So we can substitute the long conditional probabilities in~\eqref{eq:push-pull-1} as follows.
%	\begin{align*}
%		\Pr&[X_1=1|X_2=1] \\
%		& \le \Pr[X_1=1] \cdot \left(\Pr[pull(2)=1|X_2=1]+\Pr[pull(2)=0|X_2=1]\right) \\
%		& = \Pr[X_1=1]
%	\end{align*}
%\end{proof}

\begin{theorem}\label{th:example-push-n-pull}
	The expected rumor spreading time of the push-pull protocol on the complete graph with $n$ vertices is $\log_3n + \log_2\ln n \pm O(1)$.
\end{theorem}

\begin{proof}
  We again discuss the covariance condition first. Consider one round of the protocol. Let $x_1$, $x_2$ be two different uninformed nodes. For $i = 1,2$, let $X_i$ be the indicator random variable for the event that $x_i$ becomes informed in this round, $Y_i$ the indicator random variable for the event that $x_i$ is called by an informed node, and $Z_i$ the indicator random variable for event that $x_i$ calls an informed node. Clearly, $X_i = \max\{Z_i,Y_i\}$.

  We show $\Cov[X_1,X_2] \le 0$, and thus all covariance conditions, by showing that $\Pr[X_1=1\mid X_2=1] \le \Pr[X_1=1]$. We have
    \begin{align}
        \Pr[X_1=&1 \mid X_2=1]
        = \Pr[X_1=1 \mid X_2=1 \AND Z_2=1] \cdot \Pr[Z_2=1 \mid X_2=1] \notag \\
        & + \Pr[X_1=1 \mid X_2=1 \AND Z_2=0] \cdot \Pr[Z_2=0 \mid X_2=1] \label{eq:push-pull-1}.
    \end{align}
    Since the intersection of events $Z_2=1 \AND X_2=1$ is equivalent to the single event $Z_2=1$ and the outgoing call of the uninformed node cannot inform any node, we have
    \begin{equation}
        \Pr[X_1=1 \mid X_2=1  \AND Z_2=1] = \Pr[X_1=1 \mid Z_2=1] = \Pr[X_1=1]. \label{eq:push-pull-2}
    \end{equation}
    When $Z_2=0 \AND X_2=1$ holds, then $x_2$ becomes informed via a push call, which is not available anymore to inform $x_1$. Hence
    \begin{equation}
        \Pr[X_1=1 \mid Z_2=0 \AND X_2=1] \le \Pr[X_1=1]. \label{eq:push-pull-3}
    \end{equation}
    From~\eqref{eq:push-pull-1} to~\eqref{eq:push-pull-3} we obtain $\Pr[X_1=1 \mid X_2=1] \le \Pr[X_1=1]$.
	%\begin{align*}
%		\Pr&[X_1=1 \mid X_2=1] \\
%		& \le \Pr[X_1=1] \cdot \left(\Pr[pull(2)=1 \mid X_2=1]+\Pr[pull(2)=0 \mid X_2=1]\right) \\
%		& = \Pr[X_1=1]
%	\end{align*}

	An uninformed node remains uninformed if it is not called by any informed node and it calls an uninformed node itself. Hence $p_k = 1 - \left(1-\tfrac1n\right)^k\cdot\tfrac{n-k}{n}$.
%    \[
%    	1 - \Pr[pull(1)=0]\cdot\Pr[pushed(1)=0]
%    	= 1 - \left(1-\tfrac1n\right)^k\cdot\tfrac{n-k}{n}.
%    \]
    Using the estimates from Lemma~\ref{lem:prelim:(1-1/n)^k} we obtain
    \[
    	2\tfrac{k}{n} - \tfrac{3k^2}{2n^2} \le p_k \le 2\tfrac{k}{n}% + \tfrac{k^2}{n^2}
    \]
    and see that the protocol satisfies the exponential growth conditions with $\gamma_n = 2$.



%    For the double exponential shrinking conditions, suppose that there are $u$ uninformed nodes.
    Likewise, the probability $1-p_{n-u}$ that an uninformed node stays uninformed in a round starting with $u$ uninformed nodes is equal to $\tfrac{u}{n} \left(1-\tfrac1n\right)^{n-u}$.
    With Corollary~\ref{cor:prelim:(1-1/n)^(n-u)}, we estimate \[\tfrac1e\cdot\tfrac{u}{n} \le 1-p_{n-u} \le \tfrac{u}{n}.\]
    Therefore, the protocol satisfies the double exponential shrinking conditions with $\ell = 2$.

    By Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:double-exp-shrinking-upper},~and~\ref{th:double-exp-shrinking-lower}, the expected rumor spreading time is $\log_3 n + \log_2 \ln n \pm O(1)$.
\end{proof}


%\begin{lemma}\label{lem:push-pull-growth}
%	Let us consider one round of push-pull protocol with $k$ informed nodes.
%	Then $\Pr[X_1=1] = 2\tfrac{k}{n} + O\left(\tfrac{k^2}{n^2}\right)$, for any $k < gn$.
%%    The basic push-pull protocol satisfies the exponential growth conditions with parameter $P(n)=2$.
%\end{lemma}
%\begin{proof}
%%	Let there are $k<gn$ informed nodes for some $g\in]0,1[$.
%%	It suffices to evaluate the probability of being informed $\Pr[X_i=1]$ for the $i$-th uninformed node.
%	Indeed, some node stays uninformed in current round if it is not called by any informed node and its own pull call goes to an uninformed one.
%	Therefore,
%    \begin{align*}
%	    \Pr&[X_1=1] = 1 - \Pr[X_1=0] \\
%	    & = 1 - \Pr[pull(1)=0]\cdot\Pr[pushed(1)=0] \\
%	    & = 1 - \left(1-\tfrac1n\right)^k\cdot\tfrac{n-k}{n}.
%    \end{align*}
%    To finish the proof we recall that $\left(1-\tfrac1n\right)^k = 1 - \tfrac{k}{n} + O\left(\tfrac{k^2}{n^2}\right)$.
%    Then by the simple computation we see that $\Pr[X_1=1] = 2\tfrac{k}{n} - O\left(\tfrac{2k^2}{n^2}\right)$.
%%    By the simple analysis, we see that $1-\frac{k}{n} \le (1-\frac1n)^k \le 1-\frac{k}{n}+\frac{k^2}{2n^2}$.
%%    \[
%%    	2\tfrac{k}{n} - \tfrac{2k^2}{n^2} \le \Pr[X_i=1] \le 2\tfrac{k}{n},
%%    \]
%%    and the exponential growth conditions are satisfied.
%\end{proof}
%
%\begin{lemma}\label{lem:push-pull-shrinking}
%	Let us consider one round of push-pull protocol with $\eps n$ uninformed nodes.
%	Then $\Pr[X_1=0] = O(\eps)$.
%%    The basic push-pull protocol satisfies the double exponential shrinking conditions with parameter $\ell = 2$.
%\end{lemma}
%\begin{proof}
%%    Let us consider the $i$-th uninformed node in a round in which $\eps n$ nodes remain uninformed.
%%    Our goal is to prove that the probability that this node remains uninformed at the end of the round is upper and lower bounded by $a\eps^\ell$ for some values of $a$.
%    Indeed, a node stays uninformed if and only if it misses its own outgoing call it is not called by any informed node.
%    Therefore,
%    \[
%        \Pr[X_1=0] = \eps \left(1-\tfrac1n\right)^{(1-\eps)n} = O(\eps).
%%        \sim \eps \left(\tfrac1e+O\left(\tfrac1n\right)\right) \left(1-\tfrac1n\right)^{-\eps n}.
%    \]
%%    So, if $\eps \le g$ for some $g\in]0,1[$, then $\eps/e \le \Pr[X_i=0] \le \eps$, that finishes the proof.
%\end{proof}
%
%\begin{proof}[Proof of Theorem~\ref{th:example-push-n-pull}]
%	Lemma~\ref{lem:push-pull-cov} claims that $X_i$ are pairwise negatively correlated.
%	Together with Lemma~\ref{lem:push-pull-growth} it implies the exponential shrinking conditions with parameter $\gamma_n=2$.
%	Finally, Lemma~\ref{lem:push-pull-shrinking} claims that the push-pull protocol satisfies the double exponential shrinking conditions with parameter $\ell = 2$.
%	Therefore the expected rumor spreading time is $\log_3n + \log_2\ln n + O(1)$.
%\end{proof}

\section{Robustness, Multiple Calls, and Dynamic Graphs}\label{sec:more examples}

In this section, we apply our analysis method to settings (i)~in which calls fail independently with constant probability, (ii)~in which nodes are allowed to call a random number of other nodes instead of one as proposed in~\cite{PanagiotouPS15}, and (iii)~to a simple dynamic graph setting.

\subsection{Transmission Failures}

One key selling point for randomized rumor spreading, and more generally gossip-based algorithms, is that all these algorithms due to the intensive use of independent randomness are highly robust against all types of failures. In this subsection, we analyze the performance of the three classic protocols in the presence of independent transmission failures, that is, when calls are successful only with probability $p < 1$. Not unexpectedly, we can show that the rumor spreading times only increase by constant factors. However, we also observe a structural change, namely that the extremely fast double exponential shrinking previously seen with the pull and push-pull protocols is replaces by the slower single exponential shrinking regime. This has the important implication that the message complexity of the simple push-pull protocol (where messages are counted as in~\cite{KarpSSV00} and the protocol is assumed to stop when a suitable time limit is reached) increases from the theoretically optimal value of $\Theta(n \log\log n)$ to $\Theta(n \log n)$, see the remark following the proof of Theorem~\ref{th:example-push-n-pull-w-failures}.

While the robustness of randomized rumor spreading is consistently emphasized in the literature, only relatively few proven guarantees for this phenomenon exist. All results model communication failures by assuming that each call independently with probability $1-p$ fails to reach its target. The usual assumption is that the protocol does not take notice of such events. Els\"asser and Sauerwald~\cite{ElsasserS09} show for any graph $G$ that if the push protocol spreads a rumor with probability $1-O(1/n)$ to all nodes in time $T$, then the push protocol with failures succeeds in informing all nodes with probability $1 - O(1/n)$ in time $\tfrac 6p T$. This was made more precise for complete graphs in~\cite{DoerrHL13}, for which a rumor spreading time of $\log_{1+p} + \tfrac 1p n \pm o(\log n)$ was shown to hold with high probability. The same result also holds for random graphs in the $G(n,p')$ model when the edge probability $p'$ is $\omega(\log(n)/n)$, that is, asymptotically larger than the connectivity threshold~\cite{FountoulakisHP10}. To the best of our knowledge, these few results are all that is known in terms of proven guarantees for the classic rumor spreading protocols in the presence of failures.

We now use the methods developed in this work to obtain very sharp estimates for the runtimes of the classic protocols on complete graphs when calls fail independently with probability $1-p$, $p < 1$. As in Sections~\ref{sec:classics}, the growth or shrinking conditions valid in each case are easily proven, showing again the versatility of our approach.



%In the three classical examples above we assumed that all communications are reliable.
%Our method lets to analyze the protocols above if we suppose that each call can be failed independently with constant probability $1-p$.
%The expected runtimes for push, pull and push-pull protocols are provided in Proposition~\ref{prop:example-push-w-failures},~\ref{prop:example-pull-w-failures},~and~\ref{prop:example-push-n-pull-w-failures} correspondingly.

\begin{theorem}\label{th:example-push-w-failures}
    The expected rumor spreading time for the push protocol with success probability $p$ on the complete graph of size $n$ is equal to
    \[
        \log_{1+p} n + \tfrac1p\ln n \pm O(1).
    \]
\end{theorem}
\begin{proof}
	With the same argument as in the proof of Theorem~\ref{th:example-push}, we see that the covariances regarded in the covariance conditions are all negative.
	
	Consider an uninformed node in a round started with $k$ informed nodes. The probability that it becomes informed in this round is $p_k = 1 - (1-\tfrac{p}{n})^k$. By Lemma~\ref{lem:prelim:(1-1/n)^k}, we estimate
	\[
		\tfrac{pk}{n} - \tfrac{p^2k^2}{2n^2} \le p_k \le \tfrac{pk}{n}
	\]
	for all $k < n$ and see that the protocol satisfies the exponential growth conditions in $[1,n[$ with $\gamma_n = p$.
%	\begin{equation}
%		1 - \left(1-\tfrac{p}{n}\right)^k
%		= \tfrac{pk}{n} + O\left(\tfrac{p^2 k^2}{n^2}\right) \notag.
%	\end{equation}
	
	Similarly, the probability that an uninformed node in a round starting with $u := n-k$ uninformed nodes stays uninformed, is $1-p_{n-u} = \left(1-\tfrac{p}{n}\right)^{n-u}$. By Corollary~\ref{cor:prelim:(1-p/n)^(n-u)}, we estimate
	\[
		e^{-p} \le 1-p_{n-u} \le e^{-p} (1+\tfrac{2pu}{n})
	\]
	for all $u < n$ and thus have the exponential shrinking conditions with ${\rho_n} = p$ for all $u \le n/2$.
	
	By Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:exp-shrinking-upper},~and~\ref{th:exp-shrinking-lower}, the expected rumor spreading time is $\log_{1+p} n + \tfrac1p\log n \pm O(1)$.
\end{proof}

The result above and its proof are valid for $p=1$ and then coincide with Theorem~\ref{th:example-push}. For the pull protocol and the push-pull protocol, we observe a substantial change of the process when transmission errors occur. In this case, an uninformed node stays uninformed with probability at least $1-p$, so the double exponential shrinking conditions cannot be satisfied. Instead, we observe that the single exponential shrinking conditions are satisfied.

\begin{theorem}\label{th:example-pull-w-failures}
	The expected rumor spreading time of the pull protocol with success probability $p<1$ on the complete graph of size $n$ is equal to
	\begin{equation}
		\log_{1+p}n + \tfrac1{\ln \frac{1}{1-p}} \ln n \pm O(1) \notag.
	\end{equation}
\end{theorem}

\begin{proof}
	As in the proof of Theorem~\ref{th:example-pull}, the events that uninformed nodes become informed are mutually independent. Hence all covariance conditions are satisfied with $c=0$. The probability that an uninformed node becomes informed in a round starting with $k$ informed nodes is $p_k = p\frac kn$, hence the protocol satisfies the exponential growth conditions in $[1,n[$ with $\gamma_n = p$.
	
	Similarly, the probability that an uninformed node remains uninformed in a round starting with $u$ uninformed nodes is \[1 - p_{n-u} = 1 - p\tfrac{n-u}{n} = 1 - p + p \tfrac un = \exp(-\ln \tfrac 1 {1-p}) + p \tfrac un.\] Consequently, the protocol satisfies the exponential shrinking conditions with ${\rho_n} = \ln\tfrac1{1-p}$ for all $u \le gn$, $g$ any constant smaller than $1$.
	
	By Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:exp-shrinking-upper},~and~\ref{th:exp-shrinking-lower}, the expected rumor spreading time is $\log_{1+p} n + \tfrac1{\ln(1/(1-p))} \ln n \pm O(1)$.
\end{proof}

\begin{theorem}\label{th:example-push-n-pull-w-failures}
	The expected rumor spreading time for the push-pull protocol with success probability $p<1$ on the complete graph of size $n$ is equal to
	\begin{equation}
		\log_{2p+1}n + \tfrac1{p + \ln \frac{1}{1-p}} \ln n \pm O(1) \notag.
	\end{equation}
\end{theorem}
\begin{proof}
	Using the same arguments as for the push-pull protocol without failures, we observe that the covariances are at most zero, so all covariance conditions are satisfied.
	Consider an uninformed node in a round starting with $k$ informed nodes.
	The probability that this node does not inform itself via its pull call is $1-p\tfrac{k}{n}$.
	The probability that it is not successfully called by an informed node is $\left(1-\tfrac{p}{n}\right)^k$.
	Hence $p_k = 1 - \left(1-p\tfrac{k}{n}\right) \left(1-\tfrac{p}{n}\right)^k$ and Corollary~\ref{cor:prelim:(1-p/n)^k} gives
	\[
		2p\tfrac{k}{n} - \tfrac{3p^2k^2}{2n^2} \le p_k \le 2p\tfrac{k}{n}.
	\]
%	\begin{equation}
%		1 - \left(1-p\tfrac{k}{n}\right) \left(1-\tfrac{p}{n}\right)^k
%		= 2p\tfrac{k}{n} + p^2 O\left(\tfrac{k^2}{n^2}\right) \notag.
%	\end{equation}
	Thus the protocol satisfies the exponential growth conditions in $[1,\tfrac 23n[$ with $\gamma_n = 2p$.

    Likewise, the probability $1-p_{n-u}$ that an uninformed node stays uninformed in a round starting with $u$ uninformed nodes is equal to
    $\left(1-p\tfrac{n-u}{n}\right) \left(1-\tfrac{p}{n}\right)^{n-u}$.
    With Corollary~\ref{cor:prelim:(1-p/n)^(n-u)} we estimate
    \[
        (1-p)e^{-p} + pe^{-p}\cdot\tfrac{u}{n}
        \le 1-p_{n-u}
        \le (1-p)e^{-p} + 3pe^{-p}\cdot\tfrac{u}{n}.
    \]
%	\begin{equation}
%		\left(1-p\tfrac{n-u}{n}\right) \left(1-\tfrac{p}{n}\right)^{n-u}
%		= \exp\left(-p+\ln(1-p)\right) + O\left(\tfrac{u}{n}\right) \notag.
%	\end{equation}
%	Since $u < n/2$, for any $n$ big enough we have
%	\[
%		e^{-p}(1-p)\left(1-\tfrac{7p^2+4p^3u}{8n}\right)
%		\le 1-p_{n-u}
%		\le e^{-p}(1-p) + e^{-p}(3p+p^2)\tfrac{u}{n}.
%	\]
	Therefore, the protocol satisfies the exponential growth conditions with ${\rho_n} = p + \ln\tfrac1{1-p}$.
    Thus by Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:exp-shrinking-upper},~and~\ref{th:exp-shrinking-lower}, the expected spreading time is equal to
    $\log_{p+1}n + \tfrac1{p + \ln(1/(1-p))} \ln n \pm O(1)$.
%	\begin{equation}
%		\log_{p+1}n + \tfrac1{p + \ln(1/(1-p))} \ln n + O(1) \notag.
%	\end{equation}
\end{proof}

The fact that in the presence of transmission failures the double exponential shrinking regime ceases to exist has an important implication on the message complexity. In their seminal paper~\cite{KarpSSV00}, Karp et al.\ show that any address-oblivious rumor spreading algorithm that informs all nodes of the complete graph with at least constant probability needs $\Omega(n \log\log n)$ message transmissions in expectation (we refer to that paper for a discussion of the tricky question how to count messages in algorithms performing pull calls).

This optimal order of magnitude is attained by the push-pull protocol when nodes stop sending a rumor that is older than $\log_3 n + O(\log\log n)$ rounds. As Karp et al.\ remark, relying on such a time stamp is risky. A mild underestimate of the true rumor spreading time leaves a constant fraction of the nodes uninformed. A mild overestimate of the rumor spreading time by $\eps \log n$ rounds leads to the situation that for $\eps \log n$ rounds a constant fraction of the nodes knows and pushes the rumor, which implies a message complexity of $\Omega(n \log n)$. For this reason, Karp et al.\ propose the more complicated median-counter algorithms which is robust against a moderate number of adversarial node failures and against moderate deviations from the uniform choice of the nodes to contact.

Our above analysis of the push-pull protocol in the presences of transmission faults shows that not only an unexpected deviation from the ideal fault-free push-pull protocol leads to an increased message complexity, but even a perfectly anticipated faulty behavior. While we know the expected rumor spreading time very precisely (and we could with the same arguments also show a tail bound stating that our upper bound for the expectation is exceeded by $\lambda$ with probability $\exp(-\Omega(\lambda))$ only), the ``transmit until time limit reached'' approach still leads to a message complexity of $\Omega(n \log n)$ due to the missing double exponential shrinking phase. As our analysis shows, after an expected number of $\log_{2p+1} n$ iterations, a constant fraction of the nodes are informed. However, it takes another $\tfrac1{p + \ln \frac{1}{1-p}} \ln n + O(1)$ rounds in the exponential shrinking regime until all nodes are informed. Hence when using the simple ``transmit until time limit reached'' approach to limit the number of messages, the exponential shrinking regime alone would see $\Omega(n \log n)$ push calls by the $\Omega(n)$ informed nodes.

It is not clear how to overcome this difficulty. The median-counter algorithm of Karp et al.\ for constant-probability transmission failures also seems to require $\Omega(n \log n)$ messages (see the comment right before Theorem~3.1 in~\cite{KarpSSV00}).

\subsection{Multiple Calls}

In this section, we analyze rumor spreading protocols in which in each round each node when active calls a random number $R$ of nodes. This was proposed by~\cite{PanagiotouPS15} to model different data processing speeds of nodes. Unlike in~\cite{PanagiotouPS15}, we assume that each node in each round resamples the number of nodes it may call. This allows to model changing data processing speed as opposed to nodes having generally different speeds.

Consider a random integer variable $R$ taking values in $[0,n[$.
We say that a rumor spreading protocol is an $R$-protocol if in each round it respects the following call procedure.
Each node which can make calls in current round samples independently a new value $r$ from $R$.
Then it calls $r$ different neighbors chosen uniformly at random.

In this section we consider the $R$-push protocol and the $R$-push-pull protocol and prove the statements similar to Theorem~1.1, 1.2, and 1.3 from~\cite{PanagiotouPS15}.
Note that by putting $R\equiv1$, we obtain the classic push and push-pull protocols.
\begin{theorem}\label{th:multiple-push}
    Assume that $R$ is a distribution with $\E[R] = \Theta(1)$ and $\Var[R]=O(1)$.
    Then the expected spreading time for the $R$-push protocol on the complete graph of size $n$ is equal to
    \[
        \log_{1+\E[R]}n + \tfrac1{\E[R]}\ln n \pm O(1).
    \]
\end{theorem}
\begin{proof}
    Consider a round of the protocol started from $k$ informed nodes.
    Let $x_1$ and $x_2$ be two different uninformed nodes and let $X_1$ and $X_2$ be the indicator random variables for events that $x_1$ resp. $x_2$ become informed.
    Suppose that node $y$ is informed.
    The probability that $x_1$ and $x_2$ are both called by $y$ is at most
    \[
        \sum_{j\ge2} \Pr[R=j] \cdot \binom{j}{2} \cdot \tfrac1{n(n-1)}
        \le \tfrac1{n^2} \sum_{j\ge2} j^2 \cdot \Pr[R=j]
        \le (\Var[R] + \E[R]^2) \cdot \tfrac1{n^2}
        = O\left(\tfrac1{n^2}\right).
    \]
%    The last estimate follows from $\E[R] = O(1)$ and $\Var[R] = O(1)$.
    Since there are $k$ informed nodes, the probability that $x_1$, $x_2$ are both called by the same node (not necessary $y$) is $k\cdot O\left(\tfrac1{n^2}\right)$.
    In addition, if we condition on the event that $x_1$ and $x_2$ are not called by the same node, then the probability that they both get informed is slightly less than $p_k^2 = \Pr[X_1=1]^2$.
    Therefore, $\Cov[X_1,X_2] \le k\cdot O\left(\tfrac1{n^2}\right)$ for any $k < n$ which corresponds to the covariance condition for both exponential growth and exponential shrinking.

    Now let us study the probability $p_k$.
    Since the probability that $x$ does not belong to a random set of $j$ nodes is equal to
    $$\left(1-\tfrac1n\right)\left(1-\tfrac1{n-1}\right)\ldots\left(1-\tfrac1{n-j+1}\right) = \tfrac{n-j}{n},$$
    the probability that $y$ does not call $x$ is equal to $\sum_{j\ge0} \Pr[R=j] \cdot \tfrac{n-j}{n} = 1 - \tfrac{\E[R]}{n}$.
    Therefore the probability $p_k$ that $x$ gets informed in current round is equal to
    \begin{equation}
        1 - \left(1-\tfrac{\E[R]}{n}\right)^k. \label{eq:multiple-1}
    \end{equation}
    With Corollary~\ref{cor:prelim:(1-p/n)^k} we estimate
    \begin{equation}
        \E[R]\cdot\tfrac{k}{n} - \E[R]^2\cdot\tfrac{k^2}{2n^2}
        \le p_k
        \le \E[R]\cdot\tfrac{k}{n}, \label{eq:multiple-1}
    \end{equation}
    for any $k \le n/\E[R]$.
    Therefore, the protocol satisfies the exponential growth conditions in $[1,n/\E[R]]$ with $\gamma_n = \E[R]$.

    Similarly, the probability that an uninformed node stays uninformed in a round starting with $u:=n-k$ uninformed nodes, is $1-p_{n-u} = \left(1-\tfrac{\E[R]}{n}\right)^{n-u}$.
    By Corollary~\ref{cor:prelim:(1-p/n)^(n-u)}, for all $u \le n/\E[R]$ we estimate
    \begin{equation}
        e^{-\E[R]}
        \le 1-p_{n-u}
        \le e^{-\E[R]} \left(1+2\E[R]\tfrac{u}{n}\right). \label{eq:multiple-4}
    \end{equation}
    Therefore, the protocol satisfies the exponential shrinking conditions in $[n(1-1/\E[R]),n]$ with ${\rho_n} = \E[R]$.

    We note that the intervals for the exponential growth and shrinking regime does not intersect if $\E[R] > 2$.
    However, we still be able to bound the expected spreading time.
    From~\eqref{eq:multiple-1} it follows that $p_{n/\E[R]} = 1-\tfrac1e+o(1)$ and $p_{n(1-1/\E[R])} = 1 - e^{1-\E[R]} + o(1)$.
    Since $p_k$ increases, it is bounded uniformly for any $k \in \left[\tfrac{n}{\E[R]}, n-\tfrac{n}{\E[R]}\right]$.
    Hence, by Lemma~\ref{lem:general-connect}, we have
    $\E\left[T\left(\tfrac{\E[R]}{n},n-\tfrac{\E[R]}{n}\right)\right] = O(1)$.
    So by Theorems~\ref{th:exp-growth-upper}~and~\ref{th:exp-shrinking-upper}, the expected rumor spreading time is at most $\log_{1+\E[R]} n + \tfrac1{\E[R]}\log n \pm O(1)$.

    Similarly, by Lemma~\ref{lem:general-connect-lower}, there exists some $f' \in \left]1-\tfrac1{\E[R]},1\right[$ such that with probability $1-O\left(\tfrac1n\right)$ the number of informed nodes after some round will belong to $\left[n-\tfrac{n}{\E[R]},f'n\right]$.
    Then by Theorems~\ref{th:exp-growth-lower}~and~\ref{th:exp-shrinking-lower}, the expected rumor spreading time is at least $\log_{1+\E[R]} n + \tfrac1{\E[R]}\log n \pm O(1)$.
\end{proof}

\begin{theorem}\label{th:multiple-push-pull}
    Assume that $R$ is a distribution with $\E[R] = \Theta(1)$ and $\Var[R]=O(1)$.
    Let $\ell$ be the smallest nonnegative integer such that $\Pr[R=\ell] > 0$ and we suppose that $\Pr[R=\ell] = \Theta(1)$.
    Then the expected spreading time for the $R$-push-pull protocol on the complete graph of size $n$ is at most
    \begin{align*}
        & \log_{1+2\E[R]}n + \tfrac1{\E[R]-\ln\Pr[R=0]} \cdot \ln n \pm O(1), & \ell = 0; \\
        & \log_{1+2\E[R]}n + \log_{1+\ell}\ln n \pm O(1), & \ell > 0.
    \end{align*}
\end{theorem}
\begin{proof}
	As usual, we discuss the covariance condition first.
	Consider one round of the protocol started from $k$ informed nodes.
	Let $x_1$, $x_2$ be two different uninformed nodes.
	For $i = 1,2$, let $X_i$ be the indicator random variables for event that $x_i$ becomes informed in this round, $Y_i$ the indicator random variable for the event that $x_i$ is called by an informed node, and $Z_i$ the indicator random variable for event that $x_i$ calls an informed node.
	Since $Y_i$ coincides with $X_i$ for the push protocol from the proof of Theorem~\ref{th:multiple-push}, we have $\Cov[Y_1,Y_2] \le k \cdot O\left(\tfrac1{n^2}\right)$.
	In addition $Z_i$ are pairwise independent and also independent from $Y_i$.
	Since $X_i = \max\{Z_i,Y_i\}$ we have also $\Cov[X_1,X_2] \le k \cdot O\left(\tfrac1{n^2}\right)$ for any $k < n$.
	Therefore, the covariance condition is satisfied for exponential growth and both exponential and double exponential shrinking conditions.
	
	Let us study $\Pr[Z_1=0]$.
	If node $x_1$ calls $j$ different nodes in current round, then the probability that it does not hit informed node is $\left(1-\tfrac{k}{n}\right)\ldots\left(1-\tfrac{k}{n-j+1}\right)$.
	Summing over all possible values of $j$ we obtain the following.
	\begin{equation}
		\Pr[Z_1=0] = \sum_{j=0}^{n-k} \Pr[R=j] \cdot \left(1-\tfrac{k}{n}\right)\ldots\left(1-\tfrac{k}{n-j+1}\right). \label{eq:multiple-3}
	\end{equation}
	Recall that that $\sum_{j=0}^n j\cdot\Pr[R=j] = \E[R]$ and $\sum_{j=0}^n j^2\cdot\Pr[R=j] = \Var[R] + \E[R]^2 = O(1)$.
	Using estimate from Corollary~\ref{cor:prelim:(1-p/n)^k}, we compute for any $k\le\tfrac{n}{2}$
	\begin{align*}
		\Pr[Z_1=0]
		& \le \sum_{j=0}^{n-k} \Pr[R=j] \cdot \left(1-\tfrac{k}{n}\right)^j \\
		& \le \sum_{j=0}^{n/k}\Pr[R=j] \cdot \left(1-j\tfrac{k}{n}+j^2\tfrac{k^2}{2n^2}\right)
			+ \sum_{j=n/k+1}^{n-k} \Pr[R=j] \\
		& = \sum_{j=0}^{n/k}\Pr[R=j] - \tfrac{k}{n}\sum_{j=0}^{n/k}j\cdot\Pr[R=j]
			+ \tfrac{k^2}{2n^2}\sum_{j=0}^{n/k}j^2\cdot\Pr[R=j]
			+ \sum_{j=n/k-1}^{n-k}\Pr[R=j] \\
		& \le 1 - \tfrac{k}{n}\left(\E[R]-\sum_{j=n/k-1}^n j\cdot\Pr[R=j]\right)
			+ \tfrac{k^2}{n^2}\sum_{j=0}^{n-k}j^2\cdot\Pr[R=j] \\
		& \le 1 - \E[R] \cdot \tfrac{k}{n} + \tfrac{k^2}{n^2} \sum_{j=n/k-1}^n j^2\cdot\Pr[R=j]
			+ \tfrac{k^2}{n^2}\sum_{j=0}^{n-k}j^2\cdot\Pr[R=j] \\
		& \le 1 - \E[R] \cdot \tfrac{k}{n} + 2(\Var[R]+\E[R]^2) \cdot \tfrac{k^2}{n^2}.
	\end{align*}
	For any $k\le\tfrac{n}{2}$ we can similarly bound $\Pr[Z_i=0]$ from below using Bernoulli's inequality.
	\begin{align*}
		\Pr[Z_1=0]
		& \ge \sum_{j=0}^{n-k} \Pr[R=j]\left(1-k\cdot\tfrac{j}{n-j}\right) \\
		& \ge \sum_{j=0}^{n-k} \Pr[R=j]\left(1-\tfrac{jk}{n}\left(1+2\tfrac{j}{n}\right)\right) \\
		& = 1 - \E[R]\cdot \tfrac{k}{n} + O(1) \cdot \tfrac{k^2}{n^2}
	\end{align*}
	By \eqref{eq:multiple-1}, we estimate $\Pr[Y_1=0] = 1-\E[R]\cdot\tfrac{k}{n} \pm O(1) \cdot \tfrac{k^2}{n^2}$.
	Since $Y_1$ and $Z_1$ are independent, we have
	$$\Pr[X_1=1] = 1-\Pr[Y_1=0]\cdot\Pr[Z_1=0].$$
	Therefore, $p_k = 2\E[R]\cdot\tfrac{k}{n} \pm O(1) \cdot \tfrac{k^2}{n^2}$ for any $k \le \min\left\{\tfrac{n}{2}, \tfrac{n}{\E[R]}\right\}$.
	Hence the protocol satisfies the exponential growth conditions with $\gamma_n = 2\E[R]$ for any $k \le \min\left\{\tfrac{n}{2}, \tfrac{n}{\E[R]}\right\}$.
	
	Now we discuss the shrinking conditions.
	We consider a round started from $u:=n-k$ uninformed nodes.
	Similarly to~\eqref{eq:multiple-3}, we have
	\[
		\Pr[Z_1=0] = \sum_{j\ge0} \Pr[R=j] \cdot \tfrac{u}{n} \cdot \tfrac{u-1}{n-1} \cdot \ldots \cdot \tfrac{u-j+1}{n-j+1}.
	\]
	Assume first that $\Pr[R=0] > 0$, i.e., $\ell=0$.
	Since $x_1$ might not call in current round, there is at least a constant probability, that it stays uninformed.
	With~\eqref{eq:multiple-4} and estimate
	$$\Pr[R=0] \le \Pr[Z_1=0] \le \Pr[R=0] + \Pr[R\ge1] \cdot \tfrac{u}{n},$$
	we see that $\Pr[X_1=0] = \Pr[R=0]\cdot e^{-\E[R]} \pm O(1)\cdot\tfrac{u}{n}$ for any $u \le \min\left\{\tfrac{n}{2}, \tfrac{n}{\E[R]}\right\}$.
	In this case the protocol satisfies the exponential shrinking conditions with ${\rho_n} = \E[R] - \ln\Pr[R=0]$.
	Applying Lemma~\ref{lem:general-connect}~and~\ref{lem:general-connect-lower} in the similar way as in the proof of Theorem~\ref{th:multiple-push}, one can see that by Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:exp-shrinking-upper},~and~\ref{th:exp-shrinking-lower}, the expected rumor spreading time is $\log_{1+2\E[R]}n + \tfrac1{\E[R]-\ln\Pr[R=0]}\ln n \pm O(1)$.
	
	Finally, suppose that $\Pr[R=0] = 0$, and let $\ell$ be the smallest integer such that $\Pr[R=\ell] > 0$.
	In this case we can easily estimate the probability that $x_1$ stays uninformed.
	From below we have
	\[
		\Pr[X_1=0] \ge \Pr[Y_1=0] \cdot \Pr[R=\ell] \cdot \tfrac{u^\ell}{n^\ell}
		\ge e^{-\E[R]} \cdot \Pr[R=\ell] \cdot \tfrac{u^\ell}{n^\ell}.
	\]
	From above, $\Pr[X_1=0] \le \Pr[Z_1=0] \le \tfrac{u^\ell}{n^\ell}$.
	Hence the protocol satisfies the double exponential shrinking conditions with parameter $1+\ell$.
	Again, by Theorems~\ref{th:exp-growth-upper},~\ref{th:exp-growth-lower},~\ref{th:double-exp-shrinking-upper},~and~\ref{th:double-exp-shrinking-lower} and Lemmas~\ref{lem:general-connect}~and~\ref{lem:general-connect-lower}, the expected rumor spreading time is $\log_{1+2\E[R]}n + \log_{1+\ell}\ln n \pm O(1)$.
\end{proof}


% Random 2-Regular Graphs. Nice stuff, don't delete!!!

%On the other hand, it is quite obvious that the $G(n,p)$ model can be analyzed with our methods. To show that our methods also allow the analysis of dynamic graph models with more dependencies, we regard in this section the model where in each round independently the network $G_t$ is chosen as a random $2$-regular (simple) graph. Regular random graphs are notorious for the inherent dependencies which already make sampling them highly non-trivial. For this reason, it is quite clear that the classic rumor spreading analysis approach of trying to understand the distribution of the number of newly informed nodes will be tedious. For our method, however, we only need to take the local view of understanding how likely it is that a new node becomes informed. For the covariance condition, while we believe it to be true, we do not need to show that the events of two uninformed nodes becoming informed are negatively correlated (or independent). Since the covariance conditions allow a mild positive covariance, we may conveniently ignore rare events like the two nodes sharing a neighbor and may thus assume that the calls affecting the two nodes are disjoint and thus independent.
%
%Nevertheless, it turns out that the rumor spreading process in this type of dynamic graphs is different from the one in complete graphs. This is visible from the rumor spreading times proven below, but also from the observation that even in the pull protocol the events that two uniformed nodes become informed are not independent.
%
%In this subsection, due to the small node degrees, we skip the assumption that nodes may also call themselves, but assume that contacts are chosen uniformly at random from all neighbors.
%
%\begin{theorem}
%  Consider a dynamic graph setting where the network in each round $t$ independently is a $2$-regular random (simple) graph $G_t$. Then the rumor spreading times $T$ of the three classic protocols are as follow.
%  \begin{itemize}
%	  \item Push protocol: $\E[T] = \log_2 n + \log_4 n \pm O(1)$.
%	  \item Pull protocol: $\E[T] = \log_2 n + \log_2 \ln n \pm O(1)$.
%	  \item Push-pull protocol: $\E[T] = \log_{5/2} n + \log_2 \ln n \pm O(1)$.
%  \end{itemize}
%\end{theorem}
%
%\begin{proof}
%  We defer the proof of the covariance conditions to the very end. Consider a round $t$ starting with $k$ informed nodes. Consider a fixed uninformed node $x$. Let $A_i$, $i = 0,1,2$, be the event that $i$ of its $2$ neighbors are informed. Since in a $2$-regular random graph the two neighbors of $x$ form a random $2$-set of the nodes different from $x$, we easily compute
%\begin{align*}
%	\Pr[A_0] &= \tfrac{n-1-k}{n-1} \tfrac{n-2-k}{n-2},\\
%	\Pr[A_1] &= 2 \tfrac{n-1-k}{n-1} \tfrac{k}{n-2},\\
%	\Pr[A_2] &= \tfrac{k}{n-1} \tfrac{k-1}{n-2}\,.	
%\end{align*}
%  For the push protocol, we compute $p_k = \frac 12 \Pr[A_1] + \frac 34 \Pr[A_2] = \frac{k}{n-1}(1 - \frac14 \frac{k-1}{n-2})$. Assuming $n$ to be sufficiently large, the exponential growth condition (apart from the covariance condition) is satisfied in the whole range $k \in  [1,n[$ with $\gamma_n=1$. Rewriting the expression for $p_k$, we see that the probability to remain uninformed in a round starting with $u$ uninformed nodes, is $1-p_{n-u} = \frac 14 + \frac 12 \frac{u-1}{n-2} + \frac 14 \frac{(u-1)(u-4)}{(n-1)(n-2)}$. Hence for, say $u \le n/2$, the exponential shrinking conditions are satisfied with ${\rho_n} = \ln 4$. Apart from the covariance conditions, this shows our claim for the push protocol.
%
%  For the pull protocol, we have $p_k = \frac 12 \Pr[A_1] + \Pr[A_2] = \frac{k}{n-1}$ and consequently $1 - p_{n-u} = \frac{u-1}{n-1}$, showing the exponential growth and double exponential shrinking conditions to be satisfied in overlapping ranges with $\gamma_n = 1$ and $\ell = 1$.
%
%  For the push-pull protocol, we have $p_k = \frac 34 \Pr[A_1] + \Pr[A_2] = \frac 32 \frac{k}{n-1}(1 - \frac 23 \frac{k-1}{n-2})$ and consequently $1 - p_{n-u} = \frac{u-1}{n-1} + \frac 12 \frac{u+1}{n-1} - \frac 12 \frac{(u+1)(u-1)}{(n-1)(n-2)}$, showing the exponential growth and double exponential shrinking conditions to be satisfied in overlapping ranges with $\gamma_n = \frac 32$ and $\ell = 1$.
%
%  It remains to show the covariance conditions. Note first that the covariance condition of the exponential growth conditions implies the other covariance conditions, so it suffices to show the former.
%
%  Let $x_1, x_2$ be two uninformed nodes and let $X_1,X_2$ be the indicator random variables for the events of becoming informed in the current round. We have $\Cov[X_1,X_2] = \Pr[X_2](\Pr[X_1 \mid X_2] - \Pr[X_1]) = O(\frac kn)(\Pr[X_1 \mid X_2] - \Pr[X_1])$, so it suffices to show $\Pr[X_1 \mid X_2] - \Pr[X_1] \le c/n$ for some constant $c$.
%
%  Let $B$ be the event that $x_1$ and $x_2$ have distance at least $3$ in $G_t$. Since $x_2$ has at most $4$ other nodes in distance $2$ or closer, $\Pr[B] \ge 1 - \frac 4 {n-1}$. By $\Pr[X_1 \mid X_2] - \Pr[X_1] \le \Pr[\neg B] + \Pr[X_1 \mid X_2 \AND B] - \Pr[X_1 \mid B]$, we only need to consider the case that $B$ holds. In this case, the targets of the calls of $x_1$ and its neighbors are independent of the event~$X_2$. Consequently, the only correlation among $X_2=1$ and $X_1=1$ stems from  the fact that $X_2=1$ has an influence on where the informed nodes are in $G_t$. More formally, denoting by $A_i^j$ the event that $x_j$ has exactly $i$ of its two neighbors informed, we have that $X_2=1$ has an influence on the distribution of $(A^2_i)_i$ which in turn has an influence on the distribution $(A^1_i)_i$. However, regardless which event $A^2_{i_2}$ we condition on, the probability distribution of $(A^1_{i_1})_{i_1}$ is only mildly affected. The precise expression for $\Pr[A^1_{i_1} \mid A^2_{i_2}]$ can be obtained from the one for $\Pr[A_{i_1}]$ above by replacing $n$ by $n-2$ and $k$ by $k-i_2$. Consequently, $\Pr[A^1_{i_1} \mid A^2_{i_2}] = \Pr[A_{i_1}] \pm O(1/n)$ for all $i_1,i_2 \in \{0,1,2\}$. Therefore $\Pr[X_1 \mid X_2 \AND B] = \Pr[X_1 \mid B] + O(1/n)$ and hence $\Pr[X_1 \mid X_2] - \Pr[X_1] = O(1/n)$ as aimed at. This shows the covariance condition of the exponential growth conditions in the whole range $k \in [1,n[$, and thus also the other two covariance conditions.
%\end{proof}

\input{Erdos_Renyi.tex}