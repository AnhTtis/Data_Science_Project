\documentclass[a4paper,UKenglish]{lipics-v2016}
%This is a template for producing LIPIcs articles. 
%See lipics-manual.pdf for further information.
%for A4 paper format use option "a4paper", for US-letter use option "letterpaper"
%for british hyphenation rules use option "UKenglish", for american hyphenation rules use option "USenglish"
% for section-numbered lemmas etc., use "numberwithinsect"
 
%\hideLIPIcs

\usepackage{microtype}%if unwanted, comment out or use option "draft"

%\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

\bibliographystyle{plainurl}% the recommended bibstyle

% Author macros::begin %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Randomized Rumor Spreading Revisited}
%\title{A Sample Article for the LIPIcs series\footnote{This work was partially supported by someone.}}
%\titlerunning{A Sample LIPIcs Article} %optional, in case that the title is too long; the running title should fit into the top page column

%% Please provide for each author the \author and \affil macro, even when authors have the same affiliation, i.e. for each author there needs to be the  \author and \affil macros
\author[1]{Benjamin Doerr}
\author[2]{Anatolii Kostrygin}
\affil[1]{Laboratoire d'Informatique (LIX), \'Ecole Polytechnique, Palaiseau, France\\
{\tt doerr@lix.polytechnique.fr}}
\affil[1]{Laboratoire d'Informatique (LIX), \'Ecole Polytechnique, Palaiseau, France\\
{\tt kostrygin@lix.polytechnique.fr}}
\authorrunning{B. Doerr and A. Kostrygin} %mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et. al.'

\Copyright{Benjamin Doerr and Anatolii Kostrygin}%mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/

\subjclass{F.2.2 Nonnumerical Algorithms and Problems}% mandatory: Please choose ACM 1998 classifications from http://www.acm.org/about/class/ccs98-html . E.g., cite as "F.1.1 Models of Computation". 
\keywords{Epidemic algorithm, rumor spreading, tight analysis}% mandatory: Please provide 1-5 keywords
% Author macros::end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% test line	

%\documentclass[11pt,letterpaper]{article}

%\usepackage{showkeys}
%\usepackage[letterpaper,margin=1.1in]{geometry}
%\usepackage[a4paper]{geometry}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{accents}
%\usepackage[normalem]{ulem}
\newcommand{\ubar}[1]{\underaccent{\bar}{#1}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}

% \newcommand{\eps}{\epsilon}

\usepackage{graphicx}
\usepackage{color}

\usepackage{caption}

\clubpenalty10000
\widowpenalty10000
\displaywidowpenalty=10000

%\usepackage{enumerate} %(i), (ii), ... - enumeration
\renewcommand{\theenumi}{(\roman{enumi})}

\newcommand{\merk}[1]{\textbf{#1}}

%Import the natbib package and sets a bibliography  and citation styles
%\usepackage{natbib}
%\bibliographystyle{alpha}
%\setcitestyle{authoryear,open=(,close=)}

\newtheorem*{recall*}{Recall}

\theoremstyle{plain}
	\newtheorem*{claim*}{Claim}
	\newtheorem*{lemma*}{Lemma}
	\newtheorem*{observation*}{Observation}
%	\newtheorem{lemma}{Lemma}[section]
%	\newtheorem{corollary}[lemma]{Corollary}%[section]
%	\newtheorem{theorem}{Theorem}
	\newtheorem{proposition}{Proposition}
	\newtheorem{observation}{Observation}%[theorem]

\theoremstyle{definition}
	\newtheorem*{def*}{Definition}
	\newtheorem{defn}{Definition}
	
\theoremstyle{remark}
	\newtheorem*{remark*}{Remark}
%	\newtheorem{remark}{Remark}%[section]
	
\renewcommand{\Pr}{\mathbb{P}}

\newcommand{\eps}{\varepsilon}
\newcommand{\Expect}{\mathbb{E}}%{\operatorname{E}}
\newcommand{\E}{\Expect}%{\mathscr{E}}
\newcommand{\Pk}{p_k}%{\mathscr{P}_k}
\newcommand{\Ck}{c_k}%{\mathscr{C}_k}
\newcommand{\Cov}{\operatorname{Cov}}
\newcommand{\Var}{\operatorname{Var}}
\newcommand{\dist}{\operatorname{dist}}
\newcommand{\Geom}{\operatorname{Geom}}
\newcommand{\Bin}{\operatorname{Bin}}
\newcommand{\dominated}{\preceq}
\newcommand{\subdominated}{\succeq}

\newcommand{\tfn}{\tfrac1n}
\newcommand{\Odn}{O\left(\tfrac1n\right)}
\newcommand{\Okn}{O\left(\tfrac{k}{n}\right)}
\newcommand{\Oknn}{O\left(\tfrac{k}{n^2}\right)}
\newcommand{\Odu}{O\left(\tfrac1u\right)}
\newcommand{\OneE}{\left(1-\tfrac1e\right)}
\newcommand{\OneN}{\left(1-\tfrac1n\right)}
\newcommand{\OneNone}{\left(1-\tfrac1{n-1}\right)}
\newcommand{\Alk}{A_{\ell,k}}
\newcommand{\Olkn}{O\left(\tfrac{\ell+k}{n}\right)}
\newcommand{\Olku}{O\left(\tfrac{\ell+k}{u}\right)}
\newcommand{\AnX}{\Alk \AND X_j=0}
\newcommand{\Omn}{O\left(\tfrac{m}{n}\right)}
\newcommand{\Omnm}{O\left(\tfrac{m}{n-m}\right)}
\newcommand{\fun}{\tfrac{u}{n}}
\newcommand{\ftwok}{\tfrac1{2^k}}
\newcommand{\Odnsq}{O\left(\tfrac1{n^2}\right)}
\newcommand{\Ofun}{O\left(\tfrac{u}{n}\right)}

\newcommand{\Oepsq}{O\left(\eps^2\right)}

\newcommand{\Teg}{T_{eg}}

\newcommand{\ueps}{\ubar\eps}
\newcommand{\beps}{\bar\eps}

\newcommand{\AND}{\wedge}
\newcommand{\OR}{\vee}
\newcommand{\NOT}{\neg}

\newcommand{\miss}{miss}
\newcommand{\hit}{hit}
\newcommand{\called}{called}
\newcommand{\pushed}{pushed}
\newcommand{\accepted}{accepted}
\newcommand{\rejected}{rejected}

%\newcommand{\wlog}{w.l.o.g.}
\newcommand{\Wlog}{W.l.o.g.}

\renewcommand{\labelenumi}{\theenumi}

%\title{Randomized Rumor Spreading Revisited}
%
%\author{Benjamin Doerr and Anatolii Kostrygin\\
%Laboratoire d'Informatique (LIX)\\
%\'Ecole Polytechnique\\
%Palaiseau\\
%France\\
%{\tt doerr@mpi-inf.mpg.de, anatolii.kostrygin@gmail.com}
%}

\date{}

%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\EventEditors{John Q. Open and Joan R. Acces}
%\EventNoEds{2}
%\EventLongTitle{42nd Conference on Very Important Topics (CVIT 2016)}
%\EventShortTitle{CVIT 2016}
%\EventAcronym{CVIT}
%\EventYear{2016}
%\EventDate{December 24--27, 2016}
%\EventLocation{Little Whinging, United Kingdom}
%\EventLogo{}
%\SeriesVolume{42}
%\ArticleNo{23}
% Editor-only macros::end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
%\pagenumbering{roman}
\maketitle

\begin{abstract}
  We develop a simple and generic method to analyze randomized rumor spreading processes in fully connected networks. In contrast to all previous works, which heavily exploit the precise definition of the process under investigation, we only need to understand the probability and the covariance of the events that uninformed nodes become informed. This universality allows us to easily analyze the classic push, pull, and push-pull protocols both in their pure version and in several variations such as messages failing with constant probability or nodes calling a random number of others each round. Some dynamic models can be analyzed as well, e.g., when the network is a $G(n,p)$ random graph sampled independently each round [Clementi et al.\ (ESA 2013)].
  
  Despite this generality, our method determines the expected rumor spreading time precisely apart from additive constants, which is more precise than almost all previous works. We also prove tail bounds showing that a deviation from the expectation by more than an additive number of  $r$ rounds occurs with probability at most $\exp(-\Omega(r))$. 

  We further use our method to discuss the common assumption that nodes can answer any number of incoming calls. We observe that the restriction that only one call can be answered leads to a significant increase of the runtime of the push-pull protocol. In particular, the double logarithmic end phase of the process now takes logarithmic time. This also increases the message complexity from the asymptotically optimal $\Theta(n \log\log n)$ [Karp, Shenker, Schindelhauer, V\"ocking (FOCS 2000)] to $\Theta(n \log n)$. We propose a simple variation of the push-pull protocol that reverts back to the double logarithmic end phase  and thus to the $\Theta(n \log\log n)$ message complexity.
\end{abstract}

%
%
%
%\title{The analysis of discrete time push\&pull rumor spreading protocols}
%\author{Benjamin~Doerr, Anatolii~Kostrygin}
%
%\begin{document}
%
%    \maketitle
%
%    \abstract{
%         In this work we take a large complete graph of size $n$ and consider on it the general epidemic protocol in which the probability to involve new node in the process depends only on the number of involved nodes.
%         The spreading time is the time until all nodes are involved into the process (often say "informed").
%         It is known that for many epidemic protocols the spreading time is concentrated in two regimes: growth regime, when $o(n)$ nodes are informed and this number grows fast; and shrinking regime, when it remains to involve only $o(n)$ nodes and this number shrinks fast.
%         We found the conditions implying such behavior of the epidemic protocol on complete graph.
%         Such conditions are expressed in terms of atomic probability of one node to be informed in current round and covariance of involving two nodes simultaneously.
%         This can be considered as a general method of analysis of large class of epidemic protocols on complete graphs, giving the expected spreading time up to some additive constant.
%
%         In the second part of the work we consider different examples of epidemic protocols in which such method can be useful.
%         Thus we introduce the random call model - a round-based process, in which each node calls one randomly chosen neighbor and communicates with it.
%         First we show that our method gives right results for well known push protocol and pull protocol based on the random call model.
%         Then we analyze the basic push\&pull protocol slightly refine the expected spreading time to $\log_3n + \log_2\ln n + O(1)$ instead of $\log_3n + O(\ln \ln n)$.
%
%         In the last part, we introduce the modification of the basic protocols called the \emph{fast single incoming call protocol}, in which the number of communications per node is limited by to in one round.
%         This property makes the protocol more scalable, and allows to reduce the time gap between rounds to be compared to the time of single rumor transaction.
%         However, the last causes the slowdown of the expected spreading time in terms of number of round ($\log_{3-2/e}n + \log_2\ln n + O(1)$ vs $\log_3n + \log_2\ln n + O(1)$).
%    }



\section{Introduction}

Randomized rumor spreading is one of the core primitives to disseminate information in distributed networks. It builds on the paradigm that nodes call random neighbors and exchange information with these contacts. This gives highly robust dissemination algorithms belonging to the broader class of gossip-based algorithms that, due to their epidemic nature, are surprisingly efficient and scalable. Randomized rumor spreading has found numerous applications, among others, maintaining the consistency of replicated databases~\cite{Demers87}, disseminating large amounts of data in a scalable manner~\cite{MatosSFOR12}, and organizing any kind of communication in highly dynamic and unreliable networks like wireless sensor networks and mobile ad-hoc networks~\cite{IwanickiS10}. Randomized rumor spreading processes are also used to model epidemic processes like viruses spreading over the internet~\cite{BergerBCS05}, news spreading in social networks~\cite{DoerrFF11}, or opinions forming in social networks~\cite{Kleinberg08}.

The importance of these processes not only has led to a huge body of experimental results, but, starting with the influential works of Frieze and Grimmett~\cite{FriezeG85} and Karp, Shenker, Schindelhauer, and V\"ocking~\cite{KarpSSV00} also to a large number of mathematical analyses of rumor spreading algorithms giving runtime or robustness guarantees for existing algorithms and, based on such findings, proposing new algorithms.

Roughly speaking, two types of results can be found in the literature, general bounds trying to give a performance guarantee based only on certain graph parameters and analyses for specific graphs or graph classes. In the domain of general bounds, there is the classic maximum-degree-diameter bound of~\cite{FeigePRU90} and more recently, a number of works bounding the rumor spreading time in terms of conductance or other expansion properties~\cite{MoskAoyamaS08,ChierichettiLP10stoc,Giakkoupis11,Giakkoupis14}, which not only greatly helped our understanding of existing processes, but could also be exploited to design new dissemination algorithms~\cite{CensorHillelHKM12,HillelS10,CensorHillelS11,Haeupler13}.
The natural downside of such general results is that they often do not give sharp bounds. It seems that among the known graph parameters, none captures very well how suitable this network structure is for randomized rumor spreading. Also, it has to be mentioned that these results mostly apply to the push-pull protocol.

The other research direction followed in the past is to try to prove sharper bounds for specific graph classes. This led, among others, to the results that the push-protocol spreads a rumor in a complete graph in time $\log_2 n + \ln n \pm \omega(1)$ with high probability $1-o(1)$ (whp.)~\cite{Pittel87} (and in time $\log_{2-p} n + \frac 1p \ln n \pm o(\log n)$ when messages fail independently with probability $p$), whereas the push-pull protocol does so in time $\log_3 n + O(\log\log n)$~\cite{KarpSSV00}. The push protocol spreads rumors in hypercubes in time $O(\log n)$ whp.~\cite{FeigePRU90}, determining the leading constant is a major open problem. For Erd\H os-R\'eny random graphs with edge probability asymptotically larger than the connectivity threshold, again a runtime of $\log_{2-p} n + \frac 1p \ln n \pm o(\log n)$ was shown for the push protocol allowing transmission errors with rate $p$~\cite{FountoulakisHP10}. For preferential attachment graphs, which are often used as model for real-world networks, it was proven that the push-protocol needs $\Omega(n^\alpha)$ rounds, $\alpha>0$ some constant, whereas the push-pull protocol takes time $\Theta(\log n)$ and $\Theta((\log n)/\log\log n)$ when nodes avoid to call the same neighbor twice in a row~\cite{ChierichettiLP09,DoerrFF11}. Even faster rumor spreading times were shown on Chung-Lu power-law random graphs~\cite{FountoulakisPS12}.

One weakness of all these results on specific graphs is that they very much rely on the particular properties of the protocol under investigation. Even in fully connected networks (complete graphs), the existing analyses for the basic push protocol~\cite{FriezeG85,Pittel87,DoerrK14}, the push protocol in the presence of transmission failures~\cite{DoerrHL13}, the push protocol with multiple calls~\cite{PanagiotouPS15}, and the push-pull protocol~\cite{KarpSSV00} all uses highly specific arguments that cannot be used immediately for the other processes. This is despite the fact that the global behavior of these processes is often very similar. For example, all processes mentioned have an exponential expansion phase in which the number of informed node roughly grows by a constant factor until a constant fraction of the nodes is informed. Clearly, this hinders a faster development of the field. Note that the typical analysis of a rumor spreading protocol in the papers cited above needs between six and eight pages of proofs.

\subsection*{Our Results}\label{sec:results}

In this work, we make a big step forward towards overcoming this weakness. We propose a \emph{general analysis method} for all symmetric and memoryless rumor spreading processes in complete networks. It allows to easily analyze all rumor spreading processes mentioned above and many new ones. The key to this generality is showing that the rumor spreading times for these protocols are determined by the probabilities $p_k$ of a new node becoming informed in a round starting with $k$ informed nodes together with a mild bound on the covariance on the indicator random variables of the events that new nodes become informed. Consequently, all other particularities of the protocol can safely be ignored.

Despite this generality, our method gives bounds for the expected rumor spreading time that are \emph{tight apart from an additive constant number of rounds}. Such tight bounds so far have only been obtained once, namely for the basic push protocol~\cite{DoerrK14}. 

Our method also gives \emph{tail bounds} stating that deviations from the expectation by an additive number of at least $r$ of rounds occur with probability at most $A' \exp(-\alpha'r)$, where $A',\alpha'>0$ are absolute constants. Such a precise tail bound was previously given only for the push protocol in~\cite{DoerrK14}. Note that our tail bounds imply the usual whp-statements, e.g., that overshooting the expectation by any $\omega(1)$ term happens with probability $o(1)$ only, and that a rumor spreading time of $O(\log n)$ can be obtained with probability $1-n^{-c}$, $c$ any constant, by making the implicit constant in the time bound large enough.

We use our method to obtain the following particular results. We only state the expected runtimes. In all cases, the above tail bounds are valid as well.

\textbf{Classic protocols, robustness:} We start by analyzing the three basic push, pull, and push-pull protocols. In the \emph{push protocol}, in each round each informed node calls a random node and sends a copy of the rumor to it. In the \emph{pull protocol}, in each round each uninformed node calls a random node and tries to obtain the rumor from it. In the \emph{push-pull protocol}, all nodes contact a random node and in each such contact the informed nodes send rumor to the communication partner. %More details on the protocols and an extensive account of the literature are given in Section~\ref{sec:classics}.

For these three protocols, both in the fault-free setting and when assuming that calls fail independently with probability $1-p$, our method easily yields the expected rumor spreading times given in Table~\ref{tab:results}. Note that all previous works apart from~\cite{DoerrK14} did not state explicitly a bound for the expected runtime. Note further that for half of the settings regarded in Table~\ref{tab:results} no previous result existed. In particular, we are the first to find that the double logarithmic shrinking phase observed by Karp et al.~\cite{KarpSSV00} for the push-pull protocol disappears when messages fail with constant probability $p$, and is instead replaced by an ordinary shrinking regime with the number of uninformed nodes reducing by roughly a factor of $(1-p)e^{-p}$ each round. This observation is not overly deep, but has the important consequence that the message complexity of the push-pull protocol raises from the theoretically optimal $\Theta(n \log\log n)$ value proven in~\cite{KarpSSV00} to an order of magnitude of $\Theta(n \log n)$ in the presence of a constant rate of transmission errors. Hence the significant superiority of the push-pull protocol over the push protocol in the fault-free setting reduces to a constant-factor advantage in the faulty setting.

%notes: whp means... $1-O(n^{-c})$, $c$ arbitrary constant for Karp et al., $1-O(n^{-h(n)}$ with $h(n) = o(1)$ arb. slow for DoerrHL12,
\begin{table}
{\small
	\centering
		\begin{tabular}{|p{1.4cm}|p{5.0cm}|p{5.8cm}|}\hline
		& no transmission failures & calls fail indep.\ with prob.\ $1-p \in (0,1)$\\\hline
		push  \newline protocol & $\E[T] = \log_2 n + \ln n \pm O(1)$ \newline $\lfloor \log_2 n \rfloor + \ln n - 1.116 \le \E[T] \le$\newline$\lceil \log_2 n \rceil + \ln n + 2.765 + o(1)$ \cite{DoerrK14} & $\E[T] = \log_{1+p} n + \tfrac 1p \ln n \pm O(1)$ \newline $T = \log_{1+p} n + \tfrac 1p \ln n \pm o(\log n)$ whp. \cite{DoerrHL13} \\\hline
		pull \newline protocol & $\E[T] = \log_2 n + \log_2 \ln n \pm O(1)$ \newline  & $\E[T] = \log_{1+p} n + \frac{1}{\ln\frac{1}{1-p}} \ln n \pm O(1)$ \newline  \\\hline
		push-pull protocol & $\E[T] = \log_3 n + \log_2 \ln n \pm O(1)$ \newline $T = \log_3 n \pm O(\log\log n)$ whp. \cite{KarpSSV00} & $\E[T] = \log_{1+2p} n + \frac{1}{p+\ln\frac{1}{1-p}} \ln n \pm O(1)$ \newline  \\\hline
					\end{tabular}
\caption{New and previous-best results for rumor spreading time $T$ of the classic rumor spreading protocols in complete graphs on $n$ vertices. The first line of each table entry contains the result that follows  from the method proposed in this work, the second line states the best previous result (if any). For all new bounds on the expected rumor spreading time, a tail bound of type $\Pr[|T \ge \Expect[T]| \ge r] \le A' \exp(-\alpha'r)$ with $A', \alpha' >0$ suitable constants follows as well from this work. In~\cite{DoerrK14}, such a bound was given for the rumor spreading time of the push protocol without transmission failures.}\label{tab:results}
}
\end{table}

\textbf{Multiple calls:} Panagiotou, Pourmiri, and Sauerwald~\cite{PanagiotouPS15} proposed a variation of the classic protocols in which the number of calls (always to different nodes) each node performs when active is a positive random variable $R$. They mostly assume that for each node, this random number is sampled once at the beginning of the process. For the case that $R$ has constant expectation and variance, they show that the rumor spreading time of the push protocol is $\log_{1+\E[R]} n + \frac 1 {\E[R]} \ln n  \pm o(\log n)$ with high probability and that the rumor spreading time of the push-pull protocol is $\Omega(\log n)$ with probability $1 - \eps$, $\eps > 0$. When $R$ follows a power law with exponent $\beta=3$, the push-pull protocol takes $\Theta(\frac{\log n}{\log\log n})$ rounds, and when $2 < \beta < 3$, it takes $\Theta(\log\log n)$ rounds.

The model of~\cite{PanagiotouPS15} makes sense when assuming that nodes have generally different communication capacities. To model momentarily different capacities, e.g., caused by being occupied with other communication tasks, we assume that the random variable is resampled for each node in each round. We also allow $R$ to take the value $0$. Again for the case $\E[R] = \Theta(1)$ and $\Var[R] = O(1)$, we show that the expected rumor spreading time of the push protocol is $\log_{1+\E[R]} n + \frac 1 {\E[R]} \ln n \pm O(1)$. The rumor spreading time of the push-pull protocol depends critically on the smallest value $\ell$ which $R$ takes with positive probability. If $\ell = 0$, that is, with constant probability nodes contact no other node, then there is no double exponential shrinking and the expected rumor spreading time is $\log_{1+2\E[R]}n + \tfrac1{\E[R]-\ln\Pr[R=0]}  \ln n \pm O(1)$. If nodes surely perform at least one call, then we have a double exponential shrinking regime and an expected rumor spreading time of $\log_{1+2\E[R]}n + \log_{1+\ell}\ln n \pm O(1)$.

\textbf{Dynamic networks:} We also show that our method is capable of analyzing dynamic networks when the dynamic is memory-less. Clementi et al.~\cite{ClementiCDFPS16} have shown that when the network in each round is a newly sampled $G(n,p)$ random graph, then for any constant $c$ the rumor spreading time of the push protocol is $\Theta(\log(n) / \min\{p,1/n\})$ with probability $1 - n^{-c}$. We sharpen this result for the most interesting regime that $p =a/n$, $a$ a positive constant. For this case, we show that the expected rumor spreading time is $\log_{2-e^{-a}} n + \frac{1}{1-e^{-a}} \ln(n) + O(1)$. 
%This bound is the same that we proved for the push protocol on the complete graph in the presence of transmission failures with probability $e^{-a}$, which could be interpreted in the way that the main difficulty stemming from this dynamic setting is the fact that nodes are isolated with probability $e^{-a} + O(1/n)$, whereas all other aspects like the small vertex degrees or different vertex degrees have at most an additive $O(1)$ influence on the rumor spreading time. 
Our tail bound $\Pr[|T - \Expect[T]| \ge r] \le A' \exp(-\alpha'r)$ for suitable constants $A', \alpha>0$ implies also the large deviation statement of~\cite{ClementiCDFPS16} (where for $\Theta(\log n)$ deviations in the lower tail the trivial $\log_2(n)$ lower bound holding with probability $1$ should be used). 
%=======
%\merk{wait for push result}
%\textbf{Dynamic networks:} As a proof of concept, we also show that our method is capable of analyzing dynamic networks when the dynamic is memory-less. As the result closest to ours, Clementi et al.~\cite{ClementiCDFPS16} have shown that when the network in each round is a newly sampled $G_{n,p}$ random graph for some fixed $p \ge 1/n$, then the rumor spreading time is $\Theta(\log n)$. To see how our method copes with more dependent network structures, we regard the case that the network in each round is a newly sampled $2$-regular simple graph. For this scenario, we show that the push protocol has an expected rumor spreading time of $\log_2 n + \log_4 n \pm O(1)$, the pull protocol takes $\log_2 n + \log_2 \ln n \pm O(1)$ rounds, and the push-pull protocol finishes after $\log_{5/2} n + \log_2 \ln n \pm O(1)$ rounds. Interestingly, the push protocol profits from the dynamicity of the network (compared to the complete graph), whereas the push-pull protocol needs longer by a constant factor.

\textbf{Answering single calls only:} We finally use our method to discuss an aspect mostly ignored by previous research. While in all protocols above (apart from the one of~\cite{PanagiotouPS15}) it is assumed that each node can call at most one other node per round, it is tacitly assumed in the pull and push-pull protocols that nodes can answer all incoming calls. For complete graphs on $n$ vertices, the classic balls-into-bins theory immediately gives that in a typical round there is at least one node that receives $\Theta(\frac{\log n}{\log\log n})$ calls. So unlike for the outgoing traffic, nodes are implicitly assumed to be able to handle very different amounts of incoming traffic in one round.

The first to discuss this issue are Daum, Kuhn, and Maus~\cite{DaumKM15} (also the SIROCCO 2016 best paper). Among other results, they show that if only one incoming call can be answered and if this choice is taken adversarially, then there are networks where a previously polylogarithmic rumor spreading time of the pull protocol becomes $\tilde \Omega(\sqrt n)$. If the choice which incoming call is answered is taken randomly, then things improve and the authors show that for any network, the rumor spreading times of the pull and push-pull protocol increase by at most a factor of $O(\frac{\Delta(G)}{\delta(G)} \log n)$ compared to the variant in which all incoming calls are answered. Subsequently, Ghaffari and Newport~\cite{GhaffariN16} showed that with the restriction to accept only one incoming call, the general performance guarantees for the push-pull protocol in terms of vertex expansion or conductance~\cite{Giakkoupis11,Giakkoupis14} do not hold. Kiwi and Caro~\cite{KiwiC17} showed that solving the problem of multiple incoming calls via a FIFO queue can lead to extremely long rumor spreading times.

With our generic method, we can easily analyze this aspect of rumor spreading on complete graphs. While for the pull protocol only the growth phase mildly slows down, giving a total expected rumor spreading time of $\E[T] = \log_{2-1/e} n + \log_2 \ln n \pm O(1)$, for the push-pull protocol also the double logarithmic shrinking phase breaks down and we observe a total runtime of $\E[T] = \log_{3-2/e} n + \frac 12 \ln n \pm O(1)$ and, similarly as for the push-pull protocol with transmission failures, an increase of the message complexity to $\Theta(n \log n)$. The reason, as our proof reveals,  is that when a large number of nodes are informed, then their push calls have little positive effect (as in the classic push-pull protocol), but they now also block other nodes' pull calls from being accepted. This problem can be overcome by changing the protocol so that informed nodes stop calling others when the rumor is $\log_{3-2/e} n$ rounds old. The rumor spreading time of this modified push-pull protocol is $\E[T] = \log_{3-2/e} n + \log_2 \ln n \pm O(1)$ and, when halted at the right moment, this process takes $\Theta(n \log\log n)$ messages.


\section{Outline of the Analysis Method}

As just discussed, the main advantages of our approach are its universality and the very tight bounds it proves. We now briefly sketch the main new ideas that lead to this progress. Interestingly, they are rather simpler than the ones used in previous works.

\subsection{Tight Bounds via a Target-Failure Calculus}

We first describe how we obtain estimates for the rumor spreading time that are \emph{tight apart from additive constants}. Let us take as example the classic push protocol. It is easy to compute that in a round starting with $k$ informed nodes, the expected number of newly informed nodes is $E(k) = k - \Theta(k^2/n)$. Hence roughly speaking the number of informed nodes doubles each round (which explains the $\log_2 n$ part of the $\log_2 n + \ln n \pm O(1)$ rumor spreading time), but there is a growing gap to truly doubling caused by (i) calls reaching already informed nodes and (ii) several calls reaching the same target. This weakening of the doubling process was a main difficulty in all previous works.

The usual way to analyze this weakening doubling process is to partition the rumor spreading process in phases and within each phase to uniformly estimate the progress. For example, Pittel~\cite{Pittel87} considers 7 phases. He argues first that with high probability the number if informed nodes doubles until $n_1 = o(\sqrt{n})$ nodes are informed. Then, until $n_2 = n / \log^2(n)$ nodes are informed, with high probability in each round the number of informed nodes increases by at least a factor of $2 (1 - \frac{1}{\log^2(n)})$. Consequently, this second phase lasts at most $\log_{2 (1 - \frac{1}{\log^2(n)})}(n_2/n_1)$ rounds. While this type of argument gives good bounds for phases bounded away from the middle regime with both $\Theta(n)$ nodes informed and uninformed, we do not see how this ``estimating a phase uniformly'' argument can cross the middle regime without losing a number $\omega(1)$ of rounds.

For this reason, we proceed differently. To prove upper bounds on rumor spreading times, for each number $k$ of informed nodes, we formulate a pessimistic round target $E_0(k)$ that is sufficiently below the expected number $E(k)$ of newly informed nodes. Here ``sufficiently below'' means that the probability $q(k)$ to fail reaching this target number of informed nodes is small, but not necessarily $o(1)$ as in all previous analyses. Using a restart argument, we observe that the random time needed to go from $k$ informed nodes to at least $E_0(k)$ informed nodes is stochastically dominated by $1$ plus a geometric random variable with parameter $1 - q(k)$, where all our geometric random variables count the number of failures until success (this is one of the two definitions of geometric distributions that are in use). In particular, the expected time to go from $k$ to at least $E_0(k)$ informed nodes is at most $1 + \frac{q(k)}{1-q(k)}$.

The second, again elementary, key argument is that when we define a sequence of round targets by $k_0 := 1$, $k_1 := E_0(k_0)$, $k_2 := E_0(k_1), \dots$ with suitably defined $E_0(\cdot)$, then the $k_i$ grow almost like $2^i$ (in the example of the classic push protocol). More precisely, there is a $T = \log_2 n \pm O(1)$ such that $k_T = \Theta(n)$. Hence together with the previous paragraph we obtain that the number of rounds to reach $k_T$ informed nodes is dominated by $T$ plus a sum of independent geometric random variables. This sum has expectation $\sum_{i=0}^{T-1}   \frac{q(k_i)}{1-q(k_i)} = O(\sum_{i=0}^{T-1} q(k_i))$, so it suffices that the sum of the failure probabilities $q(k_i)$ is a constant (unlike in previous works, where it needed to be $o(1)$). A closer look at this sum also gives the desired tail bounds.

Similarly, to prove matching lower bounds, we define optimistic round targets $E_0(k)$ such that a round starting with $k$ informed nodes finds it unlikely to reach $E_0(k)$ informed nodes. Since again we want to allow failure probabilities that are constant, we now have to be more careful and also quantify the probability to overshoot $E_0(k)$ by larger quantities. This will then allow to argue that when defining a sequence of round targets recursively as above, then the expected number of targets overjumped (and thus the expected number of rounds saved compared to the ``one target per round'' calculus), is only constant. 

We remark that a target-failure argument similar to ours was used already in~\cite{DoerrK14}, there however only to give an upper bound for the runtime of the push protocol in the regime from $n^s$, $s$ a small constant, to $\Theta(n)$ informed nodes, that is, the later part of the exponential growth regime of the push process, in which via Chernoff bounds very strong concentration results could be exploited. Hence the novelty of this work with respect to the target-failure argument is that this analysis method can be used (i)~also from the very beginning of the process on, where we have no strong concentration, (ii)~also for the exponential and double exponential shrinking regimes of rumor spreading processes, and (iii)~also for lower bounds.

\subsection{Uniform Treatment of Many Rumor Spreading Processes}

As discussed earlier, the previous works regarding different rumor spreading processes on complete graphs all had to use different arguments. The reason is that the processes, even when looking similar from the outside, are intrinsically different when looking at the details. As an example, let us consider the first few rounds of the push and the pull protocol. In the push protocol, we just saw that while there are at most $o(\sqrt n)$ nodes informed, then a birthday paradox type argument gives that with high probability we have perfect doubling in each round. For the pull process, in which each uninformed node calls a random node and becomes informed when the latter was informed, we also easily compute that a round starting with $k$ informed nodes creates an expected number of $(n-k)\frac kn = k - \frac{k^2}n$ newly informed nodes. However, since these are binomially distributed, there is no hope for perfect doubling. In fact, for the first constant number of rounds, we even have a constant probability that not a single node becomes informed.

The only way to uniformly treat such different processes is by making the analysis depend only on general parameters of the process as opposed to the precise definition. Our second main contribution is distilling a few simple conditions that (i)~subsume essentially all symmetric and time-invariant rumor spreading processes on complete graphs and (ii)~suffice to prove rumor spreading times via the above described target-failure method. All this is made possible by the observation that the target-failure method needs much less in terms of failure probabilities than previous approaches, in particular, it can tolerate constant failure probabilities. Consequently, instead of using Chernoff and Azuma bounds for independent or negatively correlated random variables (which rely on the precise definition of the process), it suffices to use Chebyshev's inequality as concentration result.

Consequently, to apply our method we only need to (i)~understand (with a certain precision) the probability $p_k$ that an uninformed node becomes informed in a round starting with $k$ informed nodes; recall that we assumed symmetry, that is, this probability is the same for all uninformed nodes, and (ii)~we need to have a mild upper bound on the covariance of the indicator random variables of the events that two nodes become informed. 

The probabilities $p_k$ usually are easy to compute from the protocol definition. Also, we do not know them precisely. For example, for the growth phase of the push protocol discussed above, it suffices to know that there are constants $a<2$ and $a'$ such that for all $k < n/2$ we have $\frac kn (1 - a \frac kn) \le p_k \le \frac kn (1 + a' \frac kn)$.  This (together with the covariance condition) is enough to show that the rumor spreading process takes $\log_2 n \pm O(1)$ rounds to inform $n/2$ nodes or more. The constants $a, a'$ have no influence on the final result apart from the additive constant number of rounds hidden in the $O(1)$ term. The covariances are also often easy to bound with sufficient precision, among others, because many in processes the events that two uniformed nodes become informed are independent or negatively correlated.

In our general analysis method, we profit from the fact that seemingly all reasonable rumor spreading processes in complete networks can be described via three regimes:

\emph{Exponential growth:} Up to a constant fraction $fn$ of informed nodes, $p_k = \gamma_n \frac kn (1 \pm O(\frac kn))$. The number of informed nodes thus increases roughly by a factor of $(1+\gamma_n)$ in each round, hence the expected time to reach $fn$ informed nodes or more is $\log_{1+\gamma_n} n \pm O(1)$.

\emph{Exponential shrinking:} From a certain constant fraction $u = n-k = gn$ of uninformed nodes on, the probability of remaining uninformed satisfies $1-p_{n-k} = e^{-\rho_n} \pm O(\frac un)$. This leads to a shrinking of the number of uninformed nodes by essentially a factor of $e^{-\rho_n}$ per round. Hence when starting with $gn$ informed nodes, it takes another $\frac 1 {\rho_n} \ln n \pm O(1)$ rounds in expectation until all are informed.

\emph{Double exponential shrinking:} From a certain constant fraction $u = n-k = gn$ of uninformed nodes on, the probability of remaining uninformed satisfies $1-p_{n-k} = \Theta((\frac un)^{\ell-1})$. Now the expected time to go from $gn$ uninformed nodes to no uninformed node is $\log_\ell \ln n \pm O(1)$.

Due to their different nature, we cannot help treating these three regimes separately, however all with the target-failure method. Hence the main differences between these regimes lie in defining the pessimistic estimates for the targets, computing the failure probabilities, and computing the number of intermediate targets until the goal is reached. All this only needs computing expectations, using Chebyshev's inequality, and a couple of elementary estimates.

\section{Precise Statement of the Technical Results}\label{sec:tech}

In this work, we consider only \emph{homogeneous rumor spreading processes} characterized as follows. We always assume that we have $n$ nodes. Each node can be either \emph{informed} or \emph{uninformed}. We assume that the process starts with exactly one node being informed. Uninformed nodes may become informed, but an informed node never becomes uninformed. We consider a discrete time process, so the process can be partitioned into \emph{rounds}. In each round each uninformed node can become informed. Whenever a round starts with $k$ nodes being informed, then the probability for each uninformed node to become informed is some number $p_k$, which only depends on the number $k$ of informed nodes at the beginning of the round.

The main insight of this work is that for such homogeneous rumor spreading processes we can mostly ignore the particular structure of the process and only work with the \emph{success probabilities} $p_k$ defined above and the \emph{covariance numbers} $c_k$ defined as follows. 

\begin{defn}[Covariance numbers]
For a given homogeneous rumor spreading process and $k \in [1..n-1]$ let $c_k$ be the smallest number such that whenever a round starts with $k$ informed nodes and for any two uninformed nodes $x_1, x_2$, the indicator random variables $X_1, X_2$ for the events that these nodes become informed in this round satisfy \[\Cov[X_1,X_2] \le c_k.\]
\end{defn}
Upper bound for these covariances imply upper bounds on the variance of the number of nodes newly informed in a round. If the latter is small, Chebyshev's inequality yields that the actual number of newly informed nodes deviates not a lot from its expectation (which is determined by $p_k$).

Our main interest is studying after how many round all nodes are informed.

%%%DEF Spreading Time
\begin{defn}[Rumor spreading times]
  Consider a homogeneous rumor spreading process. For all $t = 0, 1, \dots$ denote by $I_t$ the number of informed nodes at the end of the $t$-th round ($I_0 := 1$). Let $k \le m \le n$. By $T(k,m)$ we denote the time it takes to increase the number of informed nodes from $k$ to $m$ or more, that is,
    \[
        T(k,m) = \min\{ t-s | I_s = k \operatorname{ and } I_t \ge m \}.
    \]
    We call $T(1,n)$ the rumor spreading time of the process.
\end{defn}

As it turns out, almost all homogeneous rumor spreading processes can be analyzed via three regimes.

\subsection{Exponential Growth Regime} 

When not too many nodes are informed, in most rumor spreading processes we observe roughly a constant-factor increase of the number of informed nodes in one round, however, this increase becomes weaker with increasing number of informed nodes. %This behavior is made precise in the following definition.

\begin{defn}[Exponential growth conditions]
 Let $\gamma_n$ be bounded between two positive constants. Let $a, b, c \ge 0$ and $0 < f < 1$.
    We say that a homogeneous rumor spreading process satisfies the \emph{upper (respectively lower) exponential growth conditions} in $[1,fn[$ if for any $n \in \N$ big enough the following properties are satisfied for any $k < fn$.
    \begin{enumerate}
        \item $\Pk \ge \gamma_n \tfrac{k}{n} \cdot \left(1- a\tfrac{k}{n} - \tfrac{b}{\ln n}\right)$ (respectively $\Pk \le \gamma_n \tfrac{k}{n} \cdot \left(1+ a\tfrac{k}{n} + \tfrac{b}{\ln n}\right)$).
        \item $\Ck \le c\tfrac{k}{n^2}$.
    \end{enumerate}
    In the case of the upper exponential growth condition, we also require $af<1$.
\end{defn}

These growth conditions suffice to prove that in an expected time of at most (respectively at least) $\log_{1+\gamma_n} n \pm O(1)$ rounds a linear number of nodes becomes informed. Consequently, the decrease of the dissemination speed when more nodes are informed (quantified by the term $-a\frac kn$ in the upper exponential growth condition), which was a main difficulty in previous analyses, has only an $O(1)$ influence on the rumor spreading time.  

\begin{theorem}
  If a homogeneous rumor spreading process satisfies the upper (lower) exponential growth conditions in $[1,fn[$, then there are constants $A', \alpha'>0$ such that 
    \begin{align*}
    	&\Expect[T(1, fn)] \underset{(\ge)}{\le} \log_{1+\gamma_n} n \underset{(-)}{+} O(1), \\
    	&\Pr[T(1, fn) \underset{(\le)}{\ge} \log_{1+\gamma_n} n \underset{(-)}{+} r] \le A' \exp(-\alpha'r) \, \mbox{ for  all $r \in \N$}. 
    \end{align*}
  When the lower exponential growth conditions are satisfied, then also there is an $f' \in ]f,1[$ such that with probability $1-O\left(\tfrac1n\right)$ at most $f'n$ nodes are informed at the end of round $T(1,fn)$.
\end{theorem}

We note that the upper tail bound is tight apart from the implicit constants. This is witnessed, for example, by the pull protocol, where rounds starting with only a constant number of informed nodes have a constant probability of not informing any new node.

\subsection{Exponential Shrinking Regime} 

In a sense dual to the previous regime, in some rumor spreading processes (e.g., the push protocol as well as the pull and push-pull protocols in the presence of transmission failures) we observe that the number of uninformed nodes shrinks by a constant factor once sufficiently many nodes are informed. Again, the weaker shrinking at the beginning of this regime has only an $O(1)$ influence on the resulting rumor spreading times.

\begin{defn}[Exponential shrinking conditions]
Let $\rho_n$ be bounded between two positive constants. Let $0 < g < 1$, and $a, c \in \R_{\ge0}$.
	We say that a homogeneous rumor spreading process satisfies the \emph{upper (respectively lower) exponential shrinking conditions} if for any $n \in \N$ big enough, the following properties are satisfied for all $u = n-k \le gn$.
	\begin{enumerate}
		\item
			$1-p_k = 1-p_{n-u} \le e^{-\rho_n} + a\frac{u}{n}$\, (respectively $1-p_k = 1-p_{n-u} \ge e^{-\rho_n} - a\frac{u}{n}$).
		\item
			$c_k = c_{n-u} \le \frac{c}{u}$.
	\end{enumerate}
	For the upper exponential shrinking conditions, we also assume that $e^{-\rho_n} + ag < 1$.
\end{defn}


\begin{theorem}
	If a homogeneous rumor spreading process satisfies the upper (lower) exponential shrinking conditions, then there are $A' \alpha' > 0$ such that 
	\begin{align*}
		&\Expect[T(n-\lfloor g n \rfloor, n)] \underset{(\ge)}{\le} \tfrac1{\rho_n}\ln n \underset{(-)}{+} O(1),\\
		&\Pr[T(n-\lfloor g n \rfloor, n) \underset{(\le)}{\ge} \tfrac1{\rho_n}\ln n \underset{(-)}{+} r] \le A'\exp(-\alpha'r)\, \mbox{ for all $r \in \N$}.
  \end{align*}		
\end{theorem}

Again, the upper tail bound is tight apart from the constants as shown by the push protocol. Here, a round starting with $n-1$ informed nodes has a constant chance to not inform the remaining node.

\subsection{Double Exponential Shrinking Regime}

Protocols using pull operations in the absence of transmission failures display a faster reduction of the number if uninformed nodes.

\begin{defn}[Double exponential shrinking conditions]
	Let $g \in ]0,1]$, $\ell > 1$, and $a, c \in \R_{\ge0}$ such that $ag^{\ell-1} < 1$.
	We say that a homogeneous rumor spreading process satisfies the \emph{upper (respectively lower) double exponential shrinking conditions}
	if for any $n$ big enough the following properties are satisfied for all $u = n-k \in [1, gn]$.
	\begin{enumerate}
		\item $1-p_{n-u} \le a\left(\tfrac{u}{n}\right)^{\ell-1}$\, (respectively $1-p_{n-u} \ge a\left(\tfrac{u}{n}\right)^{\ell-1}$).
		\item $c_{n-u} \le c \tfrac{n}{u^2}$.
	\end{enumerate}
\end{defn}

\begin{theorem}
	If a homogeneous rumor spreading process satisfies the upper (lower) double exponential shrinking conditions, then there are $A', \alpha' > 0$ and $R$ (depending on $\alpha$) such that 
	\begin{align*}
		&\Expect[T(n-\lfloor g n \rfloor, n)] \underset{(\ge)}{\le} \log_\ell \ln n \underset{(-)}{+} O(1),\\
		&\Pr[T(n-\lfloor g n \rfloor, n) \ge \log_\ell \ln n + r] \le O(n^{-\alpha'r+A'})\, \mbox{ for all $r \in \N$},\\
		\mbox{(}&\Pr[T(n-\lfloor g n \rfloor, n) \le \log_\ell \ln n - R] \le O(n^{-1+2\ell\alpha})\mbox{)}.
  \end{align*}		
\end{theorem}

The last rounds of the push-pull protocol show that the upper tail bound is tight apart from the constants. The lower tail bound is clearly not best possible, but most likely good enough for most purposes.

\subsection{Connecting Regimes}

While often these above described three regimes suffice to fully analyze a rumor spreading process, occasionally it is necessary or convenient to separately regard a constant number of rounds between the growth and the shrinking regime. This is achieved by the following two lemmas.

\begin{lemma}
	Consider a homogeneous rumor spreading process. Let $0 < \ell < m < n$ and $0 < p < 1$. Suppose for any number $\ell \le k < m$, we have $p_{k} \ge p$. Then
  \begin{align*}
   	&\Expect[T(\ell,m)] \le \tfrac{n-\ell}{n-m} \cdot \tfrac1{p}\,,\\
   	&\Pr[T(\ell,m) > r] \le \tfrac{n-\ell}{n-m} \cdot (1-p)^r\, \mbox{ for all $r \in \N$}.
  \end{align*}
\end{lemma}

\begin{lemma}
    Let $f, p \in ]0,1[$ and $c > 0$.
    Suppose that for any $k < fn$ we have $p_k \le p$ and $c_k \le \tfrac{c}{n}$.
    Then there exists $f' \in ]f,1[$ such that with probability $1-O\left(\tfrac1n\right)$ at the end of some round the number of informed nodes will be between $fn$ and $f'n$.
\end{lemma}


\section{Applying the Above Technical Results}

In this section, we sketch how to use the above tools to obtain some of the results described in Section~\ref{sec:results}. Since it does not make a difference, to ease the notation we always assume that nodes call random nodes, that is, including themselves. The main observation is that computing the $p_k$ is usually very elementary. For the covariance conditions, often we easily observe a negative or zero covariance, but when this is not true, then things can become technical.

For the \emph{basic push, pull, and push-pull protocols}, we easily observe that all covariances to be regarded are negative or zero: Knowing that one uninformed node $x_1$ becomes informed in the current round has no influence on the pull call of another uninformed node $x_2$. When the protocol has push calls and $x_1$ was informed via a push call, then this event makes it slightly less likely that $x_2$ becomes informed via a push call, simply because at least one informed node is occupied with calling $x_1$.

The success probabilities $p_k$ are easy to compute right from the protocol definition. When $k$ nodes are informed, then the probabilities that an uninformed node becomes informed are 
\begin{equation*}
p_k = 
\begin{cases}
1 - (1-1/n)^k\, &\mbox{ for the push protocol,}\\
k/n\, &\mbox{ for the pull protocol,}\\
p_k = 1 - (1-1/n)^k \frac{n-k}n\, &\mbox{ for the push-pull protocol.}
\end{cases}
\end{equation*}
Using elementary estimates like $1 - k/n \le (1-1/n)^k \le 1 - k/n + k^2/2n^2$, we see that the push and pull protocols satisfy the exponential growth conditions with $\gamma_n = 1$, whereas the push-pull protocol does the same with $\gamma_n = 2$. The push protocol satisfies the exponential shrinking conditions with $\rho_n=1$. The pull and push-pull protocols satisfy the double exponential shrinking conditions with $\ell = 2$. All growth conditions are satisfied at least up to $k = n/2$ informed nodes and all shrinking conditions are satisfied at least for $u \le n/2$ uninformed nodes, so we do not need the intermediate lemmas. This proves our results given in Table~\ref{tab:results} for the fault-free case.

%The success probabilities $p_k$ are easy to compute right from the protocol definition. When $k$ nodes are informed, then the probability that an uninformed node becomes informed are $p_k = 1 - (1-1/n)^k$ for the push protocol, $p_k = k/n$ for the pull protocol, and $p_k = 1 - (1-1/n)^k \frac{n-k}n$ for the push-pull protocol. Using elementary estimates like $1 - k/n \le (1-1/n)^k \le 1 - k/n + k^2/2n^2$, we see that the push and pull protocols satisfy the exponential growth conditions with $\gamma_n = 1$, whereas the push-pull protocol does the same with $\gamma_n = 2$. The push protocol satisfies the exponential shrinking conditions with $\rho_n=1$. The pull and push-pull protocols satisfy the double exponential shrinking conditions with $\ell = 2$. All growth conditions are satisfied at least up to $k = n/2$ informed nodes and all shrinking conditions are satisfied at least for $u \le n/2$ uninformed nodes, so we do not need the intermediate lemmas.

\emph{Faulty communication:} The same arguments (with different constants $\gamma_n$ and $\rho_n$) suffice to analyze these protocols when messages get lost independently with probability $1-p$. The only structural difference is that now for the pull and push-pull protocols uninformed nodes remain uninformed with at least constant probability. For this reason, now all three protocols have an exponential shrinking phase.

The push-pull protocol with the restriction that nodes \emph{answer only a single incoming call} randomly chosen among the incoming calls is an example where the exponential growth and shrinking conditions are harder to prove. To compute the $p_k$ we assume that all $n$ calls have a random unique priority in $[1..n]$ and that the call with lowest priority number is accepted. For fixed priority, the probability of being accepted is easy to compute, and this leads to the success probability of a pull call. For the probability to become informed via a push call, the simple argument that the first incoming call is from an informed node with probability $k/n$ solves the problem. When showing the covariance conditions, we face the problem that it is indeed not clear if we have negative or zero covariance. The event that some node becomes informed increases the chance that this node received a push call. This push call cannot interfere with another node's pull call to an informed node. So it does have some positive influence on the probability of another uninformed node to become informed. Fortunately, for our covariance conditions allow some positive correlation. Because of this, very generally speaking, we can ignore certain difficulties to handle situations when they occur rare enough.

%<<<<<<< .mine
%\emph{Dynamic comunication graphs:} Being maybe the result where it is most surprising that bounds sharp apart from additive constants can be achieved, we now regard in more detail a problem regarded in~\cite{ClementiCDFPS15}. There, the performance of push rumor spreading in a group of $n$ agents was investigated when the actual communication network is changing in each round. As one such dynamic models, it was assumed that the communication graph in each round is a newly sampled $G_{np}$ random graph, that is, there is an edge independently with probability $p$ between any two vertices. 
%
%For the ease of presentation, let us assume that the edge probability equals $p = a/n$ for some constant $a>0$. This is clearly the most interesting case. For this case (and larger $p$), a  $\Theta(\log n)$ rumor spreading time is observed with probability $1-n^{-c}$, where $c$ is arbitrary (but has an influence on the constant hidden in the term $\Theta(\log n)$). Recalling that for $p=a/n$ the graph $G_{np}$ is not connected and has vertex degrees ranging from $0$ to $\Theta(\log(n)/\log\log(n))$, this result is not totally obvious. Also, observe that the random graph is not newly sampled for each action of a node, so there are dependencies that have to be taken into account.
%
%For this setting, we now show conduct a very precise analysis which in particular makes precise the influence of the graph density parameter $a$.
%\begin{theorem}\label{thm:random}
%  Let $T$ be the time the push protocol needs to inform $n$ nodes when in each round a newly sampled $G_{np}$, $p = a/n$, random graph represents the communication network. Then \[\Expect[T] = \log_{2-e^{-a}} n + \frac{1}{1-e^{-a}} \ln(n) \pm O(1).\] There are constants $A',\alpha'>0$ such that $\Pr[|T - \Expect[T]| \ge r] \le A' \exp(\alpha'r)$ holds for all $r \in \N$.
%\end{theorem}
%
%Recall that the probability that a vertex is isolated in this random graph is $e^{-a} + O(1/n)$. Clearly, an informed vertex being isolated necessarily fails to inform another vertex is this round. The rumor spreading time proven above is the same as the one for the case that the communication network is always a complete graph, but calls fail independently with probability $e^{-a}$. Hence in a sense the changing topology (with low vertex degrees) is not harmful apart from the effect that it creates isolated vertices with constant rate. We did not expect this. 
%
%To prove Theorem~\ref{thm:random}, we first observe that the covariance properties are fulfilled. By symmetry, we can assume that in a round starting with $k$ informed nodes, we first sample the random graph and decide for each node with neighbor it potentially calls in this round, and only then decide randomly which $k$ nodes are informed and have these call the random neighbor determined before. Conditioning on the outcome of random graph, neighbor choice, and on that nodes $x$ and $y$ are not informed, in the remaining random experiment the events ``$x$ becomes informed'' and ``$y$ becomes informed'' clearly are negatively correlated. 
%
%Estimating the probability $p_k$ for an uninformed node to become informed in a round starting with $k$ informed nodes, is slightly technical. Since it is unlikely that two neighbors of an uninformed node $x$ are connected by an edge, the main contribution to $p_k$ stems from the case that the informed neighbors of $x$ form an independent set. Conditioning on this outcome of the edges in $\{x\} \cup N(x)$, each informed neighbor of $x$ has a probability of roughly $1-e^{-a}/a$ of calling $x$, giving (again taking care of the dependencies) a probability of roughly $1-p_k \approx (1 - \frac an \frac{e^{-a}}{a})^k$ for the event that no informed node calls $x$. From this, we estimate $\frac kn (1-e^{-a}) (1 - \frac {k+O(1)}{2n}(1-e^{-a})) \le p_k \le \frac kn (1-e^{-a}+O(1/n))$, enabling us to use the argument for the exponential growth phase with $\gamma_n = 1 - e^{-a}$. Similar arguments, again taking some care for the dependencies that random graph imposes on the actions of informed neighbors, show that the upper exponential shrinking conditions are satisfied for $\rho_n = 1-e^{-a}$, whereas and the lower exponential shrinking conditions are satisfied with $\rho_n = 1 - e^{-a} + O(\log(n)^2 /n)$. 
%
%
%=======

\emph{Dynamic communication graphs:} Being maybe the result where it is most surprising that bounds sharp apart from additive constants can be obtained, we now regard in more detail a problem regarded in~\cite{ClementiCDFPS16}. There, the performance of push rumor spreading in a group of $n$ agents was investigated when the actual communication network is changing in each round. As one such dynamic models, it was assumed that the communication graph in each round is a newly sampled $G(n,p)$ random graph, that is, there is an edge independently with probability $p$ between any two vertices. 

For the ease of presentation, we assume that the edge probability equals $p = a/n$ for some constant $a>0$. This is clearly the most interesting case. For such (and larger) $p$, a rumor spreading time of $\Theta(\log n)$ was shown to hold with inverse-polynomial failure probability. Recalling that for $p=a/n$ the graph $G(n,p)$ is not connected and has vertex degrees ranging from $0$ to $\Theta(\log(n)/\log\log(n))$, this result is not obvious (as the proof in~\cite{ClementiCDFPS16} also indicates). Also, observe that the random graph is not newly sampled for each action of a node, so there are dependencies that have to be taken into account. 

For this setting, we now conduct a very precise analysis, which in particular makes precise the influence of the graph density parameter $a$.
\begin{theorem}\label{thm:random}
  Let $T$ be the time the push protocol needs to inform $n$ nodes when in each round a newly sampled $G(n,p)$, $p = a/n$, random graph represents the communication network. Then \[\Expect[T] = \log_{2-e^{-a}} n + \tfrac{1}{1-e^{-a}} \ln(n) \pm O(1)\] and there are constants $A',\alpha'>0$ such that $\Pr[|T - \Expect[T]| \ge r] \le A' \exp(\alpha'r)$ holds for all $r \in \N$.
\end{theorem}

Recall that a vertex is isolated with probability $e^{-a} + O(1/n)$. Clearly, an informed vertex when isolated necessarily fails to inform another vertex in this round. The rumor spreading time proven above is the same as the one for the case that the communication network is always a complete graph, but calls fail independently with probability $e^{-a}$. Hence in a sense the changing topology (with low vertex degrees) is not harmful apart from the effect that it creates isolated vertices with constant rate. We did not expect this. 

To prove Theorem~\ref{thm:random}, we first observe that the covariance properties are fulfilled. By symmetry, we can assume that in a round starting with $k$ informed nodes, we first sample the random graph and decide for each node which neighbor it potentially calls in this round, and only then decide randomly which $k$ nodes are informed and have these call the random neighbor determined before. Conditioning on the outcome of random graph, neighbor choice, and on that nodes $x$ and $y$ are not informed, in the remaining random experiment the events ``$x$ becomes informed'' and ``$y$ becomes informed'' clearly are negatively correlated. 

Estimating the probability $p_k$ for an uninformed node to become informed in a round starting with $k$ informed nodes, is slightly technical. Since it is unlikely that two neighbors of an uninformed node $x$ are connected by an edge, the main contribution to $p_k$ stems from the case that the informed neighbors of $x$ form an independent set. Conditioning on this outcome of the edges in $\{x\} \cup N(x)$, each informed neighbor of $x$ has an independent probability of roughly $(1-e^{-a})/a$ of calling $x$, giving (again taking care of the dependencies) a probability of roughly $1-p_k \approx (1 - \frac an \frac{1 - e^{-a}}{a})^k$ for the event that no informed node calls $x$. From this, we estimate $\frac kn (1-e^{-a}) (1 - \frac {k+O(1)}{2n}(1-e^{-a})) \le p_k \le \frac kn (1-e^{-a}+O(1/n))$, showing that the exponential growth conditions are satisfied with $\gamma_n = 1 - e^{-a}$. Similar arguments, again taking some care for the dependencies that the random graph imposes on the actions of informed neighbors, show that the upper exponential shrinking conditions are satisfied for $\rho_n = 1-e^{-a}$, whereas the lower exponential shrinking conditions are satisfied with $\rho_n = 1 - e^{-a} + O(\log(n)^2 /n)$. 

\section{Summary, Outlook}

In this work, we presented a general, easy-to-use method to analyze homogeneous rumor spreading processes on complete networks (including memoryless dynamic settings). Such processes are important in many applications, among others, due to the use of random peer sampling services in many distributed systems. Such processes also correspond to the fully mixed population model in mathematical epidemiology.

The two main strengths of our method are (i)~that it builds only on estimates for the probability and the covariance of the events that new nodes become informed---consequently, many processes can be analyzed with identical arguments (as opposed to all previous works), and (ii)~that it determines the expected rumor spreading time precise apart from additive constants (with tail bounds giving in most cases that deviations by an additive number $r$ of rounds occur with probability $\exp(-\Omega(r))$ only). The key to our results is distilling the right growth and shrinking conditions, which allow to describe essentially all previously regarded homogeneous processes, and to show, based on these conditions, that the usually present mild deviations from a perfect exponential growth or shrinking in total cost only a constant number of rounds.
%
%From the viewpoint of rumor spreading, this work leaves open two desires, namely overcoming the restrictions to complete networks and to processes without memory. For the former, random graphs might be a good first object of investigation as there similar rumor spreading times have been observed as in complete networks. Concerning the memory issue, it has been observed that already a mild use of memory (not calling the same neighbor twice in a row) can make a substantial difference, so potentially this is an interesting first object for further research.

From a broader perspective, this work shows that the traditional approach to randomized processes of splitting the analysis in several phases and then trying to understand each phase with uniform arguments might not be the ideal way to capture the nature of processes with a behavior changing continuously over time. While we demonstrated that the more careful round-target approach is better suited for homogeneous rumor spreading processes, one can speculate if similar ideas are profitable for other randomized algorithms or processes regarded in computer science.







\newpage
\appendix

\section*{APPENDIX}

This appendix contains material to be read at the reviewers' discretion. Since this appendix is much longer than the paper itself, to ease reading we not only give the parts left out in the body of the submission, but repeat (sometimes mildly reformulated) the technical parts of the body of the submission.

\input{introduction.tex}

%     \input{epidemic_protocols.tex}


\section{Main Analysis Technique}

As outlined earlier, in this work we attempt to develop a general analysis technique that covers a large class of rumor spreading problems in perfectly connected networks (complete graphs). To this aim, we define a general class of rumor spreading processes and then distill three regimes such that most rumor spreading processes regarded in the literature are covered by these regimes. For each regime, we prove rumor spreading times sharp apart from additive constants. We shall treat upper and lower bounds separately, so that in cases where only estimates in one direction are known, we still obtain this type of bound.

%
%
%
%
%\section{Epidemic Protocols}
%
%%%%%               SUBSECTION
%%%%%           PROTOCOL DEFINITION
%%%%%

\subsection{Homogeneous Rumor Spreading Processes}

We now characterize the class of rumor spreading processes we aim at analyzing.

\begin{defn} [Homogeneous rumor spreading process]
  We always assume that we have $n$ nodes. Each node can be either \emph{informed} or \emph{uninformed}. We assume that the process starts with exactly one node being informed. Uninformed nodes may become informed, but an informed node never can become uninformed. We consider a discrete time process, so the process can be partitioned into \emph{rounds}. In each round each uninformed node can become informed. Whenever a round starts with $k$ nodes being informed, then the probability for each uninformed node to become informed is some number $p_k$, which only depends on the number $k$ of the informed nodes at the beginning of the round.
\end{defn}

The above definition is relatively abstract and, in principle, could be simply phrased as a Markov process on the number $k \in [1..n]$ of informed nodes. We still find it natural to use the language of rumor spreading. We will discuss many rumor spreading processes covered by this definition in Sections~\ref{sec:classics},~\ref{sec:more examples},~and~\ref{sec:single incoming call}, so let us for the moment only remark that the definition covers all processes regarded in the literature as long as they are memoryless (the events in the current round depend only on which nodes are informed) and symmetric (only the numbers of informed and uninformed nodes is relevant, but not which nodes these are). We remark that our methods can be applied to suitable processes that are not memoryless, see Section~\ref{sec:single call-fast} for an example that is not memoryless due to the use of a time counter. %\merk{Asymptotics?}

The main insight of this work is that we can mostly ignore the particular structure of a rumor spreading process and only work with the \emph{success probabilities} $p_k$ and the \emph{covariance numbers} $c_k$ defines as follows.

\begin{defn}[Covariance numbers]
For a given homogeneous rumor spreading process and $k \in [1..n-1]$ let $c_k$ be the smallest number such that whenever a round starts with $k$ informed nodes and for any two uninformed nodes $x_1, x_2$, the indicator random variables $X_1, X_2$ for the events that these nodes become informed in this round satisfy \[\Cov[X_1,X_2] \le c_k.\]
\end{defn}

It turns out that essentially all homogeneous rumor spreading processes have an \emph{exponential growth phase}, which is roughly characterized by the fact that for suitable constants $f \in (0,1]$, $c \in \R$ and $\gamma_n > 0$ we have for all $k \in [1..fn-1]$ both $p_k = \gamma_n \frac k n (1 \pm O(\frac kn))$ and $c_k \le c \frac k{n^2}$.

This growth phase is followed by one of the following two shrinking regimes. (i) Exponential shrinking regime: For suitable constants $g > 0$, $c > 0$, and $\rho_n > 0$, we have for all $u \le gn$ that $1-p_{n-u} = e^{-\rho_n} \pm \Theta(\frac un)$ and $c_{n-u} \le \frac cu$. In particular, in a round starting with $u \le gn$ uninformed nodes, we expect the number of uninformed nodes to shrink by a factor of roughly $e^{-\rho_n}$. (ii) Double exponential shrinking regime: For suitable constants $g > 0$ and $\ell>1$, we have that for all $u \le gn$ both $1-p_{n-u} = \Theta((\frac un)^{\ell-1})$ and $c_{n-u} \le c \frac n {u^2}$. In particular, we expect the fraction of uninformed nodes to be raised to some positive power $\ell-1$.

In the following subsections, we shall analyze each of these regimes, treating separately upper and lower bound guarantees. The very rough analysis idea is the same in each subsection, so we present and discuss it in more detail in the following subsection and then are more brief in the remaining ones.

Before doing so, we define the rumor spreading time and show an elementary fact that will be convenient several times in the following.


%
%\subsection{Protocol Definition}
%
%Although the inner structure of different protocols may be significantly different, their behavior is often very close.
%Note also that the complete graph is the most symmetrical case, so the informed nodes are indistinguishable and so the uninformed ones.
%These arguments justify the following simplification of the rumor spreading protocols.
%
%%%%DEF Epidemic Protocol
%\begin{defn} [Homogeneous rumor spreading process]
%    Consider $n$ nodes.
%    Each of them can be in one of two states: informed or uninformed.
%    Suppose all nodes share a clock which count discrete rounds.
%    At the end of each round any uninformed node (not necessarily independently) can become informed with certain probability $p_k$ which does not depend on the choice of the node but only on the total number $k$ of the informed nodes at the beginning of the round.
%    This probability is the same for all uninformed nodes and depends only on their number.
%\end{defn}
%
%\merk{alternative definition}
%\begin{defn}[General protocol]
%    Consider $n$ nodes.
%    Suppose they share a clock which count discrete rounds.
%    Each of them can be in one of two states: informed or uninformed and may change its state only at the end of the round.
%\end{defn}
%\begin{defn}[Indicators of informing]
%    Consider some general protocol on $n$ nodes enumerated nodes with numbers $1\ldots n$.
%    Let at some round nodes $i_1, \ldots, i_k$ are informed ($k \le n$).
%    We denote by $X_i(i_1, \ldots, i_k)$ the random indicator variable, such that $X_i(k) = 1$ if and only if the $i$th node is informed at the end of the round when
%    We say that the protocol is \emph{homogeneous}, if for fixed $k \le n$, and for any uninformed node $i$, the probability $\Pk := \Pr[X_i(i_1, \ldots, i_k)=1]$ depends only on $k$.
%    In this case we use the shorter notation $X_i(k)$ or simply $X_i$ if $k$ is supposed to be fixed.
%    In addition let $$\Ck := \max_{i, j \text{ -- uninformed}} \Cov[X_i(k), X_j(k)]$$.
%\end{defn}
%The idea is to split the idea to generalize the protocol by hiding all inner details and the notation of the homogeneous protocol, in which we add some conditions on the symmetry.
%Also it looks natural to introduce here $X_i$, $\Pk$, $\Ck$.
%\merk{end of alternative definition}
%
%Note that here the rumor is born in some uninformed nodes each round instead of being passed from informed ones to their peers.
%All we know are probabilities that the rumor appears in current node in current round and dependencies between them.
%This means that all inner such as calls and accepting (cf. the abstract) are hidden in the corresponding indicator random variables.
%The homogeneity means that we can consider the process as the evolution of the random variable $I_t$ denoting the number of informed nodes at the end of the $t$-th round.
%The common problem in the studying of different rumor spreading processs is to determine the rumor spreading time defined as follows.

%\merk{Warning: Definition of $X_i$ and $I_t$ removed, since most likely not overly necessary here}



%%%DEF Spreading Time
\begin{defn}[Rumor spreading times]
  Consider a homogeneous rumor spreading process. For all $t = 0, 1, \dots$ denote by $I_t$ the number of informed nodes at the end of the $t$-th round ($I_0 := 1$). Let $k \le m \le n$. By $T(k,m)$ we denote the time it takes to increase the number of informed nodes from $k$ to $m$ or more, that is,
    \[
        T(k,m) = \min\{ t-s | I_s = k \operatorname{ and } I_t \ge m \}.
    \]
    We call $T(1,n)$ the rumor spreading time of the process.
\end{defn}


%
%In the rest of the section we will describe the most common behaviors of the homogeneous rumor spreading process.
%First of all we remark that usually there are two regimes of the protocol which determine the rumor spreading time.
%
%\begin{enumerate}
%    \item
%		\emph{Growth regime.}
%		Very few nodes are informed (i.e. $k \le O(n)$).
%		In this case there are approximatively $n \cdot p_k$ newly informed nodes each round started from $k$ informed nodes, where $p_k$ is the probability of one node to be informed.
%		In most of the practical examples the growth regime is \emph{exponential}, because if $p_k \sim k/n$, then the number of informed nodes grows exponentially yielding a logarithmic term in the rumor spreading time.
%    \item
%	    \emph{Shrinking regime.}
%		Most of the nodes are informed, so it is more natural to watch the uninformed ones.
%		If the probability is almost a constant between 0 and 1, then the number of uninformed nodes roughly multiplies by this constant each round what corresponds to an \emph{exponential shrinking} regime and to another logarithmic term in the rumor spreading time.
%		Another common behavior is characterized by the squaring of the fraction of uninformed nodes and yields a double logarithmic term in the spreading time.
%		For this reason it is called \emph{double exponential shrinking}.
%\end{enumerate}
%
%Even when we aim at proving bounds for the spreading time that are sharp apart from additive constant, we usually do not need the growth and shrinking regime to cover the whole process. The following lemma implies for most rumor spreading protocols that when $\ell, m$ are integers with $\ell = \Theta(n)$ and $m = \Theta(m)$ as well as $n-\ell = \Theta(n)$ and $n-m=\Theta(n)$, then going from $\ell$ informed nodes to at least $m$ informed nodes only takes an expected constant number of rounds.

%The really interesting fact is that to determine the expected spreading time up to an additive constant it is enough to know the behavior of the protocol only when the number of informed or uninformed nodes is $o(n)$.
%The following lemma explains why the most of rumor spreading protocols pass the regime when the numbers of informed and uninformed nodes are of the same order in only constant number of rounds.


Most homogeneous rumor spreading processes have the property that when a constant fraction of the nodes is informed, then each uninformed node has a constant positive probability of becoming informed in one round. In this situation, the following lemma allows to argue that an expected constant number of rounds suffices to go from any constant fraction of informed nodes to any constant fraction of uninformed nodes. This will be convenient in some the following proofs of upper bounds for rumor spreading times, namely when the growth or shrinking conditions are not strong enough near to the middle point of $n/2$ informed nodes.

\begin{lemma}\label{lem:general-connect}
	Consider a homogeneous rumor spreading process. Let $0 < \ell < m < n$ and $0 < p < 1$. Suppose for any number $\ell \le k < m$, we have $p_{k} \ge p$.
    Then
    \renewcommand{\theenumi}{(\roman{enumi})}%
    \begin{enumerate}
	    \item $\Pr[T(\ell, m) > r] \le \tfrac{n-\ell}{n-m} \cdot (1-p)^r$.
    	\item $\Expect[T(\ell,m)] \le \frac{n-\ell}{n-m} \cdot \frac1{p}\,.$
    \end{enumerate}
%    In particular, when $\ell$ and $ n-m = \Omega(n)$, then an expected constant number of rounds suffices to proceed from $\ell$ informed nodes to $m$ or more informed nodes.
\end{lemma}



\begin{proof}
  Let $q := 1-p$. We regard a dummy process which coincides with the given process until the number of informed nodes is at least $m$. If there are at least $m$ nodes informed, then the dummy process shall be such that each uniformed node in each round independently becomes informed with probability $p$. Obviously, $T(\ell,m)$ is the same for both processes, so we consider the dummy process in the following.

In this dummy process, by the memorylessness of our rumor spreading process, an uninformed node remains uninformed for $r$ rounds with probability at most $q^r$. Hence the expected number $U_r$ of uninformed nodes after $r$ rounds is $\Expect[U_r] \le  (n-\ell) q^r$ and Markov's inequality gives
    \[
        \Pr[T(\ell,m) > r] = \Pr[ U_r > (n-m) ] < \frac{n-\ell}{n-m} \cdot q^r.
    \]
    Hence
    \begin{align*}
    	\Expect[T(\ell,m)]
    	& = \sum_{r=0}^\infty \Pr[ T(\ell,m) > r ]
			< \frac{n-\ell}{n-m} \sum_{r=0}^\infty q^r
			= \frac{n-\ell}{n-m} \cdot \frac1{1-q}\,\,.
    \end{align*}
%
%
%
%  \merk{in other parts we use $X_i$ instead of $U_i$.}
%	
%	Let $r \in \N$. Consider some enumeration $1, \ldots, n-\ell$ of the uninformed nodes. For $i \in [1..n-\ell]$, introduce a random indicator variable $U_i^r = 1$ if and only if the $i$th node stays uninformed for $r$ consecutive rounds. As the probability that an uninformed node remains uninformed is at most $q$ (independently for all future rounds), we have $\Pr[U_i^r=1] \le q^r$.
%    Let $U^r := \sum_i U_i^r$ denote the number of uninformed nodes after $r$ rounds.
%    Clearly, $\Expect[U^r] \le (n-\ell) q^r$. By Markov's inequality, we have
%    \[
%        \Pr[ U^r > (n-m) ] < \frac{n-\ell}{n-m} \cdot q^r.
%    \]
%    Note that this probability is also the probability that $T(\ell,m) > r$.
%    Hence
%    \begin{align*}
%    	\Expect[T(\ell,m)]
%    	& = \sum_{r=0}^\infty \Pr[ T(\ell,m) > r ]
%			< \frac{n-\ell}{n-m} \sum_{r=0}^\infty q^r
%			= \frac{n-\ell}{n-m} \cdot \frac1{1-q}\,\,.
%    \end{align*}
\end{proof}

Similarly to the lemma above, the following lemma will be convenient in some of the proofs of lower bounds for rumor spreading times, again when the growth and shrinking conditions do not cover the whole process. In this case, the following lemma allows to argue that an arbitrarily small, but still constant fraction of uninformed nodes will be reached at some time.

\begin{lemma}\label{lem:general-connect-lower}
    Let $f, p \in ]0,1[$ and $c > 0$.
    Suppose that for any $k < fn$ we have $p_k \le p$ and $c_k \le \tfrac{c}{n}$.
    Then there exists $f' \in ]f,1[$ such that with probability $1-O\left(\tfrac1n\right)$ at the end of some round the number of informed nodes will be between $fn$ and $f'n$.
\end{lemma}
\begin{proof}
    Suppose $k < fn$.
    Denote by $X(k)$ the number of newly informed nodes in a round starting with $k$ informed nodes.
    Since $p_k \le p$, we have $\E[X(k)] \le pn(1-f) \le pn$.
    Then by Lemma~\ref{lem:prelim:variance} we have $\Var[X(k)] \le (p+c)n$.
    Let $f' \in ]f+p(1-f),1[$.
    Applying Chebyshev's inequality, we compute
    \begin{align*}
        & \Pr[k+X(k) \ge f'n] \le \Pr[X(k) \ge (f'-f)n] \\
        & \le \Pr[X(k) \ge \E[X(k)] + n(f'-f-p(1-f))] \\
        & \le \tfrac{\Var[X(k)]}{n^2(f'-f-p(1-f))^2}
            = \tfrac{p+c}{n(f'-f-p(1-f))^2} = O\left(\tfrac1n\right).
    \end{align*}
    Therefore, the probability that the process ``jumps over'' the interval $[fn,f'n]$ is $O\left(\tfrac1n\right)$.
\end{proof}

% \input{exp_growth.tex}

\input{exp_growth_new.tex}

%\input{exp_growth_old.tex}

{\sloppy
 \input{exp_shrinking_new.tex}
}

 %\input{exp_shrinking.tex}

 \input{double_exp_shrinking_new.tex}
 %\input{double_exp_shrinking.tex}

 \input{basic_push_pull.tex}

 \input{push_pull_ignorance.tex}

% \bibliography{bibliography}


%\bibliographystyle{alphaabbr}%plain,unsrt
\bibliography{bibrumors}




\end{document}
