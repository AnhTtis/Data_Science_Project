
\section{Discussion}

We find that a general, but noisy, signal of off-chain prices can be extracted from the on-chain feature set, although it remains difficult to extract precise prices from the noise.
It is possible to improve the accuracy of the model by including features of DEX pricing of ETH/stablecoin pairs, as would be expected from \cite{angeris2020improved}. However, this is antithetical to the approach, as this would implicitly rely on the assumption that 1 stablecoin = 1 USD. Such models would face the significant further issues of detecting stablecoin depeg events (such as happened in USDC in March 2023) given that data is sparse for such events.

While this approach could likely not be used as a direct price oracle, the information from the recovered price signal could still be useful as a sense check to inform when other oracle-reported prices may be suspect.
This function would be potentially very useful in application as the most profitable oracle manipulations to date have been large manipulations that may be caught by such methods. Oracle systems of this style have indeed been proposed \cite{klages2022cpf}, although using other measures than the price signal we uncover. Such a method could also serve to better align the incentives of an oracle provider to report correct prices with the knowledge that their quality of their feed is being graded against the signal in on-chain information. Models such as \cite{huo2021decentralized,klages2020stablecoins} could model this analytically, interchanging the oracle provider with the governors in those models. 





Several challenges remain for implementing and running such a mechanism in practice.
One is accessing all the data within the EVM. Some of the data is in principle possible to access but may be too computationally intense under current systems. For instance, proving information about transactions or bridging BTC data might require running light clients on-chain. For BTC data, this can mostly be ignored as it wasn't critical for the predictive models, but there was a lot of information in Ethereum transaction statistics.
It's worth noting that some features such as gas prices are easier to access now with EIP 1559.
Another challenge is in evaluating how manipulable the features are should a bad actor want to affect the price estimation. In principle, resilient measures seem possible considering that on-chain markets can be costly to manipulate, though may also be computationally burdensome to produce.

An implementation would also have to handle the rolling nature of retrainings required to accurately recover price data. The implementation would need a trust minimized way to update a smart contract implementation with new trainings.
In principle this is also possible, such as by implementing the training program in fixed point to run deterministically and implementing a way to prove the correctness of a training on-chain. However, this would be daunting from the technical side as well as likely costly to run in most environments. The burden could possibly be eased by running it `optimistically' by incorporating a challenge period and fraud proofs, though it's unclear if this would be enough of an improvement.
Another viable way is for a trusted trainer to regularly update calibrations on-chain subject to on-chain spot checks and not full proofs.



