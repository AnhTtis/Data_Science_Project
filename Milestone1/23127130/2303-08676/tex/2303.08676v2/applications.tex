\section{Publicly-Verifiable Certified Deletion from Almost Regular One-Way Functions}

\subsection{Definitions}

A \emph{canonical quantum bit commitment} consists of a family of pairs of unitaries $\{(Q_{\secp,0},Q_{\secp,1})\}_{\secp \in \bbN}$. To commit to a bit $b$, the committer applies $Q_{\secp,b}$ to the all-zeros state $\ket{0}$ to obtain a state on registers $C$ and $R$, and sends register $C$ to the receiver. To open, the committer sends the bit $b$ and the remaining state on register $R$. The receiver applies $Q_{\secp,b}^\dagger$ to registers $(C,R)$, measures the result in the standard basis, and accepts if all zeros are observed.

\begin{definition}[Computational Hiding]
A canonical quantum bit commitment $\{(Q_{\secp,0},Q_{\secp,1})\}_{\secp \in \bbN}$ satisfies \emph{computational hiding} if for any QPT adversary $\{\cA_\secp\}_{\secp \in \bbN}$,

\[\left|\Pr\left[\cA_\secp(\Tr_R\left(Q_{\secp,0}\ket{0}\right)) = 1\right] - \Pr\left[\cA_\secp(\Tr_R\left(Q_{\secp,1}\ket{0}\right)) = 1\right] \right| = \negl(\secp).\]
\end{definition}

\begin{definition}[Honest Binding]
A canonical quantum bit commitment $\{(Q_{\secp,0},Q_{\secp,1})\}_{\secp \in \bbN}$ satisfies \emph{honest binding} if for any auxiliary family of states $\{\ket{\psi_\secp}\}_{\secp \in \bbN}$ on register $Z$ and any family of physically realizable unitaries $\{U_\secp\}_{\secp \in \bbN}$ on registers $R,Z$, 

\[\left\| \left(Q_{\secp,1}\dyad{0}{0}Q_{\secp,1}^\dagger\right)U\left(Q_{\secp,0}\ket{0}\ket{\psi}\right)\right\| = \negl(\secp).\]
\end{definition}

\begin{definition}[Publicly-Verifiable Certified Everlasting Hiding]
A canonical quantum bit commitment $\{(Q_{\secp,0},Q_{\secp,1})\}_{\secp \in \bbN}$ satisfies \emph{publicly-verifiable certified everlasting hiding} if there exists a measurement $\{V_{\secp}\}_{\secp \in \bbN}$ on register $R$, a measurement $\{D_{\secp}\}_{\secp \in \bbN}$ on register $C$, and a classical predicate $\Ver(\cdot,\cdot) \to \{\top,\bot\}$ that satisfy the following properties.

\begin{itemize}
    \item \textbf{Correctness of deletion.} For any $b \in \{0,1\}$, it holds that
    \[\Pr\left[\Ver(\vk,\pi) = \top : (\vk,\pi) \gets (V_\secp \otimes D_\secp)Q_{\secp,b}\ket{0}\right] = 1-\negl(\secp).\]
    \item \textbf{Certified everlasting hiding.} For any two-part adversary $\cA = (\cA_{\secp,1},\cA_{\secp,2})_{\secp \in \bbN}$ where $\{\cA_{\secp,1}\}_{\secp \in \bbN}$ is QPT and $\{\cA_{\secp,2}\}_{\secp \in \bbN}$ is unbounded, it holds that 
    \[\left|\Pr\left[\mathsf{EvExp}_{\cA}(\secp,0) = 1\right] - \Pr\left[\mathsf{EvExp}_{\cA}(\secp,1) = 1\right]\right| = \negl(\secp),\] where $\mathsf{EvExp}_{\cA}(\secp,b)$ is the following experiment.
    \begin{itemize}
        \item Prepare $Q_{\secp,b}\ket{0}$, measure register $R$ with $V_\secp$ to obtain $\vk$, and send $(\vk,C)$ to $\cA_{\secp,1}$.
        \item Parse $\cA_{\secp,1}$'s output as a deletion certificate $\pi$ and a left-over state $\rho$. If $\Ver(\vk,\pi) = \bot$, output $\bot$ and abort the experiment.
        \item Run $\cA_{\secp,2}$ on input $\rho$ until it outputs a bit.
    \end{itemize}
\end{itemize}
\end{definition}

\james{Define public-key encryption with certified deletion (for section above too)}

\james{Define zero-knowledge proof with certified everlasting zero-knowledge}


%\subsection{Constructions}

%Let $\{H_\secp : \{0,1\}^{4\secp} \to \{0,1\}^\secp\}_{\secp \in \bbN}$ be a family of targeted-collapsing and targeted-collision-resistant hash functions (which, by our main theorem, implies certified everlasting targeted-collapsing). We define a quantum canonical bit commitment with publicly-verifiable certified everlasting hiding as follows.

%\begin{itemize}
    %\item $Q_{\secp,b}$ is the unitary that prepares the state
    %\[\frac{1}{\sqrt{|H_\secp|} \cdot 2^{4\secp}}\sum_{h \in H_\secp,r,x \in \{0,1\}^{4\secp},}(-1)^{b \cdot (x \cdot r)}\ket{h,r,h(x)}_R\ket{h,r,x,h(x)}_C.\]
    %\item $V_\secp$ measures the first and third parts of $R$ in the standard basis to obtain $\vk = (h,y)$, and $D_\secp$ measures the third part of $C$ in the standard basis to obtain $\pi = x$.
    %\item $\Ver((h,y),x)$ outputs $\top$ iff $h(x) = y$.
%\end{itemize}

%\begin{theorem}
%The above construction satisfies computational hiding, honest binding, and publicly-verifiable certified everlasting hiding.
%\end{theorem}

%\begin{proof}
%\begin{itemize}
    %\item \james{computational hiding is straightforward from targeted-collapsing}
    %\item \james{to show honest binding, we can establish that the fidelity between the states on register $C$ when $b = 0$ vs $b=1$ is negligible, which will follow from a standard Chebyshev argument}
    %\item \james{certified everlasting hiding is straightforward from certified everlasting targeted-collapsing}
%\end{itemize}
%\end{proof}

%\james{Prior work will give the implication to zero-knowledge proofs for NP with publicly-verifiable certified everlasting zero-knowledge}



%\begin{itemize}
    %\item Certified everlasting target-collapsing function with exponential compression implies commitments with publicly-verifiable certifiable deletion (which imply zero-knowledge with publicly-verifiable certified deletion and secure computation with publicly-verifiable everlasting security transfer). Thus, these primitives all follow from injective one-way functions.
    %\item Trapdoor certified everlasting target-collapsing function implies PKE with publicly-verifiable certified deletion. Thus, this follows from injective trapdoor functions.
%\end{itemize}