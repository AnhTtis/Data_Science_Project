\begin{tikzpicture}
	\node at (-1,1) {(a)};
	
	\coordinate (C1) at (0,0);
 
	\coordinate (U4) at ($(C1)-(-1,6)$);
	
	\draw[line width=1pt] ($(C1)-(.5,0)$)--(C1)--++(0,-4.5);
	\draw[line width=1pt] ($(C1)-(.5,.75)$)--++(.5,0);
	\draw[line width=1pt] ($(C1)-(.5,1.5)$)--++(.5,0);
	\draw[line width=1pt] ($(C1)-(0,2.25)$)--++(.5,0)node[above]{$l$};
	\draw[line width=1pt] ($(C1)-(.5,3)$)--++(.5,0);
	\draw[line width=1pt] ($(C1)-(.5,3.75)$)--++(.5,0);
	\draw[line width=1pt] ($(C1)-(.5,4.5)$)--++(.5,0);
	
	\TNode{}{$(C1)-(0,2.25)$}{red}{};

    \foreach \i in{0,...,2}{\TNode{}{$(C1)-(0.5,0)-\i*(0,.75)$}{orng}{};
    \TNode{}{$(C1)-(0.5,3)-\i*(0,.75)$}{orng}{};
    \TNode{1}{$(C1)-\i*(0,.75)$}{lblue}{};
    \TNode{-1}{$(C1)-(0,3)-\i*(0,.75)$}{lblue}{};}
    
	
	\coordinate (U3) at ($(C1)+(1.5,0)$);
	\draw[line width= 1pt] (U3)--++(2.5,0);
	\Qin{H}{U3};
	\draw[line width= 1pt] ($(U3)-(0,0.75)$)--++(2.5,0);
	\Qin{H}{$(U3)-(0,0.75)$};
	\draw[line width= 1pt] ($(U3)-(0,1.5)$)--++(2.5,0);
	\Qin{H}{$(U3)-(0,1.5)$};
	\draw[line width= 1pt] ($(U3)-(0,2.25)$)--++(2.5,0);
	\Qin{H}{$(U3)-(0,2.25)$};
	\draw[line width= 1pt] ($(U3)-(0,3)$)--++(2.5,0);
	\Qin{H}{$(U3)-(0,3)$};
	\draw[line width= 1pt] ($(U3)-(0,3.75)$)--++(2.5,0);
	\Qin{H}{$(U3)-(0,3.75)$};
	
	\Gate{H}{$(U3)+(.5,0)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(.5,-3)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(1.25,-.75)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(1.25,-2.25)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(2,-1.5)$}{2}{red}{};
	
	\Qout{H}{$(U3)+(2.5,0)$}{};
	\Qout{H}{$(U3)+(2.5,-.75)$}{};
	\Qout{HM}{$(U3)+(2.5,-1.5)$}{};
	\Qout{H}{$(U3)+(2.5,-2.25)$}{};
	\Qout{H}{$(U3)+(2.5,-3)$}{};
	\Qout{H}{$(U3)+(2.5,-3.75)$}{};
	
	\draw[line width= 1pt] (U4)--++(2.5,0);
	\draw[line width= 1pt] ($(U4)-(0,0.75)$)--++(3.25,0);
	\draw[line width= 1pt] ($(U4)-(0,1.5)$)--++(3.25,0);
	\draw[line width= 1pt] ($(U4)-(0,2.25)$)--++(2.5,0);
	
	\Qin{H}{U4};
	\Qin{H}{$(U4)-(0,.75)$};
	\Qreset{H}{$(U4)+(1,0)$}{in};
	\Qin{H}{$(U4)-(0,1.5)$};
	\Qin{H}{$(U4)-(0,2.25)$};
	\Qreset{H}{$(U4)+(1,-2.25)$}{in};
	
	\Gate{H}{$(U4)+(.5,0)$}{2}{lblue}{};
	\Gate{H}{$(U4)+(2,0)$}{2}{lblue}{};
	\Gate{H}{$(U4)+(.5,-1.5)$}{2}{lblue}{};
	\Gate{H}{$(U4)+(2,-1.5)$}{2}{lblue}{};
	\Gate{H}{$(U4)+(2.75,-.75)$}{2}{red}{};
	
	\Qout{H}{$(U4)+(2.5,0)$}{};
	\Qout{HM}{$(U4)+(3.25,-.75)$}{};
	\Qout{H}{$(U4)+(3.25,-1.5)$}{};
	\Qout{H}{$(U4)+(2.5,-2.25)$}{};
	
	\coordinate (L1) at ($(C1)+(7,0)$);
    \node at ($(L1)+(-1,1)$) {(b)};
	\draw[thick] (L1)--++(0,-.75);
	\draw[thick] ($(L1)-(.5,0)$)--++(.5,0);
	\draw[thick] ($(L1)-(.5,.75)$)--++(1.5,0)--++(0,-1.5);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue] ($(L1)-(0,.75)$)--++(.25,.25)--++(0,-.5)--++(-.5,0)--($(L1)-(0,.75)$);
	\draw[thick] ($(L1)+(0,-1.5)$)--++(0,-.75);
	\draw[thick] ($(L1)-(.5,1.5)$)--++(.5,0);
	\draw[thick] ($(L1)-(.5,2.25)$)--++(1.5,0)--++(0,-1.5);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue] ($(L1)-(0,2.25)$)--++(.25,.25)--++(0,-.5)--++(-.5,0)--($(L1)-(0,2.25)$);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue] ($(L1)-(-1,2.25)$)--++(.25,.25)--++(0,-.5)--++(-.5,0)--($(L1)-(-1,2.25)$);
	\draw[thick] ($(L1)+(0,-3)$)--++(0,-.75);
	\draw[thick] ($(L1)-(.5,3)$)--++(.5,0);
	\draw[thick] ($(L1)-(.5,3.75)$)--++(2,0)node[above]{$l$};
	\draw[rounded corners=2pt,line width=1pt,fill=lblue] ($(L1)-(0,3.75)$)--++(.25,.25)--++(0,-.5)--++(-.5,0)--($(L1)-(0,3.75)$);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue] ($(L1)-(-1,3.75)$)--++(.25,.25)--++(0,-.5)--++(-.5,0)--($(L1)-(-1,3.75)$);
    \foreach \i in{0,...,5}{\TNode{}{$(L1)-\i*(0,.75)-(.5,0)$}{orng}{};}
	
	
	\coordinate (U1) at ($(L1)+(2.5,0)$);
	\draw[thick] (U1)--++(1,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U1)-(.1,0)$)circle(.15);
	\draw[thick] ($(U1)+(.95,.1)$)--++(.1,-.2);\draw[thick] ($(U1)+(1,.1)$)--++(.1,-.2);
	\draw[thick] ($(U1)-(0,.75)$)--++(2,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U1)-(.1,.75)$)circle(.15);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U1)+(.25,.25)$)rectangle++(.5,-1.25);
	\draw[thick] ($(U1)+(1.95,-.65)$)--++(.1,-.2);\draw[thick] ($(U1)+(2,-.65)$)--++(.1,-.2);
	\draw[thick] ($(U1)-(0,1.5)$)--++(1,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U1)-(.1,1.5)$)circle(.15);
	\draw[thick] ($(U1)+(.95,-1.4)$)--++(.1,-.2);\draw[thick] ($(U1)+(1,-1.4)$)--++(.1,-.2);
	\draw[thick] ($(U1)-(0,2.25)$)--++(3,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U1)-(.1,2.25)$)circle(.15);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U1)+(.25,.25)+(0,-1.5)$)rectangle++(.5,-1.25);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U1)+(.25,.25)+(1,-.75)$)rectangle++(.5,-2);
	\draw[thick] ($(U1)+(2.95,-2.15)$)--++(.1,-.2);\draw[thick] ($(U1)+(3,-2.15)$)--++(.1,-.2);
	\draw[thick] ($(U1)-(0,3)$)--++(1,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U1)-(.1,3)$)circle(.15);
	\draw[thick] ($(U1)+(.95,-2.9)$)--++(.1,-.2);\draw[thick] ($(U1)+(1,-2.9)$)--++(.1,-.2);
	\draw[thick] ($(U1)-(0,3.75)$)--++(3,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U1)-(.1,3.75)$)circle(.15);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U1)+(.25,.25)+(0,-3)$)rectangle++(.5,-1.25);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U1)+(.25,.25)+(1.75,-2.25)$)rectangle++(.5,-2);
	\draw[line width=1pt] ($(U1)+(3.5,-3.5)$)rectangle++(-.5,-.5);\draw[line width=1pt,->] ($(U1)+(3,-4)$)--++(.35,.35);
	
	\coordinate (U2) at ($(L1)+(0,-6)$);
	\draw[thick] (U2)--++(5.5,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U2)-(.1,0)$)circle(.15);
	\draw[line width=1pt] ($(U2)+(6,.25)$)rectangle++(-.5,-.5);\draw[line width=1pt,->] ($(U2)+(5.5,-.25)$)--++(.35,.35);
	\draw[thick] ($(U2)-(0,.75)$)--++(1,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U2)-(.1,.75)$)circle(.15);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U2)+(.25,.25)$)rectangle++(.5,-1.25);
	\draw[thick] ($(U2)+(.95,-.65)$)--++(.1,-.2);\draw[thick] ($(U2)+(1,-.65)$)--++(.1,-.2);
	\draw[thick] ($(U2)-(-1.5,.75)$)--++(1.75,0);
	\draw[thick] ($(U2)+(2.45,-1.4)$)--++(.1,-.2);\draw[thick] ($(U2)+(2.5,-1.4)$)--++(.1,-.2);
	\draw[line width=1pt, fill=yellow!75!red] ($(U2)-(-1.4,.75)$)circle(.15);
	\draw[thick] ($(U2)-(-1.5,1.5)$)--++(1,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U2)-(-1.4,1.5)$)circle(.15);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U2)+(1.75,-.5)$)rectangle++(.5,-1.25);
	\draw[thick] ($(U2)+(3.2,-.65)$)--++(.1,-.2);\draw[thick] ($(U2)+(3.25,-.65)$)--++(.1,-.2);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U2)+(2.5,.25)$)rectangle++(.5,-1.25);
	\draw[thick] ($(U2)-(-3.75,.75)$)--++(1.75,0);
	\draw[thick] ($(U2)+(4.7,-1.4)$)--++(.1,-.2);\draw[thick] ($(U2)+(4.75,-1.4)$)--++(.1,-.2);
	\draw[line width=1pt, fill=yellow!75!red] ($(U2)-(-3.65,.75)$)circle(.15);
	\draw[thick] ($(U2)-(-3.75,1.5)$)--++(1,0);
	\draw[line width=1pt, fill=yellow!75!red] ($(U2)-(-3.65,1.5)$)circle(.15);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U2)+(4,-.5)$)rectangle++(.5,-1.25);
	\draw[thick] ($(U2)+(5.45,-.65)$)--++(.1,-.2);\draw[thick] ($(U2)+(5.5,-.65)$)--++(.1,-.2);
	\draw[rounded corners=2pt,line width=1pt,fill=lblue!50!white] ($(U2)+(4.75,.25)$)rectangle++(.5,-1.25);

\end{tikzpicture}