\begin{tikzpicture}
    \coordinate (U1) at (0,0);
	\node at ($(U1)+(-.5,1)$) {(a)};

    \foreach \i in {0,...,5}{
	\draw[line width=1pt] ($(U1)-\i*(0,.75)$)--++(4,0);
    \Qin{H0}{$(U1)-\i*(0,.75)$};
    \Qout{HM}{$(U1)+(4,0)-\i*(0,.75)$}{};}
    \foreach \i in {0,...,4}{\Gate{H}{$(U1)+(.5,0)+\i*(.75,-.75)$}{2}{lblue}{$U^\dag_\i$};}

    \coordinate (U2) at ($(U1)+(6,0)$);

    \foreach \i in {0,...,5}{\Qout{HM}{$(U2)+(4,0)-\i*(0,.75)$}{};}
    
    \draw[line width=1pt] ($(U2)+(4,0)$)--++(-1,0);
    \draw[line width=1pt] ($(U2)+(4,-.75)$)--++(-2.5,0);
    \draw[line width=1pt] ($(U2)+(4,-1.5)$)--++(-1,0);
    \draw[line width=1pt] ($(U2)+(4,-2.25)$)--++(-3.25,0);
    \draw[line width=1pt] ($(U2)+(4,-3)$)--++(-1,0);
    \draw[line width=1pt] ($(U2)+(4,-3.75)$)--++(-3.25,0);
    
    \Gate{H}{$(U2)+(3.5,0)$}{2}{lblue}{$U^\dag_0$};
    \Gate{H}{$(U2)+(3.5,-1.5)$}{2}{lblue}{$U^\dag_1$};
    \Gate{H}{$(U2)+(3.5,-3)$}{2}{lblue}{$U^\dag_2$};
    \Gate{H}{$(U2)+(2,-.75)$}{3}{lblue}{$U^\dag_3$};
    \Gate{H}{$(U2)+(1.25,-2.25)$}{3}{lblue}{$U^\dag_4$};
    
    \Qin{H0}{$(U2)+(3,0)$};
    \Qin{H0}{$(U2)+(3,-1.5)$};
    \Qin{H0}{$(U2)+(3,-3)$};
    \Qin{H0}{$(U2)+(1.5,-.75)$};
    \Qin{H0}{$(U2)+(.75,-2.25)$};
    \Qin{H0}{$(U2)+(.75,-3.75)$};

    \coordinate (L1) at ($(U1)+(-.5,-6)$);
	\node at ($(L1)+ (0,1)$) {(b)};
	
	\draw[line width=1pt] (L1)rectangle++(.75,-2.25);
	\draw[line width=1pt] ($(L1)-(0,.75)$)rectangle++(.75,-.75);
	\draw[line width=1pt] ($(L1)-(0,3)$)rectangle++(.75,-2.25);
	\draw[line width=1pt] ($(L1)-(0,3.75)$)rectangle++(.75,-.75);
	\draw[line width=1pt] ($(L1)-(-.75,3)$)--++(0,.75);
	\draw[line width=1pt] ($(L1)-(-.75,5.25)$)--++(1.25,0)node[above]{$l$};
	
	\TNode{2}{L1}{lblue}{};
	\TNode{1}{$(L1)+(.75,0)$}{red}{};
	\TNode{2}{$(L1)+(0,-.75)$}{lblue}{};
	\TNode{1}{$(L1)+(.75,-.75)$}{red}{};
	\TNode{2}{$(L1)+(0,-1.5)$}{lblue}{};
	\TNode{1}{$(L1)+(.75,-1.5)$}{red}{};
	\TNode{2}{$(L1)+(0,-2.25)$}{lblue}{};
	\TNode{1}{$(L1)+(.75,-2.25)$}{red}{};
	\TNode{2}{$(L1)+(0,-3)$}{green!50!black}{};
	\TNode{1}{$(L1)+(.75,-3)$}{red}{};
	\TNode{2}{$(L1)+(0,-3.75)$}{green!50!black}{};
	\TNode{1}{$(L1)+(.75,-3.75)$}{red}{};
	\TNode{2}{$(L1)+(0,-4.5)$}{green!50!black}{};
	\TNode{1}{$(L1)+(.75,-4.5)$}{red}{};
	\TNode{2}{$(L1)+(0,-5.25)$}{green!50!black}{};
	\TNode{1}{$(L1)+(.75,-5.25)$}{red}{};
	\TNode{C}{$(L1)+(1.5,-5.25)$}{dyell}{};
	
	\coordinate (U5) at ($(L1)+(3.5,0)$);
	
	\draw[line width=1pt] (U5)--++(7,0);
	\draw[line width=1pt] ($(U5)+(0,-.75)$)--++(7,0);
	\draw[line width=1pt] ($(U5)+(0,-1.5)$)--++(7,0);
	\draw[line width=1pt] ($(U5)+(0,-2.25)$)--++(7,0);
	\draw[line width=1pt] ($(U5)+(0,-3)$)--++(7,0);
	\draw[line width=1pt] ($(U5)+(0,-3.75)$)--++(7,0);
	\draw[line width=1pt] ($(U5)+(0,-4.5)$)--++(7,0);
	\draw[line width=1pt] ($(U5)+(0,-5.25)$)--++(7.75,0);
	
	\Qin{H0}{U5};
	\Qin{H0}{$(U5)+(0,-.75)$};
	\Qin{H0}{$(U5)+(0,-1.5)$};
	\Qin{H0}{$(U5)+(0,-2.25)$};
	\Qin{H0}{$(U5)+(0,-3)$};
	\Qin{H0}{$(U5)+(0,-3.75)$};
	\Qin{H0}{$(U5)+(0,-4.5)$};
	\Qin{H0}{$(U5)+(0,-5.25)$};
	
	\Gate{H}{$(U5)+(.5,0)$}{2}{lblue}{};
	\Gate{H}{$(U5)+(1.25,-.75)$}{2}{lblue}{};
	\Gate{H}{$(U5)+(2,-1.5)$}{2}{lblue}{};
	\Gate{H}{$(U5)+(3.5,-3)$}{2}{green!50!black}{};
	\Gate{H}{$(U5)+(4.25,-3.75)$}{2}{green!50!black}{};
	\Gate{H}{$(U5)+(5,-4.5)$}{2}{green!50!black}{};
	
	\Gate{H}{$(U5)+(2,0)$}{2}{red}{};
	\Gate{H}{$(U5)+(2.75,-.75)$}{2}{red}{};
	\Gate{H}{$(U5)+(3.5,-1.5)$}{2}{red}{};
	\Gate{H}{$(U5)+(4.25,-2.25)$}{2}{red}{};
	\Gate{H}{$(U5)+(5,-3)$}{2}{red}{};
	\Gate{H}{$(U5)+(5.75,-3.75)$}{2}{red}{};
	\Gate{H}{$(U5)+(6.5,-4.5)$}{2}{red}{};
	\Gate{H}{$(U5)+(7.25,-5.25)$}{1}{yellow!75!black}{};	
	
	\Qout{H}{$(U5)+(7,0)$}{};
	\Qout{H}{$(U5)+(7,-.75)$}{};
	\Qout{H}{$(U5)+(7,-1.5)$}{};
	\Qout{H}{$(U5)+(7,-2.25)$}{};
	\Qout{H}{$(U5)+(7,-3)$}{};
	\Qout{H}{$(U5)+(7,-3.75)$}{};
	\Qout{H}{$(U5)+(7,-4.5)$}{};
	\Qout{HM}{$(U5)+(7.75,-5.25)$}{};
	
	\coordinate (I1) at ($(L1)-(0,7)$);
	\node at ($(I1)+(0,.5)$) {(c)};
 	
 	\foreach \i in {0,...,5}{
 	\foreach \j in {0,...,5}{
 		\pgfmathparse{70*rnd+30}
 		\edef\tmp{\pgfmathresult}
 		\draw[line width=1pt,fill=white!\tmp!black] ($(I1)-\i*(0,.5)+\j*(.5,0)$)rectangle++(.5,-.5);}}
 	\draw[line width=3pt,color=red] ($(I1)+(.25,-.25)$)--++(.5,0)--++(-.5,-.5)--++(0,-.5)--++(1,1)--++(.5,0)--++(-1.5,-1.5)--++(0,-.5)--++(2,2)--++(.5,0)--++(-2.5,-2.5)--++(.5,0)--++(2,2)--++(0,-.5)--++(-1.5,-1.5)--++(.5,0)--++(1,1)--++(0,-.5)--++(-.5,-.5)--++(.5,0);
 	
 	\coordinate (I2) at ($(I1)+(4,0)$);
 	%\node at ($(I2)+(0,.5)$) {(d)};
 	
 	\foreach \i in {0,...,5}{
 		\foreach \j in {0,...,5}{
 			\pgfmathparse{70*rnd+30}
 			\edef\tmp{\pgfmathresult}
 			\draw[line width=1pt,fill=white!\tmp!black] ($(I2)-\i*(0,.5)+\j*(.5,0)$)rectangle++(.5,-.5);}}
 	\draw[line width=3pt,color=lblue] (I2)rectangle++(3,-1.5);
 	\draw[line width=3pt,color=lblue] ($(I2)+(0,-1.5)$)rectangle++(3,-1.5);
 	
 	\draw[line width=3pt,color=red] ($(I2)+(.25,-.25)$)--++(0,-1)--++(.5,0)--++(0,1)--++(.5,0)--++(0,-1)--++(.5,0)--++(0,1)--++(.5,0)--++(0,-1)--++(.5,0)--++(0,1);
 	\draw[line width=3pt,color=red] ($(I2)+(.25,-1.75)$)--++(0,-1)--++(.5,0)--++(0,1)--++(.5,0)--++(0,-1)--++(.5,0)--++(0,1)--++(.5,0)--++(0,-1)--++(.5,0)--++(0,1);
 	
 	\coordinate (I3) at ($(I2)+(4,0)$);
 	
 	\foreach \i in {0,...,5}{
 		\foreach \j in {0,...,5}{
 			\pgfmathparse{70*rnd+30}
 			\edef\tmp{\pgfmathresult}
 			\draw[line width=1pt,fill=white!\tmp!black] ($(I3)-\i*(0,.5)+\j*(.5,0)$)rectangle++(.5,-.5);}}
 	\foreach \i in {0,1}{
 		\foreach \j in {0,1}{
 	\draw[line width=3pt,color=lblue] ($(I3)-\i*(0,1.5)+\j*(1.5,0)$)rectangle++(1.5,-1.5);
 	\draw[line width=3pt,color=red] ($(I3)+(.25,-.25)-\i*(0,1.5)+\j*(1.5,0)$)--++(1,0)--++(0,-.5)--++(-1,0)--++(0,-.5)--++(1,0);
 }}
 	
\end{tikzpicture}