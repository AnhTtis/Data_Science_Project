\begin{tikzpicture}[scale=.9]
	\draw[line width=2pt] (0,0)circle(5.5);
	
	\coordinate (L2) at ($(120:5)+(0,.5)$);
	\coordinate (L1) at ($(60:4)+(0,0)$);
	\coordinate (L3) at ($(0:4.5)+(0,0)$);
	\coordinate (Rd1) at (8,-2);
	\coordinate (U1) at ($(300:4)+(0,1.25)$);
	\coordinate (U2) at ($(240:4)+(-4.5,1.25)$);
	\coordinate (U3) at ($(180:4)+(-4,1.75)$);
	
	\draw[white,fill=white] ($(L2)-(1.2,.8)$)rectangle++(1.5,1.2);
	\draw[white,fill=white] ($(L1)-(.5,.8)$)rectangle++(3,2);
	\draw[white,fill=white] ($(L3)+(.5,-.4)$)rectangle++(1,1.6);
	\draw[white,fill=white] ($(U1)-(.5,3.2)$)rectangle++(4,3.4);
	\draw[white,fill=white] ($(U2)+(1,.3)$)rectangle++(4.8,-4);
	\draw[white,fill=white] ($(U3)+(2,.3)$)rectangle++(1,-2.25);
	
	\node at ($(L2)+(-1.25,.15)$) {(a)};
	\draw[line width=1pt] (L2)--++(0,.75)node[right]{$l$};
	\TNode{}{L2}{lblue}{};
	\node at ($(L2)+(-.5,-.5)$) {$f^l(x)$};

	\node[fill=white] at ($(L1)+(0,1.5)$) {(b)};
	
	\draw[line width=1pt] (L1)--++(0,.5);
	\draw[line width=1pt] ($(L1)+(.75,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L1)+(1.5,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L1)+(2.25,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L1)+(3,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L1)+(3.75,0)$)--++(0,1.5)node[right]{$l$};
	
	\draw[rounded corners=.25cm,fill=lblue,line width=1pt]  ($(L1)+(-.25,.5)$)rectangle++(4.25,.5);
	
	\TNode{}{L1}{orng}{};
	\TNode{}{$(L1)+(.75,0)$}{orng}{};
	\TNode{}{$(L1)+(1.5,0)$}{orng}{};
	\TNode{}{$(L1)+(2.25,0)$}{orng}{};
	\TNode{}{$(L1)+(3,0)$}{orng}{};
	\TNode{}{$(L1)+(3.75,0)$}{orng}{};
	
	\node at ($(L1)+(4.5,0)$) {$\Phi(x)$};
	\node at ($(L1)+(4.5,.75)$) {$W^l$};
	
	\node[fill=white] at ($(L3)+(0,1.25)$) {(c)};
	\node at ($(L3)+(2.5,1.25)$) {$\chi=4$};
	
	\draw[line width=1pt] (L3)--++(0,.5)--++(3.75,0);
	\draw[line width=1pt] ($(L3)+(.75,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L3)+(1.5,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L3)+(2.25,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L3)+(3,0)$)--++(0,.5);
	\draw[line width=1pt] ($(L3)+(3.75,0)$)--++(0,1)node[right]{$l$};
	
	\foreach \i in {0,...,5}{\TNode{-1}{$(L3)+(0,.5)+\i*(.75,0)$}{lblue}{};
		\TNode{}{$(L3)+\i*(.75,0)$}{orng}{};}

	
	\node at ($(U1)+(0,.5)$) {(d)};	
	\foreach \i in {0,...,5}{
	\draw[thick] ($(U1)-\i*(0,.75)$)--++(4,0);
	\Qin{H}{$(U1)-\i*(0,.75)$};}
	\foreach \i in {0,...,4}{
	\Qout{H}{$(U1)+(4,0)-\i*(0,.75)$}{};}
	\Qout{HM}{$(U1)+(4,-3.75)$}{};
	\Gate{H}{$(U1)+(.5,0)$}{2}{lblue}{};
	\foreach \i in {0,...,3}{
	\Gate{H}{$(U1)+(1.25,0)+\i*(.75,-.75)$}{3}{lblue}{};}


	\node at ($(U2)+(0,.5)$) {(e)};	
	\foreach \i in {0,...,5}{
		\draw[thick] ($(U2)-\i*(0,.75)$)--++(5.5,0);
		\Qin{H}{$(U2)-\i*(0,.75)$};}
	\foreach \i in {0,...,4}{
		\Qout{H}{$(U2)+(5.5,0)-\i*(0,.75)$}{};
		\Gate{H}{$(U2)+(.5,0)+\i*(.75,-.75)$}{2}{lblue}{};
		\Gate{H}{$(U2)+(2,0)+\i*(.75,-.75)$}{2}{lblue}{};}
	\Qout{HM}{$(U2)+(5.5,-3.75)$}{};

	\node at ($(U3)+(0,.5)$) {(f)};
	
	\draw[thick] (U3)--++(8.5,0);
	\draw[thick] ($(U3)-(0,1.5)$)--++(8.5,0);
	\Gate{H}{$(U3)+(3.5,0)$}{3}{lblue}{};
	\draw[fill=white,white] ($(U3)+(3.2,-.5)$)rectangle++(0.6,-.5);
	\draw[thick] ($(U3)-(0,.75)$)--++(8.5,0);
	\foreach \i in {0,...,2}{\Qin{H}{$(U3)-\i*(0,.75)$};}
	
	\Gate{H}{$(U3)+(.5,0)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(1.25,-.75)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(2,0)$}{2}{lblue}{};
	\Qreset{H}{$(U3)+(2.5,0)$}{in};
	
	\Gate{H}{$(U3)+(4.25,-.75)$}{2}{lblue}{};
	
	\Gate{H}{$(U3)+(5,0)$}{3}{lblue}{};
	\draw[fill=white,white] ($(U3)+(4.7,-.5)$)rectangle++(0.6,-.5);
	\Qreset{H}{$(U3)+(4.75,-.75)$}{in};
	\Qreset{H}{$(U3)+(5.5,-1.5)$}{in};
	
	\Gate{H}{$(U3)+(5.75,0)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(6.5,-.75)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(7.25,0)$}{2}{lblue}{};
	\Gate{H}{$(U3)+(8,-.75)$}{2}{lblue}{};
	
	\Qout{H}{$(U3)+(8.5,0)$}{};
	\Qout{H}{$(U3)+(8.5,-.75)$}{};
	\Qout{HM}{$(U3)+(8.5,-1.5)$}{};

	\draw[thick,fill=white!80!black,rounded corners=5pt] ($(Rd1)-(.875,.875)$)rectangle++(1.75,1.75);
	\draw[thick] ($(Rd1)-(.5,0)$)node[above]{$\alpha$}--++(1,0)node[above]{$\beta$};
	\draw[thick] (Rd1)--++(0,-.5)node[right]{$i$};
	\TNode{-1}{Rd1}{lblue}{};
	
	\coordinate (URd1) at ($(Rd1)-(.375,2.5)$);
	\draw[thick,fill=white!80!black,rounded corners=5pt] ($(URd1)-(.5,.75)$)rectangle++(1.75,1.75);
	\Qout{V}{$(URd1)+(0,.5)$}{};
	\draw[thick] ($(URd1)+(0,.5)$)--++(0,-1)node[right]{$\alpha$};
	\draw[thick] ($(URd1)+(.75,.5)$)node[right]{$\beta$}--++(0,-1)node[right]{$i$};
	\Gate{V}{URd1}{2}{lblue}{${U^\dag}$};
\end{tikzpicture}