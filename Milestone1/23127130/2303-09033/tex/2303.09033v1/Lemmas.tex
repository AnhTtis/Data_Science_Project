\section{Technical Lemmas}
\label{sec:technical lemmas}

\begin{lem}
\label{lem:gaussian posterior update} 
Let $\mu_0 \sim \cN(\hat{\mu}, \hat{\sigma}^2)$, $\theta \mid \mu_0 \sim \cN(\mu_0, \sigma_0^2)$, and $Y_i \mid \theta \sim \cN(\theta, \sigma^2)$ for all $i \in [n]$. Then
\begin{align*}
  \mu_0 \mid Y_1, \dots, Y_n
  \sim \cN\left(\lambda^{-1} \left(\frac{\hat{\mu}}{\hat{\sigma}^2} +
  \frac{\sum_{i = 1}^n Y_i}{n \sigma_0^2 + \sigma^2}\right), \,
  \lambda^{-1}\right)\,, \quad
  \lambda
  = \frac{1}{\hat{\sigma}^2} + \left(\sigma_0^2 + \frac{\sigma^2}{n}\right)^{-1}\,.
\end{align*}
\end{lem}


\begin{proof}
The derivation is standard \citep{gelman07data} and we only include it for completeness. To simplify notation, let
\begin{align*}
  v
  = \sigma^{-2}\,, \quad
  v_0
  = \sigma_0^{-2}\,, \quad
  \hat{v}
  = \hat{\sigma}^{-2}\,, \quad
  c_1
  = v_0 + n v\,, \quad
  c_2
  = \hat{v} + v_0 - c_1^{-1} v_0^2\,.
\end{align*}
The posterior distribution of $\mu_0$ is
\begin{align*}
  & \int_\theta \left(\prod_{i = 1}^n \cN(Y_i; \theta, \sigma^2)\right)
  \cN(\theta; \mu_0, \sigma_0^2) \dif \theta \,
  \cN(\mu_0; \hat{\mu}, \hat{\sigma}^2) \\
  & \quad \propto \int_\theta \exp\left[
  - \frac{1}{2} v \sum_{i = 1}^n (Y_i - \theta)^2 -
  \frac{1}{2} v_0 (\theta - \mu_0)^2\right] \dif \theta
  \exp\left[- \frac{1}{2} \hat{v} (\mu_0 - \hat{\mu})^2\right]\,.
\end{align*}
Let $f(\mu_0)$ denote the integral. We solve it as
\begin{align*}
  f(\mu_0)
  & = \int_\theta \exp\left[- \frac{1}{2}
  \left(v \sum_{i = 1}^n (Y_i^2 - 2 Y_i \theta + \theta^2) +
  v_0 (\theta^2 - 2 \theta \mu_0 + \mu_0^2)\right)\right] \dif \theta \\
  & \propto \int_\theta \exp\left[- \frac{1}{2}
  \left(c_1 \left(\theta^2 -
  2 c_1^{-1} \theta \left(v \sum_{i = 1}^n Y_i + v_0 \mu_0\right)\right) +
  v_0 \mu_0^2\right)\right] \dif \theta \\
  & = \int_\theta \exp\left[- \frac{1}{2}
  \left(c_1 \left(\theta -
  c_1^{-1} \left(v \sum_{i = 1}^n Y_i + v_0 \mu_0\right)\right)^2 -
  c_1^{-1} \left(v \sum_{i = 1}^n Y_i + v_0 \mu_0\right)^2 +
  v_0 \mu_0^2\right)\right] \dif \theta \\
  & = \exp\left[- \frac{1}{2}
  \left(- c_1^{-1} \left(v \sum_{i = 1}^n Y_i + v_0 \mu_0\right)^2 +
  v_0 \mu_0^2\right)\right] \\
  & \propto \exp\left[- \frac{1}{2}
  \left(- c_1^{-1} \left(2 v_0 \mu_0 v \sum_{i = 1}^n Y_i + v_0^2 \mu_0^2\right) +
  v_0 \mu_0^2\right)\right]\,.
\end{align*}
Now we chain all equalities and have
\begin{align*}
  f(\mu_0) \exp\left[- \frac{1}{2} \hat{v} (\mu_0 - \hat{\mu})^2\right]
  & \propto \exp\left[- \frac{1}{2}
  \left(- c_1^{-1} \left(2 v_0 \mu_0 v \sum_{i = 1}^n Y_i + v_0^2 \mu_0^2\right) +
  v_0 \mu_0^2 + \hat{v} (\mu_0^2 - 2 \mu_0 \hat{\mu} + \hat{\mu}^2)
  \right)\right] \\
  & \propto \exp\left[- \frac{1}{2}
  c_2 \left(\mu_0^2 -
  2 c_2^{-1} \mu_0 \left(c_1^{-1} v_0 v \sum_{i = 1}^n Y_i +
  \hat{v} \hat{\mu}\right)\right)\right] \\
  & \propto \exp\left[- \frac{1}{2}
  c_2 \left(\mu_0 -
  c_2^{-1} \left(c_1^{-1} v_0 v \sum_{i = 1}^n Y_i +
  \hat{v} \hat{\mu}\right)\right)^2\right]\,.
\end{align*}
Finally, note that
\begin{align*}
  c_1
  & = \frac{1}{\sigma_0^2} + \frac{n}{\sigma^2}
  = \frac{n \sigma_0^2 + \sigma^2}{\sigma_0^2 \sigma^2}\,, \\
  c_1^{-1} v_0 v
  & = \frac{\sigma_0^2 \sigma^2}{n \sigma_0^2 + \sigma^2} \frac{1}{\sigma_0^2 \sigma^2}
  = \frac{1}{n \sigma_0^2 + \sigma^2}\,, \\
  c_2
  & = \frac{1}{\hat{\sigma}^2} +
  \frac{1}{\sigma_0^2} \left(1 - \frac{c_1^{-1}}{\sigma_0^2}\right)
  = \frac{1}{\hat{\sigma}^2} +
  \frac{1}{\sigma_0^2} \left(1 - \frac{\sigma^2}{n \sigma_0^2 + \sigma^2}\right)
  = \frac{1}{\hat{\sigma}^2} + \left(\sigma_0^2 + \frac{\sigma^2}{n}\right)^{-1}
  = \lambda\,.
\end{align*}
This concludes the proof.
\end{proof}

\begin{lem}
\label{lem:reciprocal root sum} For any integer $n$ and $a \geq 0$,
\begin{align*}
  \sum_{i = 1}^n \frac{1}{\sqrt{i + a}}
  \leq 2 (\sqrt{n + a} - \sqrt{a})
  \leq 2 \sqrt{n}\,.
\end{align*}
\end{lem}

\begin{proof}
Since $1 / \sqrt{i + a}$ decreases in $i$, the sum can be bounded using integration as
\begin{align*}
  \sum_{i = 1}^n \frac{1}{\sqrt{i + a}}
  \leq \int_{x = a}^{n + a} \frac{1}{\sqrt{x}} \dif x
  = 2 (\sqrt{n + a} - \sqrt{a})\,.
\end{align*}
The inequality $\sqrt{n + a} - \sqrt{a} \leq \sqrt{n}$ holds because the square root has diminishing returns.
\end{proof}

\begin{lem}
\label{lem:reciprocal sum} For any integer $n$ and $a \geq 0$,
\begin{align*}
  \sum_{i = 1}^n \frac{1}{i + a}
  \leq \log(1 + n / a)\,.
\end{align*}
\end{lem}

\begin{proof}
Since $1 / (i + a)$ decreases in $i$, the sum can be bounded using integration as
\begin{align*}
  \sum_{i = 1}^n \frac{1}{i + a}
  \leq \int_{x = a}^{n + a} \frac{1}{x} \dif x
  = \log(n + a) - \log a
  = \log(1 + n / a)\,.
\end{align*}
\end{proof}

\begin{lem}
\label{lem:reciprocal_sumsq} 
For any integer $n$ and $a \geq 0$,
\begin{align*}
  \sum_{i = 1}^n \frac{1}{i + a}
  \leq \log(1 + n / a)\,.
\end{align*}
\end{lem}
