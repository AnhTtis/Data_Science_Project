





\subsection{Datasets}\label{datasets}
Our dataset comprises MIMIC-CXR-JPG v2.0.0~\cite{physionet,mimic-cxr-jpg,mimic-cxr-jpg-2}, which contains both imaging studies and free-text reports, and RadGraph Benchmark~\cite{radgraph}. Our training set includes around 220,000 ground truth graph annotations obtained by RadGraph Benchmark, paired with the corresponding frontal CXR images. The validation set consists of 500 ground truth graph annotations obtained by board-certified radiologists and the corresponding frontal CXR images. There are 229 classes of entities after mapping, three levels of uncertainty, and three classes of relation. Details can be found in the appendix.


\subsection{Implementation Details} All networks are trained with PyTorch 1.12.0 and CUDA 11.6 on a single NVIDIA A40 until convergence. A batch size of 32 is chosen, and AdamW~\cite{adamw} optimizer with a learning rate of 1e-4 is utilized. To address the issue of imbalanced labels in entity class prediction, we employ focal loss~\cite{focal_loss}, while cross entropy loss~\cite{crossentropyloss} is used for entity uncertainty prediction. For relation prediction, we utilize stochastic relation loss~\cite{relationformer}, with a foreground-to-background edge ratio of 1:3. The weights between entity classification loss, uncertainty loss, and relation loss are 1, 1, and 3. Additionally, two assimilation steps are performed during the prior knowledge integration process per iteration. CXR images are preprocessed following~\cite{few_shot}.

\subsection{Evaluation} We evaluate our model similarly to RadGraph Benchmark~\cite{radgraph} considering micro F1-score. A predicted entity is regarded as a true positive if its predicted entity class and uncertainty level are correct. For relation evaluation, a predicted relation is considered a true positive if its head entity, tail entity, and relation type are predicted correctly. To show the use cases for radiology graph generation in this work, we perform the evaluation for the two downstream tasks: free-text report generation and cheXpert labels~\cite{chexpert} classification. Specifically, we generate free-text clinical reports from generated radiology graphs based on pre-defined rules.\looseness=-1


