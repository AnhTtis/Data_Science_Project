\section{Preliminaries}

\subsection{Lithography Simulation Model} \label{litho_model}
During the lithography process, an input mask $\mathbf{M}$ is projected through layers of optical lens onto a wafer plane. The intensity after optical system $\mathbf{I}$, namely the aerial image, leaves a coating on the wafer with photoresist to form the resulting pattern $\mathbf{Z}$. The conventional simulation of the lithography process is composed of 2 consecutive components: optical projection model and photoresist model. 

For the projection process, Hopkins diffraction model \cite{hopkins1951concept} has been widely used to analyze coherent imaging system mathematically. To avoid the computation complexity of the Hopkins model, a singular value decomposition model (SVD)-based approximation has been proposed by \cite{cobb1998fast} and became the mainstream fashion. In the SVD model, the Hopkins diffraction model can be decomposed into a sum of coherent systems based on eigenvalue decomposition:
\begin{equation}
    \mathbf{I}(x,y) = \sum_{k = 1}^{ N^{2}} w_{k} | \mathbf{M}(x,y) \otimes h_{k}(x,y) |^{2}, \quad x,y = 1,2,...N
\end{equation}
where $h_{k}$ is the $k$-th kernel and $w_{k}$ is the corresponding weight of the coherent system. "$\otimes$" denotes the convolution operator. \cite{gao2014mosaic} indicates the $K$-th order approximation:
\begin{equation}
    \mathbf{I}(x,y) \approx \sum_{k = 1}^{K} w_{k} | \mathbf{M}(x,y) \otimes h_{k}(x,y) |^{2},
\end{equation}

We pick $K = 24$ in our experiment. After optical simulation, the lithography intensity $\textbf{I}$ is sent to the photoresist model to generate the final binary pattern $\mathbf{Z}$ with an exposure resist threshold $I_{th}$:
\begin{equation}
    \mathbf{Z}(x,y) = 
    \begin{cases}
        1, & \text{if} \quad \mathbf{I} (x,y) \geq I_{th}, \\
        0, & \text{if} \quad \mathbf{I} (x,y) < I_{th}, 
    \end{cases}
\end{equation}

Several machine learning-based lithography simulation methods have been proposed. 
\cite{watanabe2017accurate} utilized a CNN network to perform a function model determination for resist model simulation. 
\cite{ye2019lithogan} developed a GAN-based LithoGAN, to map the input mask and output resist pattern. 
\cite{shao2020ic} proposed a two-stage DNN-based framework, solving the mask-to-SEM prediction as a domain-transfer problem and using CycleGAN \cite{zhu2017unpaired} to learn the transferring process.

Although DNN models usually have the comparative speed advantage, we choose the Hopkins model for the reason of analyzability. A white box model enables us to analyze the pattern shift equivariance property mathematically during the lithography process.

\subsection{OPC Evaluation Criteria}
\begin{figure}
    \subfloat[]{ \label{fig:epe} \includegraphics[width=.45\linewidth]{figs/epe} } 
    \subfloat[]{ \label{fig:pvband} \includegraphics[width=.45\linewidth]{figs/pvband} }
    \caption{OPC evluation creteria: (a) Visualization of EPE measurement (b) Visualization of PVBand.}
    % \label{fig:epe_pvband}
\end{figure}

\subsubsection{Edge placement error (EPE).}
\enspace After the lithography process, the printed image on the wafer has an inevitable geometric distortion from the design target. Edge placement error (EPE) is a common criterion to quantify distortion level. 
Measurement of EPE is visualized in \Cref{fig:epe}: A series of measuring points are sampled along the boundary of the target design pattern, including vertical edges and horizontal edges. If the distance $D$ between printed image and target is larger than threshold $th_{EPE}$ at a sample point, we label it as a EPE violation.
\begin{equation}
    EPE\_violation(x,y) = 
    \begin{cases}
        1, & D(x,y) \geq th_{EPE}, \\
        0, & D(x,y) \leq th_{EPE},
    \end{cases}
\end{equation}

\subsubsection{Process Variation Band (PV Band).}
\enspace In real lithography applications, process variation may cause deviation in the final printed images, which possibly leads to printing failure. Given different lithography conditions such as focus/defocus depth and incident light intensity, printed images have various contour results. Process Variation Band (PV Band) is defined as discrepant (XOR) region of innermost and outermost contours as shown in \Cref{fig:pvband} to evaluate printing robustness.
\begin{equation}
    PVBand = \sum_{x,y}^{N^2} | \textbf{Z}_{out} - \textbf{Z}_{in} | ,
\end{equation}
where $N$ is the size of pattern. $\textbf{Z}_{out}$ denotes the printed pattern of outer contour and $\textbf{Z}_{in}$ denotes the inner contour. 
