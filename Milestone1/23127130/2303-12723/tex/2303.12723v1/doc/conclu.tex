\section{Conclusion}
In this paper, we proposed a self-adaptive OPC framework for mask optimization for real designs by inspecting the characteristics of a full design. We proposed an extensible OPC solver selector to choose an appropriate solver for patterns with different complexity. Additionally, we also built a dynamic pattern library to reuse optimized masks for repeating patterns with the same geometric shape. We use supervised contrastive learning to embed patterns into vectors and propose a graph-based search strategy for fast pattern matching. At last, we validate the mask reusability by proving pattern shift equivariance property and proposed a practical shift calibration tool. Extensive experiments have shown our frame can achieve OPC speed-robustness co-optimization for real design patterns. 
\section*{Acknowledgments}
This work is supported The Research Grants Council of Hong Kong SAR (Project No.~CUHK14208021).

