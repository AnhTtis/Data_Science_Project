

\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

%Shape: Rectangle [id:dp9900525758321768] 
\draw  [fill={rgb, 255:red, 152; green, 205; blue, 89 }  ,fill opacity=0.1 ] (447.13,119.33) -- (531,119.33) -- (531,169.33) -- (447.13,169.33) -- cycle ;
%Straight Lines [id:da5793364358153623] 
\draw    (520.56,170.11) -- (520.56,189.89) -- (280,190) -- (280,150) -- (301.4,149.82) ;
\draw [shift={(303.4,149.8)}, rotate = 179.51] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Rounded Rect [id:dp6202940528993892] 
\draw   (386.12,127.92) .. controls (386.12,124.1) and (389.22,121) .. (393.04,121) -- (413.8,121) .. controls (417.62,121) and (420.72,124.1) .. (420.72,127.92) -- (420.72,154.08) .. controls (420.72,157.9) and (417.62,161) .. (413.8,161) -- (393.04,161) .. controls (389.22,161) and (386.12,157.9) .. (386.12,154.08) -- cycle ;
%Image [id:dp8623584263330737] 
\draw (485.25,138.53) node  {\includegraphics[width=47.78pt,height=32.4pt]{pics/ECC23/Crazyflie_drone.png}};
%Straight Lines [id:da5925253402499646] 
\draw    (420.82,140.47) -- (445.22,140.47) ;
\draw [shift={(447.22,140.47)}, rotate = 180] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da22128806602732864] 
\draw    (364.4,140.4) -- (384.56,140.54) ;
\draw [shift={(386.56,140.56)}, rotate = 180.4] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Rectangle [id:dp7761614967622636] 
\draw   (303.6,119.6) -- (363.6,119.6) -- (363.6,159.6) -- (303.6,159.6) -- cycle ;
%Straight Lines [id:da7490675355467435] 
\draw    (285.6,129.8) -- (301,129.98) ;
\draw [shift={(303,130)}, rotate = 180.66] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da7095438763346591] 
\draw    (510,170) -- (510,180) -- (413.8,180.6) -- (413.8,163) ;
\draw [shift={(413.8,161)}, rotate = 90] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

% Text Node
\draw (334.9,147.2) node    {\eqref{eq:opti_prob_FB}};
% Text Node
\draw (403.93,132) node    {$\varphi _{\psi }$};
% Text Node
\draw (432.04,129.4) node    {$\boldsymbol{u}$};
% Text Node
\draw (372,129.4) node    {$\boldsymbol{v}$};
% Text Node
\draw (334.27,131.1) node   [align=left] {FB-MPC};
% Text Node
\draw    (221,117) -- (285,117) -- (285,141) -- (221,141) -- cycle  ;
\draw (253,129) node  [font=\small] [align=left] {\begin{minipage}[lt]{40.8pt}\setlength\topsep{0pt}
\begin{center}
Reference
\end{center}

\end{minipage}};
% Text Node
\draw (421,162.4) node [anchor=north west][inner sep=0.75pt]    {$\psi $};
% Text Node
\draw (311,172.4) node [anchor=north west][inner sep=0.75pt]    {$\boldsymbol{\sigma } ,\dot{\boldsymbol{\sigma }}$};
% Text Node
\draw (489.55,158.89) node    {System \eqref{eq:drone_dyna}};
% Text Node
\draw (392.44,139.18) node [anchor=north west][inner sep=0.75pt]    {\eqref{eq:linearization}};

\end{tikzpicture}
