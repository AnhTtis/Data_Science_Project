% \wenzhao{Suggested flow: overview, task parsing and specification, trajectory generation, closed-loop motion primitives}

% Given a taskboard, our goal is for the robot to complete the task of moving the cable around the fixtures. 

% \helen{In this section, we describe our method for tackling the cable assembly task. We start with estimating the configuration of the taskboard using the RGBD data of the taskboard along with the human demonstrated goal cable configuration. After we parse out the information from the RGBD data of the taskboard, a trajectory is generated }


The proposed method starts with estimating the configuration of the taskboard and the goal cable configuration from an assembled taskboard. Once the taskboard configuration is estimated, a task description is generated and mapped to a sequence of parameterized tactile primitives. Each primitive is designed as an individual state machine, where the state transitions are governed by the sensed tactile data. The robot executes primitives sequentially until task completion.

% the pose of the fixtures and the order in which it has to be traversed. The cable is detected from an RGBD image of a taskboard that is completed by a human demonstration. The cable is tracked from the start fixture to end and the taskboard configuration, thereby generating the order of traversal along the fixtures.

% The task board is occupied by four different types of fixtures: the start position,vertical pillars, horizontal slots and the connectors. The system should be able to find the pose of the fixtures and the goal configuration of the cable in a completed taskboard

%Once the taskboard configuration is estimated, a trajectory is generated for the robot to follow and complete the task.  This trajectory is generated by sequencing motion primitives from a library of motion primitives. These motion primitives are designed for each type of fixture by heuristic approaches. These primitives include tasks such as moving along the cable, pivoting cable around vertical pillar, inserting cable into horizontal slots, connector insertion etc. The primitives

%In order to tackle this task, the following capabilities are developed:
% \wenzhao{As discussed in the meeting, fine details are not needed. Rewrite to highlight novelty and core things to reproduce, to make it feel not heuristics or a course report..}
%\begin{itemize}
%\item A robot and gripper capable of picking up the cable from the taskboard surface and holding on to it without the risk of dropping it during manipulation
%\item Tactile sensor to measure the friction between the cable and the inner surface of the finger for efficient sliding along the cable
%\item Tactile sensor to estimate the tension in the cable and the controllers to maintain it.
%\item Tactile sensor to estimate the external contact forces acting on the cable during manipulation
%\item Human demonstration that shows the goal cable configuration. 
%\item Vision system to estimate the configuration - pose of the fixtures on the task board as well as the order at which the robot should traverse through it from start to end.
%\item Motion primitives with closed loop tactile feedback, that can do the individual subtasks - following, routing, threading and insertion.
%\item Trajectory generation system to generate the robot motion trajectory, by sequencing the above motion primitives based on the estimated task board configuration and order.

%The key idea of our method is to estimate the high level taskboard configuration from the vision and then use low level tactile controllers to execute the task.


%\end{itemize}

\subsection{Perception systems \& task parsing}
The perception system uses RGBD data from a Microsoft Azure Kinect camera overlooking the task board and tactile data generated by a GelSight R1.5 optical tactile sensor.


% \wenzhao{add a few perception results, e.g., 2x2 plots of different configurations with results}
% \subsubsection{Vision System}
% The RGBD data from the Kinect is used to create the corresponding point cloud, which we parse to detect the various types of fixtures -  including the start position, vertical pegs, channels/slots and the connector on the taskboard as well as their positions and orientations. Specifically, we use methods like Agglomerative clustering to determine the locations of the fixtures, and PCA to determine type and orientation.  

% The human demonstration consists of an RGBD image of the taskboard with the cable routed and fully assembled into the goal configuration. The manually assembled cable is then detected from the demonstration data. We move along the cable from the previously identified start position towards the connector, thereby assigning an order to each of the fixtures. Thus we estimate the goal cable configuration, taskboard configuration and order of traversal from a single human demonstration. \helen{working on this in helen draft tex}
\input{helen_draft}

\subsubsection{Tactile system}
\label{sec:tactile_system}
We use the tactile reading to estimate the cable state in different stages and adjust the manipulation strategies accordingly. The fingertip GelSight sensor provides tactile images of the contact area and marker displacement information corresponding to the 3-axis forces and in-plane torque on the contact surface.
As introduced in~\cite{yuan2017gelsight}, the change of the color in the GelSight images corresponds to the contact geometry and the motion of the markers in the images indicates the contact force and torque: a ``spreading out'' pattern of the markers' motion indicates normal force, a uniform motion pattern of the markers indicates shear force towards the motion direction, and a spiral pattern indicates an in-plane torque. The magnitude of the marker's motion is approximately linear to the magnitude of the force. 

In this work, we estimate the contact area of the cable based on color and background image subtraction. The contact area of the cable is elliptical in shape, as shown in Fig.~\ref{fig:fig_area}. The area also corresponds to the normal force, which is used to detect the firmness of the cable gripping. We fit an ellipse to the contact area and use its center and major axis to estimate the pose of the cable in hand. This helps the robot to re-center and re-orient the cable in the gripper. 


\begin{figure}[t]
\centering

\smallskip

%\subfigure[Grip force = 5N]{\includegraphics[width=0.33\linewidth, angle=270]{figures/IMG_area_S.png}}
%\subfigure[Grip force = 10N]{\includegraphics[width=0.33\linewidth,angle=270]{figures/IMG_area_M.png}}
%\subfigure[Grip force = 25N]{\includegraphics[width=0.33\linewidth, angle=270]{figures/IMG_area_L.png}} 
\includegraphics[width=0.875\linewidth]{figures/IMG_area_all.png} 
 \caption{When holding the cable with different forces, the contact area measured from GelSight is an elliptical shape. The area of the ellipse is roughly linear to the gripping force, and its center and orientation help estimate the cable pose.}
\label{fig:fig_area}
\end{figure}



%Specifically, the contact area of the cable in the finger is estimated using image background subtraction methods from the RGB data. 
% The spatial distribution of the displacement magnitude and angle of the optical markers, as well as their time derivatives corresponds to the forces acting on the grasped cable. The magnitudes and angles help in detecting slowly varying external forces while their derivatives help in detecting fast varying forces, such as when the connector instantaneously slips into/aligns with the socket hole.

Force and torque changes from the markers are tracked to identify cable states, such as a slowly increasing shear force along the cable indicating tight cable hold, and fast changing contact force/torque indicating a collision between the cable and the fixture. Fig.~\ref{fig:fig_contact} shows some example tactile images used for state estimation at different stages. 
%We then track the motion direction and magnitude of the markers to infer the contact force and torque. We also track how the force and torque changes since they correspond to different states of the cable at each stage: for example, a slowly increasing shear force along the cable direction indicates the cable is being held tight, whereas a fast changing contact force/torque typically suggests a collision between the cable and the fixture.

% We need to combine the marker measurement with the robot trajectory and primitives to get a specific estimation of the cable's state. 

\begin{figure}[t]
\centering

%\subfigure[Shear force]{\includegraphics[width=0.33\linewidth, angle=270]{figures/g_linear_pull.png}}
%\subfigure[Socket Searching]{\includegraphics[width=0.4\linewidth]{figures/g_sliding_on.png}}
%subfigure[CCW torque]{\includegraphics[width=0.33\linewidth,angle=270]{figures/g_vertical_contact_conn_side.png}}
%\subfigure[CW torque]{\includegraphics[width=0.33\linewidth,angle=270]{figures/g_vert_contact_rear_side.png}} 
\includegraphics[width=0.875\linewidth]{figures/force_all.png} 
%\subfigure[b]{\includegraphics[width=0.3\linewidth]{figures/g_sliding_over_in_hole.png}}
 \caption{\textbf{Motion patterns of the GelSight markers.} We use the motion patterns of the GelSight markers to determine contact forces and torques which are used to estimate the cable states in different stages. (a) Shear forces along the cable indicate tension when dragging the cable. (b) A counterclockwise (CCW) torque is generated when the USB cable head hits the connector fixture from the top. (c) A clockwise (CW) torque is produced when the cable rear makes contact with a slot fixture from the top.
  }
% \wenzhen{Ok I can edit only a few figure captions since I really don't understand what the others mean (also in the text)}}
\label{fig:fig_contact}
\end{figure}


The GelSight marker magnitudes also serve as input for the hybrid force-position controller used in connector insertion. GelSight data is sampled at 60 Hz with a latency of around 75 ms, while the force-position controller is a cascaded PID controller with an update frequency of 250 Hz. To match the controller frequency, the low frequency GelSight data is linearly interpolated in time. 
To mitigate the destabilizing effects of latency, high-level commands are issued to the controller at a considerably lower frequency than the control loop's operating frequency.  


%Fig.~\ref{fig:fig_contact} shows some example tactile images used for state estimation at different stages. Fig.~\ref{fig:fig_contact}(a) corresponds to the cable tension induced by the robot motion after a firm grasp on the cable.
%It should be noted that the markers are aligned with the cable pose and oriented in the opposite direction to the motion.
%One thing to note is how the markers are aligned with the pose of the cable and are pointing in the direction opposite to the motion direction. 
% Fig.~\ref{fig:fig_contact}(b) shows an instance from the USB connector alignment searching, where the magnitude and direction of the markers vary smoothly over time as the search progresses. 
%Fig.~\ref{fig:fig_contact}(b) shows a counterclockwise in-plane torque, with indicates the end of the cable is hitting something below. When this happens during the insertion stage, it means the cable head is hitting the top of the connector fixture. 
% Since the top side of image corresponds to the connector end of the cable, this is an indication of vertical forces on connector, which happens mostly during socket insertion. 
%Fig.~\ref{fig:fig_contact}(c) illustrates a torque in the opposite direction, which typically happens when passing the cable through slots and the cable hits the fixture from the top.
% \wenzhao{I thought c and d happens when USB head is misaligned in two different directions.}
% similar forces on the other side of the cable, which can happens during aligning and inserting cable into the slots/channels. 

%\wenzhao{add a figure showing generated trajectories in the relevant subsection}

% \begin{figure}
%     \centering
%     \includegraphics[width=\linewidth]{figures/gelsight_placeholder.png}
%     \caption{\textbf{GelSight examples.} This figure shows a few examples of the tactile data we get using the GelSight sensor while moving the cable around the taskboard. \helen{todo say more depending on what the figures are.}}
%     \label{fig:gelsight}
% \end{figure}

% \begin{figure}
%     \centering
%     \includegraphics[width=\linewidth]{figures/trajectory.png}
%     \caption{\textbf{Generated trajectory given a goal configuration of the taskboard.}}%\wenzhen{This figure is confusing. It's hard to see the 3D structure, and hard to recognize the type of the components. Would it be better to draw this in 2D?}\achu{Yes. This shows the trajectory generated from an early version of the primitives. I will update with the most recent one }}
%     \label{fig:trajectory}
% \end{figure}

\subsection{Motion primitives and trajectory generation}
\label{sec:primtives}
% \wenzhao{A table summarizing the parameters the motion primitives might be a way to provide details in a concise way}

The vision system infers an ordered list of fixture type, position, and orientation for task specification. This information is utilized to generate a reference robot path, as illustrated in the Online Generated Trajectory subplot in Fig.~\ref{fig:pipeline}, which is divided into sections for each fixture. Motion primitives designed for each task are executed for the corresponding path sections. The robot begins sequentially sets the end position of the previous primitive as the starting position for the next until the task is completed.

%The task specification, i.e., an ordered list of fixtures with their type, position, and orientation, inferred by the vision system is used to generate a reference robot path, as illustrated in the Online Generated Trajectory subplot in Fig.~\ref{fig:pipeline}. The path is then split into sections corresponding to each fixtures. Individual motion primitives  designed for each tasks are then executed for the corresponding section of the trajectory. The robot starts by picking the cable at the start position and sets the end position of the previous primitive as starting position for the next one, until task completion.%Once the  The trajectory is generated by sequencing motion primitives mapped from the task specification.
The primitives are parameterized and modeled from observing a human performing the task and deriving heuristics.  The primitives are designed as state machines, whose state transitions are triggered by the tactile signals generated by the external forces on the cable, as shown in Fig.~\ref{fig:primitives}. Following are the four primitives:

%  The primitives, as listed in Table 1 are parameterized by geometric and tactile parameters. The geometric parameters are the ones estimated from vision, while the tactile parameters acts as feedback to the motion primitives.
 


% % Table \ref{table:1} is an example of a referenced \LaTeX{} element.
% \begin{center}
% \footnotesize
% \begin{tabular}{ |l|l|l| }
% \hline
% \multicolumn{3}{ |c| }{Tactile Motion Primitives} \\
% \hline
% Primitive & Geometric Parameters & Tactile Parameters \\ \hline
% \multirow{3}{*}{Cable Following} & Start Position & Cable Tension \\
%   & Direction Vector & Cable Contact Area \\
%  & Skip Length &   \\
%   \hline
% \multirow{3}{*}{Pivoting around peg}  & Start Position & Peg Contact Force \\
%  & Peg Position & Board Contact Force \\
%   & End Position & \\ \hline
% \multirow{3}{*}{Slot Insertion} & Start Position & Slot Contact Force \\ 
% & Slot Position & Cable tension \\
% & Slot Orientation & \\
% & Cable Height &  \\
% \hline
% \multirow{3}{*}{Connector Insertion} & Start Position & Conn. Contact Force \\
%  & Connector Position & Insertion Force \\
%  & Connector Orientation & Contact Force gradient \\
% \hline
% \end{tabular}
% \break
% \caption{Table:1 \textbf{The motion primitives and their parameters.}}
% \label{table:1}
% \end{center}
% \normalsize

 \begin{figure}[t]
    \centering
    \includegraphics[width=\linewidth]{figures/primitives.pdf}
    \caption{{\bf Motion primitives.} To complete our cable routing and assembly task, we construct a library of motion primitives. The cable following primitive moves the robot along the cable, while pulling it in a desired direction. The pivot primitive wraps the cable around a peg while maintaining cable tension. The slot primitive inserts the cable into the slot and ``locks it" in place. The insertion primitive aligns and inserts the USB connector into the socket.}
    \label{fig:primitives}
\end{figure}

%The slot primitive aligns the cable with the slot by having the robot start with the cable above the fixture and lowering it with optionally wiggling until the cable is properly ``locked" in place. The insertion primitive aligns and inserts the tethered USB head into the connector fixture.

\subsubsection{Cable following}
\label{sec: cable_following}
The robot performs this primitive to guide the cable from one fixture to another.
As illustrated in the first row of Fig.~\ref{fig:primitives}, the primitive executes the following state sequence in a loop: i) the gripper slowly closes until the gripping force detected by GelSight exceeds a threshold; ii) the robot pulls the cable until the sensed shear force exceeds a threshold, indicating the cable tension; iii) the gripper slowly opens until the gripping force falls below a threshold; iv)  based on the detected cable pose in the gripper, the robot slides along the cable while keeping the cable centered.
% , where it also needs to guide the cable to the starting pose for passing the fixture. To do this, we make the robot grasp and move along the cable, pulling it in a desired direction. 
% The primitive executes the following state sequence in a loop: a) the gripper slowly closes until the gripping force detected by GelSight exceeds a threshold; b) the robot pulls the cable with the \textit{pulling} controller until the sensed shear force exceeds a threshold, indicating the cable's tension; c) the gripper slowly opens until the gripping force falls below a threshold; d) the robot slides along the cable while keeping the cable centered with the \textit{centering} controller.
% We use the tactile data from the GelSight sensor to maintain sufficient tension in the cable.\wenzhen{How?}
% We break this primitive into a \textit{pulling} controller, which moves the robot in a desired direction, and a \textit{centering} controller, which keeps the cable centered in the finger pad as determined by the GelSight sensor.

% Grasping the cable, then pulling and moving along the cable, towards a desired direction is the most basic primitive. The tactile data from the GelSight sensor is used to maintain sufficient tension in the cable, ensure the cable is held with enough gripping force and to keep the cable in the middle area of the finger.

%GelSight marker displacements along the direction of motion corresponds to the tension in the cable. Maintaining the right amount of tension in the cable is important for task completion. Slack cables brings in  uncertainty while over tension could lead to cable damage. 

%Grasping the cable with the enough force and at right location is also important at the same time. is  The cable contact surface area, estimated from GelSight is an indication of the gripping force for a given cable.  
%This primitive which does the task of moving along the cable towards a given goal direction, while maintaining sufficient tension in the cable. The rest all the motion primitives are built on top of this low level primitive. 

%The cable following primitive was initially formulated as a combination of a tactile PD controller and the robot’s position controller. The tactile PD controller takes in  the marker displacement magnitudes as input and controls the grasp force indirectly by controlling the gripper velocity. This regulates the friction between the cable and gripper as the robot moves along the cable. However it was observed that the gripper velocity control was not very reactive, thereby making the entire operation slower. Moreover, it was observed that maintaining a constant lateral force during the entire task caused significant deterioration of the sensor surface.

% The cable following primitive comprises of a \textit{pulling} controller and \textit{centering} controller. The pulling controller moves the robot along the desired direction (mostly in  horizontal plane) while maintaining the tension in cable. The centering controller keeps the cable centered within the sensing surface of finger by moving the gripper in vertical plane. The primitive is formulated into a closed loop \textit{“grasp-pull-release-move”} state machine. The gripper grasps the cable until it measures a threshold grasp force, which is estimated from the \textit{Cable Contact Area} parameter for a given cable. Then the \textit{pulling} controller moves the manipulator along the desired direction until the cable tension reaches the parameter \textit{Cable Tension}. This tension in cable is measured from the magnitude of lateral marker displacement. Once the cable is at tension, the gripper reduces the grasp force, such that the cable can easily slide through and moves a small distance defined by \textit{Skip Length} towards the desired direction. This sequence of \textit{grasp-release} action prevents permanent deterioration on the sensor surface as well as, is faster in execution.


%If the position of the grasped cable deviates from the middle of the sensing surface by more than a threshold anytime, the \textit{action} is generated by the \textit{centering} controller. This controller moves the gripper vertically, thereby bringing back the cable to the center position.

\subsubsection{Pivoting around pegs}

The pivoting primitive changes the direction of the cable to make it pivot around a vertical peg, as shown in the second row in Fig.~\ref{fig:primitives}. 
% This motion primitive is a state machine, with each state executing a particular part of the trajectory. Tactile signals such as cable making contact with the taskboard or the vertical peg, marker displacement thresholds etc are used to drive the state transitions.%\wenzhen{Explain how it works}
This primitive starts with following along the cable until a waypoint, determined by the peg position. The robot tilts backwards and moves down until the tactile signals indicate the cable is in contact with the taskboard, as illustrated in Fig.~\ref{fig:primitives} top row, plot (b) . These tactile signals looks similar to the clockwise torque signals in Fig.~\ref{fig:fig_contact} (c), ensuring that the cable gets tucked under the pivoting peg. The robot then moves in a circular trajectory centered at the initial position, and continues until the cable makes contact with the peg as in plot (c). 
%The contact with the peg creates extra tension in the cable which causes shear force displacement of markers as shown in Fig.~\ref{fig:fig_contact}(a). 
After establishing contact between the cable and peg, a new circular trajectory is generated using the peg's position as the center.  
%The pivoting primitive terminates once the robot reaches a pose determined by the position of the next fixture, as shown in the plot (d).
% , indicating the gripper aligns with the next fixture on the board. 
% The routing primitive is used to change the direction of cable, by pivoting the cable around vertical pegs. It is parameterized by the geometric parameters obtained from the task description  %The position of the peg, and the subsequent and previous fixtures - which are estimated from the RGBD image and a parameter depending on the bending radius of the cable - which is determined heuristically are used to parametrize and derive a geometric motion primitive. 

% \begin{figure}[h]
%     \centering
%     \includegraphics[width=\linewidth]{figures/pivot.png}
%     \caption{\textbf{Pivoting primitive.}}
%     \label{fig:pivot_primitive}
% \end{figure}

%\begin{figure}[h]
%    \centering
%    \includegraphics[width=\linewidth]{figures/ref_traj.png%}
%    \caption{\textbf{The reference trajectory vs the real tactile conditioned trajectory executed by the robot while pivoting the cable around a pillar.}}
%    \label{fig:pivot_ref_traj}
%\end{figure}


%Additional tactile constraints are also added while executing the generated trajectory, which makes it robust against failures. The following are these tactile constraints:
%\begin{itemize}
%    \item Maintain vertical marker displacement above a %threshold. This ensures that the cable is in contact with %the task board during pivoting, which helps to keep the %cable tucked or constrained in the lower part of the peg %which has a smaller radius.
%    \item Maintain a lateral marker displacement which %ensures that the cable is under tension and does not come %loose.

    
%\end{itemize}\wenzhen{I can't refine this part since I don't know what you mean by ``vertical marker displacement'' and ``lateral displacement'' and how they correlated with different states}

\subsubsection{Weaving through slots}
The weaving primitive is used to guide the cable through horizontal slots, as shown in the third row of Fig.~\ref{fig:primitives}.
% \begin{figure}[h]
%     \centering
%     \includegraphics[width=\linewidth]{figures/slot.png}
%     \caption{\textbf{Slot primitive.}}
%     \label{fig:slot_primitive}
% \end{figure}
It is parameterized by the slot position and orientation, which are used to generate a reference trajectory to place the cable into the slot from the top. If the cable is not aligned with the slot during the downward motion, as indicated by a sudden increase of the in-plane torque from the GelSight image, the robot executes a horizontal wiggling action while moving down. It is continued until the in-plane torque disappears, signaling that the collision is resolved and the cable is aligned with the slot. 
%the tactile signals generated due to the contact triggers a motion sequence until there is near zero tactile signal, signifying that the cable is properly placed. \wenzhen{How it works}

% \helen{i think the rest of this can be part of the caption for the tactile figure corresponding to this}  Cable perfectly aligned in the channel is indicated by near zero tactile signals generated as the cable no longer is in contact with the walls of the slot. 

% It is parametrized by the position and orientation of the slot and the previous fixture in the order. These parameters are used to generate a spline trajectory which lifts up the cable from the taskboard surface and ends with the cable vertically above the slot. The robot then moves vertically downwards until the cable is entirely inside the slot. In the case when the cable is not aligned with the slot while moving down, the tactile signals due to the contact triggers a motion sequence which wiggles the cable in the horizontal plane while simultaneously pushing it down. This ensures that the cable ends up in the channel eventually. Cable perfectly aligned in the channel is indicated by near zero tactile signals generated as the cable no longer is in contact with the walls of the slot. Once the cable is inside the slot, the cable is pulled along the direction of the slot, to ensure that any slack in the cable is removed.

\subsubsection{Connector insertion}

This primitive conducts tethered USB connector insertion given the socket position and orientation, as shown in the bottom row of Fig.~\ref{fig:primitives}. %In contrast to the earlier approaches of grasping the USB connector and estimating its orientation before insertion, our approach involves grasping the cable immediately behind the connector. This is necessary because a single manipulator with a parallel gripper cannot transfer the grasp from the cable to the connector head without dropping the cable. Additionally, grasping the flexible cable brings in mechanical compliance, which can make force based insertion easier. 
%
%Our approach tracks the cable to just behind the connector and orients it horizontally before moving towards the socket. Upon contact, a hybrid force-position controller uses GelSight markers to regulate the normal force, followed by a rotational primitive to align the connector to the socket. Finally, force-controlled insertion of the connector is executed.
The primitive starts from a grasp on the cable near the connector, which enables a certain amount of freedom for the connector to bend when hitting the rigid side of the socket fixture. When the connector contacts the socket fixture, the GelSight sensor detects a normal force along the cable. We then command the robot using a hybrid force-position controller to rotate around the normal axis while keeping the normal force. The motion enables the connector to move for a small distance around the initial contact location. When the connector falls into the socket, there will be a sudden drop in the normal force on the cable and a strong torque that stops the cable from continuing rotation. Both the change of force and torque can be detected by GelSight, and we will make the robot stop this ``exploration'' procedure and push forward to insert the connector into the socket. In some cases, if the initial contact point is too far away from the socket, the rotary exploration motion will not get the connector inside the socket. We will then make the robot retreat and start the exploration from another randomly-sampled location near the socket. 


% Our method involves following the cable towards the connector end and grasping the cable just behind the connector. 
% %This is necessary because a single manipulator with a parallel gripper cannot transfer the grasp from the cable to the connector head without dropping the cable. 
% The connector is then moved towards the socket, and upon contact, the hybrid force-position controller is activated. It uses GelSight markers to regulate the force in normal directions and positions in orthogonal directions. It is implemented as a cascaded PID controller. An exploratory primitive is executed using the hybrid controller, which performs an oscillatory to-and-fro rotary motion of the connector around the normal axis, while maintaining a normal force. This exploratory motion, along with the compliance provided by the cable grip enhances the likelihood of the the connector achieving alignment with the socket. Once aligned, the normal force being applied impels the connector partially into the socket, resulting in resistance against further oscillatory movements. This registers as a high torque reading on the GelSight markers. At this point, the robot increases the normal force and decreases the amplitude of oscillatory motion, ultimately resulting in the full insertion of the connector. However, if the initial contact is not near the socket, the controller will retry at a new randomly-sampled location around the socket position.

%As the gripper moves along the cable, it maintains a minimal gap to allow the cable to slide through smoothly. Upon reaching the wider connector, a greater force  is generated on the sides of the fingers. When this force is detected by the wrist force-torque and tactile sensors, the gripper securely grasps the cable, estimates its position and orientation, and corrects it such that the cable rests horizontally in the gripper's grasp. Subsequently, the robot moves to a pose where the connector faces the estimated socket pose in a normal direction and approaches the socket until contact is made. At this point, the system switches to a hybrid force-position controller that utilizes tactile feedback. This controller takes input from the GelSight markers and regulates the normal force being applied by the connector to the socket's surface. The robot then executes a to-and-fro rotational action around the normal direction with the connector exerting force on the surface.If the connector makes initial contact in close proximity to the socket, the compliance in the cable and the to-and-fro motion assist in aligning the USB connector with the socket. Once the connector aligns with the socket, the to-and-fro motion ceases, resulting in a high torque reading on the GelSight markers. The robot then stops the to-and-fro motion and inserts the connector into the socket. However, if the initial contact is not near the socket, the controller retries at a new randomly-sampled location around the socket position.

%just posterior to the connector, 
%The insertion primitive starts above the connector and lowers the cable toward its top edge until contact is detected from GelSight readings. This process helps to precisely align the orientation of the USB head with the connector.
% and uses the tactile feedback to determine the vertical alignment of the usb plug with respect to the connector port.
%The robot rotates the USB head until it's considered in parallel with the connector top surface. The alignment condition and rotation direction are determined by the GelSight in-plane torque, as explained in Section~\ref{sec:tactile_system}.
%After orientation alignment, the robot searches in a Lissajous exploratory pattern until translation alignment, while keeping the USB head in contact with the connector. Translation alignment, i.e., the USB head slightly enters the connector hole, is determined by an instantaneous spike in the tactile marker magnitudes.
% \wenzhen{Be more specifics}
%Lastly, the robot exerts a normal force against the connector while wiggling the USB head to finish insertion into the connector fixture. 
% \wenzhen{again i cannot refine this part since I don't understand how you did it}



% Connector insertion is the final task and when the robot reaches the state prior to it, it will still be grasping the cable. Shifting the grasp from the cable to the connector runs the risk of dropping the cable. So unlike the conventional approaches to connector insertion by holding on to the rigid connector, our approach holds on to the portion of cable just behind the connector and attempts insertion. This brings in uncertainty in the position and orientation of the connector at the end of the cable. 

%The final subtask involves inserting the USB end of the cable to the connector. This motion primitive is parameterized by the position and orientation of the connector as well as the heuristic parameter determined by the physical properties of the cable. 

% Shifting the grasp from the cable to the connector runs the risk of dropping the cable, so unlike the conventional approaches to connector insertion by holding on to the rigid connector, our approach holds on to the portion of cable just behind the connector and attempts insertion. This brings in uncertainty in the position and orientation of the connector at the end of the cable. \helen{not sure if we need this paragraph}

% The insertion primitive starts with moving the cable towards the top part of the connector, moving vertically down. Once the connector at the cable end makes contact with the horizontal plane at the top of the connector, tactile signals can be used to estimate whether the connector at cable end is rotated clockwise or counterclockwise. This  is then compensated by rotating the wrist of the robot until the connector at the cable end is aligned parallel with the surface. Then the robot switches to a hybrid force-position control mode and moves in a Lissajous exploratory pattern in the plane of the connector surface, while exerting a normal force on the surface.  The exploratory pattern ensures that some part of the cable end connector will fall into the connector insertion hole. It is observed that this generates an instantaneous spike in the tactile marker signals. This instantaneous spike is easily recognizable in the tactile displacement magnitude time derivative signals. It is then used to switch to the final part of the primitive which exerts a normal force while wiggling the cable  in the lateral direction, such that the connector perfectly aligns and insertion happens. 


% \subsubsection{Sequencing of Primitives and Trajectory Generation}
% \helen{confused by this section - is it just because it's incomplete?}
% Once the configuration and order of the task board is identified, a trajectory is generated by sequencing the primitives
% % \wenzhen{Do you need to explain the connection with visual input/human demonstration?}
% \wenzhen{you need to explain how this works and how it connect with visual input/human demonstration?}