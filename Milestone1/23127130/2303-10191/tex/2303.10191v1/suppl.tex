\setcounter{page}{1}
\setcounter{figure}{0}
\renewcommand{\thefigure}{S\arabic{figure}}
\renewcommand{\thetable}{S\arabic{table}}

\section*{Supplementary Material for: Unsupervised Domain Transfer with Conditional Invertible Neural Networks}



\begin{table}[h!]
\centering
\caption{\textbf{Simulated ranges of physiological parameters of a three-layer  tissue model for HSI}. $v_{\textrm{Hb}} \lbrack \% \rbrack$ represents the blood volume fraction, $sO_2$ the blood oxygenation, $a_{mie}$ the reduced scattering coefficient at $500$\,nm, $b_{mie}$ the scattering power, $g$ the scattering anisotropy, $n$ the refractive index, and $d$ the layer thickness. Parameters were uniformly sampled within the specified range.}
\label{tab:generic}
\begin{tabular}{p{1.8cm} c c c c c c c}
\hline
      & $v_{\textrm{Hb}} \lbrack \% \rbrack$           & $sO_2 \lbrack \% \rbrack$  & $a_{\text{mie}} \lbrack \si{cm^{-1}} \rbrack$ & $b_\text{mie}$[a.u.]         & $g$[a.u.]      & $n$[a.u.]         & $d \lbrack\si{cm}\rbrack$      \\ 
\hline
layers 1 to 3: & $0-30$ & $0-100$ & $5-50$ & $0.3-3$ & $0.80-0.95$ & $1.33-1.54$ & $0.002-0.2$  \\ 
\hline \hline
\multicolumn{8}{l}{simulation framework: GPU-MCML, $10^6$ photons per simulation}                                                \\                  
\multicolumn{8}{l}{simulated samples: \num{5.5e5} in  wavelength range: 500\,\si{nm}-1000\,\si{nm}, step size 2\,\si{nm}}\\
\hline
\end{tabular}
\end{table}

\begin{figure}[h]
    \centering
    \includegraphics[width=0.9\textwidth]{figures/semantic_knn_data_generation_process.pdf}
    \caption{\textbf{HSI data generation}.   Real data is leveraged to reduce a large set of simulations to a set of plausible spectra with unambiguous labels.}
    \label{fig:suppl_knn_data_generation}
\end{figure}

\begin{figure}[hb!]
    \centering
    \includegraphics[width=\textwidth]{figures/pai_quantitative_artery.pdf}
    \caption{\textbf{Our domain transfer approach yields realistic spectra}. Figures a) and b) are the artery-equivalent of veins in Fig. 5 of the main paper. c) and d) represent the real, simulated, and domain-transferred vein and artery spectra.}
    \label{fig:suppl_artery}
\end{figure}


\begin{table}[hb!]
\centering
\caption{\textbf{Classification scores for different training data.} The training data refers to real data, simulated data without domain transfer, data generated by a UNIT with ($\text{UNIT}_\text{Y}$) and without ($\text{UNIT}$) tissue labels, and by a cINN with (proposed $\text{cINN}_\text{DY}$) and without ($\text{cINN}_\text{D}$) tissue labels as condition, respectively. The best performing methods, except if trained on real data, are printed in \textbf{bold}.}
\label{tab2}
\begin{tabular}{l c c c c c c}
\hline
\multirow{2}{*}{\shortstack{\textbf{Classifier} \\ \textbf{training data}}} & \multicolumn{3}{c}{\textbf{PAT}} & \multicolumn{3}{c}{\textbf{HSI}}\\
\cline{2-7}
& BA & AUROC & F1-Score & BA & AUROC & F1-Score\\
\hline
\bfseries \textcolor{real}{\textbf{Real}} & 0.75 & 0.84 & 0.82 & 0.40 & 0.81 & 0.44\\
\hline
\bfseries \textcolor{simulated}{\textbf{Simulated}} & 0.52 & 0.64 & 0.64 & 0.24 & 0.75 & 0.18\\
\bfseries \textcolor{UNIT}{\textbf{UNIT}} & 0.50 & 0.44 & 0.65 & 0.20 & 0.72 & 0.20\\
\bfseries \textcolor{UNIT}{\textbf{$\text{UNIT}_\text{Y}$}} & 0.64 & \textbf{0.81} & 0.77 & 0.24 & 0.74 & \textbf{0.25}\\
\bfseries \textcolor{cINN}{\textbf{$\text{cINN}_\text{D}$}} & 0.66 & 0.73 & 0.72 & 0.25 & 0.72 & 0.20\\
\bfseries \textcolor{cINN}{\textbf{$\text{cINN}_\text{DY}$} (proposed)} & \textbf{0.71} & 0.80 & \textbf{0.78} & \textbf{0.29} & \textbf{0.76} & 0.24\\
\hline
\end{tabular}
\end{table}




\begin{table}[h!]
\centering
\caption{\textbf{Hyperparameters of cINN models and discriminators (Dis) for PAT and HSI.} The hyperparameters have been optimized to yield best spectral consistency and classification performance. The networks have been implemented in PyTorch. Here, ``lr'' represents the learning rate and ``WD'' the weight decay. The code and pre-trained models are available at: GITHUB\_LINK.}\label{tab1}
\begin{tabular}{l c c}
\hline
\bfseries Hyperparameter & \bfseries PAT cINN & \bfseries HSI cINN\\
\hline
\bfseries Epochs &  300 & 300\\
\bfseries Batch size &  2 & 10,000\\
\bfseries Optimizer & Adam (lr=0.001) & Adam (lr=0.0001) \\

\bfseries Optimizer parameters & $\beta_\text{1}$=0.4,$\beta_\text{2}$=0.999,WD=0.001 & $\beta_\text{1}$, $\beta_\text{2}$, WD=0.9, 0.95, 0.0001\\
\bfseries Scales & 5 & 1\\
\bfseries Blocks per scale & 4, 2, 1, 1, 2 & 40\\
\bfseries Conditions per scale & DY, D, D, D, D & 30$\times$DY + 10$\times$None\\
\bfseries Exponential clamping & 1 & 1\\
\shortstack{\bfseries Subnetwork\\ \,} & \shortstack{3$\times$(2D Conv + ReLU) \\ 256 hidden features} & \shortstack{2$\times$(Linear + ReLU) \\ 512 hidden features}\\
\hline
\bfseries Hyperparameter & \bfseries PAT Dis & \bfseries HSI Dis \\
\hline
\bfseries Scales & 3 & 1\\
\bfseries Layers per scale & 4$\times$(2D Conv + LeakyReLU) & 3$\times$(Linear + LeakyReLU)\\
\bfseries Hidden features & 64 & 256\\
\bfseries Dropout prob. & 0.2 & 0.2\\
\end{tabular}
\end{table}
