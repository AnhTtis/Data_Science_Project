\begin{figure*}[!ht]
    \centering
     \begin{subfigure}[b]{0.285\textwidth}
     \includegraphics[width=0.98\textwidth]{figures/unseen_var_gt1.pdf}
       \caption{Unseen variations of seen bug types.}
        \label{fig:greater_1_var}
    \end{subfigure}
    ~ 
    \begin{subfigure}[b]{0.285\textwidth}
     \includegraphics[width=0.98\textwidth]{figures/unseen_type_gt1.pdf}
       \caption{Unseen bug types.}
        \label{fig:greater_1_type}
    \end{subfigure}
    ~
    \begin{subfigure}[b]{0.38\textwidth}
     \includegraphics[width=0.98\textwidth]{figures/seen_gt1.pdf}
        \caption{Seen bug variations.}
        \label{fig:greater_1_trained}
    \end{subfigure}
    \vskip 1ex
    \caption{Top-\emph{k} accuracy for bugs with average IPC impact $>$1\%.}
    \vskip 1ex
    \label{fig:per_ipc_1}
\end{figure*}

\section{Evaluation} \label{sec:evaluation}

This section presents the details of the experiments conducted to
evaluate our methodologies.  Sections~\ref{subsec:per_impact_accuracy}
through~\ref{subsec:no_bug_handling} show the results of the
methodologies when applied to the microprocessor core setup.
Section~\ref{subsec:memory_accuracy} presents the results of the
examination on memory systems.  Since we are not aware of prior work
in automatic performance bug localization, no comparison to prior work is
conducted.

Since the localization problem is formulated as a multi-class
classification task, both methodologies produce a sorted list from
highest to lowest probability of the performance bug being located in
each unit. The top-\emph{k} accuracy metric is used to measure results
quality. Here, a result is considered correct if the actual bug
location is found among the first \emph{k} choices suggested by our
techniques. The reason why top-\emph{k} accuracy is more relevant in
this work than other metrics (\emph{e.g.} a confusion matrix) is
because, rather than measuring when a sample is incorrectly classified
into a different class, it is more important to determine how high in
the predicted ranking the actual bug location is, as this represents
how many units the designer or validation engineer would have to search to actually find the
bug. Ideally, we would like the methodology to pinpoint to a single
unit (top-1 accuracy), but due to the challenging nature of the problem, we find 
top-k accuracy a good compromise.

Note that the accuracy of a random guess in a multi-class task is not
50\%, as in the more frequently studied binary classification, instead,
it is actually $1/|U|$ where $U$ is the set of all classes
(units). Therefore, the top-\emph{k} accuracy of a random guess is
given by $k/|U|$. The reported accuracy is obtained as the average
across the four architectures used as test cases.

It is important to note that bugs with small
average IPC impact are hard to catch, and do not represent a priority
for the designers as the gain by fixing them is not high.
Therefore, our main results, presented in Section~\ref{subsec:per_impact_accuracy}, focus in the 
analysis of the results obtained
on bugs with average IPC impact  $>$1\%. Section~\ref{subsec:overall_accuracy} shows the performance
of our methodology when smaller bugs (average IPC impact $>$0.1\%.) are considered.

All the methodologies were implemented in Python. For neural networks
Keras~\cite{chollet2015keras} is used, and for the gradient boosted decision
trees, XGBoost~\cite{chen2016xgboost} is used.



\input{4a_Greater_1}


\begin{figure*}[h!]
  \centering
  \begin{subfigure}[b]{0.285\textwidth}
    \includegraphics[width=0.98\textwidth]{figures/unseen_var_gt01.pdf}
    \caption{Unseen variation of seen bug types.}
    \label{fig:unseen_var_acc}
  \end{subfigure}
  ~
  \begin{subfigure}[b]{0.285\textwidth}
    \includegraphics[width=0.98\textwidth]{figures/unseen_type_gt01.pdf}
    \caption{Unseen bug types.}
    \label{fig:unseen_type_acc}
  \end{subfigure}
  ~
  \begin{subfigure}[b]{0.38\textwidth}
    \includegraphics[width=0.98\textwidth]{figures/seen_gt01.pdf}
    \caption{Seen bug variations.}
    \label{fig:seen_acc}
  \end{subfigure}
  \vskip 1ex
  \caption{Top-\emph{k} accuracy for bugs with average IPC impact $>$0.1\%.}
  \vskip 1ex
  \label{fig:top_k_gt01}
\end{figure*}

\input{4b_Greater_01}
\input{4c_Nb_Probes}
\input{4d_No_Bug_handling}
\input{4e_Memory_Results}









