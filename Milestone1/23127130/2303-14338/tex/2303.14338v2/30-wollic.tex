% !TEX root = 00-wollic.tex

Constructions in monoidal categories yield to insightful presentations in terms of string diagrams \cite[Ch.~1]{Joyal-Street:geometry,PavlovicD:MonCom}. We will need them to present the constructions like \eqref{eq:fixpoint} and in particular  \eqref{eq:ana}. While commutative diagrams like \eqref{eq:def-intepretable} display compositions of morphisms and abbreviate their equations, string diagrams display \emph{de}\/compositions of morphisms. Monoidal categories come with two composition operations: the categorical (sequential) morphism composition $\circ$ and the monoidal (parallel) composition $\otimes$. The former is drawn along the vertical axis, the latter along the horizontal axis. The objects are drawn as strings, the morphisms as boxes. A morphism $A\tto f B$ is presented as a box $f$ with a string $A$ hanging from the bottom and a string $B$ sticking out from the top. The identities are presented as invisible boxes: the identity on $A$ is just the string $A$. The unit type $I$ is presented as the invisible string. There are thus boxes with no strings attached. The composite morphism $g\circ f =(A\tto f B\tto g C)$ is drawn bottom-up, by hanging the box $f$ on the string $B$ under the box $g$. The monoidal composition is presented as the horizontal adjacency: the composite $(g\circ f)\otimes (s\circ t)$ is drawn by placing the boxes $g\circ f$ next to the boxes for $s\circ t$:

\beq\label{eq:godement}
\begin{split}
\newcommand{\machine}{$f$}
\newcommand{\gee}{$g$}
\newcommand{\kee}{$s$}
\newcommand{\hee}{t}
\newcommand{\nameslang}{\scriptstyle B}
\newcommand{\seqcompp}{\scriptstyle {\color{red}g\circ f}}
\newcommand{\parcompp}{\scriptstyle {\color{blue}f\otimes t}}
\newcommand{\inputt}{\scriptstyle A} 
\newcommand{\outpt}{$\scriptstyle C$}
\newcommand{\otherinputt}{\scriptstyle U}
\newcommand{\otheroutpt}{\scriptstyle V} 
\newcommand{\outpttt}{$\scriptstyle W$}
\def\JPicScale{.5}
\input{PICS/godement.tex}
\end{split}
\eeq

The middle-two-interchange law $(g\circ f)\otimes(s\circ t) =  (g\otimes s)\circ(f\otimes t)$ corresponds to the two ways of reading the diagram: vertical-first and horizontal-first, marked by the red and the blue rectangle respectively. The string diagrams corresponding to the cartesian comonoids \eqref{eq:dataserv-text} are 
\beq\label{eq:dataserv}
\begin{split}
\newcommand{\AAh}{\scriptstyle A}
\newcommand{\ccopy}{\cmn}
\newcommand{\delete}{\scun}
\def\JPicScale{.4} 
\input{PICS/dataserv-1.tex}
\end{split}
\eeq
The equations that make them into commutative comonoids look like this:
\begin{alignat}{11}
\def\JPicScale{1} \input{PICS/cmn-left-1.tex}\   &\ \ =\ \   \def\JPicScale{1} \input{PICS/cmn-right-1.tex} &&\qquad\qquad&&& 
\def\JPicScale{1} 
\input{PICS/cun-left-1.tex}  & \ = \ &\ \, \def\JPicScale{1} \input{PICS/cun-id.tex} &\ \, = \ \ &  \def\JPicScale{1} \input{PICS/cun-right-1.tex}&&\qquad\qquad&&&
\def\JPicScale{1} \input{PICS/cmn.tex} &\   = \   \def\JPicScale{1} \input{PICS/cmn-sym.tex} \hspace{2em}
\label{eq:comonoid}%\\%[1ex]
\notag
\end{alignat}
\smallskip

\paragraph{State parametrization and updating.} Products $A\otimes B$ denote a space where $A$ and $B$ but do not interfere. In a diagram, they are just parallel strings. Since the product states from the space $X\otimes A$ do not interfere, a transition $g\colon X\otimes A \to B$ can be viewed as $X$-parametrized family $g_{x}\colon A\to B$, as it was viewed in Sec.~\ref{Sec:Intro}. Since the product states from $X\otimes B$ also remain separate, a transition $q\colon X\otimes A\to X\otimes B$ can be viewed as $X$-updating process, as it was also viewed in Sec.~\ref{Sec:Intro}. The corresponding string diagrams are 
\beq\label{eq:gq}
\begin{split}
\newcommand{\fee}{g}
\newcommand{\qee}{q}
\newcommand{\Aee}{\scriptstyle X}
\newcommand{\Bee}{\scriptstyle A}
\newcommand{\Cee}{\scriptstyle B}
\def\JPicScale{.25}
\input{PICS/gq.tex} 
\end{split}
\eeq

\paragraph{Shape conventions.} While the boxes in \eqref{eq:godement} and \eqref{eq:gq} are rectangular, the cartesian ``boxes'' in \eqref{eq:dataserv} are reduced to black dots. In general, the boxes denoting general transitions can vary in shape, and fixed shapes are used for generic notations. E.g., the interpreters, introduced in \eqref{eq:uev} below, are denoted by trapezoids, and the interpretations, that are fed to them, by triangles. A black dot on a box signals that it is cartesian, i.e. belongs to $\tot\UUU$.

\paragraph{Projections.} Using the cartesian structure from \eqref{eq:dataserv}, a state updating transition $q$ can still be decomposed like before 
\beq
\sta q = \left(X\otimes A\tto q X\times B\tto{\id\otimes \scun} X\right)\quad \out q = \left(X\otimes A\tto q X\otimes B\tto{\scun\otimes \id} B\right)
\eeq
In general, however, although the transitions $u\colon Z\to U$ and $v\colon Z\to V$ can be paired into $<u,v> =(Z\tto\cmn Z\otimes Z \tto{u\otimes v} U\otimes V)$, the pair $<\sta q, \out q>$ may not be equal to $q$ in the universe $\UUU$, unless it happens to be cloneable, in the sense that it commutes with $\cmn$.