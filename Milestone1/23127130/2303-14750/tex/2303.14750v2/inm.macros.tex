%%%%%%%%%%%%%%%%%%%%%%%%%%%% INM-related options

\usepackage{nccmath}
\usepackage{lmodern}     % set math font to Latin modern math
\usepackage[T1]{fontenc}
\renewcommand\rmdefault{ptm} %change text font to Times New Roman

\DeclareSymbolFont{myletters}{OML}{ztmcm}{m}{it}
\DeclareMathSymbol{\uplambda}{\mathord}{myletters}{"15}

% Use boldfont for vectors and matrices:
\newcommand{\mat}[1]{\boldsymbol{#1}}
\renewcommand{\vec}[1]{\boldsymbol{#1}}
\newcommand{\tnsr}[1]{\boldsymbol{#1}}

\newcommand{\Tr}{^{\mathop{\mathrm{T}}}}


% \newcommand\F[1]{\Faux#1\endFaux}
% \makeatletter
% \newcommand\Faux{\@ifnextchar(\Fnoadd\Fadd}
% \makeatother
% \def\Fadd#1\endFaux{F(#1)}
% \def\Fnoadd#1\endFaux{F#1}

\newcommand\inmfmtchar[1]{%
\ifx (#1(\else
\ifx )#1)\else
\ifx +#1+\else
\boldsymbol{#1}\fi\fi\fi
}

\usepackage{tokcycle, xcolor}
\Characterdirective{\addcytoks{\inmfmtchar{#1}}}
\Groupdirective{\processtoks{#1}}
\Macrodirective{\addcytoks{#1}}
\Spacedirective{\addcytoks{#1}}

\newcommand\inmfmt[1]{\tokcyclexpress{#1} \the\cytoks}

\newcommand{\deffunB}[1]{\expandafter\newcommand\csname #1\endcsname[1]{#1(##1)}}


% https://tex.stackexchange.com/questions/51819/nesting-command-definitions-more-than-two-levels
\newcommand{\inmtok}[1]{
\tokcycle{
\inmfmtchar{##1}} % characters
{\processtoks{##1} } % groups
{\addcytoks{##1}} % macros
{\addcytoks{##1}} % spaces
{#1} % input
}

\newcommand\underdot[1]{\ooalign{#1\cr\hfil{\raisebox{-5pt}{.}}\hfil}}


% The following tags can be used to place individual comments that appear in the text (rather than Latex comments, just using '%').  They can be removed by uncommenting the 'renewcommand' line:
\newcommand{\Max}[1]{\textcolor{red}{ (#1) }}
\newcommand{\David}[1]{\textcolor{blue}{ (#1) }}
\newcommand{\Nelson}[1]{\textcolor{green}{ (#1) }}
\newcommand{\SuggestedCut}[1]{\textcolor{yellow}{ (#1) }}

% redefine space between text and figures
\setlength{\textfloatsep}{7.5pt plus 1.0pt minus 2.0pt}