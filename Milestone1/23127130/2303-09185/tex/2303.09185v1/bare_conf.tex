\documentclass[journal,12pt,onecolumn]{IEEEtran}
\usepackage{fixltx2e}[2006/09/13]

% *** MISC UTILITY PACKAGES ***
%
%\usepackage{ifpdf}
% Heiko Oberdiek's ifpdf.sty is very useful if you need conditional
% compilation based on whether the output is pdf or dvi.
% usage:
% \ifpdf
%   % pdf code
% \else
%   % dvi code
% \fi
% The latest version of ifpdf.sty can be obtained from:
% http://www.ctan.org/tex-archive/macros/latex/contrib/oberdiek/
% Also, note that IEEEtran.cls V1.7 and later provides a builtin
% \ifCLASSINFOpdf conditional that works the same way.
% When switching from latex to pdflatex and vice-versa, the compiler may
% have to be run twice to clear warning/error messages.






% *** CITATION PACKAGES ***
%
\usepackage[round,sort]{natbib}
\usepackage{multirow}

% *** GRAPHICS RELATED PACKAGES ***
%
\ifCLASSINFOpdf
   \usepackage[pdftex]{graphicx}
  % declare the path(s) where your graphic files are
   \graphicspath{{images/}}
  % and their extensions so you won't have to specify these with
  % every instance of \includegraphics
   \DeclareGraphicsExtensions{.pdf,.jpeg,.png}
\else
  % or other class option (dvipsone, dvipdf, if not using dvips). graphicx
  % will default to the driver specified in the system graphics.cfg if no
  % driver is specified.
  % \usepackage[dvips]{graphicx}
  % declare the path(s) where your graphic files are
  % \graphicspath{{../eps/}}
  % and their extensions so you won't have to specify these with
  % every instance of \includegraphics
  % \DeclareGraphicsExtensions{.eps}
\fi

\usepackage[cmex10]{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
%\usepackage{stfloats}
\usepackage[caption=false]{subfig}
\usepackage{epstopdf}
\usepackage{booktabs}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage[nolist]{acronym}
\usepackage{tikz}
%\usepackage{parskip}

% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}

% While we are working
%\usepackage{todonotes}

% For manuscript
%\usepackage[mathlines]{lineno}
%\linenumbers

\newtheorem{proposition}{Proposition}
\newtheorem{example}{Example}

\begin{document}
%
% paper title
% can use linebreaks \\ within to get better formatting as desired
\title{The Membership Degree Min-Max\\ Localisation Algorithm}


% author names and affiliations
% use a multiple column layout for up to three different
% affiliations
\author{
\IEEEauthorblockN{Thomas Hillebrandt, Heiko Will, Marcel Kyas}
\IEEEauthorblockA{
  \\Freie Universit\"at Berlin\\
  AG Computer Systems \& Telematics\\
  Berlin, Germany\\
  Email: \{thomas.hillebrandt,heiko.will,marcel.kyas\}@fu-berlin.de}\\
  Telephone: +49 30 838 75116 \\
  Fax: +49 30 838 75194 \\ 
}

%\IEEEpubid{\makebox[\textwidth]{\hfill \copyright~[2012] IEEE. Portions reprinted, with permission, from Will H., Hillebrandt T., Yang Y., Zhao Y., Kyas M.,The Membership Degree Min-Max localization algorithm, IEEE Proceedings of UPINLBS 2012, October/2012.}}

% make the title area
\maketitle
\tikz[remember picture,overlay] {
    \node[shift={(10.7cm,1.0cm)}] at (current page.south west) {\footnotesize \hfil\parbox[t][\height][t]{\textwidth}{\centering \copyright~[2012] IEEE. Portions reprinted, with permission, from Will H., Hillebrandt T., Yang Y., Zhao Y., Kyas M.,\\ The Membership Degree Min-Max localization algorithm, IEEE Proceedings of UPINLBS 2012, October/2012.}\hfil\hbox{}
};
}

\begin{abstract}
%\boldmath

We introduce the \ac{MD-Min-Max} localisation algorithm as a precise and simple lateration algorithm for indoor localisation. \ac{MD-Min-Max} is based on the well known Min-Max algorithm that computes a bounding box to estimate the position. \ac{MD-Min-Max} uses a \ac{MF} based on an estimated error distribution of the distance measurements to improve the precision of Min-Max. The algorithm has similar complexity to Min-Max and can be used for indoor localisation even on small devices, e.g. in \acp{WSN}. To evaluate the performance of the algorithm we compare it with other improvements of the Min-Max algorithm and maximum likelihood estimators, both in simulations and in a large real world deployment of a \ac{WSN}. Results show that \ac{MD-Min-Max} achieves the best performance in terms of average positioning accuracy while keeping computational cost low compared to the other algorithms.
\end{abstract}

\begin{IEEEkeywords}
Indoor localisation, localisation algorithm, fuzzy membership function, statistical sampling, wireless sensor networks.
\end{IEEEkeywords}

\IEEEpeerreviewmaketitle

\newpage
\section{Introduction}

Localising an item by using distance measurements, so called lateration, is not only of interest to computer scientists. Localisation algorithms are used in many other domains. For example, psychologists want to detect the precise spatial source of a electric impulse in the human brain, biologists want to track the position of birds equipped with small sensor nodes and geologists have to detect the source of an earthquake using seismic waves. Most of those applications apply the same principle: based on the measurement of a physical value, the distance between the target and some fixed points (anchors) is estimated and then the position of the target is calculated with a localisation algorithm. Since the distance estimations are erroneous, classic algorithms like trilateration provide unsatisfactory results. Thus, many algorithms have been proposed, that turn out to be robust in different geometrical constellation of target and anchors.

In this paper we present \acl{MD-Min-Max} (\acs{MD-Min-Max}), a localisation algorithm which is based on the well known Min-Max algorithm~\citep{whitehouse2006robustness,lazos2005serloc}. \ac{MD-Min-Max} can easily be adapted to the distance error distribution of a fixed anchor deployment to minimize the position error. To make use of this algorithm the error distribution must be known which should be easy to achieve for static deployments. Especially for indoor localisation of nodes our algorithm shows a big improvement on the position error because it weakens the effect of multi-path propagation and signal reflection. Even for unknown error distributions in dynamic environments our algorithm performs quite well with a general distribution function. We show in several simulations and a real world deployment that the position error is minimal compared to other Min-Max solutions and maximum likelihood estimators while keeping the computation and memory complexity low.

The main difference to other methods is that we do not simply take the centroid of the bounding box, but weight the vertexes of the bounding box with a membership function based on the distance error distribution of the deployment. With this weighting we improve precision even in the areas where other Min-Max algorithms performance gets worse, which is especially outside the convex hull of the anchors.

One property of localisation algorithms is the \emph{spatial distribution of the positioning error}, or shorter, the \emph{spatial error distribution}. This measures the expected positioning error at each location in a space. It characterises the performance of the algorithm for a specific anchor set-up and shows where an algorithm is expected to perform well and where it does not perform. For example, the Min-Max algorithm will only compute positions inside the convex hull that contains all anchor positions. Outside of this hull, the positioning error increases until the algorithm becomes unusable. We analyse the spatial error distribution of our algorithm and compare the results to other algorithms.

The remainder of the paper is structured as follows. In Section~\ref{relatedwork} we present related work and the original Min-Max algorithm. Furthermore, we introduce the \ac{E-Min-Max} \citep{extended2012} algorithm that also uses a weighting function to improve the precision of Min-Max. We also describe \ac{ML} estimation \citep{al2002ml,patwari2003relative} which uses an error model to account for the distance measurement characteristics. As with \ac{MD-Min-Max}, prior knowledge of the probability density is needed and modelling the indoor sensor error is a difficult task. We fit the error distribution obtained by experiments in a real environment using normal and gamma distribution. In Section~\ref{section:md-min-max} we describe our algorithm in detail and discuss how to calculate the membership function. In Section~\ref{section_spatial_evaluation} we present an evaluation of the spatial error distribution of the selected algorithms. After that we discuss the results of our real world deployment in Section~\ref{deployment}. Finally our conclusion and future work is presented in Section~\ref{conclusion}.

% You must have at least 2 lines in the paragraph with the drop letter
% (should never be an issue)

\newpage
\input{related_work}

\input{min_max}

\newpage
\input{degree_weighted}

\newpage
\input{spatial_distribution}

\newpage
\input{real_word_evaluation}

\newpage
\section{Conclusion}
\label{conclusion}

We have presented the \ac{MD-Min-Max} algorithm as an optimization of the Min-Max and also both \ac{E-Min-Max} algorithms. We have shown that performance can be improved noticeably in most scenarios, if simple assumptions about the error distribution are regarded by the algorithm. Although modelling the extremely arbitrary indoor distance measurement error is hard, experimental results imply that our method fits the real world positioning effectively and efficiently.

This behaviour is corroborated by the simulations of the spatial position error and validated by the experiments conducted where the accuracy improvement ranged from 15.5\% to 20.5\% (disregarding NLLS). While MLE-$\mathcal{N}$ and MLE-$\Gamma$ improve the performance of NLLS by over 50\%, they cannot attain the high accuracy of \ac{MD-Min-Max} completely. In particular the larger maximum error is a disadvantage when compared to \ac{MD-Min-Max}, which is especially important for practical applications.

Another disadvantage of MLE-$\mathcal{N}$ and especially MLE-$\Gamma$ is their high computational cost, whereas \ac{MD-Min-Max} is lightweight and can be computed on the same hardware as the \ac{E-Min-Max} algorithms. Thus, it is a good choice for the localisation in \acp{WSN} and for cooperative localisation scenarios, where every node has to compute its own position often and fast.

The analysis of the spatial error distribution shows, that \ac{E-Min-Max}~(W2) has the lowest average error in the simulation but does not reach lower errors in many real world experiments because often the high accuracy is achieved by a very good performance outside of the anchor hull which is often not of interest for indoor deployments. The basic Min-Max algorithm has the highest average error but shows good results in practical experiments because the areas with low errors are located as a continuous shape inside the convex hull of the anchors. Most real world anchor set-ups have a similar scenario because commonly anchors are placed near walls and not in the middle of rooms. Due to this observations \ac{E-Min-Max}~(W4) and \ac{MD-Min-Max} perform very good in most real world deployments because they have a lower worst case error and their low error regions are also very large and continuous. The visualization of the spatial error distribution also shows that a combination of \ac{E-Min-Max} (W2) and \ac{E-Min-Max}~(W4) would be a good approach to get more precision without any assumptions about the distance error distribution on which \ac{MD-Min-Max} relies.

Future work should address more optimization regarding the spatial error distribution. We have shown that the optimal choice of an algorithm at each point in time would provide even better localisation results. It should also be possible to integrate a weighting component based on the distance error distribution into other more complex algorithms to gain performance improvements.

%\section{Acronyms}

\begin{acronym}\addtolength{\itemsep}{-0.5\baselineskip}
 \acro{E-Min-Max}[E-Min-Max]{Extended Min-Max}
 \acro{MD-Min-Max}[MD-Min-Max]{Membership Degree Min-Max}
 \acro{MF}{Membership Function}
 \acro{WSN}[WSN]{Wireless Sensor Network}
 \acro{TOF}[TOF]{time-of-flight}
 \acro{IR}[$\mathit{IR}$]{intersection region}
 \acro{NLOS}[NLOS]{non-line-of-sight}
 \acro{ML}[ML]{maximum likelihood}
 \acro{MLE}[MLE]{maximum likelihood estimator}
 \acro{pdf}[p.d.f.]{probability density function}
\end{acronym}

%\IEEEtriggeratref{2}
% The "triggered" command can be changed if desired:
%\IEEEtriggercmd{\enlargethispage{0in}}

\newpage
\bibliographystyle{plainnat}
\bibliography{../bibtex/bibliography}

% Make list of figure captions
\newpage
\renewcommand*\listfigurename{Figure captions}
\newlength{\fig}
\settowidth{\fig}{Figure\,99:~}
{\renewcommand*\numberline[1]{\llap{\makebox[\fig][l]{Figure\,#1:~}}}
\makeatletter
\renewcommand*\l@figure[2]{\leftskip\fig\noindent#1\par}
\makeatother
\listoffigures}

% Tables
\newpage
\section*{Tables}

\begin{table}[h]
\centering
\caption{Quantitative results for the localisation task}
\label{table_loc_results}
\begin{tabular}{|l|r|r|r|}
  \hline
  Algorithm & MAE [m] & RMSE [m] & MAX [m] \\
  \hline\hline
  NLLS                           			& 4.43 & 5.24 & 25.55 \\
  MLE-$\mathcal{N}(2.43,3.57^2)$  	& 2.09 & 2.84 & 22.81 \\
  MLE-$\Gamma(3.3,0.58)$		& 1.93 & 2.52 & 27.04 \\
  Min-Max             				& 2.05 & 2.42 & 15.39 \\
  \ac{E-Min-Max} (W2) 			& 2.02 & 2.49 & 17.91 \\
  \ac{E-Min-Max} (W4) 			& 1.96 & 2.34 & 16.48 \\
  \ac{MD-Min-Max} (MF by M2)		& 1.63 & 1.89 & 18.04 \\
  \hline
\end{tabular}
\end{table}

% Figures
\newpage
\section*{Figures}

\renewcommand{\figurename}{Figure}

\begin{figure}[htb]
  \centering
  \includegraphics[width=3.5in]{images/box}
  \vspace{-0.1cm}
  \caption[The geometrical representation of the intersection by range circles or boxes.]{}
  \label{fig:box}
  \vspace{-0.1cm}
\end{figure}

\begin{figure}[htb]
  \centering
  \includegraphics[width=.70\linewidth]{data/latviz/ranging_histogram}
  \caption[Normalized histogram of the distance measurement error of experiment Mobile 2 with 22901 successful \ac{TOF} measurements. When the distance measurement is shorter than the true distance, the error is defined as a negative error; otherwise as positive error. The mean absolute error is 2.85 meter and the skewness is 3.37. For display purposes, measurement errors greater than 30 meters are not included in the histogram although measurement errors can be has large has 75~m in rare cases. The fitted gamma distribution has a location parameter $\mu$ of -3.31~m.]{}
  \label{fig:histogram_ranging_and_fitting}
\end{figure}

\begin{figure}[htb]
\centering
\includegraphics[width=2.0in]{images/prob}
\caption[The relationship between range and vertex.]{}
\label{fig:prob}
\end{figure}

\begin{figure}[htb]
\centering
\includegraphics[width=.70\linewidth]{images/fuzzprocedure}
\caption[The framework of  membership degree in \ac{MD-Min-Max}, with $i \in {\downarrow N_{\mathrm{anc}}}$ and $j \in {\downarrow 4}$.]{}
\label{fig:fuzzprocedure}
\end{figure}

\begin{figure}[htb]
  \subfloat[Number of successful measurements for distance]{\label{fig:hist-distances}\includegraphics[width=.50\linewidth]{code/hist-succ-rel}}
  \subfloat[Absolute range errors for distance]{\label{fig:range-abs-error}\includegraphics[width=.50\linewidth]{code/range-abs-error}}\\
  \caption[Statistical modelling]{}
  \label{fig:statistical-modelling}
\end{figure}

\begin{figure}[htb]
  \centering
  \includegraphics[width=0.70\linewidth]{images/statistic}
  %\vspace{-0.3cm}
  \caption[Frequency histogram of absolute range ($\mathrm{Fr}(r-\overline{r})$) is collected from two experiments (Mobile 1 and Mobile 2), where $\overline{r}$ is the set of value of reference range and $r$ is the measured range. Figure~\ref{fig:Statistics} (a-b) illustrate the histogram of $\mathrm{Fr}(r-\overline{r})$, and Figure~\ref{fig:Statistics} (c-d) is the histogram after discarding the outliers. The triangle profiles in Figure~\ref{fig:Statistics} (c-d) are the \ac{MF} determined by three parameters ($\mathit{MF}_{\mathrm{low}}, \mathit{MF}_{\mathrm{median}}, \mathit{MF}_{\mathrm{up}}$).]{}
  \label{fig:Statistics}
\end{figure}

% Images of spatial chapter to be put here

\begin{figure}[htb]
\centering
\begin{minipage}{0.8\linewidth} 
\subfloat[Min-Max]{
\includegraphics[width=0.47\linewidth]{images/77-mm-corners-nlosp-avg.png}
\label{fig:subfig_4minmax}
}
\subfloat[\ac{E-Min-Max} (W4)]{
\includegraphics[width=0.47\linewidth]{images/nan-ew4-corners-nlosp-avg.png}
\label{fig:subfig_4eminmaxw4}
} \\
\subfloat[\ac{E-Min-Max} (W2)]{
\includegraphics[width=0.47\linewidth]{images/nan-ew2-corners-nlosp-avg.png}
\label{fig:subfig_4eminmaxw2}
}
\subfloat[\ac{MD-Min-Max}]{
\includegraphics[width=0.47\linewidth]{images/60-abs-corners-nlosp-avg.png}
\label{fig:subfig_4fgbloc}
}
\caption[Spatial distribution of the average position error with a basic anchor setup with one anchor in each of the four corners and a high inter-anchor distance.]{}
\label{fig:data4}
\end{minipage}
\end{figure}

\begin{figure}[htb]
\centering
\begin{minipage}{0.8\linewidth} 
\subfloat[Min-Max]{
\includegraphics[width=0.47\linewidth]{images/280-mm-box-nlosp-avg.png}
\label{fig:subfig_1minmax}
}
\subfloat[\ac{E-Min-Max} (W4)]{
\includegraphics[width=0.47\linewidth]{images/221-ew4-box-nlosp-avg.png}
\label{fig:subfig_1eminmaxw4}
} \\
\subfloat[\ac{E-Min-Max} (W2)]{
\includegraphics[width=0.47\linewidth]{images/153-ew2-box-nlosp-avg.png}
\label{fig:subfig_1eminmaxw2}
}
\subfloat[\ac{MD-Min-Max}]{
\includegraphics[width=0.47\linewidth]{images/279-abs-box-nlosp-avg.png}
\label{fig:subfig_1fgbloc}
}
\caption[Spatial distribution of the average position error with nine anchors concentrated in the middle of the simulation area and a very low inter-anchor distance.]{}
\label{fig:data1}
\end{minipage}
\end{figure}

\begin{figure}[htb]
\centering
\begin{minipage}{0.8\linewidth} 
\subfloat[Min-Max]{
\includegraphics[width=0.47\linewidth]{images/216-mm-kite-nlosp-avg.png}
\label{fig:subfig_3minmax}
}
\subfloat[\ac{E-Min-Max} (W4)]{
\includegraphics[width=0.47\linewidth]{images/nan-ew4-kite-nlosp-avg.png}
\label{fig:subfig_3eminmaxw4}
} \\
\subfloat[\ac{E-Min-Max} (W2)]{
\includegraphics[width=0.47\linewidth]{images/55-ew2-kite-nlosp-avg.png}
\label{fig:subfig_3eminmaxw2}
}
\subfloat[\ac{MD-Min-Max}]{
\includegraphics[width=0.47\linewidth]{images/177-abs-kite-nlosp-avg.png}
\label{fig:subfig_3fgbloc}
}
\caption[Spatial distribution of the average position error with five anchor nodes in a more challenging setup with a medium inter-anchor distance.]{}
\label{fig:data3}
\end{minipage}
\end{figure}

\begin{figure}[htb]
\centering
\subfloat[\ac{E-Min-Max} (W2) vs.\ Min-Max]{
\includegraphics[width=0.35\linewidth]{images/diff-ew2-mm-avg.png}
\label{fig:diff-ew2-mm}
}\quad
\subfloat[\ac{E-Min-Max} (W4) vs.\ Min-Max]{
\includegraphics[width=0.35\linewidth]{images/diff-ew4-mm-avg.png}
\label{fig:diff-ew4-mm}
}\\
\subfloat[\ac{MD-Min-Max} vs.\ Min-Max]{
\includegraphics[width=0.35\linewidth]{images/diff-abs-mm-avg.png}
\label{fig:diff-abs-mm}
}\quad
\subfloat[\ac{E-Min-Max} (W2) vs.\ \ac{E-Min-Max} (W4)]{
\includegraphics[width=0.35\linewidth]{images/diff-ew2-ew4-avg.png}
\label{fig:diff-ew2-ew4}
}\\
\subfloat[\ac{MD-Min-Max} vs.\ \ac{E-Min-Max} (W2)]{
\includegraphics[width=0.35\linewidth]{images/diff-abs-ew2-avg.png}
\label{fig:diff-abs-ew2}
}\
\subfloat[\ac{MD-Min-Max} vs.\ \ac{E-Min-Max} (W4)]{
\includegraphics[width=0.35\linewidth]{images/diff-abs-ew4-avg.png}
\label{fig:diff-abs-ew4}
}
\caption[Comparing position errors of pairs of algorithms. Red areas indicate that the first algorithm outperforms the second, blue and white areas indicate that the second algorithm outperforms the first. Green areas indicate similar performance.]{}
\label{fig:diff}
\end{figure}

\begin{figure}[htb]
\centering
\begin{minipage}{0.8\linewidth}
\subfloat[Nine anchors centred]{
\includegraphics[width=0.45\linewidth]{images/Verify_MLE_Gamma_10_56__0_14_+_18_22_Average_Error.png}
\label{fig:mle91}
}\quad
\subfloat[Four anchors on the edges]{
\includegraphics[width=0.45\linewidth]{images/Verify_MLE_Gamma_10_56__0_14_+_18_22_avg18_11_Average_Error.png}
\label{fig:mle41}
}\\
\subfloat[Five anchors in more challenging positions]{
\includegraphics[width=0.45\linewidth]{images/Verify_MLE_Gamma_10_56__0_14_+_18_22_avg20_82_Average_Error.png}
\label{fig:mle51}
}\quad
\subfloat[Four anchors on the edges (40\% NLOS probability)]{
\includegraphics[width=0.45\linewidth]{images/Verify_MLE_Gamma_10_56__0_14_+_18_22_avg32_15_Average_Error.png}
\label{fig:mle44}
}
\caption[Performance of the MLE-$\Gamma$ algorithm. The algorithm has been fitted to the error distribution by drawing 100000 samples from the error model used in the simulation.]{}
\label{fig:mle}
\end{minipage}
\end{figure}

% Images of real world chapter

\begin{figure}[htb]
  \centering
  \includegraphics[width=.95\linewidth]{images/run2}
  \caption[Position estimates on the second floor of our Computer Science Department. The length and the width of the experiment area is about 80~m $\times$ 40~m.]{}
  \label{fig:real_world_run2}
\end{figure}

\begin{figure}[htb]
\centering
\includegraphics[width=.95\linewidth]{data/latviz/all_boxplot}
 \caption[The distribution of the position error for the selected algorithms. Outliers are cropped at 25~m for better readability.]{}
 \label{fig:real_world_histogram_boxplot}
\end{figure}

% that's all folks
\end{document}
