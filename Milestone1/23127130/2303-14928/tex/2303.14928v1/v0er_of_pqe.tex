\section{Verification Of A Solution to PQE}
\label{sec:ver_pqe}

%\input{v2er_alg.fig}

Let $H(Y)$ be a solution found by a PQE solver when taking $G$ out of
\prob{X}{F(X,Y)}. That is $\prob{X}{F} \equiv H \wedge \prob{X}{F
  \setminus G}$ is supposed to hold. One can check if this is true
(i.e. whether $H$ is correct) using the proposition below.



\begin{proposition}
\label{prop:main}
Formula $H(Y)$ is a solution to the PQE problem of taking $G$ out
of the scope of quantifiers in \prob{X}{F(X,Y)} if and only if
  \begin{enumerate}
  \item[a)]  $H$ is implied by $F$;
  \item[b)]  $G$ is redundant in $H \wedge \prob{X}{F}$ i.e.
    $H \wedge \prob{X}{F} \equiv H \wedge \prob{X}{F \setminus G}$
 \end{enumerate}
\end{proposition}

Checking the first condition of Proposition~\ref{prop:main} can be
done by a SAT-solver. Namely, one just needs to check for every clause
$C$ of $H$ if $F \wedge \overline{C}$ is unsatisfiable. (If so, then
$F \imp C$.) Below, we describe how one can check the second condition
of Proposition~\ref{prop:main} in terms of boundary points.


%
%  Definition of a boundary point
%
\begin{definition}
\label{def:bnd_pnt}
  Let $F$ be a formula and $G$ be a non-empty subset of clauses of
  $F$. A full assignment \pnt{p} to \V{F} is called a
  \bm{G}\tb{-boundary point} of $F$ if it falsifies $G$ and satisfies
  $F \setminus G$.
\end{definition}



The name ``boundary point'' is due to the fact that if the subset $G$
is small,\pnt{p} can sometimes be close to the boundary between
assignments satisfying and falsifying $F$.

%\input{c1heck_red.fig}

%
% Definition of a removable bnd pnt
%
\begin{definition}
  \label{def:two_kinds_bp}
  Let $F(X,Y)$ be a formula and $G$ be a non-empty subset of $F$. Let
  (\pnt{x},\pnt{y}) be a $G$-boundary point of $F$ where \pnt{x} and
  \pnt{y} are full assignments to $X$ and $Y$ respectively.  The
  $G$-boundary point (\pnt{x},\pnt{y}) is called \bm{Y}\tb{-removable}
  (respectively \bm{Y}\tb{-unremovable}) if formula \cof{F}{y} is
  unsatisfiable (respectively satisfiable).
\end{definition}

Recall that \cof{F}{y} describes the formula $F$ in subspace
\pnt{y}. So the fact that \cof{F}{y} is unsatisfiable (or satisfiable)
just means that $F$ is unsatisfiable (respectively satisfiable) in
subspace \pnt{y}.  We use the name ``$Y$-removable boundary point''
since such a boundary point can be eliminated by adding a clause
implied by $F$ that depends only on variables of $Y$. Indeed, suppose
that (\pnt{x},\pnt{y}) is a $Y$-removable $G$-boundary point. Then
\cof{F}{y} is unsatisfiable and hence there is a clause $C(Y)$
falsified by \pnt{y} and implied by $F$. Note that (\pnt{x},\pnt{y})
is \ti{not} a $G$-boundary point of $F \cup \s{C}$ because it
\ti{falsifies} the formula $(F \cup \s{C}) \setminus G$. So, adding
$C$ to $F$ eliminates the $G$-boundary point (\pnt{x},\pnt{y}).  On
the contrary, a $Y$-\ti{unremovable} boundary point (\pnt{x},\pnt{y})
\ti{cannot} be eliminated by adding a clause falsified by \pnt{y} and
implied by $F$.



%
% Proposition about redundancy
%
\begin{proposition}
 \label{prop:form_red}
  Let $F(X,Y)$ be a formula. Let $G$ be a non-empty subset of clauses of $G$.
  The formula $G$ is redundant in \prob{X}{F} if and only if every
  $G$-boundary point of $F$ (if any) is $Y$-unremovable.
\end{proposition}

So, to check the second condition of Proposition~\ref{prop:main} one
needs to show that every $G$-boundary point of $H \wedge F$ (if any)
is $Y$-unremovable.
  
