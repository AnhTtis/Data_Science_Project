\appendix
{\noindent\Large\textbf{APPENDIX}}
\section{Queries used in Experiments}\label{app:queries}

\subsection{Queries on LUBM}

% numbers=left, numbersep=4pt, numberstyle=\tiny

\begin{lstlisting}[caption={Prefixes of LUBM Queries}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}]
PREFIX ub: <http://swat.cse.lehigh.edu/onto/univ-bench.owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
\end{lstlisting}

\begin{lstlisting}[caption={q1.1 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny, label={lst:q1.1_lubm}]
SELECT * WHERE {
{ ?v2 ub:headOf ?v1. } UNION { ?v2 ub:worksFor ?v1. }
?v2 ub:undergraduateDegreeFrom ?v3.
?v4 ub:doctoralDegreeFrom ?v3.
?v5 ub:publicationAuthor ?v2.
{ ?v6 ub:headOf ?v1. } UNION { ?v6 ub:worksFor ?v1. }
{ ?v2 ub:headOf ?v7. } UNION { ?v2 ub:worksFor ?v7. }
<http://www.Department0.University0.edu/UndergraduateStudent91> ub:memberOf ?v1.
?v7 ub:name ?v8. }
\end{lstlisting}

\begin{lstlisting}[caption={q1.2 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?v3 ub:emailAddress "UndergraduateStudent91@Department0.University0.edu" .
?v2 ub:emailAddress ?v1 .
OPTIONAL { ?v2 ub:teacherOf ?v4. ?v3 ub:takesCourse ?v4 . } }
\end{lstlisting}

\begin{lstlisting}[caption={q1.3 on LUBM}, label={lst:CP_effective}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny, label={lst:q1.3_lubm}]
SELECT * WHERE {
<http://www.Department1.University0.edu/UndergraduateStudent363> ub:takesCourse ?v1.
OPTIONAL { ?v2 ub:teachingAssistantOf ?v1.
OPTIONAL { ?v2 ub:memberOf ?v3.
?v4 ub:subOrganizationOf ?v3.
?v4 ub:subOrganizationOf ?v5.
?v4 rdf:type ?v6.
OPTIONAL { ?v5 ub:subOrganizationOf ?v7. } } } }
\end{lstlisting}

\begin{lstlisting}[caption={q1.4 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?v1	ub:emailAddress	"UndergraduateStudent309@Department12.University0.edu".
OPTIONAL{ ?v1 ub:memberOf ?v2. ?v2 ub:name ?v3.
OPTIONAL{?v5 ub:publicationAuthor ?v4. ?v4 ub:worksFor ?v2.
OPTIONAL{ ?v6 ub:publicationAuthor ?v4. } } } }
\end{lstlisting}

\begin{lstlisting}[caption={q1.5 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{ ?v2 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?v3. }
UNION
{ ?v2 ub:name ?v4. }
<http://www.Department0.University0.edu/UndergraduateStudent356> ub:memberOf	?v1.
?v2	ub:worksFor	?v1.
OPTIONAL{ ?v5 ub:advisor ?v2.
OPTIONAL{ ?v5 ub:teachingAssistantOf ?v6.} }
OPTIONAL{ ?v7 ub:advisor ?v2. } }
\end{lstlisting}

\begin{lstlisting}[caption={q1.6 on LUBM}, label={lst:TTCP_effective}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny, label={lst:q1.6_lubm}]
SELECT * WHERE {
?v4 ub:headOf ?v1.
<http://www.Department1.University0.edu/UndergraduateStudent256> ub:memberOf ?v1.
?v3 ub:subOrganizationOf ?v5.
{ ?v2 ub:worksFor ?v1. } UNION { ?v2 ub:headOf ?v1. }
{ ?v2 ub:worksFor ?v3. } UNION { ?v2 ub:headOf ?v3. }
OPTIONAL { ?v6 ub:publicationAuthor ?v2. }
OPTIONAL { { ?v7 ub:headOf ?v1. } UNION { ?v7 ub:worksFor ?v1. } } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.1 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{?st ub:teachingAssistantOf ?course.
OPTIONAL { ?st ub:takesCourse ?course2. ?pub1 ub:publicationAuthor ?st. } }
{?prof ub:teacherOf ?course. ?st ub:advisor ?prof.
OPTIONAL { ?prof ub:researchInterest ?resint. ?pub2 ub:publicationAuthor ?prof. } } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.2 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{?pub rdf:type ub:Publication. ?pub ub:publicationAuthor ?st. ?pub ub:publicationAuthor ?prof.
OPTIONAL { ?st ub:emailAddress ?ste. ?st ub:telephone ?sttel. } }
{?st ub:undergraduateDegreeFrom ?univ. ?dept ub:subOrganizationOf ?univ.
OPTIONAL { ?head ub:headOf ?dept. ?others ub:worksFor ?dept. } }
{?st ub:memberOf ?dept. ?prof ub:worksFor ?dept.
OPTIONAL { ?prof ub:doctoralDegreeFrom ?univ1. ?prof ub:researchInterest ?resint1. } } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.3 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{?pub ub:publicationAuthor ?st. ?pub ub:publicationAuthor ?prof.
?st rdf:type ub:GraduateStudent.
OPTIONAL { ?st ub:undergraduateDegreeFrom ?univ1. ?st ub:telephone ?sttel. } }
{?st ub:advisor ?prof.
OPTIONAL { ?prof ub:doctoralDegreeFrom ?univ. ?prof ub:researchInterest ?resint. } }
{?st ub:memberOf ?dept. ?prof ub:worksFor ?dept. ?prof rdf:type ub:FullProfessor.
OPTIONAL { ?head ub:headOf ?dept. ?others ub:worksFor ?dept. } } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.4 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?x ub:worksFor <http://www.Department0.University0.edu>.
?x rdf:type ub:FullProfessor.
OPTIONAL { ?y ub:advisor ?x. ?x ub:teacherOf ?z. ?y ub:takesCourse ?z. } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.5 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?x ub:worksFor <http://www.Department0.University12.edu>.
?x rdf:type ub:FullProfessor.
OPTIONAL { ?y ub:advisor ?x. ?x ub:teacherOf ?z. ?y ub:takesCourse ?z. } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.6 on LUBM}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?x ub:worksFor <http://www.Department0.University12.edu>.
?x rdf:type ub:FullProfessor.
OPTIONAL { ?x ub:emailAddress ?y1. ?x ub:telephone ?y2. ?x ub:name ?y3. } }
\end{lstlisting}

\subsection{Queries on DBpedia}

\begin{lstlisting}[caption={Prefixes of DBpedia Queries}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}]
PREFIX rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf:  <http://xmlns.com/foaf/0.1/>
PREFIX purl:  <http://purl.org/dc/terms/>
PREFIX skos:  <http://www.w3.org/2004/02/skos/core#>
PREFIX nsprov:  <http://www.w3.org/ns/prov#>
PREFIX owl:  <http://www.w3.org/2002/07/owl#>
PREFIX dbo:  <http://dbpedia.org/ontology/>
PREFIX dbr:  <http://dbpedia.org/resource/>
PREFIX dbp:   <http://dbpedia.org/property/>
\end{lstlisting}

\begin{lstlisting}[caption={q1.1 on DBpedia}, label={lst:TT_effective}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny, label={lst:q1.1_dbpedia}]
SELECT * WHERE {
{ ?v3 rdfs:label ?v7. } UNION { ?v3 foaf:name ?v7. }
{ ?v1 purl:subject ?v3. } UNION { ?v3 skos:subject ?v1. }
?v3 rdfs:label ?v4.
?v5 nsprov:wasDerivedFrom ?v2.
?v1 owl:sameAs ?v6.
?v1 dbo:wikiPageWikiLink dbr:Economic_system.
?v1 nsprov:wasDerivedFrom ?v2. }
\end{lstlisting}

\begin{lstlisting}[caption={q1.2 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{ ?v3 purl:subject ?v5. OPTIONAL{ ?v5 rdfs:label ?v6 } }
UNION
{ ?v5 skos:subject ?v3. OPTIONAL{ ?v5 foaf:name ?v6 } }
?v1 dbo:wikiPageWikiLink dbr:Economic_system .
?v1 nsprov:wasDerivedFrom ?v2 .
?v3 dbo:wikiPageWikiLink ?v4 .
?v3 nsprov:wasDerivedFrom ?v2 . }
\end{lstlisting}

\begin{lstlisting}[caption={q1.3 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
dbr:Air_masses foaf:isPrimaryTopicOf ?v1.
?v2 foaf:isPrimaryTopicOf ?v1.
OPTIONAL {
?v2 dbo:wikiPageRedirects ?v3. ?v4 foaf:primaryTopic ?v2.
OPTIONAL{
?v5 dbo:wikiPageWikiLink ?v3.
OPTIONAL{ ?v6 dbo:wikiPageRedirects ?v5.
OPTIONAL{ ?v6 dbo:wikiPageWikiLink ?v7. } } } } }
\end{lstlisting}

\begin{lstlisting}[caption={q1.4 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
dbr:Functional_neuroimaging purl:subject ?v1.
OPTIONAL{
?v1 owl:sameAs ?v2. ?v1 rdf:type ?v3. ?v4 owl:sameAs ?v2. ?v5 skos:related ?v4.
OPTIONAL{ ?v6 skos:related ?v4. }
OPTIONAL{
{ ?v7 purl:subject ?v1. } UNION { ?v1 skos:subject ?v7. }
OPTIONAL{
{ ?v7 purl:subject ?v8. } UNION { ?v8 skos:subject ?v7. } } } } }
\end{lstlisting}

\begin{lstlisting}[caption={q1.5 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{ ?v2 purl:subject ?v3. } UNION { ?v2 dbo:wikiPageWikiLink ?v4. }
?v1 dbo:wikiPageWikiLink dbr:Abdul_Rahim_Wardak.
?v2 dbo:wikiPageWikiLink ?v1.
OPTIONAL{ ?v5 owl:sameAs ?v2.
OPTIONAL{ ?v5 dbo:wikiPageLength ?v6. } }
OPTIONAL{ ?v2 skos:prefLabel ?v7 . } }
\end{lstlisting}

\begin{lstlisting}[caption={q1.6 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{ ?v2 foaf:primaryTopic ?v1. } UNION { ?v1 foaf:isPrimaryTopicOf ?v2. }
{ ?v2 foaf:primaryTopic ?v3. } UNION { ?v3 foaf:isPrimaryTopicOf ?v2. }
?v1 dbo:wikiPageWikiLink dbr:Category:Cell_biology.
?v3 dbo:wikiPageWikiLink ?v1.
OPTIONAL{
{ ?v2 foaf:primaryTopic ?v4. } UNION { ?v4 foaf:isPrimaryTopicOf ?v2. } }
OPTIONAL{ ?v5 dbo:phylum ?v3. ?v6 dbo:phylum ?v3.
OPTIONAL{
{ ?v7 foaf:primaryTopic ?v5. } UNION { ?v5 foaf:isPrimaryTopicOf ?v7. } } } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.1 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{ ?v6 a dbo:PopulatedPlace. ?v6 dbo:abstract ?v1.
?v6 rdfs:label ?v2. ?v6 geo:lat ?v3. ?v6 geo:long ?v4.
OPTIONAL { ?v6 foaf:depiction ?v8. } }
OPTIONAL { ?v6 foaf:homepage ?v10. }
OPTIONAL { ?v6 dbo:populationTotal ?v12. }
OPTIONAL { ?v6 dbo:thumbnail ?v14. } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.2 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?v3 foaf:homepage ?v0. ?v3 a dbo:SoccerPlayer. ?v3 dbp:position ?v6.
?v3 dbp:clubs ?v8. ?v8 dbo:capacity ?v1. ?v3 dbo:birthPlace ?v5.
OPTIONAL { ?v3 dbo:number ?v9. } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.3 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?v5 dbo:thumbnail ?v4. ?v5 rdf:type dbo:Person. ?v5 rdfs:label ?v.
?v5 foaf:homepage ?v8.
OPTIONAL { ?v5 foaf:homepage ?v10. } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.4 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
{ ?v2 a dbo:Settlement. ?v2 rdfs:label ?v. ?v6 a dbo:Airport.
?v6 dbo:city ?v2. ?v6 dbp:iata ?v5.
OPTIONAL { ?v6 foaf:homepage ?v7. } }
OPTIONAL { ?v6 dbp:nativename ?v8. } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.5 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?v4 skos:subject ?v. ?v4 foaf:name ?v6.
OPTIONAL { ?v4 rdfs:comment ?v8. } }
\end{lstlisting}

\begin{lstlisting}[caption={q2.6 on DBpedia}, frame=single, breaklines=true, basicstyle=\scriptsize, morekeywords={PREFIX, SELECT, WHERE, UNION, OPTIONAL}, numbers=left, numbersep=4pt, numberstyle=\tiny]
SELECT * WHERE {
?v0 rdfs:comment ?v1. ?v0 foaf:page ?v.
OPTIONAL { ?v0 skos:subject ?v6. }
OPTIONAL { ?v0 dbp:industry ?v5. }
OPTIONAL { ?v0 dbp:location ?v2. }
OPTIONAL { ?v0 dbp:locationCountry ?v3. }
OPTIONAL { ?v0 dbp:locationCity ?v9. ?a dbp:manufacturer ?v0. }
OPTIONAL { ?v0 dbp:products ?v11. ?b dbp:model ?v0. }
OPTIONAL { ?v0 georss:point ?v10. }
OPTIONAL { ?v0 rdf:type ?v7. } }
\end{lstlisting}

\nop{
\begin{table*}
	\centering
	\caption{Queries q1.1-1.5 on LUBM}
	\begin{tabular}{|c|l|}
		\hline
		Mark & \multicolumn{1}{c|}{Query} \\ \hline
		q1.1 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \textless{}http://www.Department0.University0.edu/UndergraduateStudent91\textgreater \\ ub:memberOf ?v1. \{ ?v2 ub:headOf ?v1. \} UNION \{ ?v2 ub:worksFor ?v1. \}\\ ?v2 ub:undergraduateDegreeFrom ?v3.\\ ?v4 ub:doctoralDegreeFrom ?v3. ?v5 ub:publicationAuthor ?v2.\\ \{ ?v6 ub:headOf ?v1. \} UNION \{ ?v6 ub:worksFor ?v1. \}\\ \{ ?v2 ub:headOf ?v7. \} UNION \{ ?v2 ub:worksFor ?v7. \} ?v7 ub:name ?v8. \}\end{tabular} \\ \hline
		q1.2 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \textless{}http://www.Department1.University0.edu/UndergraduateStudent363\textgreater \\ ub:takesCourse ?v1. OPTIONAL\{ ?v2 ub:teachingAssistantOf ?v1.\\ OPTIONAL\{ ?v2 ub:memberOf ?v3. ?v4 ub:subOrganizationOf ?v3.\\ ?v4 ub:subOrganizationOf ?v5. ?v4 rdf:type ?v6.\\ OPTIONAL\{ ?v5 ub:subOrganizationOf ?v7. \} \} \} \}\end{tabular} \\ \hline
		q1.3 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \textless{}http://www.Department0.University0.edu/UndergraduateStudent356\textgreater \\ ub:memberOf ?v1. \{ ?v2 ub:worksFor ?v1. \} UNION \{ ?v2 ub:headOf ?v1. \}\\ ?v1 rdf:type ?v3. OPTIONAL\{ ?v4 ub:advisor ?v2.\\ OPTIONAL\{ ?v4 ub:teachingAssistantOf ?v5. ?v4 ub:name ?v6. \} \}\\ OPTIONAL\{ ?v7 ub:advisor ?v2. \} \}\end{tabular} \\ \hline
		q1.4 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v1 ub:emailAddress \\ "UndergraduateStudent309@Department12.University0.edu".\\ OPTIONAL\{ ?v1 ub:memberOf ?v2. ?v2 ub:name ?v3.\\ OPTIONAL\{ \{ ?v4 ub:worksFor ?v2. \} UNION \{ ?v4 ub:headOf ?v2. \}\\ ?v5 ub:publicationAuthor ?v4.\\ OPTIONAL\{ ?v6 ub:publicationAuthor ?v4. \} \} \} \}\end{tabular} \\ \hline
		q1.5 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \textless{}http://www.Department1.University0.edu/UndergraduateStudent256\textgreater \\ ub:memberOf ?v1.\\ \{ ?v2 ub:worksFor ?v1. \} UNION \{ ?v2 ub:headOf ?v1. \}\\ \{ ?v2 ub:worksFor ?v3. \} UNION \{ ?v2 ub:headOf ?v3. \}\\ ?v4 ub:headOf ?v1. ?v3 ub:subOrganizationOf ?v5.\\ OPTIONAL\{ ?v6 ub:publicationAuthor ?v2. \}\\ OPTIONAL\{ \{ ?v7 ub:headOf ?v1. \} UNION \{ ?v7 ub:worksFor ?v1. \} \} \}\end{tabular} \\ \hline
	\end{tabular}
	\label{tab:lubm_q1}
\end{table*}

\begin{table*}[h!]
	\centering
	\caption{Queries q1.1-1.5 on DBpedia}
	\begin{tabular}{|c|l|}
		\hline
		Mark & \multicolumn{1}{c|}{Query} \\ \hline
		q1.1 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v1 dbo:wikiPageWikiLink dbr:Economic\_system.\\ ?v1 nsprov:wasDerivedFrom ?v2.\\ \{ ?v1 purl:subject ?v3. \} UNION \{ ?v3 skos:subject ?v1. \}\\ ?v3 rdfs:label ?v4. ?v5 nsprov:wasDerivedFrom ?v2. ?v1 owl:sameAs ?v6.\\ \{ ?v3 rdfs:label ?v7. \} UNION \{ ?v3 foaf:name ?v7. \}\\ \{ ?v5 purl:subject ?v8. \} UNION \{ ?v8 skos:subject ?v5. \} \}\end{tabular} \\ \hline
		q1.2 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ dbr:Air\_masses foaf:isPrimaryTopicOf ?v1. ?v2 foaf:isPrimaryTopicOf ?v1.\\ OPTIONAL\{ ?v2 dbo:wikiPageRedirects ?v3. ?v4 foaf:primaryTopic ?v2.\\ OPTIONAL\{ ?v5 dbo:wikiPageWikiLink ?v3.\\ OPTIONAL\{ ?v6 dbo:wikiPageRedirects ?v5.\\ OPTIONAL\{ ?v6 dbo:wikiPageWikiLink ?v7. \} \} \} \} \}\end{tabular} \\ \hline
		q1.3 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v1 dbo:wikiPageWikiLink dbr:Abdul\_Rahim\_Wardak.\\ ?v1 owl:sameAs ?v2. ?v3 owl:sameAs ?v2.\\ \{ ?v3 purl:subject ?v4. \} UNION \{ ?v3 dbo:wikiPageWikiLink ?v4. \}\\ ?v3 dbo:wikiPageWikiLink ?v1.\\ \{ ?v4 skos:prefLabel ?v5. \} UNION \{ ?v4 rdfs:label ?v5. \}\\ OPTIONAL\{ ?v6 owl:sameAs ?v2. \\ OPTIONAL\{ ?v6 dbo:wikiPageLength ?v7. \} \} \}\end{tabular} \\ \hline
		q1.4 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ dbr:Functional\_neuroimaging purl:subject ?v1.\\ OPTIONAL\{ ?v1 owl:sameAs ?v2. ?v1 rdf:type ?v3.\\ ?v4 owl:sameAs ?v2. ?v5 skos:related ?v4. OPTIONAL\{ ?v6 skos:related ?v4. \}\\ OPTIONAL\{ \{ ?v7 purl:subject ?v1. \} UNION \{ ?v1 skos:subject ?v7. \}\\ OPTIONAL\{ \{ ?v7 purl:subject ?v8. \} UNION \{ ?v8 skos:subject ?v7. \} \} \} \} \}\end{tabular} \\ \hline
		q1.5 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v1 dbo:wikiPageWikiLink dbr:Category:Cell\_biology.\\ \{ ?v2 foaf:primaryTopic ?v1. \} UNION \{ ?v1 foaf:isPrimaryTopicOf ?v2. \}\\ \{ ?v2 foaf:primaryTopic ?v3. \} UNION \{ ?v3 foaf:isPrimaryTopicOf ?v2. \}\\ ?v3 dbo:wikiPageWikiLink ?v1. OPTIONAL\{ \{ ?v2 foaf:primaryTopic ?v4. \} \\ UNION \{ ?v4 foaf:isPrimaryTopicOf ?v2. \} \}\\ OPTIONAL\{ ?v5 dbo:phylum ?v3. ?v6 dbo:phylum ?v3.\\ OPTIONAL\{ \{ ?v7 foaf:primaryTopic ?v5. \} \\ UNION \{ ?v5 foaf:isPrimaryTopicOf ?v7. \} \} \} \}\end{tabular} \\ \hline
	\end{tabular}
	\label{tab:dbpedia_q1}
\end{table*}

\begin{table*}[h!]
	\centering
	\caption{Queries q2.1-2.6 on LUBM}
	\begin{tabular}{|c|l|}
		\hline
		Mark & \multicolumn{1}{c|}{Query} \\ \hline
		q2.1 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \{ ?st ub:teachingAssistantOf ?course.\\ OPTIONAL \{ ?st ub:takesCourse ?course2. ?pub1 ub:publicationAuthor ?st. \} \}\\ \{ ?prof ub:teacherOf ?course. ?st ub:advisor ?prof.\\ OPTIONAL \{ ?prof ub:researchInterest ?resint. \\ ?pub2 ub:publicationAuthor ?prof. \} \} \}\end{tabular} \\ \hline
		q2.2 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \{ ?pub rdf:type ub:Publication. ?pub ub:publicationAuthor ?st. \\ ?pub ub:publicationAuthor ?prof.\\ OPTIONAL \{ ?st ub:emailAddress ?ste. ?st ub:telephone ?sttel. \} \}\\ \{ ?st ub:undergraduateDegreeFrom ?univ. ?dept ub:subOrganizationOf ?univ.\\ OPTIONAL \{ ?head ub:headOf ?dept. ?others ub:worksFor ?dept. \} \}\\ \{ ?st ub:memberOf ?dept. ?prof ub:worksFor ?dept.\\ OPTIONAL \{ ?prof ub:doctoralDegreeFrom ?univ1. \\ ?prof ub:researchInterest ?resint1. \} \} \}\end{tabular} \\ \hline
		q2.3 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \{ ?pub ub:publicationAuthor ?st. ?pub ub:publicationAuthor ?prof. \\ ?st rdf:type ub:GraduateStudent.\\ OPTIONAL \{ ?st ub:undergraduateDegreeFrom ?univ1. \\ ?st ub:telephone ?sttel. \} \} \{ ?st ub:advisor ?prof.\\ OPTIONAL \{ ?prof ub:doctoralDegreeFrom ?univ. \\ ?prof ub:researchInterest ?resint. \} \}\\ \{ ?st ub:memberOf ?dept. ?prof ub:worksFor ?dept. ?prof a ub:FullProfessor.\\ OPTIONAL \{ ?head ub:headOf ?dept. ?others ub:worksFor ?dept. \} \} \}\end{tabular} \\ \hline
		q2.4 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?x ub:worksFor \textless{}http://www.Department0.University0.edu\textgreater{}. \\ ?x a ub:FullProfessor.\\ OPTIONAL \{ ?y ub:advisor ?x. ?x ub:teacherOf ?z. ?y ub:takesCourse ?z. \} \}\end{tabular} \\ \hline
		q2.5 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?x ub:worksFor \textless{}http://www.Department0.University12.edu\textgreater{}. \\ ?x a ub:FullProfessor.\\ OPTIONAL \{ ?y ub:advisor ?x. ?x ub:teacherOf ?z. ?y ub:takesCourse ?z. \} \}\end{tabular} \\ \hline
		q2.6 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?x ub:worksFor \textless{}http://www.Department0.University12.edu\textgreater{}. \\ ?x a ub:FullProfessor.\\ OPTIONAL \{ ?x ub:emailAddress ?y1. ?x ub:telephone ?y2. ?x ub:name ?y3. \} \}\end{tabular} \\ \hline
	\end{tabular}
	\label{tab:lubm_q3}
\end{table*}

\begin{table*}[h!]
	\centering
	\caption{Queries q2.1-2.6 on DBpedia}
	\begin{tabular}{|c|l|}
		\hline
		Mark & \multicolumn{1}{c|}{Query} \\ \hline
		q2.1 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \{ ?v6 a dbo:PopulatedPlace. ?v6 dbo:abstract ?v1.\\ ?v6 rdfs:label ?v2. ?v6 geo:lat ?v3. ?v6 geo:long ?v4.\\ OPTIONAL \{ ?v6 foaf:depiction ?v8. \} \}\\ OPTIONAL \{ ?v6 foaf:homepage ?v10. \}\\ OPTIONAL \{ ?v6 dbo:populationTotal ?v12. \}\\ OPTIONAL \{ ?v6 dbo:thumbnail ?v14. \} \}\end{tabular} \\ \hline
		q2.2 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v3 foaf:homepage ?v0. ?v3 a dbo:SoccerPlayer. ?v3 dbp:position ?v6.\\ ?v3 dbp:clubs ?v8. ?v8 dbo:capacity ?v1. ?v3 dbo:birthPlace ?v5.\\ OPTIONAL \{ ?v3 dbo:number ?v9. \} \}\end{tabular} \\ \hline
		q2.3 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v5 dbo:thumbnail ?v4. ?v5 rdf:type dbo:Person.\\ ?v5 rdfs:label ?v. ?v5 foaf:homepage ?v8.\\ OPTIONAL \{ ?v5 foaf:homepage ?v10. \} \}\end{tabular} \\ \hline
		q2.4 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ \{ ?v2 a dbo:Settlement. ?v2 rdfs:label ?v. ?v6 a dbo:Airport. \\ ?v6 dbo:city ?v2. ?v6 dbp:iata ?v5.\\ OPTIONAL \{ ?v6 foaf:homepage ?v7. \} \}\\ OPTIONAL \{ ?v6 dbp:nativename ?v8. \} \}\end{tabular} \\ \hline
		q2.5 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v4 skos:subject ?v. ?v4 foaf:name ?v6.\\ OPTIONAL \{ ?v4 rdfs:comment ?v8. \} \}\end{tabular} \\ \hline
		q2.6 & \begin{tabular}[c]{@{}l@{}}SELECT * WHERE \{\\ ?v0 rdfs:comment ?v1. ?v0 foaf:page ?v. OPTIONAL \{ ?v0 skos:subject ?v6. \}\\ OPTIONAL \{ ?v0 dbp:industry ?v5. \} OPTIONAL \{ ?v0 dbp:location ?v2. \}\\ OPTIONAL \{ ?v0 dbp:locationCountry ?v3. \}\\ OPTIONAL \{ ?v0 dbp:locationCity ?v9. ?a dbp:manufacturer ?v0. \}\\ OPTIONAL \{ ?v0 dbp:products ?v11. ?b dbp:model ?v0. \}\\ OPTIONAL \{ ?v0 georss:point ?v10. \}\\ OPTIONAL \{ ?v0 rdf:type ?v7. \} \}\end{tabular} \\ \hline
	\end{tabular}
	\label{tab:dbpedia_q3}
\end{table*}}

\nop{
\section{Proofs of Theorems}\label{app:proof}
\subsection{Proof of Theorem \ref{thm:union_eq}}
\begin{proof}
By Definition \ref{def:eval} and the definitions of the operators on bags, we have
    \begin{small}
    \begin{equation}
    \begin{split}
        & [\![P_1 \ \texttt{AND} \ (P_2  \ \texttt{UNION} \ P_3)]\!]_D \\
        = \ & [\![P_1]\!]_D \Join [\![P_2  \ \texttt{UNION} \ P_3]\!]_D \\
        = \ & [\![P_1]\!]_D \Join ([\![P_2]\!]_D \ \cup_{bag} \ [\![P_3]\!]_D) \\
        = \ & ([\![P_1]\!]_D \Join [\![P_2]\!]_D) \cup_{bag} ([\![P_1]\!]_D \Join [\![P_3]\!]_D) \\
        = \ & [\![P_1 \ \texttt{AND} \ P_2]\!]_D \cup_{bag} [\![P_1 \ \texttt{AND} \ P_3]\!]_D \\
        = \ & [\![(P_1 \ \texttt{AND} \ P_2) \ \texttt{UNION} \ (P_1 \ \texttt{AND} \ P_3)]\!]_D. \nonumber
    \end{split}
    \end{equation}
    \end{small}
\end{proof}

\subsection{Proof of Theorem \ref{thm:optional_eq}}
\begin{proof}
Similarly, we have
    \begin{small}
    \begin{equation}
    \begin{split}
        & [\![P_1 \ \texttt{OPTIONAL} \ (P_1 \ \texttt{AND} \ P_2)]\!]_D \\
        = \ & ([\![P_1]\!]_D \Join [\![P_1 \ \texttt{AND} \ P_2]\!]_D) \cup_{bag} ([\![P_1]\!]_D \setminus [\![P_1 \ \texttt{AND} \ P_2]\!]_D) \\
        = \ & ([\![P_1]\!]_D \Join ([\![P_1]\!]_D \Join [\![P_2]\!]_D)) \\ 
        & \cup_{bag} ([\![P_1]\!]_D \setminus ([\![P_1]\!]_D \Join [\![P_2]\!]_D)) \\
        = \ & ([\![P_1]\!]_D \Join [\![P_2]\!]_D) \cup_{bag} ([\![P_1]\!]_D \setminus [\![P_2]\!]_D) \\
        = \ & [\![P_1 \ \texttt{OPTIONAL} \ P_2]\!]_D. \nonumber
    \end{split}
    \end{equation}
    \end{small}
\end{proof}
}


% \section{Listings of Queries}
