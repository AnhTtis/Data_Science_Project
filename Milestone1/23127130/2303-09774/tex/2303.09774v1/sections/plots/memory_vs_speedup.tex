\begin{figure}[t]
\begin{subfigure}[b]{0.48\linewidth}
\begin{tikzpicture}
\definecolor{TraditionalColor}{HTML}{ABDDA4}
\definecolor{MemcontainerColor}{HTML}{38A528}
%\definecolor{rendering}{HTML}{2B83BA}

\pgfplotstableread{
name
0.4
0.8
1.6
3.2
6.4
}\datatable

\pgfplotstableread{
key val
1 1.50
2 2.07
3 4.12
4 4.35
5 4.35
}\numbertable

\begin{axis}[
    ybar stacked,
                     legend style={ legend columns=2,
                                at={(-0.3,1.65)},anchor=south west,
                                column sep=0.1cm},  
    xtick=data,
    width=45mm,
    height=37mm,
    bar width=3mm,
    ymin=0,
    axis y line*=none,
    axis x line*=none,
    xtick={1, 2, 3, 4, 5},
    xticklabels from table={\datatable}{name},
    x tick label style={anchor=east,xshift=1.8ex, yshift = -1ex},
    ytick={1, 2, 3, 4, 5},
    yticklabels={1$\times$, 2$\times$, 3$\times$, 4$\times$, 5$\times$},
    ymax = 5,
    ymin = 1,
    xmax = 6,
    xmin = 0,
    tick label style={font=\footnotesize},
    legend style={font=\footnotesize,yshift=-6ex},
    label style={font=\footnotesize},
    ylabel={Speedup},
    y label style={at={(axis description cs:-0.3,.5)},anchor=south},
    xlabel={Memory ($\%$)},
    xlabel style={yshift = 1ex},
    area legend
    ]    
    
    % \draw[fill=white,draw=white] (axis cs: 3.5, 1.8) -- (axis cs: 3.5, 1.85) -- (axis cs: 4.5, 1.875) -- (axis cs: 4.5, 1.825) -- cycle;
    % \draw[draw=black,ultra thick] (axis cs: 3.5, 1.8) -- (axis cs: 4.5, 1.825);
    % \draw[draw=black,ultra thick] (axis cs: 3.5, 1.85) -- (axis cs: 4.5, 1.875);
    % \node[anchor=south west] at (axis cs: 2.3, 1.82) {\scriptsize 3.12$\times$};
    
    % \node[anchor=south west, rotate = 30] at (axis cs: 2.2, 1.49) {\scriptsize 1.58$\times$};
    % \node[anchor=south west, rotate = 30] at (axis cs: 1.2, 1.18) {\scriptsize 1.32$\times$};
    % \node[anchor=south west, rotate = 30] at (axis cs: 0.2, 1.01) {\scriptsize 1.11$\times$};
    \addplot [SCColor,fill=SCColor] table[x=key,y=val] {\numbertable};
    % \addlegendentry[]{From spare memory};

    \node[anchor=south west, rotate = 45] at (axis cs: 0.5, 0.90) {\scriptsize 1.50$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 1.5, 1.47) {\scriptsize 2.07$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 2.5, 3.52) {\scriptsize 4.12$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 3.5, 3.75) {\scriptsize 4.35$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 4.5, 3.75) {\scriptsize 4.35$\times$};

\end{axis}
    
\end{tikzpicture}

\vspace{-3mm}
\caption{From spare memory}
\label{fig:memory_sweep_a}
\end{subfigure}
\hfill
\begin{subfigure}[b]{0.48\linewidth}

\begin{tikzpicture}
\definecolor{TraditionalColor}{HTML}{ABDDA4}
\definecolor{MemcontainerColor}{HTML}{38A528}
%\definecolor{rendering}{HTML}{2B83BA}

\pgfplotstableread{
name
0.4
0.8
1.6
3.2
6.4
}\datatable

\pgfplotstableread{
key val
1 1.40
2 1.96
3 3.96
4 4.12
5 4.11
}\numbertable

\begin{axis}[
    ybar stacked,
                     legend style={ legend columns=4,
                                at={(-0.1,1.3)},anchor=south west,
                                column sep=0.1cm},  
    xtick=data,
    width=45mm,
    height=37mm,
    bar width=3mm,
    ymin=0,
    axis y line*=none,
    axis x line*=none,
    xticklabels from table={\datatable}{name},
    xtick={1, 2, 3, 4, 5},
    x tick label style={anchor=east,xshift=1.8ex, yshift = -1ex},
    ytick={1, 2, 3, 4, 5},
    yticklabels={1$\times$, 2$\times$, 3$\times$, 4$\times$, 5$\times$},
    ymax = 5,
    ymin = 1,
    xmax = 6,
    xmin = 0,
    tick label style={font=\footnotesize},
    legend style={font=\footnotesize,yshift=-6ex},
    label style={font=\footnotesize},
    ylabel={Speedup},
        y label style={at={(axis description cs:-0.2,.5)},anchor=south},
    xlabel={Memory ($\%$)},
    xlabel style={yshift = 1ex},
    area legend
    ]    
    
    % \node[anchor=south west, rotate = 30] at (axis cs: 0.2, 1.0) {\scriptsize 1.50$\times$};
    % \node[anchor=south west, rotate = 30] at (axis cs: 1.5, 1.67) {\scriptsize 2.07$\times$};
    % \node[anchor=south west, rotate = 30] at (axis cs: 2.2, 3.62) {\scriptsize 4.12$\times$};
    % \node[anchor=south west] at (axis cs: 3.2, 4.5) {\scriptsize 4.74$\times$};

    \addplot [SCColor,fill=SCColor] table[x=key,y=val] {\numbertable};
    \node[anchor=south west, rotate = 45] at (axis cs: 0.5, 0.80) {\scriptsize 1.40$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 1.5, 1.36) {\scriptsize 1.96$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 2.5, 3.36) {\scriptsize 3.96$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 3.5, 3.52) {\scriptsize 4.12$\times$};
    \node[anchor=south west, rotate = 45] at (axis cs: 4.5, 3.51) {\scriptsize 4.11$\times$};
    \end{axis}
\end{tikzpicture}

\vspace{-3mm}
\caption{From query memory}
\label{fig:memory_sweep_b}
\end{subfigure}
\caption{\system achieves more savings with larger \memory on the 100GB \tpcdsdate dataset. Significant savings are achieved even with a small \memory (0.4$\%$) relative to dataset size. \system's \memory can also be reallocated from query memory with minimal impact on speedup.
}
\label{fig:memory_sweep}
\vspace{-4mm}
\end{figure}


% Parameter sweep: \system's optimization achieves speedup across different extra memory sizes and dataset scales. Left (a,b): Extra memory size proportionally scaled down for smaller dataset scales: consistent speedup achieved across different dataset scales. Extra memory size is set to 1.6\% of the data size.
% Right (c,d): more extra memory, more savings. However, significant savings are achieved even with a small amount (0.4GB) of extra memory relative to dataset size.