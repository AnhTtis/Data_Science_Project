%!TEX root = main.tex

\begin{figure}[t]

\pgfplotsset{accfig/.style={
    width=90mm,
    height=32mm,
    xmin=10,
    ymin=0,
    ymax=150,
    xlabel=DAG size ($\#$ nodes),
    ylabel=RMS Error,
    xlabel near ticks,
    ylabel near ticks,
    ylabel style={align=center},
    xtick={0, 10, ..., 100},
    % xticklabels={80\%, 85\%, 90\%, 95\%, 99\%, 99.5\%},
    ytick={0, 30, 60, 90, 120, 150},
    yticklabels={0\%, 30\%, 60\%, 90\%, 120\%, 150\%},
    % xticklabel style={rotate=30,yshift=-2mm,anchor=east,xshift=1.5mm},
    % yticklabels={0 hr, 0.5 hr, 1 hr, 1.5 hr, 2.0 hr},
    % extra y ticks={10, 20, 30, 40},
    % extra y tick style={yticklabels={}},
    ylabel shift=-2pt,
    xlabel shift=-2pt,
    xlabel style={yshift = 0.5ex},
    ylabel style={yshift = -1ex},
    legend style={
        at={(-0.17, 1.1)},anchor=south west,column sep=2pt,
        draw=black,fill=none,line width=.5pt,
        /tikz/every even column/.append style={column sep=0.1pt},
        font=\scriptsize
    },
    legend columns=3,
    every axis/.append style={font=\footnotesize},
    % ymajorgrids,
    % yminorgrids,
    minor grid style=lightgray,
    % nodes near coords,
    % every node near coord/.append style={font=\footnotesize,anchor=west,rotate=60}
}}
\centering
\begin{tikzpicture}[]
\begin{axis}[accfig,
ylabel=Time (ms),
ymin=0.0001,
ymax=3,
ymode=log,
ytick={0.0001, 0.001, 0.01, 0.1, 1, 10},
yticklabels={0.1, 1, 10, 100, 1000, 10000},
xmin = 4,
xtick={10, 25, 50, 100},
xticklabels={10, 25, 50, 100},
ymajorgrids,
    ]

\addplot[mark=triangle*,mark size=1.5,mark options={fill=RandomColor,draw=RandomColor},
very thick,draw=RandomColor,
]
table[x=x,y=y] {
x y
10 0.00134
25 0.00565
50 0.01319
100 0.02253
};

\addplot[mark=pentagon*,mark size=1.5,mark options={fill=GreedyColor,draw=GreedyColor},
very thick,draw=GreedyColor,
]
table[x=x,y=y] {
x y
10 0.00023
25 0.00051
50 0.00077
100 0.00099
};

\addplot[mark=diamond*,mark size=1.5,mark options={fill=HeuristicColor,draw=HeuristicColor},
very thick,draw=HeuristicColor,
]
table[x=x,y=y] {
x y
10 0.00016
25 0.00068
50 0.00239
100 0.00894
};

\addplot[mark=square*,mark size=1.5,mark options={fill=SAColor,draw=SAColor},
very thick,draw=SAColor,
]
table[x=x,y=y] {
x y
10 0.23258
25 0.47319
50 0.78829
100 1.18937
};

\addplot[mark=star,mark size=1.5,mark options={fill=SeparatorColor,draw=SeparatorColor},
very thick,draw=SeparatorColor,
]
table[x=x,y=y] {
x y
10 0.01249
25 0.03479
50 0.06117
100 0.09899
};

\addplot[mark=*,mark size=1.5,mark options={fill=SCColor,draw=SCColor},
very thick,draw=SCColor,
]
table[x=x,y=y] {
x y
10 0.00353
25 0.00996
50 0.01584
100 0.02414
};

% \node[anchor=north west,draw=black,align=left] at (axis cs: 12,19) {dataset:\\ \dmv};

\addlegendentry{\random + \solutionorder}
\addlegendentry{\greedy + \solutionorder}
\addlegendentry{\ratioshort + \solutionorder}
\addlegendentry{\solutionnodes + \simulatedannealing}
\addlegendentry{\solutionnodes + \separator}
\addlegendentry{\textbf{\solutionnodes + \solutionorder (Ours)}}

\end{axis}
\end{tikzpicture}
\vspace{-4mm}
% \begin{subfigure}[b]{0.48\linewidth}
% \centering
% \begin{tikzpicture}
% \begin{axis}[accfig,
% ylabel=Time (ms),
% ymin=0.0001,
% ymax=3,
% ymode=log,
% ytick={0.0001, 0.001, 0.01, 0.1, 1, 10},
% yticklabels={0.1, 1, 10, 100, 1000, 10000},
% xmin = 6,
% xtick={8, 16, 32},
% xticklabels={8, 16, 32},
% xlabel=Available extra memory (GB),
% ymajorgrids,
%     ]

% \addplot[mark=triangle*,mark size=1.5,mark options={fill=RandomColor,draw=RandomColor},
% very thick,draw=RandomColor,
% ]
% table[x=x,y=y] {
% x y
% 8 0.01733
% 16 0.01929
% 32 0.02253
% };

% \addplot[mark=pentagon*,mark size=1.5,mark options={fill=GreedyColor,draw=GreedyColor},
% very thick,draw=GreedyColor,
% ]
% table[x=x,y=y] {
% x y
% 8 0.00078
% 16 0.00086
% 32 0.00099
% };

% \addplot[mark=pentagon*,mark size=1.5,mark options={fill=HeuristicColor,draw=HeuristicColor},
% very thick,draw=HeuristicColor,
% ]
% table[x=x,y=y] {
% x y
% 8 0.00869
% 16 0.00895
% 32 0.00894
% };


% \addplot[mark=square*,mark size=2,mark options={fill=SAColor,draw=SAColor},
% very thick,draw=SAColor,
% ]
% table[x=x,y=y] {
% x y
% 8 1.45156
% 16 1.31604
% 32 1.18937
% };

% \addplot[mark=star,mark size=2,mark options={fill=SeparatorColor,draw=SeparatorColor},
% very thick,draw=SeparatorColor,
% ]
% table[x=x,y=y] {
% x y
% 8 0.1043
% 16 0.10369
% 32 0.09899
% };

% \addplot[mark=*,mark size=1.5,mark options={fill=SCColor,draw=SCColor},
% very thick,draw=SCColor,
% ]
% table[x=x,y=y] {
% x y
% 8 0.02184
% 16 0.02253
% 32 0.02414
% };

% % \node[anchor=north west,draw=black,align=left] at (axis cs: 12,19) {dataset:\\ \dmv};

% \end{axis}
% \end{tikzpicture}

% \vspace{-3mm}
% \caption{Memory size vs. algorithm runtime (graph size = 100)}
% \label{fig:scalability_b}
% \end{subfigure}

\vspace{-3mm}
\caption{
Comparison between runtimes of different methods for solving \optimizationproblem on synthetic DAGs. The runtime of our solution (\solutionnodes + \solutionorder) scales linearly with DAG size and is negligible up to 100 nodes. 
}
\vspace{-4mm}
% The top row is for the \dmv dataset; the bottom row is for the \insta dataset.
\label{fig:scalability}
\end{figure}
