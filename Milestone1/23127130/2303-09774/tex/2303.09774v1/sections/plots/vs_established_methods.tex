\begin{figure*}[t]
\usetikzlibrary{patterns}
\begin{subfigure}[b]{0.48\linewidth}
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
I/O 1
I/O 2
I/O 3
Cmpt 1
Cmpt 2
}\datatable


\begin{axis}[
    ybar stacked,
    clip=false,
    legend style={ 
        legend columns = 7,
        at={(-0.1,1.5)},
        anchor=south west,
        column sep=0cm,
    },  
    xtick={4, 9, 14, 19.25, 24.25},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=east,xshift=2ex, yshift = -1ex},
    xlabel style={yshift = 1ex},
    width=90mm,
    height=35mm,
    bar width=1.2mm,
    ymin=0,
    axis y line*=none,
    axis x line*=none,
    ytick={150, 300, 450, 600},
    yticklabels={150, 300, 450, 600},
    ymax = 600,
    xmin = 0,
    xmax = 27,
    ymajorgrids,
    tick label style={font=\footnotesize},
    legend style={
        font=\footnotesize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.5cm},
        at={(0, 1.1)}, anchor=south west
    },
    label style={font=\footnotesize},
    xlabel={Workload},
    ylabel={Time (s)},
    area legend
    ]
                 
    % \draw[fill=white,draw=white] (axis cs: 2.6,320) -- (axis cs: 3.4,340) -- (axis cs: 3.4,320) -- (axis cs: 2.6,300) -- cycle;
    % \draw[draw=black,ultra thick] (axis cs: 2.6,320) -- (axis cs: 3.4,340);
    % \draw[draw=black,ultra thick] (axis cs: 3.4,320) -- (axis cs: 2.6,300);
    % \node[anchor=south west] at (axis cs: 3.4,300) {775s};
    
    \addplot
    [NoOptColor,fill=NoOptColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M1] {sections/plots/vs_established_methods1.txt};
    \addlegendentry[]{No optimization};
    
    \addplot [LRUColor,fill=LRUColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M2] {sections/plots/vs_established_methods1.txt};
    \addlegendentry[]{LRU Cache};
    
    \addplot [RandomColor,fill=RandomColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M3] {sections/plots/vs_established_methods1.txt};
    \addlegendentry[]{Random};
    
    \addplot
    [GreedyColor,fill=GreedyColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M4] {sections/plots/vs_established_methods1.txt};
    \addlegendentry[]{Greedy};
    
    \addplot [HeuristicColor,fill=HeuristicColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M5] {sections/plots/vs_established_methods1.txt};
    \addlegendentry[]{Ratio-based selection};
    
        \addplot
    [black,fill=SCColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M6] {sections/plots/vs_established_methods1.txt};
    \addlegendentry[]{\textbf{\system (Ours)}};

\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}

\vspace{-2mm}
\caption{100GB \tpcds, 1.6GB \memory}



\end{subfigure}
\begin{subfigure}[b]{0.48\linewidth}
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
I/O 1
I/O 2
I/O 3
Cmpt 1
Cmpt 2
}\datatable

\begin{axis}[
    ybar stacked,
    clip=false,
    xtick={4, 9, 14, 19.25, 24.25},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=east,xshift=2ex, yshift = -1ex},
    xlabel style={yshift = 1ex},
    width=90mm,
    height=35mm,
    bar width=1.2mm,
    ymin=0,
    axis y line*=none,
    axis x line*=none,
    ytick={75, 150, 225, 300},
    yticklabels={75, 150, 225, 300},
    ymajorgrids,
    ymax = 300,
    xmin = 0,
    xmax = 27,
    tick label style={font=\footnotesize},
    label style={font=\footnotesize},
    xlabel={Workload},
    ylabel={Time (s)},
    area legend
    ]
                 
    % \draw[fill=white,draw=white] (axis cs: 2.6,320) -- (axis cs: 3.4,340) -- (axis cs: 3.4,320) -- (axis cs: 2.6,300) -- cycle;
    % \draw[draw=black,ultra thick] (axis cs: 2.6,320) -- (axis cs: 3.4,340);
    % \draw[draw=black,ultra thick] (axis cs: 3.4,320) -- (axis cs: 2.6,300);
    % \node[anchor=south west] at (axis cs: 3.4,300) {775s};
    
    \addplot
    [NoOptColor,fill=NoOptColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M1] {sections/plots/vs_established_methods2.txt};

    
    \addplot [LRUColor,fill=LRUColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M2] {sections/plots/vs_established_methods2.txt};

    
    \addplot [RandomColor,fill=RandomColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M3] {sections/plots/vs_established_methods2.txt};

    
    \addplot
    [GreedyColor,fill=GreedyColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M4] {sections/plots/vs_established_methods2.txt};

    
    \addplot [HeuristicColor,fill=HeuristicColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M5] {sections/plots/vs_established_methods2.txt};
    
            \addplot
    [black,fill=SCColor,x tick label style={xshift=-0.3cm}] table[x=Method,y=M6] {sections/plots/vs_established_methods2.txt};


\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}





\vspace{-2mm}
\caption{100GB \tpcdsdate, 0.8GB \memory}

\end{subfigure}

\caption{
End-to-end MV refresh times on 100GB datasets. \system achieves 1.04x--5.08x speedup with 1.6/0.8GB \memory compared to an unoptimized raw engine.
This is an additional up to 2.22x speedup compared to other off-the-shelf methods. 
}
% \vspace{-4mm}
\label{fig:vs_established_methods}
\end{figure*}
