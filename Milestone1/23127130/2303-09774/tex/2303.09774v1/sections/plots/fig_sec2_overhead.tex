\begin{figure}[t]

\centering

\begin{tikzpicture}

\begin{axis}[
    ybar stacked,
    xtick=data,
    width=80mm,
    height=32mm,
    bar width=4mm,
    ymin=0,
    ymax=100,
    axis y line*=none,
    axis x line*=none,
    xtick={1,2,3,4},
    xticklabels = {1G (5.4s),10G (14s),100G (52s),1000G (560s)},
    ytick={0, 20, ..., 100},
    xlabel=Data size (total processing time in seconds),
    xlabel style={yshift = 1ex},
    % yticklabels={200, 400, 600, 800},
    xmin = 0.5,
    xmax = 4.5,
    tick label style={font=\footnotesize},
    legend style={
        at={(-0.2,1.1)},anchor=south west,column sep=2pt,
        draw=black,fill=none,line width=.5pt,
        /tikz/every even column/.append style={column sep=5pt},
        font=\scriptsize,
    },
    legend cell align={left},
    legend columns=4,
    label style={font=\footnotesize},
    %  xlabel={system},
    ylabel={Percentage (\%)},
    ymajorgrids,
    area legend,
    legend image code/.code={%
    \draw[#1, draw=none] (0cm,-0.1cm) rectangle (0.6cm,0.1cm);}
]

% Read
\addplot[fill=BlueColor,draw=none]
table[x=x,y=y] {
x y
1 5.1
2 10.4
3 11.5
4 9.7
};

% Compute
\addplot[fill=YellowColor,draw=none]
table[x=x,y=y] {
x y
1 58.1
2 27.7
3 18.6
4 21.9
};


% Compression/Write
\addplot[fill=GreenColor,draw=none]
table[x=x,y=y] {
x y
1 36.8
2 61.9
3 69.9
4 68.4
};

\addlegendentry{Read (base tables)}
\addlegendentry{Compute (joins)}
\addlegendentry{Write (final output)}

\end{axis}
\end{tikzpicture}

\vspace{-2mm}
\caption{Runtime breakdown by operation. 
Compressing/writing the result to storage 
takes much longer.
A cloud data warehouse is used to join four tables 
(\texttt{customer}, \texttt{orders}, \texttt{lineitem}, \texttt{nation}) 
appearing in TPC-H Q8.}
\label{fig:overview:overhead}
\vspace{-2mm}
\end{figure}
