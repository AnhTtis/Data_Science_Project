\begin{figure}[t]
\begin{subfigure}[b]{\linewidth}
\centering
\begin{tikzpicture}
 \node(mvdefinition)[minimum height=10mm, minimum width=31mm, anchor=south] at (-2.8, 0){};
  
   \node[anchor=north west, align=left] at ($(mvdefinition.north west) + (0, 0.05)$) {\small \texttt{CREATE MV \textbf{MV1}}\\[-0.2em]\small\texttt{... FROM TABLE;} \\[-0.2em]\small \texttt{CREATE MV \textbf{MV2}}\\[-0.2em]\small\texttt{...FROM \textbf{MV1};}\\[-0.2em]\small \texttt{CREATE MV \textbf{MV3}}\\[-0.2em]\small\texttt{...FROM \textbf{MV1};}};
\begin{scope}[every node/.style={rectangle,thick, minimum width = 1cm, minimum height = 0.5cm,fill opacity = 0.6,text opacity=1}]
    \node[dashed, text width=1.5cm, align=center,draw=black] (X) at (0,-0.8) {\scriptsize \texttt{TABLE}};
    \node[draw=black] (A1) at (0, 0) {\scriptsize \texttt{MV1}};
    \node[draw=black] (B1) at (-0.6,0.8) {\scriptsize \texttt{MV2}};
    \node[draw=black] (C1) at (0.6,0.8) {\scriptsize \texttt{MV3}} ;
\end{scope}

\begin{scope}[>={Stealth[black]},
              every node/.style={fill=none,circle},
              every edge/.style={draw=black}]
    \path [->] (X) edge node {} (A1);
    \path [->] (A1) edge node {} (B1);
    \path [->] (A1) edge node {} (C1);
\end{scope}

%\node[anchor=west, align=center] at ($(mvdefinition.south west) + (1.3, -1.5)$) {Dependency Graph};

\begin{scope}[every node/.style={rectangle,thick, minimum width = 1cm, minimum height = 0.5cm,fill opacity = 0.6,text opacity=1}]
    \node[fill=PrestoColor,draw=Greyborder] (A11) at (2.9, -0.2) {\scriptsize \texttt{MV1}};
    \node[draw=Greyborder] (B11) at (2.3,0.6) {\scriptsize \texttt{MV2}};
    \node[draw=Greyborder] (C11) at (3.5,0.6) {\scriptsize \texttt{MV3}} ;
\end{scope}

\begin{scope}[>={Stealth[black]},
              every node/.style={fill=none,circle},
              every edge/.style={draw=black}]
    \path [->] (A11) edge node {} (B11);
    \path [->] (A11) edge node {} (C11);
\end{scope}

\node[] (yy) at (3.2, -0.8) {\small Keep in memory};
\node[draw,circle, fill=FlagColor,inner sep=0.05cm,minimum width = 3mm,text opacity=1] at (1.8, -0.8) {};

\node[] () at ($(A11.east) + (0.2,0)$) {\Large 1};
\node[] () at ($(C11.east) + (0.2,0)$) {\Large 3};
\node[] () at ($(B11.west) + (-0.2,0)$) {\Large 2};

%\node[anchor=west, align=center] at ($(yy.south west) + (-1.4, -0.5)$) {\small execution order and\\[-0.2em]\small nodes to keep in memory};

\end{tikzpicture}
\end{subfigure}
\vspace{-5mm}
\caption{Input to \system for an example workload. Left: The workload's dependency graph. Right: \textit{plan} (execution order, nodes to keep in memory) for the MV refresh run by Optimizer.}
\label{fig:input}
\vspace{-4mm}
\end{figure}
