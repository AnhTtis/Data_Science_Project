%\section{Experiments With Property Generation For Combinational Circuits}
%\section{Experiment With Property Generation}
%\vspace{-12pt}
%\section{Experiment With Combinational Circuits}
\section{Properties Mimicking Symbolic Simulation}
\label{sec:comb_exper}
 Let $M(X,V,W)$ be a combinational circuit where $X,V,W$ are internal,
 input and output variables.  In this section, we describe generation
 of properties of $M$ that mimic symbolic
 simulation~\cite{SymbolSim}. Every such a property $Q(V)$ specifies a
 cube of tests that produce the same values for a given subset of
 variables of $W$. We chose generation of such properties because
 deciding if $Q$ is an unwanted property is, in general, simple. The
 procedure for generation of these properties is slightly different
 from the one presented in Section~\ref{sec:prop_gen}.

Let $F(X,V,W)$ be a formula specifying $M$. Let $B(W)$ be a clause.
Let $H(V)$ be a solution to the PQE problem of taking a clause $C \in
F$ out of \Prob{X}{W}{F \wedge B}. That is $\Prob{X}{W}{F \wedge B}
\equiv H \wedge$ \Prob{X}{W}{(F \setminus \s{C}) \wedge B}. Let $Q(V)$
be a clause of $H$. Then $M$ has the \tb{property} that for every full
assignment \pnt{v} to $V$ falsifying $Q$, it produces an output
\pnt{w} falsifying $B$ (see Proposition~\ref{prop:symb_sim} of
Appendix~\ref{app:proofs}). Suppose, for instance, $Q\!=\!v_1 \vee
\overline{v}_{10} \vee v_{30}$ and
$B\!=\!w_2\!\vee\!\overline{w}_{40}$. Then for every \pnt{v} where
$v_1\!=\!0,v_{10}\!=\!1,\!v_{30}\!=\!0$, the circuit $M$ produces an
output where $w_2 = 0, w_{40}=1$.  Note that $Q$ is implied by $F
\wedge B$ rather than $F$. So, it is a property of $M$ under
constraint $B$ rather than $M$ alone.


To generate combinational circuits, we unfolded sequential circuits of
the set of 98 benchmarks used in Section~\ref{sec:inv_gen_exper} for
invariant generation.  Let $N$ be a sequential circuit. (We reuse the
notation of Section~\ref{sec:inv_gen}).  Let
$M_k(S_0,V_0,\dots,S_{k-1},V_{k-1},S_k)$ denote the combinational
circuit obtained by unfolding $N$ for $k$ time frames. Here $S_i,V_i$
are state and input variables of $i$-th time frame respectively. Let
$F_k$ denote the formula $I(S_0) \wedge T(S_0,V_0,S_1) \wedge \dots
\wedge T(S_{k-1},V_{k-1},S_k)$ describing the unfolding of $N$ for $k$
time frames. Note that $F_k$ specifies the circuit $M_k$ above under
the input constraint $I(S_0)$. Let $B(S_k)$ be a clause. Let
$H(S_0,V_0,\dots,V_{k-1})$ be a solution to the PQE problem of taking
a clause $C \in F_k$ out of formula \prob{S_{1,k}}{F_k \wedge B}. Here
$S_{1,k} = S_1 \cup \dots \cup S_k$.  That is $\prob{S_{1,k}}{F_k
  \wedge B} \equiv H \wedge$ \prob{S_{1,k}}{(F_k \setminus \s{C})
  \wedge B}. Let $Q$ be a clause of $H$. Then for every assignment
(\pqnt{s}{ini},\pnt{v_0},\dots,\ppnt{v}{k-1}) falsifying $Q$, the
circuit $M_k$ outputs \pent{s}{k} falsifying $B$. (Here \pqnt{s}{ini}
is the initial state of $N$ and \pent{s}{k} is a state of the last
time frame.)



In the experiment, we used \dpqe,\Eg and \egp to solve 1,586 PQE
problems described above.  In Table~\ref{tbl:symb_sim}, we give a
sample of results by \egp. (More details about this experiment can be
found in Appendix~\ref{app:symb_sim}.) Below, we use the first line of
Table~\ref{tbl:symb_sim} to explain its structure. The first column
gives the benchmark name (6s326). The next column shows that 6s326 has
3,342 latches. The third column gives the number of time frames used
to produce a combinational circuit $M_k$ (here $k=20$). The next
column shows that the clause $B$ introduced above consisted of 15
literals of variables from $S_k$.  (Below we still use the index $k$
assuming that $k = 20$.)  The literals of $B$ were generated
\ti{randomly}. When picking the length of $B$ we just tried to
simulate the situation where one wants to set a particular \ti{subset}
of output variables of $M_k$ to specified values.  The next two
columns give the size of the subcircuit $M'_k$ of $M_k$ that feeds the
output variables present in $B$.  When computing a property $H$ we
took a clause out of formula \prob{S_{1,k}}{F'_k \wedge B} where
$F'_k$ specifies $M'_k$ instead of formula \prob{S_{1,k}}{F_k \wedge
  B} where $F_k$ specifies $M_k$. (The logic of $M_k$ not feeding a
variable of $B$ is irrelevant for computing $H$.)  The first column of
the pair gives the number of gates in $M'_k$ (i.e. 348,479). The
second column provides the number of input variables feeding $M'_k$
(i.e. 1,774).  Here we count only variables of $V_0 \cup \dots \cup
V_{k-1}$ and ignore those of $S_0$ since the latter are already
assigned values specifying the initial state \pqnt{s}{ini} of $N$.

\input{p5rop_gen.tbl}

The next four columns show the results of taking a clause out
of\linebreak \prob{S_{1,k}}{F'_k\!\wedge\!B}. For each PQE problem the
time limit was set to 10 sec. Besides, \egp terminated as soon as 5
clauses of property \linebreak$H(S_0,V_0,\dots,V_{k-1})$ were
generated.  The first three \linebreak columns out of four describe
the minimum and maximum sizes of clauses in $H$ and the run time of
\egp. So, it took for \egp 3.5 sec.  to produce a formula $H$
containing clauses of sizes from 27 to 28 variables. A clause $Q$ of
$H$ with 27 variables, for instance, specifies $2^{1747}$ tests
falsifying $Q$ that produce the same output of $M'_k$ (falsifying the
clause $B$). Here \mbox{$1747 = 1774-27$} is the number of input
variables of $M'_k$ not present in $Q$. The last column shows that at
least one clause $Q$ of $H$ specifies a property that cannot be
produced by 3-valued simulation (a version of symbolic
simulation~\cite{SymbolSim}).  To prove this, one just needs to set
the input variables of $M'_k$ present in $Q$ to the values falsifying
$Q$ and run 3-valued simulation. (The remaining input variables of
$M'_k$ are assigned a don't-care value.) If after 3-valued simulation
some output variable of $M'_k$ is assigned a don't-care value, the
property specified by $Q$ cannot be produced by 3-valued simulation.

Running \dpqe, \Eg and \egp on the 1,586 PQE problems mentioned above
showed that a) \Eg performed poorly producing properties only for 28\%
of problems; b) \dpqe and \egp showed much better results by
generating properties for 62\% and 65\% of problems respectively.
When \dpqe and \egp succeeded in producing properties, the latter
could not be obtained by 3-valued simulation in 74\% and 78\% of cases
respectively.
%\vspace{-13pt}
\clearpage
