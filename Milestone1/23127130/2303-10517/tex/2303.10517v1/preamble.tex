\usepackage{amsmath,amssymb,amsfonts}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage[table,xcdraw,colortbl]{xcolor} 

\usepackage{bbding}%for symbols
\newcommand\no{\scriptsize\XSolidBrush}
\newcommand\YES{\scriptsize\Checkmark}

\usepackage[inline]{enumitem}
\usepackage{placeins}


\usepackage[framemethod=tikz]{mdframed}
\mdfdefinestyle{mpdframe}{
    frametitlebackgroundcolor   =black!15,
    frametitlerule              =true,
    roundcorner                 =3pt,
    middlelinewidth             =0.8pt,
    innermargin                 =0.1cm,
    outermargin                 =0.1cm,
    innerleftmargin             =0.1cm,
    innerrightmargin            =0.1cm,
    innertopmargin              =0.1cm,
    innerbottommargin           =0.1cm
}

% Plots and figures
\usepackage{caption,subcaption}
\usepackage{pgfplots,pgfplotstable}
\pgfplotsset{compat=1.14} 
\usetikzlibrary{pgfplots.groupplots}
\usetikzlibrary{external}
\tikzexternalize[
    prefix=tikz/,
    up to date check=md5,
    % force remake,
    only named=true
]

\usepackage{fontawesome}
\let\IssueClosed\faCheck
\let\IssueOpen\faClose

% Tables
\usepackage{array,makecell,tabularx}
\usepackage{multirow}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{rotating}
\newcommand\SW[1]{\begin{turn}{90}#1\end{turn}}

% Charts in tables
\usepackage{xspace}
\usepackage[autolanguage]{numprint}
\AtBeginDocument{\npthousandsep{\,}}
\usepackage{fp}

\newcommand*\np[2][z]{%\textcolor{red}{%
\ifx z#1%
$\numprint{#2}$%
\else%
$\numprint[#1]{#2}$%
\fi\xspace%
}

% This command is to right align an integer number so that the numbers in the column of the table are all right-aligned
\newcommand{\ShowAbsoluteNumber}[1]{%
\ifnum #1<10%
{\hspace*{0pt}#1}%
\else%
\ifnum #1<100%
{\hspace*{0pt}#1}%
\else%
\ifnum #1<1000%
{\hspace*{0pt}#1}%
\else%
{\numprint{#1}}%
\fi%
\fi%
\fi%
}

% This command is to calculate a percentage given a number and the total number, and to present it between parentheses where the percentage number itself is right-aligned so that the left parentheses in the column of the table are all left-aligned. Note that a percentage rounded to 0 will be presented as <1%
\newcommand{\ShowPercentage}[2]{%
\FPeval\percentage{round(#1/#2*100,0)}%
\FPeval\percentageOneDecimal{round(#1/#2*100,1)}%
\ifnum \percentage=0%
{\np[\%]{\FPprint{percentageOneDecimal}}}%
\else%
\ifnum \percentage<10%
{\np[\%]{\FPprint{percentageOneDecimal}}}%
\else%
{\np[\%]{\FPprint{percentageOneDecimal}}}%
\fi%
\fi%
\xspace
}
\newlength\BARSIZE  \setlength\BARSIZE{0.5cm}
\newcommand{\inlinechart}[2]{%
\FPeval{\BLACKBARSIZE}{#1/#2}\textcolor{black!80}{\rule{\BLACKBARSIZE\BARSIZE}{1.6ex}}%
\FPeval{\BLACKBARSIZE}{1 - (#1/#2)}\textcolor{black!10}{\rule{\BLACKBARSIZE\BARSIZE}{1.6ex}}%
}

\newcommand*\percent[3][v]{%
\ifx b#1% JFF: number/percentage
    (\np{#2} / \ShowPercentage{#2}{#3})\else%
\ifx q#1%
    \np{#2}/\np{#3}(\ShowPercentage{#2}{#3})\else%
\ifx v#1%
    \ShowPercentage{#2}{#3}\else%
\ifx p#1%
    \np{#2}(\ShowPercentage{#2}{#3})\else%
\ifx c#1%
    \inlinechart{#2}{#3}%
\else%
    \np{#2}%
    \ifx r#1%
        /\np{#3}%
    \fi%
    \hspace*{0.5ex}(\ShowPercentage{#2}{#3}) %
    \inlinechart{#2}{#3}%
    \xspace
\fi\fi\fi\fi\fi%
}

\usepackage{solidity}% must be loaded after package "fp", clash of function names

\newcommand\Cpp{{C\nolinebreak[4]\hspace{-.05em}\raisebox{.2ex}{\scriptsize\bfseries ++}}}
\newcommand\OP[1]{\texttt{#1}}

\newcommand\ITEM[1]{\par\smallskip\noindent\textit{#1}}
\newcommand\TODO[1]{%
  \ifx&#1&%
    \textcolor{red}{TODO!} 
  \else
    \begin{flushleft}
      \color{red}%
      TODO: #1%
    \end{flushleft}
  \fi
  \typeout{*** TODO: #1}%
}

\AtBeginDocument{%
  \renewcommand*{\sectionautorefname}{Section}%
  \renewcommand*{\subsectionautorefname}{\sectionautorefname}%
  \renewcommand*{\subsubsectionautorefname}{\subsectionautorefname}%
  \renewcommand*{\paragraphautorefname}{\subsubsectionautorefname}%
  \renewcommand*{\subparagraphautorefname}{\paragraphautorefname}%
}

\usepackage{siunitx}

% Environment, where underscores are just underscores
\catcode`_=\active
\newenvironment{TextUnderscore}{%
  \catcode`_=\active
  \newcommand_{\char`_}%
}{}%
\catcode`_=8

\newcommand\SB[1]{\texttt{#1}}
\newcommand\TAG[2][\relax]{%
  \medskip\par\noindent\SB{#2}%
  \ifx\relax#1\else
    \ (#1)%
  \fi
  .
}


% Expandable to_lowercase command
\ExplSyntaxOn
\cs_set_eq:NN \explower \text_lowercase:n
\ExplSyntaxOff


%\usepackage[hidelinks]{hyperref}% should be last
\usepackage{swc}% swc needs hyperref

\newcommand\SMARTBUGS{SmartBugs}

%%%%%%%%%%%%%% our colors

% agreement, overlap
\definecolor{one}{HTML}{4F81BD}
\definecolor{two}{HTML}{C0504D}
\definecolor{three}{HTML}{9BBB59}
\definecolor{more}{HTML}{9F4C7C}

\definecolor{mythril}{HTML}{D6D2D2}
\definecolor{conkas}{HTML}{F1E4F3}
\definecolor{osiris}{HTML}{F4BBD3}
\definecolor{madmax}{HTML}{F686BD}
\definecolor{ethainter}{HTML}{FE5D9F}
\definecolor{securify}{HTML}{9B7874}
\definecolor{teether}{HTML}{666370}
\definecolor{pakala}{HTML}{1C1F33}
\definecolor{ethor}{HTML}{A6B1E1}
\definecolor{maian}{HTML}{B4869F}

% tool statistics, runtime tables
\definecolor{bad}{HTML}{FAAAAD}
\definecolor{mid_bad}{HTML}{FCE6E9}
\definecolor{mid_good}{HTML}{BDE2C8}
\definecolor{good}{HTML}{63BE7B}

\definecolor{midblue}{rgb}{0.70,0.78,0.93}
\definecolor{lightblue}{rgb}{0.85,0.95,0.99}
\definecolor{lightgreen}{rgb}{0.74,0.89,0.78}
\definecolor{lightgray}{HTML}{F3F3F3}
\definecolor{greendark}{HTML}{6EC284}
\definecolor{greenmedium}{HTML}{7AC78E}
\definecolor{greenlight}{HTML}{BCE2C8}
\definecolor{redlight}{HTML}{FCE6E9}
\definecolor{redmedium}{HTML}{FBB6B8}
\definecolor{reddark}{HTML}{F8696B}
