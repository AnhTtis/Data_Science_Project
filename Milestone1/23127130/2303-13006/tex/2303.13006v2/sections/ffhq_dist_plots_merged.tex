\pgfplotstableread{plots/ffhq_facenet_plot_hist.dat}{\tableffhqfacenethist}
\pgfplotstableread{plots/ffhq_arcface_plot_hist.dat}{\tableffhqarcfacehist}

\pgfplotsset{
compat=1.11,
legend image code/.code={
\draw[mark repeat=2,mark phase=2]
plot coordinates {
(0cm,0cm)
(0.15cm,0cm)        %
(0.3cm,0cm)         %
};%
}
}
\begin{figure}[htpb]
    \centering
    \begin{subfigure}[b]{0.48\textwidth}
        \centering
        \begin{tikzpicture}
        \tikzstyle{every node}=[font=\small]
        \begin{axis}[
            axis background/.style={fill=gray!5},
            every axis plot/.append style={very thick},
            xmin = 0.14, xmax = 0.58,
            ymin = 0, 
            xtick pos=bottom,
            ytick style={draw=none},
            yticklabels={,,},
            width = \textwidth,
            height = 0.5\textwidth,
            legend cell align = {left},
            legend pos = north east,
            legend style={nodes={scale=0.7, transform shape}, at={(1, 1)},anchor=north east},
            xlabel=ArcFace distance,
            ylabel=Density,
        ]
        \addplot[matlab_orange, smooth, fill=matlab_orange, fill opacity=0.2] table [x = {x}, y = {y0}] {\tableffhqarcfacehist};
        \addplot[matlab_blue, smooth, fill=matlab_blue, fill opacity=0.2] table [x = {x}, y = {y1}] {\tableffhqarcfacehist};
        \addplot[matlab_yellow, smooth, fill=matlab_yellow, fill opacity=0.2] table [x = {x}, y = {y2}] {\tableffhqarcfacehist};
        \addplot[matlab_purple, smooth, fill=matlab_purple, fill opacity=0.2] table [x = {x}, y = {y3}] {\tableffhqarcfacehist};
        \addplot[matlab_green, smooth, fill=matlab_green, fill opacity=0.2] table [x = {x}, y = {y4}] {\tableffhqarcfacehist};
        \end{axis}
        \end{tikzpicture}
        \label{fig:plot_ffhq_arcface_hist}
        \vspace{0.5cm}
    \end{subfigure}
    \begin{subfigure}[b]{0.48\textwidth}
        \centering
        \begin{tikzpicture}
        \tikzstyle{every node}=[font=\small]
        \begin{axis}[
            axis background/.style={fill=gray!5},
            every axis plot/.append style={very thick},
            xmin = 0.05, xmax = 0.65,
            ymin = 0, 
            xtick pos=bottom,
            ytick style={draw=none},
            yticklabels={,,},
            width = \textwidth,
            height = 0.5\textwidth,
            legend cell align = {left},
            legend pos = north east,
            legend style={nodes={scale=0.7, transform shape}, at={(1, 1)},anchor=north east},
            xlabel=FaceNet distance,
            ylabel=Density,
        ]
        \addplot[matlab_orange, smooth, fill=matlab_orange, fill opacity=0.2] table [x = {x}, y = {y0}] {\tableffhqfacenethist};
        \addplot[matlab_blue, smooth, fill=matlab_blue, fill opacity=0.2] table [x = {x}, y = {y1}] {\tableffhqfacenethist};
        \addplot[matlab_yellow, smooth, fill=matlab_yellow, fill opacity=0.2] table [x = {x}, y = {y2}] {\tableffhqfacenethist};
        \addplot[matlab_purple, smooth, fill=matlab_purple, fill opacity=0.2] table [x = {x}, y = {y3}] {\tableffhqfacenethist};
        \addplot[matlab_green, smooth, fill=matlab_green, fill opacity=0.2] table [x = {x}, y = {y4}] {\tableffhqfacenethist};
        \footnotesize{
        \legend{
            NbNet~\cite{nbnet},
            Gaussian sampling~\cite{gaussian_sampling},
            StyleGAN search~\cite{stylegan-search},
            {ID3PM (Ours, FaceNet~\cite{facenet, facenet_pytorch})},
            {ID3PM (Ours, InsightFace~\cite{insightface})}
        }
        }
        \end{axis}
        \end{tikzpicture}
        \label{fig:plot_ffhq_facenet_hist}
    \end{subfigure}
    \caption{Probability density functions of the ArcFace~\cite{arcface, arcface_torch} and FaceNet~\cite{facenet, facenet_tf} distances (lower is better) of $1000$ FFHQ~\cite{stylegan} test images and their respective reconstructions.}
    \label{fig:plot_ffhq}
\end{figure}
