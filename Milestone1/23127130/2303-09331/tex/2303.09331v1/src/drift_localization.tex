% \usepackage{tikz}
% \usepackage{pgfplots}
% \pgfplotsset{compat=1.8}
% \usetikzlibrary{arrows.meta,patterns,decorations.text,fit,calc}
% \usepgfplotslibrary{statistics}

\newcommand{\tikzLocalization}{
\begin{tikzpicture}[
	node distance=3em,
%	minimum size =0.15\textwidth,
%	very thick,
	from/.style={{Stealth[length=0.8em, round]}-,double,shorten >=-0.2em,shorten <=-0.2em},
	towards/.style={-{Stealth[length=0.8em, round]},double,shorten >=-0.2em,shorten <=-0.2em},
	]
		\node(beforedrift) {%
			\begin{tikzpicture}
			\begin{axis}[xlabel={before drift}]
				 \plotdataset{class1}{classinv}{\xshift}
			\end{axis}
			\end{tikzpicture}
		};
%		\node[label=below:After Drift] (img1b) [below=of img1a] {%
		\node(afterdrift) [node distance=0em, below=of beforedrift] {%	
			\begin{tikzpicture}
			\begin{axis}[xlabel={after drift}]
				 \plotdataset{classinv}{class2}{\xshift}
			\end{axis}
			\end{tikzpicture}
		};
	\draw[decorate,decoration={brace,amplitude=1.5em,mirror,raise=-0.3em}] (beforedrift.north west) -- node[xshift=-1.2em](leftdrift){} (afterdrift.south west);
	\draw[decorate,decoration={brace,amplitude=1.5em,raise=-0.3em}] (beforedrift.north east) -- node[xshift=1.2em](rightdrift){} (afterdrift.south east);	
%	\node[label=below:stream](stream) [below left=of leftdrift] {%
	\node(stream) [left=of leftdrift] {%
		\begin{tikzpicture}
			\begin{axis}[xlabel={}]
				 \plotdataset{class0}{class0}{\xshift}
			\end{axis}
		\end{tikzpicture}
	} edge[towards]
		[postaction={decoration={text along path, text align=center,text={|\labelsize |drift ||},
			raise=0.2em,},decorate}]
		[postaction={decoration={text along path, text align=center,text={|\labelsize |detection ||},
		raise=-0.7em,}, decorate}]
 (leftdrift);
 	\node[node distance=0em,below=of stream] {stream};
%%
%%  drifting Area
%%
	\node(driftingarea) [right=of rightdrift] {
		\begin{tikzpicture}
		\begin{axis}
			\plotdataset{class1}{class2}{\xshift}
			\plotSegment
		\end{axis}
	\end{tikzpicture}
	} edge [from] node[above]{\labelsize train} 
	node[below]{\labelsize model} (rightdrift);
	\node[node distance=0em,below=of driftingarea,font=\labelsize,align=center] {drift locus = region with \\[-0.5em] high class certainty};
	\end{tikzpicture}
 }