% % !TEX options=--shell-escape
% \documentclass[12pt]{iopart}
% \pdfoutput=1 % go for pdflatex

% % == Standard packages ==
% \usepackage{iopams}
% \input{packages}

% % == Theorem environments ==
% \theoremstyle{definition}
% % A definition introduces a new concept rigorously:
% \newtheorem{definition}{Definition}[section]
% % A remark introduces tangential considerations: 
% \newtheorem{remark}{Remark}[section]
% % A theorem is a key result:
% \newtheorem{theorem}{Theorem}[section]
% % A proposition is a result requiring explicit proof:
% \newtheorem{proposition}[theorem]{Proposition}
% % A lemma is an intermediate result for a theorem or a proposition, requiring explicit proof:
% \newtheorem{lemma}[theorem]{Lemma}
% % An observation is a result not requiring explicit proof:
% \newtheorem{observation}[theorem]{Observation}
% % A corollary is a result directly following from a previous result:
% \newtheorem{corollary}[theorem]{Corollary}

% % == Macros ==
% \input{macros}
% \newcommand{\TODO}[1]{{\marginpar{\color{gray}\textsf{[TODO]}} \color{gray}\textsf{[#1]}}}
% \newcommand{\NOTE}[1]{{\marginpar{\color{gray}\textsf{[NOTE]}} \color{gray}\textsf{[#1]}}}

% \begin{document}
% % \onehalfspacing

% % == Dummy sections ==

% \section{Introduction}
% \label{section: introduction}

% \newpage

% === COMMENT ABOVE BEFORE COMPILING MAIN FILE ===




\section{Causal orders}
\label{section:causal-orders}

In this Section we recap basic notions about causal orders that form the basis for spaces of input histories, as described in the next Section.
For a longer discussion of causal orders and their operations, we refer the reader to Section 2 of the companion work ``The Combinatorics of Causality'' \cite{gogioso2022combinatorics}.


\subsection{Causal Orders and Hasse Diagrams}
\label{subsection:causal-orders-intro}

\begin{definition}
A \emph{causal order} $\Omega$ is a preorder: a set $|\Omega|$ of events---finite, in this work---equipped with a symmetric transitive relation $\leq$, which we refer to as the \emph{causal relation}.
In cases where multiple cause orders are involved, we might also use the more explicit notation $\leq_{\Omega}$, to indicate that the relation is order-dependent.
\end{definition}

\begin{definition}
There are four possible ways in which two distinct events $\omega, \xi \in \Omega$ can relate to each other causally:
\begin{itemize}
\item $\omega$ \emph{causally precedes} $\xi$ if $\omega \leq \xi$ and $\xi \not \leq \omega$, which we write succinctly as $\omega \prec \xi$ (to distinguish it from $\omega < \xi$, meaning instead that $\omega \leq \xi$ and $\omega \neq \xi$)
\item $\omega$ \emph{causally succeeds} $\xi$ if $\xi \leq \omega$ and $\omega \not \leq \xi$, which we write succinctly as $\omega \succ \xi$ (to distinguish it from $\omega > \xi$, meaning instead that $\omega \geq \xi$ and $\omega \neq \xi$)
\item $\omega$ and $\xi$ are \emph{causally unrelated} if $\omega \not\leq \xi$ and $\xi \not \leq \omega$
\item $\omega$ and $\xi$ are in \emph{indefinite causal order} if $\omega \neq \xi$, $\omega \leq \xi$ and $\xi \leq \omega$, which we write succinctly as $\omega \simeq \xi$
\end{itemize}
We say that a causal order is \emph{definite} when the last case cannot occur, i.e. when $\leq$ is anti-symmetric ($\omega \leq \xi$ and $\omega \geq \xi$ together imply $\omega = \xi$); otherwise, we say that it is \emph{indefinite}.
A definite causal order is thus a \emph{partial order}, or \emph{poset}: in this case, $\omega\prec\xi$ is the same as $\omega<\xi$, and $\omega\succ\xi$ is the same as $\omega > \xi$.
\end{definition}

\begin{definition}
We say that two events $\omega, \xi$ are \emph{causally related} if they are not causally unrelated, i.e. if at least one of $\omega \leq \xi$ or $\omega \geq \xi$ holds.
We also define the \emph{causal past} $\downset{\omega}$ and \emph{causal future} $\upset{\omega}$ of an event $\omega \in \Omega$, as well as its \emph{causal equivalence class} $\causeqcls{\omega}$:
\begin{eqnarray}
    \downset{\omega} & := \suchthat{\xi \in \Omega}{\xi \leq \omega} \\
    \upset{\omega} & := \suchthat{\xi \in \Omega}{\xi \geq \omega} \\
    \causeqcls{\omega} & :=  \suchthat{\xi \in \Omega}{\xi \simeq \omega} = \downset{\omega} \cap\; \upset{\omega}
\end{eqnarray}
Note that the $\omega$ always lies in both its own causal future and its own causal past, but also that their intersection can comprise more events (if the order is indefinite).
\end{definition}

Our interpretation of causality is a "negative" one, as "no-signalling from the future": when $\omega$ causally precedes $\xi$, for example, we are not so much interested in the "possibility" of causal influence from $\omega$ to $\xi$ (because $\omega \leq \xi$) as we are in the "impossibility" of causal influence from $\xi$ to $\omega$ (because $\xi \not \leq \omega$).
This generalises the "spatial" no-signalling case, where one is interested in the statements $\omega \not\leq \xi$ and $\xi \not \leq \omega$.
Far from being merely an interpretation, such no-signalling approach to causality permeates the entirety of this work.

Definite causal orders have an equivalent presentation as directed acyclic graphs (DAGs), known as \emph{Hasse diagrams}: vertices in the graph correspond to events $\omega \in \Omega$, while edges $x \rightarrow y$ correspond to those causally related pairs $\omega \leq \xi$ with no intermediate event (i.e. where there is no $\zeta \in \Omega$ such that $\omega < \zeta < \xi$).
For example, below are the Hasse diagrams for three definite causal orders on three events \ev{A}, \ev{B} and \ev{C}.
\begin{center}
    \includegraphics[height=2.5cm]{svg-inkscape/total-ABC_svg-tex.pdf}
    \hspace{1.5cm}
    \includegraphics[height=2cm]{svg-inkscape/vee-A-BC_svg-tex.pdf}
    \hspace{1.5cm}
    \includegraphics[height=2cm]{svg-inkscape/wedge-AB-C_svg-tex.pdf}
\end{center}
Causal orders are naturally ordered by inclusion: $\Omega \leq \Xi$ if $|\Omega| \subseteq |\Xi|$ as sets and $\leq_{\Omega} \subseteq \leq_{\Xi}$ as relations (i.e. as subsets $\suchthat{(\omega, \omega')}{\omega \leq_\Omega \omega'} \subseteq |\Omega|^2$ and $\suchthat{(\xi, \xi')}{\xi \leq_\Xi \xi'} \subseteq |\Xi|^2$).
The requirement that $\leq_{\Omega} \subseteq \leq_{\Xi}$ explicitly means that for all $\omega, \omega' \in \Omega$ the constraint $\omega \not \leq_\Xi \omega'$ in $\Xi$ implies the constraint $\omega' \not \leq_\Omega \omega'$.
Put in different words:
\begin{itemize}
    \item If $\omega$ and $\omega'$ are causally unrelated in $\Xi$ , then they are causally unrelated in $\Omega$.
    \item If $\omega$ causally precedes $\omega'$ in $\Xi$, then it can either causally precede $\omega'$ in $\Omega$ or it can be causally unrelated to $\omega'$ in $\Omega$; it cannot causally succeed $\omega'$ or be in indefinite causal order with it.
    \item If $\omega$ and $\omega'$ are in indefinite causal order in $\Xi$, then their causal relationship in $\Omega$ is unconstrained: $\omega$ can causally precede $\omega'$, causally succeed it, be causally unrelated to it or be in indefinite causal order with it.
\end{itemize}
From a causal standpoint, $\Omega \leq \Xi$ means that $\Omega$ imposes on its own events at least the same causal constraints as $\Xi$, and possibly more.
In particular, if $\Xi$ is definite (no two events in indefinite causal order) then so is $\Omega$; conversely, if $\Omega$ is indefinite, then so is $\Xi$.

Causal orders on a given set of events form a finite lattice, which we refer to as the \emph{hierarchy of causal orders}.
The join and meet operations on this lattice are those described in the previous subsection, the indiscrete order is the unique maximum (all events in indefinite causal order, i.e. no causal constraints), while the discrete order is the unique minimum (all events are causally unrelated).
The hierarchy of causal orders on three events $\{\ev{A},\ev{B},\ev{C}\}$ is displayed by Figure \ref{fig:hierarchy-orders-3} (p.\pageref{fig:hierarchy-orders-3}), with definite causal order coloured red and indefinite ones coloured blue.

\begin{figure}[h]
    \centering
    \includegraphics[height=10cm]{svg-inkscape/hierarchy-orders-3_svg-tex.pdf}
    \caption{
    Hasse diagram for the hierarchy of causal orders on three events $\{\ev{A},\ev{B},\ev{C}\}$, left-to-right in inclusion order.
    See Figure 2 p.13 of ``The Combinatorics of Causality'' for full description.
    }
\label{fig:hierarchy-orders-3}
\end{figure}


\subsection{Lattice of Lowersets}
\label{subsection:causal-orders-lowersets}

As discussed in detail by Section \ref{section:spaces}, this work is concerned with a certain class of operational scenarios: blackbox devices are operated locally at events in spacetime, determining a probability distribution on their joint outputs conditional to their (freely chosen) joint inputs.
In such scenarios, causality constraints essentially state that the output at any subset of events cannot depend on inputs at events which causally succeed them or are causally unrelated to them.
Furthermore, the output at any event is only well-defined conditional to inputs for all events in its past: we are not interested in all sub-sets of events of a causal order, but rather in its lowersets.

The discussion above indicates that the object we seek to understand is not the causal order $\Omega$ itself, but rather its \emph{lattice of lowersets} $\Lsets{\Omega}$.
This is the subsets of events closed in the past, ordered by inclusion:
\begin{equation*}
    \Lsets{\Omega}
    :=
    \suchthat{U \subseteq \Omega}{\forall \omega \in U.\,\downset{\omega} \subseteq U}
\end{equation*}
In this case, being a lattice means that lowersets are closed under both intersection and union; we always omit the empty set from our Hasse diagrams, for clarity.

Inclusions between lowersets determine the causality constraints for the causal order: if $U, V \in \Lsets{\Omega}$ are such that $U \subseteq V$, then the output at events in $U$ cannot depend on the inputs at events in $V \backslash U$.
Consider the total order $\ev{A}\rightarrow\ev{B}\rightarrow\ev{C}$, and its associated lattice of lowersets: the inclusion $\{\ev{A},\ev{B}\} \subseteq \{\ev{A},\ev{B},\ev{C}\}$, for example, tells us that the outputs at events \ev{A} and \ev{B} cannot depend on the input at event \ev{C}; the inclusion $\{\ev{A}\} \subseteq \{\ev{A},\ev{B}\}$, additionally, tells us that the outputs at event \ev{A} cannot depend on the input at event \ev{B}.
\begin{center}
    \raisebox{1.40cm}{$\LsetsSym$}
    \raisebox{1.40cm}{$\left(\rule{0cm}{1.35cm}\right.$}
    \hspace{0.0cm}
    \raisebox{0.25cm}{
        \includegraphics[height=2.5cm]{svg-inkscape/total-ABC_svg-tex.pdf}
    }
    \hspace{0.0cm}
    \raisebox{1.40cm}{$\left.\rule{0cm}{1.35cm}\right)$}
    \hspace{0.75cm}
    \raisebox{1.40cm}{$=$}
    \hspace{0.5cm}
    \includegraphics[height=3cm]{svg-inkscape/total-ABC-lsets_svg-tex.pdf}
\end{center}
Below is a more complicated example, for the diamond order: the inclusion $\{\ev{A},\ev{B}\} \subseteq \{\ev{A},\ev{B},\ev{C},\ev{D}\}$, for example, tells us that the outputs at events \ev{A} and \ev{B} cannot depend on the input at events \ev{C} and \ev{D}.
\begin{center}
    \raisebox{2.4cm}{$\LsetsSym$}
    \raisebox{2.4cm}{$\left(\rule{0cm}{1.35cm}\right.$}
    \hspace{0.0cm}
    \raisebox{1.25cm}{
        \includegraphics[height=2.5cm]{svg-inkscape/diamond-ABCD_svg-tex.pdf}
    }
    \hspace{0.0cm}
    \raisebox{2.4cm}{$\left.\rule{0cm}{1.35cm}\right)$}
    \hspace{0.75cm}
    \raisebox{2.4cm}{$=$}
    \hspace{0.5cm}
    \includegraphics[height=5cm]{svg-inkscape/diamond-ABCD-lsets_svg-tex.pdf}
\end{center}
Here, we note for the first time how lowersets are more general than downsets: we have $\downset{\ev{A}}=\{\ev{A}\}$, $\downset{\ev{B}}=\{\ev{A},\ev{B}\}$, $\downset{\ev{C}}=\{\ev{A},\ev{C}\}$ and $\downset{\ev{D}}=\{\ev{A},\ev{B},\ev{C},\ev{D}\}$, but lowerset $\{\ev{A},\ev{B},\ev{C}\}$ does not originate from any individual event.
Hence, lowersets strictly generalise the notion of causal past from individual events to arbitrary subsets of events:
\[
\{\ev{A},\ev{B},\ev{C}\}
=
\downset{\ev{B}} \cup \downset{\ev{C}}
=
\downset{\{\ev{B},\ev{C}\}}
\]
When the causal order is indefinite, lowersets cannot split causal equivalence classes: either no event from the class is in the lowerset, or all events are.
We can see this in the lattice of lowersets for the indefinite causal order $\ev{A}\rightarrow\{\ev{B},\ev{C}\}\rightarrow\ev{D}$, where events $\{\ev{B},\ev{C}\}$ form a causal equivalence class.
\begin{center}
    \raisebox{1.40cm}{$\LsetsSym$}
    \raisebox{1.40cm}{$\left(\rule{0cm}{1.35cm}\right.$}
    \hspace{0.0cm}
    \raisebox{0.25cm}{
        \includegraphics[height=2.5cm]{svg-inkscape/total-AZBCZD_svg-tex.pdf}
    }
    \hspace{0.0cm}
    \raisebox{1.40cm}{$\left.\rule{0cm}{1.35cm}\right)$}
    \hspace{0.75cm}
    \raisebox{1.40cm}{$=$}
    \hspace{0.5cm}
    \includegraphics[height=3cm]{svg-inkscape/total-AZBCZD-lsets_svg-tex.pdf}
\end{center}
The hierarchy of causal orders is contravariantly related to the hierarchy formed by the corresponding lowersets under inclusion:
\begin{equation*}
    \Omega \leq \Omega'
    \;\Leftrightarrow\;
    \Lsets{\Omega}\supseteq\Lsets{\Omega'}
\end{equation*}
The lowersets of a join of causal orders are exactly the lowersets common to both, while the lowersets of a meet of causal orders contain at least the lowersets of the two orders:
\begin{equation*}
\begin{array}{rcl}
    \Lsets{\Omega}\cap\Lsets{\Omega'} &=& \Lsets{\Omega \vee \Omega'}\\
    \Lsets{\Omega}\cup\Lsets{\Omega'} &\subseteq& \Lsets{\Omega \wedge \Omega'}
\end{array}
\end{equation*}
The inclusion above for the meet of causal orders cannot be strengthened to an equality: in general, the union of lowersets on the left hand side is not a lattice.

% === COMMENT BELOW BEFORE COMPILING MAIN FILE ===

% \newpage

% % == Dummy sections ==

% \section{Spaces of input histories}
% \label{section:spaces}

% % == Dummy biblio ==

% \bibliographystyle{unsrt}
% \bibliography{biblio}

% \end{document}
