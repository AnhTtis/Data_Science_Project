\def\r{0.6} %radius of the 1st internal vertex
\def\rB{0.8} %radius of the 2nd internal vertex
\def\rC{0.5} %radius of the 3rd internal vertex
\def\extl(#1, #2){\fill (#1, #2) circle (0.05); \fill[opacity = 0.3, blue] (#1, #2) circle (0.1);  } %external vertex to the left (x,y)
\def\extr(#1, #2){\fill (#1, #2) circle (0.05); \fill[opacity = 0.3, green!50!black] (#1, #2) circle (0.1);  } %external vertex to the right (x,y)
\def\conn(#1, #2, #3, #4){({#4*cos(#1) + #2},{#4*sin(#1) + #3}) --  ({(#4+0.2)*cos(#1) + #2},{(#4+0.2)*sin(#1) + #3})} %connector (phi, x, y, r)
\def\connp(#1, #2, #3, #4, #5){({ #4*cos(#1) + #2},{#4*sin(#1) + #3}) } %connector point (phi, x, y, r, dummy) (The dummy index is necessary to counteract a bug which does not allow to plug (\r+0.2) into the last coordinate of a function
\def\connt(#1, #2, #3, #4, #5){({#4*cos(#1) + #2},{#4*sin(#1) + #3}) .. controls  ({(#4+#5)*cos(#1) + #2},{(#4+#5)*sin(#1) + #3}) and} %connector trace point (phi, x, y, r, delta r)
\def\connte(#1, #2, #3, #4, #5){ ({(#4+#5)*cos(#1) + #2},{(#4+#5)*sin(#1) + #3}) .. ({#4*cos(#1) + #2},{#4*sin(#1) + #3}) } %entering connector trace point (phi, x, y, r, delta r)
\begin{tikzpicture}
\useasboundingbox (-2,-1.2) rectangle (4.5,1.2);


%external legs
\draw[thick] \connt(130, 0, 0, (\r+0.2), 0.3) ++(0.2,0) .. (-1.2,1); \extl(-1.2, 1)
\draw[thick] \connt(150, 0, 0, (\r+0.2), 0.3) ++(0.2,0) .. (-1.2,0.6); \extl(-1.2, 0.6)
\draw[thick] \connt(170, 0, 0, (\r+0.2), 0.3) ++(0.2,0) .. (-1.2,0.2); \extl(-1.2, 0.2)
\draw[thick] \connt(190, 0, 0, (\r+0.2), 0.3) ++(0.2,0) .. (-1.2,-0.2); \extl(-1.2, -0.2)
\draw[thick] \connt(210, 0, 0, (\r+0.2), 0.3) ++(0.2,0) .. (-1.2,-0.6); \extl(-1.2, -0.6)
\draw[thick] \connt(190, 2.5, 0, (\r+0.2), 0.3) ++(1,0) .. (0,-1) -- (-1.2,-1); \extl(-1.2, -1.0)

\draw[thick] \connt(-10, 0, 0, (\r+0.2), 0.3) ++(-1,0) .. (2,1) -- (3.7,1); \extr(3.7, 1)
\draw[thick] \connt(-50, 0, 0, (\r+0.2), 0.8) ++(-1,0) .. (2,0.7) -- (3.7,0.7); \extr(3.7, 0.7)
\draw[thick] \connt(10, 2.5, 0, (\r+0.2), 0.3) ++(-0.2,0) .. (3.7,0.2); \extr(3.7, 0.2)
\draw[thick] \connt(-10, 2.5, 0, (\r+0.2), 0.3) ++(-0.2,0) .. (3.7,-0.2); \extr(3.7, -0.2)
\draw[thick] \connt(-30, 2.5, 0, (\r+0.2), 0.3) ++(-0.2,0) .. (3.7,-0.6); \extr(3.7, -0.6)
\draw[thick] \connt(-50, 2.5, 0, (\r+0.2), 0.3) ++(-0.2,0) .. (3.7,-1); \extr(3.7, -1)


%contractions
\draw[red, opacity = .8, line width = 1] \connt(50, 0, 0, (\r+0.2), 0.5) \connte(230, 2.5, 0, (\r+0.2), 0.5);
\draw[red, opacity = .8, line width = 1] \connt(-30, 0, 0, (\r+0.2), 0.5) \connte(210, 2.5, 0, (\r+0.2), 0.5);
\draw[red, opacity = .8, line width = 1] \connt(30, 0, 0, (\r+0.2), 0.5) \connte(170, 2.5, 0, (\r+0.2), 0.5);
\draw[red, opacity = .8, line width = 1, dashed] \connt(10, 0, 0, (\r+0.2), 0.5) \connte(150, 2.5, 0, (\r+0.2), 0.5);


%internal vertex 1
\filldraw[fill = yellow!50!white, thick] (0,0) circle (\r) node{$A$} ;

\draw[line width = 2, red!50!blue] \conn(130, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(150, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(170, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(190, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(210, 0, 0, \r);

\draw[line width = 2, red!50!blue] \conn(50, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(30, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(10, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-10, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-30, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-50, 0, 0, \r);

%internal vertex 2
\filldraw[fill = yellow!50!white, thick] (2.5,0) circle (\r) node{$B$} ;

\draw[line width = 2, red!50!blue] \conn(150, 2.5, 0, \r);
\draw[line width = 2, red!50!blue] \conn(170, 2.5, 0, \r);
\draw[line width = 2, red!50!blue] \conn(190, 2.5, 0, \r);
\draw[line width = 2, red!50!blue] \conn(210, 2.5, 0, \r);
\draw[line width = 2, red!50!blue] \conn(230, 2.5, 0, \r);

\draw[line width = 2, red!50!blue] \conn(10, 2.5, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-10, 2.5, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-30, 2.5, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-50, 2.5, 0, \r);


%annotations
\draw[red!50!blue, line width = 1] \connp(10, 0, 0, \r, 0) circle (0.1);
\draw[red!50!blue] (0.5,0.14) -- ++(-0.4,0.6) node[anchor = south] {\scriptsize $ (A, k) $};
\draw[red!50!blue, line width = 1] \connp(150, 2.5, 0, \r, 0) circle (0.1);
\draw[red!50!blue] (2.06,0.24) -- ++(0.3,-1) node[anchor = north] {\scriptsize $ (B, n_B) $};
\node[red!50!blue] at (-0.2,-0.8) {\scriptsize 3 swaps};
\draw[red!50!blue, line width = 1, ->] (0.45,0.05) .. controls ++(-0.2,-0.1) and ++(-0.1,0.2) .. (0.34,-0.36);
\end{tikzpicture}