\def\r{0.6} %radius of the 1st internal vertex
\def\rB{0.8} %radius of the 2nd internal vertex
\def\rC{0.5} %radius of the 3rd internal vertex
\def\rG{1} %radius of the big G-vertex
\def\xGA{8} %x-position of the 1st external vertix row of G
\def\xGB{12} %x-position of the 2nd external vertix row of G
\def\extl(#1, #2){\fill (#1, #2) circle (0.05); \fill[opacity = 0.3, blue] (#1, #2) circle (0.1);  } %external vertex to the left (x,y)
\def\extr(#1, #2){\fill (#1, #2) circle (0.05); \fill[opacity = 0.3, green!50!black] (#1, #2) circle (0.1);  } %external vertex to the right (x,y)
\def\conn(#1, #2, #3, #4){({#4*cos(#1) + #2},{#4*sin(#1) + #3}) --  ({(#4+0.2)*cos(#1) + #2},{(#4+0.2)*sin(#1) + #3})} %connector (phi, x, y, r)
\def\connt(#1, #2, #3, #4, #5){({#4*cos(#1) + #2},{#4*sin(#1) + #3}) .. controls  ({(#4+#5)*cos(#1) + #2},{(#4+#5)*sin(#1) + #3}) and} %connector trace point (phi, x, y, r, delta r)
\def\connte(#1, #2, #3, #4, #5){ ({(#4+#5)*cos(#1) + #2},{(#4+#5)*sin(#1) + #3}) .. ({#4*cos(#1) + #2},{#4*sin(#1) + #3}) } %entering connector trace point (phi, x, y, r, delta r)
\begin{tikzpicture}
\useasboundingbox (-2.2,-2.6) rectangle (15,1.2);


%external legs
\draw[thick] \connt(140, 2.5, -0.5, (\rB+0.2), 0.8) ++(1,0) .. (0,0.8) -- (-1.5,0.8) node[blue, anchor = east]{\footnotesize $ a^*_{2, 5} $}; \extl(-1.5, 0.8)
\draw[thick] \connt(160, 0, 0, (\r+0.2), 0.3) ++(0.5,0) .. (-1.5,0.4) node[blue, anchor = east]{\footnotesize $ a^*_{1, 4} $}; \extl(-1.5, 0.4)
\draw[thick] \connt(180, 0, 0, (\r+0.2), 0.3) ++(0.5,0) .. (-1.5,0.0) node[blue, anchor = east]{\footnotesize $ a^*_{1, 3} $}; \extl(-1.5, 0)
\draw[thick] \connt(120, 1, -2, (\rC+0.2), 0.8) ++(0.5,0) .. (-1.2,-0.8) -- (-1.5,-0.8) node[blue, anchor = east]{\footnotesize $ a^*_{3, 3} $}; \extl(-1.5, -0.8)
\draw[thick] \connt(150, 1, -2, (\rC+0.2), 0.8) ++(0.5,0) .. (-1, -1.2) -- (-1.5,-1.2) node[blue, anchor = east]{\footnotesize $ a^*_{3, 2} $}; \extl(-1.5, -1.2)
\draw[thick] \connt(220, 0, 0, (\r+0.2)), 0.8) ++(1,0) .. (-1.5,-1.6) node[blue, anchor = east]{\footnotesize $ a^*_{1, 1} $}; \extl(-1.5, -1.6)
\draw[thick] \connt(180, 1, -2, (\rC+0.2), 0.3) ++(0.5,0) .. (-1.5,-2) node[blue, anchor = east]{\footnotesize $ a^*_{3, 1} $}; \extl(-1.5, -2)

\draw[thick] \connt(40, 2.5, -0.5, (\r+0.2), 0.3) ++(-0.5,0) .. (4,0.4) -- (4.3,0.4) node[green!50!black, anchor = west]{\footnotesize $ a_{2, 1} $} ; \extr(4.3, 0.4)
\draw[thick] \connt(20, 2.5, -0.5, (\r+0.2), 0.3) ++(-0.3,0) .. (4.1,0) -- (4.3,0) node[green!50!black, anchor = west]{\footnotesize $ a_{2, 2} $}; \extr(4.3, 0)
\draw[thick] \connt(0, 1, -2, (\rC+0.2), 2) ++(-0.5,0) .. (4.2,-0.8) -- (4.3,-0.8) node[green!50!black, anchor = west]{\footnotesize $ a_{3, 2} $}; \extr(4.3, -0.8)
\draw[thick] \connt(-20, 2.5, -0.5, (\rB+0.2), 0.3) ++(-0.5,0) .. (4.2,-1.2) -- (4.3,-1.2) node[green!50!black, anchor = west]{\footnotesize $ a_{2, 3} $}; \extr(4.3, -1.2)


%contractions
\draw[red, opacity = .8, line width = 1] \connt(200, 0, 0, (\r+0.2), 1.8) \connte(-40, 2.5, -0.5, (\rB+0.2), 1.5);
\draw[red, opacity = .8, line width = 1] \connt(0, 0, 0, (\r+0.2), 1) \connte(220, 2.5, -0.5, (\rB+0.2), 1);
\draw[red, opacity = .8, line width = 1] \connt(-20, 0, 0, (\r+0.2), 0.3) \connte(160, 2.5, -0.5, (\rB+0.2), 0.3);
\draw[red, opacity = .8, line width = 1] \connt(-40, 0, 0, (\r+0.2), 0.3) \connte(180, 2.5, -0.5, (\rB+0.2), 0.3);
\draw[red, opacity = .8, line width = 1] \connt(40, 1, -2, (\rC+0.2), 0.3) \connte(200, 2.5, -0.5, (\rB+0.2), 0.3);

\draw[rounded corners = 30, dashed, thick, red!50!blue] (-1.2,-2.6) rectangle (4,1);

%internal vertex 1
\filldraw[fill = yellow!50!white, thick] (0,0) circle (\r) node{$A_1$} ;

\draw[line width = 2, red!50!blue] \conn(160, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(180, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(200, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(220, 0, 0, \r);

\draw[line width = 2, red!50!blue] \conn(0, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-20, 0, 0, \r);
\draw[line width = 2, red!50!blue] \conn(-40, 0, 0, \r);


%internal vertex 2
\filldraw[fill = yellow!50!white, thick] (2.5,-0.5) circle (\rB) node{$A_2$} ;

\draw[line width = 2, red!50!blue] \conn(140, 2.5, -0.5, \rB);
\draw[line width = 2, red!50!blue] \conn(160, 2.5, -0.5, \rB);
\draw[line width = 2, red!50!blue] \conn(180, 2.5, -0.5, \rB);
\draw[line width = 2, red!50!blue] \conn(200, 2.5, -0.5, \rB);
\draw[line width = 2, red!50!blue] \conn(220, 2.5, -0.5, \rB);

\draw[line width = 2, red!50!blue] \conn(40, 2.5, -0.5, \rB);
\draw[line width = 2, red!50!blue] \conn(20, 2.5, -0.5, \rB);
\draw[line width = 2, red!50!blue] \conn(-20, 2.5, -0.5, \rB);
\draw[line width = 2, red!50!blue] \conn(-40, 2.5, -0.5, \rB);


%internal vertex 3
\filldraw[fill = yellow!50!white, thick] (1,-2) circle (\rC) node{$A_3$} ;

\draw[line width = 2, red!50!blue] \conn(120, 1, -2, \rC);
\draw[line width = 2, red!50!blue] \conn(150, 1, -2, \rC);
\draw[line width = 2, red!50!blue] \conn(180, 1, -2, \rC);

\draw[line width = 2, red!50!blue] \conn(40, 1, -2, \rC);
\draw[line width = 2, red!50!blue] \conn(0, 1, -2, \rC);


\draw[->, line width = 3, red!50!blue] (5.5, -0.8) -- ++(1.3,0);
\node[red!50!blue] at (3.8,1) {$ G $};


%external legs2
\draw[thick] \connt(120, 10, -0.8, (\rG+0.2), 0.3) ++(0.5,0) .. (8.2,0.8) -- (\xGA,0.8) node[blue, anchor = east]{\footnotesize $ a^*_{G, 7} $}; \extl(\xGA, 0.8)
\draw[thick] \connt(135, 10, -0.8, (\rG+0.2), 0.3) ++(0.5,0) .. (\xGA,0.4) node[blue, anchor = east]{\footnotesize $ a^*_{G, 6} $}; \extl(\xGA, 0.4)
\draw[thick] \connt(150, 10, -0.8, (\rG+0.2), 0.3) ++(0.5,0) .. (\xGA,0.0) node[blue, anchor = east]{\footnotesize $ a^*_{G, 5} $}; \extl(\xGA, 0)
\draw[thick] \connt(180, 10, -0.8, (\rG+0.2), 0.3) ++(0.5,0) .. (8.2,-0.8) -- (\xGA,-0.8) node[blue, anchor = east]{\footnotesize $ a^*_{G, 4} $}; \extl(\xGA, -0.8)
\draw[thick] \connt(195, 10, -0.8, (\rG+0.2), 0.3) ++(0.5,0) .. (8.2, -1.2) -- (\xGA,-1.2) node[blue, anchor = east]{\footnotesize $ a^*_{G, 3} $}; \extl(\xGA, -1.2)
\draw[thick] \connt(210, 10, -0.8, (\rG+0.2)), 0.3) ++(0.5,0) .. (8.2, -1.6) --(\xGA,-1.6) node[blue, anchor = east]{\footnotesize $ a^*_{G, 2} $}; \extl(\xGA, -1.6)
\draw[thick] \connt(225, 10, -0.8, (\rG+0.2), 0.3) ++(0.5,0) .. (8.2, -2) --(\xGA,-2) node[blue, anchor = east]{\footnotesize $ a^*_{G, 1} $}; \extl(\xGA, -2)

\draw[thick] \connt(40, 10, -0.8, (\rG+0.2), 0.3) ++(-0.5,0) .. (11.8,0.4) -- (\xGB,0.4) node[green!50!black, anchor = west]{\footnotesize $ a_{G, 1} $} ; \extr(\xGB, 0.4)
\draw[thick] \connt(25, 10, -0.8, (\rG+0.2), 0.3) ++(-0.5,0) .. (11.8,0) -- (\xGB,0) node[green!50!black, anchor = west]{\footnotesize $ a_{G, 2} $}; \extr(\xGB, 0)
\draw[thick] \connt(0, 10, -0.8, (\rG+0.2), 0.3) ++(-0.5,0) .. (11.8,-0.8) -- (\xGB,-0.8) node[green!50!black, anchor = west]{\footnotesize $ a_{G, 3} $}; \extr(\xGB, -0.8)
\draw[thick] \connt(-15, 10, -0.8, (\rG+0.2), 0.3) ++(-0.5,0) .. (11.8,-1.2) -- (\xGB,-1.2) node[green!50!black, anchor = west]{\footnotesize $ a_{G, 4} $}; \extr(\xGB, -1.2)


%big G-vertex
\filldraw[fill = yellow!50!white, thick] (10,-0.8) circle (\rG) node{$G$} ;

\draw[line width = 2, red!50!blue] \conn(120, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(135, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(150, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(180, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(195, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(210, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(225, 10, -0.8, \rG);

\draw[line width = 2, red!50!blue] \conn(40, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(25, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(0, 10, -0.8, \rG);
\draw[line width = 2, red!50!blue] \conn(-15, 10, -0.8, \rG);


\end{tikzpicture}