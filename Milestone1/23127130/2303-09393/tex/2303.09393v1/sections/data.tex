% %\subsection{Data Collection}
% \begin{table*}[ht!]
% \resizebox{0.98\textwidth}{!}{
% \centering
% %\label{t2}
% \begin{tabular}{c|c|c|l|l}
% %\noalign{\smallskip}\noalign{\smallskip}
% \hline
% Contract & Method ID & Method Name & Description & Information \\
% \hline
% ERC-721 & 0xddf252ad &  \textit{transfer} & transfer of NFT standard & sender, receiver, contract address, token ID \\
% % ERC-1155 & 0xc3d58168c &  \textit{transfer\_single} & single transfer of multi token standard & sender, receiver, contract address, token ID and value \\
% % ERC-1155 & 0x4a39dc06 &  \textit{transfer\_batch} & multiple transfer of multi token standard & sender, receiver, contract address, token ID and value  \\
% CryptoPunks & 0x58e5d5a5 &  \textit{punk\_bought} & CryptoPunks token sale & sender, receiver, token ID, \textit{price} \\
% CryptoPunks & 0x05af636b &  \textit{punk\_transfer} & CryptoPunks token transfer & sender, receiver, token ID \\
% OpenSea & 0xc4109843e & \textit{orders\_matched} & NFT transaction log recorded by OpenSea & sender, receiver, \textit{price}  \\ 
% \hline
% \end{tabular}
% }
% \vspace{0.3cm}
% \caption{List of event logs related to NFT transfer}
% \label{t:event_log}
% \end{table*}




% Public blockchain is permissionless in nature, allowing anyone to participate. In Ethereum, there are two types of transactions: \textit{external} and \textit{internal} transactions. External transactions are initiated by external accounts. Transaction information such as receiver’s and sender’s addresses and transferred amount in ETH is recorded in the blockchain and readily available to anyone for reference (e.g., \textit{etherscan.io}).
In Ethereum, there are two types of transactions: \textit{external} and \textit{internal} transactions. 
Ether (ETH) transfers between users is recorded as external transactions.
External transactions have information such as receiver’s and sender’s addresses and transferred amount in ETH is recorded in the blockchain and readily available to anyone for reference.

On the other hand, transferring tokens, such as NFTs or fungible tokens, is a type of an internal transaction, which is not stored on the blockchain.
Instead, we can use the \textit{token transfer log}, which is recorded by token contracts when token transferring occurs. 
By collecting transfer logs from NFT contracts, we can trace how NFT transactions work in the NFT ecosystem.

We collect external transactions and token transfer logs from the Ethereum blockchain to track NFT ownership changes and subsequent payments. More details can be found in Section~\ref{sec:NFT_tx_collect}. 

% On the other hand, internal transactions are results of preceding transactions like byproducts of smart contract functionality, and they are not recorded.
% In this case, the transaction only records the truth that a message sender made a call on smart contract functionality, and not detailed behaviors of what the contract did. 
% Unfortunately, NFT functionalities are implemented in the manner of smart contracts, making it infeasible for the extraction of information on NFT transactions through simple referencing of transaction data.
% Instead, we can use the \textit{event logs}, which are the result of LOG opcodes being executed in the EVM (Ethereum Virtual Machine) to gain a clear view of smart contract behaviors. Commonly, smart contracts record their activities as event logs, and NFT contracts are not exceptions.
% For instance, when there is an ownership change for an NFT item, the details about the transmission such as owner address and token identifier are recorded as an event log. By collecting such events from NFT contracts, we can trace how NFT transactions are working in the NFT ecosystem.
% The transfer log, which is a type of the event log, explains how many NFTs are transferred and who sends the tokens to whom consisting of a number of entities. 
% From the transfer log, we can extract information of ownership change for an NFT item, including the token contract address, the sender’s and receiver’s accounts, and transferred token number.
% A transfer log from one of the most popular NFT projects is described in Listing \ref{l:transfer_log} as an example.
% Diving into the specifics of each of the log entities, the ‘address’ indicates the token contract address to launch the transfer. ‘Topics’ refers to a combination of four entities including the sender’s and receiver’s accounts and transferred token number. According to the NFT standard, one NFT is transferred at a time.

% Most NFT buyers make payments in ETH or using several fungible tokens. However, the actual transaction price for an NFT sale is not included in a NFT transfer log. To figure out the transaction price for NFT sales, it is necessary to refer to additional data. 
% More specifically, when the NFT buyer pays in ETH, the payment of sales is recorded in the external transaction. 
% If the buyer paid in fungible tokens, a transfer log of fungible token explains how much tokens are transferred as payment for the NFT sales. 
% Thus, if the transfer value of a transaction lists a value greater than 0 ETH, we consider the amount of transferred ETH as the actual price of NFT sales. If not, we look up transfer logs from any of fungible tokens transferred from an NFT buyer, and take the amount of transferred fungible tokens as the transaction price of NFT sales. Lastly, if there are no cryptocurrency payments from an NFT buyer for NFT transaction, the transaction is considered to just a transfer, not sale.


For the NFT ecosystem, 2021 marks the first year when the market began to grow rapidly with public attention~\cite{nft_boom1}, with NFT trading volumes showing an increase of 21,000\% from 2020~\cite{nft_boom2}. 
As a result, we focus on data with \texttt{block\_timestamp} from the first day of 2021 to February 28, 2022 (14 months). 
% As a result, although our collected data starts from 2017, which account for 8\%, we focus on data with \texttt{block\_timestamp} from the first day of 2021 to February 28, 2022 (14 months). 
During this collection period, we obtain 3,838,587 transactions for over a million NFT items in total. Also, the unique number of accounts participating in a transaction at least once is 430.2K. Our data collection is summarized in Table~\ref{t:data_collection}.


\input{table/summary1}



% table
% \begin{table}[ht!]
% \centering
% \begin{tabular}{c|c}
% %\noalign{\smallskip}\noalign{\smallskip}
% \hline%\hline
% Type & Count \\
% \hline
% Transactions & 3,838,587  \\  % 3,838,587 or 3,765,926, what's correct?
% ERC-721 Tokens & 1,129,696 \\
% ERC-1155 Tokens & 257,655 (w/ 6,613 \textit{token\_id}s)\\
% Accounts & 430,227 \\
% \hline%\hline
% \end{tabular}
% \vspace{0.3cm}
% \caption{Summary of data collection}
% \label{t:data_collection}
% \end{table}

% \begin{table}[ht!]
%     \centering
%     \begin{tabular}{c|ccc}
%     \toprule
%     Type & \multicolumn{3}{c}{Count}\\
%     \midrule
%         Transaction & \multicolumn{3}{c}{3,838,587}  \\
%         NFT &  \multicolumn{3}{c}{1,129,696}\\
%         \midrule
%         \multirow{3}{*}{Account} &  \multicolumn{2}{c}{Total} &  430,227\\
%         \cmidrule{2-4}
%         &whale & dolphin & minnow \\
%         & 430 & 42,593 & 387,204 \\

%         \bottomrule
%     \end{tabular}
%     \caption{Caption}
%     \label{tab:my_label}
% \end{table}



% \begin{table}[ht!]
% \centering
% \begin{tabular}{c|cccc}
% %\noalign{\smallskip}\noalign{\smallskip}
% \toprule
% \textbf{Type} & Transaction & NFT  & Account \\
% \midrule
% \textbf{Count} & 3,838,587  & 1,129,696  & 430,227 \\
% %  (w/ 6,613 \textit{token\_id}s)\\
% \bottomrule
% \end{tabular}
% \vspace{0.3cm}
% \caption{Summary of data collection}
% \label{t:data_collection}
% \end{table}

% \begin{table}[ht!]
% \centering
% \label{t2}
% %\resizebox{0.45\textwidth}{!}{
% \begin{tabular}{c|c|c|c|c}
% %\noalign{\smallskip}\noalign{\smallskip}
% \toprule
% \textbf{Group} & Whale & Dolphin & Minnow & Total \\
% \midrule
% \textbf{\# Traders} & 430 & 42,593 & 387,204 & 430,277\\
% \bottomrule
% \end{tabular}
% %}
% \vspace{0.3cm}
% \centering
% \caption{Number of traders in each group (February, 2022). Additional information for each month is shown in Table \ref{t:num_of_trader} of the Appendix}
% \label{t:group_num}
% \end{table}

% can't understand below
%Therefore, we filter out logs with \textit{token\_price} larger than collection's threshold. Threshold value of each collection is obtained by referring to the maximum price of a collection from NFTgo \cite{}\cmt{(Specify why this method is valid to estimate NFT price. I can't buy it without reasonable explanations. What did you exactly use NFTgo data?)}. \sh{The NFT price in transaction log is calculated in USD at the time of each transaction.} Then, we refer to cryptocurrency market \cite{} and convert the collection token price to USD at the time of \textit{block\_timestamp} day's closing price. By this way, we unify the \textit{token\_price} of all transaction logs to USD. 


% How to distinguish sale and transfer is briefly described before.
% Full explanation of it is minuses(maybe...)
%We then divide the transactions into their categories. There can be 6 types of transactions a trader can perform: \textit{mint, buy, sell, receive, send} and \textit{burn}.
%Here, \textit{buy/sell} and \textit{receive/send} are types of \textit{sale} and \textit{transfer}, respectively. From transaction logs, we divide the transaction into \textit{sale} and \textit{transfer} depending on whether the transaction involves actual payment or not. Meanwhile, when a token in minted or burned, they are sent from/to a verifiably un-spendable address (usually NULL address or 0xdead). Therefore, we were able to find \textit{mint/burn} activity from the transaction logs. 











% ================================ do not need anymore ============================
% ================================ do not need anymore ============================
% ================================ do not need anymore ============================
% ================================ do not need anymore ============================


% 원장으로 데이터 모은 부분 설명
%Our data is consisted of NFT transaction logs of 14 months, from January 1, 2021 to February 28, 2022. We refer to NFTGo \cite{}, an NFT analytics platform where the rank of collection is decided by its market cap. Finally, we obtain 3,838,587 transaction logs with 11 attributes. Each attribute is shown in Table 1 with detailed description.
%\noindent{\bf Data Collection.} 
%\cmt{(Is the goal of data collection to collect 'transfer log' and 'price in NFT trades'? )}
%To understand the characteristics and behaviors of major players in NFT ecosystem, we have collected NFT transaction data, including diverse trading information of NFT, from January 1, 2021 to February 28, 2022 (14 months). \cmt{(1. specify what transaction log is and what kinds of information it has. Isn't it 'event log? 2. more clearly state the event log including figure. What are the differences between 'crypto transaction' and 'event log'. If necessary, please put referneces for event log.')} During this collection period, we obtain 3,838,587 NFT transaction logs with 11 attributes; each attribute is shown in Table \ref{t:transaction_log} with detailed descriptions.
%\cmt{(3. Clearly describe data itself. Are All 11 attributes formatted in transaction log?, If not brefely mention how to get such information from transaction log, 4. The purpose of data pre-processing such as 'filtering', 'cleansing', and etc.)}


\begin{comment}


%\cmt{(out of scope~\cite{chen2019tokenscope}, we don't need to collect traces. Believe logs recorded by contracts.)}

% In addition, we leverage third-party site, NFTGo \cite{}, to extract major players in NFT. 
\begin{table}[ht!]
\resizebox{0.45\textwidth}{!}{
\centering
\begin{tabular}{c|c}
%\noalign{\smallskip}\noalign{\smallskip}
\hline
Attribute & Description\\
\hline
\textit{transaction\_hash} & unique identifier of a transaction \\
\textit{method\_id} & hash of contract method name and parameters \\
\textit{block\_timestamp} & block timestamp has a transaction \\
\textit{from\_addr} & address of token sender \\
\textit{to\_addr} & address of token receiver \\
\textit{token\_contract} & address of token contract \\ 
%& address of smart contract that manages transactions within a collection
\textit{token\_id} & unique identifier of transferred token \\
\textit{token\_price} & price of token in \textit{price\_type}\\
\textit{price\_type} & payment method for a transaction \\
\textit{token\_type} & token standard (ERC-721 or ERC-1155)\\
\textit{token\_count} & number of tokens traded\\
\hline
\end{tabular}
}
\vspace{0.3cm}
\caption{Attributes of token transfer data}
\label{t:transaction_log}
\end{table}





%\noindent{\bf Data Pre-Processing.} 
%\subsection{Data Pre-Processing} 
%\cmt{(1. Considering move this paragraph to the first or second paragraph of this section. This is not preprocessing, but just describe the data collection period. 2. Specify the purpose of data pre-processing. What are the goals of this section? I think you want to describe methods of 'price estimation', which is not explicitly exposed in transaction log, and 'classifying NFT transaction' in each transaction type. Before describe details of methods, be specify the goals of this section first.)}
%2021 was the first year when the market began to grow rapidly with public attention\cite{nft_boom1}, and NFT trading volume shows an increase of 21,000\% from 2020 \cite{nft_boom2}. For this reason, although our collected data starts from 2017, which account for 8\%, we focus on data with \textit{block\_timestamp} from the first day of 2021. For longitudinal analysis, we use only 91 of the top 100 collections of which the number of transactions in each collection in the last year is more than 70\% of that provided by NFTGo \cite{}. \cmt{(I don't understand this sentence. Do we consider only popular NFT projects which might have appropriate market values? Why only covering 70\% of NFT collections in NFTGo? Other 30\% is meaningless in our analysis? If yes, why?)}


% Filtering

%\textit{Price type:} 
\cmt{(Can't we extract NFT price from the collected data directly? If yes, describe more clear challenge of that and high-level idea of.)}
\noindent{\bf Price Type.} Although our data is only consisted of transaction logs with ETH or WETH \textit{price\_type}, there are some logs with other \textit{price\_type} due to usage of collection tokens. \cmt{(This sentence means that we only collect event logs including ETH or WETH?.)} 
%이부분은 자세히... 
Therefore, we filter out logs with \textit{token\_price} larger than collection's threshold. Threshold value of each collection is obtained by referring to the maximum price of a collection from NFTgo~\cite{nftgo}\cmt{(Specify why this method is valid to estimate NFT price. I can't buy it without reasonable explanations. What did you exactly use NFTgo data?)}. \sh{The NFT price in transaction log is calculated in USD at the time of each transaction.} Then, we refer to cryptocurrency market \cite{} and convert the collection token price to USD at the time of \textit{block\_timestamp} day's closing price. By this way, we unify the \textit{token\_price} of all transaction logs to USD. 

% Dividing the type
%\textit{Transaction type:} 
\noindent{\bf Transaction Type.} We then divide the transactions into their categories. There can be 6 types of transactions a trader can perform: \textit{mint, buy, sell, receive, send} and \textit{burn}.
Here, \textit{buy/sell} and \textit{receive/send} are types of \textit{sale} and \textit{transfer}, respectively. From transaction logs, we divide the transaction into \textit{sale} and \textit{transfer} depending on whether the transaction involves actual payment or not \cmt{(How to know whether the price is in each transaction or not, payment of transffered NFTs. How to distinguish sale and transfer exactly?)}. Meanwhile, when a token in minted or burned, they are sent from/to a verifiably un-spendable address (usually NULL address or 0xdead). Therefore, we were able to find \textit{mint/burn} activity from the transaction logs. 

% Holding value & Profit
%\textit{Profit from token:} 

% \cmt{(definition of profit from token. It seems like the profits or looses of NFTs, which comes from price fluctuations of the underlying token price'. If true, why we did it? Is is important information to characterize transaction participants?)}

\end{comment}
