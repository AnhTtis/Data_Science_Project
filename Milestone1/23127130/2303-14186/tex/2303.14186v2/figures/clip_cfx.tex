\pgfplotstableread[col sep=comma]{data/CLIP_barplot_data_bootstrap.csv}\datatable

\begin{tikzpicture}
    \definecolor{darkgray141160203}{RGB}{141,160,203}
    \definecolor{dimgray85}{RGB}{85,85,85}
    \definecolor{gainsboro229}{RGB}{229,229,229}
    \definecolor{lightgray204}{RGB}{204,204,204}
    \definecolor{mediumaquamarine102194165}{RGB}{102,194,165}
    \definecolor{orchid231138195}{RGB}{231,138,195}
    \definecolor{salmon25214198}{RGB}{252,141,98}
    \definecolor{amethyst}{rgb}{0.6, 0.4, 0.8}
    \definecolor{bleudefrance}{rgb}{0.19, 0.55, 0.91}
    \definecolor{blush}{rgb}{0.87, 0.36, 0.51}
    \definecolor{brilliantrose}{rgb}{1.0, 0.33, 0.64}
    \definecolor{trakorange}{rgb}{0.87, 0.6, 0.48}
    \definecolor{trakgreen}{rgb}{0.51, 0.705, 0.635}
    \definecolor{trakblue}{rgb}{0.60, 0.64, 0.753}

    \begin{axis}[
        axis background/.style={fill=gainsboro229},
        axis line style={white},
        width=0.6\textwidth,
        height=5.5cm,
        ybar,
        tick align=outside,
        tick pos=left,
        enlarge x limits=0.5,
        legend cell align={left},
        legend style={
            fill opacity=0.8,
            draw opacity=1,
            text opacity=1,
            row sep=0.25cm,
            at={(1.05,.8)},
            anchor=north west,
            draw=gainsboro229,
            fill=gainsboro229,
            /tikz/every even column/.append style={column sep=0.5cm},
            /tikz/every odd column/.append style={column sep=0.1cm}
        },
        ylabel={Drop in cosine similarity},
        xlabel={Number of training examples removed},
        xtick={50, 400},
        xticklabels={$k=50$, $k=400$},
        nodes near coords={
            \pgfmathprintnumber[fixed]{\pgfplotspointmeta}
        },
        nodes near coords style={
            yshift=0.25cm,
            text=gray,
            font=\small
        },
        nodes near coords align={vertical},
        ymin=0,
        ymax=1, %
        error bars/y dir=both,
        error bars/y explicit,
        error bars/error bar style={gray},
        bar width={1cm},
        y grid style={white},
        ymajorgrids,
        ymin=0, ymax=0.5,
        ytick style={color=dimgray85}
        ]
        \addplot+[fill=trakorange,
                  draw=trakorange, 
                  error bars/.cd, 
                  y dir=both, 
                  y explicit]
            table[
                x expr={\thisrow{k}}, 
                y=value, 
                y error plus=upper_error, 
                y error minus=lower_error, 
                col sep=comma, 
                restrict expr to domain={\thisrow{method}}{1:1}]{\datatable}; 
        
        \addplot+[fill=trakblue, 
                  draw=trakblue,
                  error bars/.cd, 
                  y dir=both, 
                  y explicit]
            table[
                x expr={\thisrow{k}}, 
                y=value, 
                y error plus=upper_error, 
                y error minus=lower_error, 
                col sep=comma, 
                restrict expr to domain={\thisrow{method}}{0:0}]{\datatable}; 
        
        \addplot+[fill=trakgreen, 
                  draw=trakgreen,
                  error bars/.cd, 
                  y dir=both, 
                  y explicit]
            table[
                x expr={\thisrow{k}}, 
                y=value, 
                y error plus=upper_error, 
                y error minus=lower_error, 
                col sep=comma, 
                restrict expr to domain={\thisrow{method}}{2:2}]{\datatable}; 
        
        \legend{CLIP NNs, TracIn \citep{pruthi2020estimating}, TRAK (ours)}
    \end{axis}
\end{tikzpicture}