\begin{tikzpicture}[>=latex',line join=bevel,very thick, shading=warm]
	\def\xshift{5.5}
	\def\yshift{3.5}

	% colorbar
	% \shadedraw[color=black] (2*\xshift+3.0, 0.5) rectangle (2*\xshift+3.5, -\yshift-0.5);
	% \node[anchor=north west] at (2*\xshift+3.5,0.5) {2.5};
	% \node[anchor=south west] at (2*\xshift+3.5,-\yshift-0.5) {0.0};

	% row labels
	\node[anchor=center] at (-3.75,0) {\Large{$\mathbf{f},\widehat{\mathbf{f}}$}};
	\node[anchor=center] at (-3.75,-\yshift) {\Large{$\mathbf{f}^*$}};

	\foreach \t in {0,1,2} {
		% column labels
		\node[anchor=south] at (\t*\xshift,1.75) {\Large{$t=\t$}};

		\foreach \r in {0,1} {
			\node (\t0\r) at (\t*\xshift-2.4,-0.7-\r*\yshift) [draw, circle, fill=white] {0};
			\node (\t1\r) at (\t*\xshift-2.4,0.7-\r*\yshift) [draw, circle, fill=white] {1};
			\node (\t2\r) at (\t*\xshift-1,1-\r*\yshift) [draw, circle, fill=white] {2};
			\node (\t3\r) at (\t*\xshift,0-\r*\yshift) [draw, circle, fill=white] {3};
			\node (\t4\r) at (\t*\xshift-1,-1-\r*\yshift) [draw, circle, fill=white] {4};
			\node (\t5\r) at (\t*\xshift+1,1-\r*\yshift) [draw, circle, fill=white] {5};
			\node (\t7\r) at (\t*\xshift+1,-1-\r*\yshift) [draw, circle, fill=white] {7};
			\node (\t6\r) at (\t*\xshift+2,0-\r*\yshift) [draw, circle, fill=white] {6};
		}
	}

	% edges
	
	% first row, first column
	\draw[dashed, gray, ->] (000) edge node [black,sloped,anchor=south] {2.25} (040);
	\draw[red!90!lightgray,->] (010) edge node[black,sloped,anchor=south] {2.25} (000);
	\draw[dashed, gray, ->] (020) edge node [black,sloped,anchor=south] {2.25} (010);
	\draw[dashed, gray, ->] (030) edge node [black,sloped,anchor=south] {2.25} (020);
	\draw[dashed, gray, ->] (040) edge node [black,sloped,anchor=south] {1.23} (030);
	\draw[dashed, gray, ->] (040) edge node [black,sloped,anchor=south] {0.92} (070);
	\draw[red!24!lightgray,->] (050) edge node [black,sloped,anchor=south] {0.60} (030);
	\draw[dashed, gray, ->] (060) edge node [black,sloped,anchor=south] {0.60} (050);
	\draw[dashed, gray, ->] (070) edge node [black,sloped,anchor=south] {0.32} (030);
	\draw[dashed, gray, ->] (070) edge node [black,sloped,anchor=south] {0.60} (060);

	% first row, second column
	\draw[dashed, gray, ->] (100) edge node [black,sloped,anchor=south] {1.96} (140);
	\draw[dashed, gray, ->] (110) edge node[black,sloped,anchor=south] {1.96} (100);
	\draw[dashed, gray, ->] (120) edge node [black,sloped,anchor=south] {1.96} (110);
	\draw[dashed, gray, ->] (130) edge node [black,sloped,anchor=south] {1.96} (120);
	\draw[dashed, gray, ->] (140) edge node [black,sloped,anchor=south] {1.08} (130);
	\draw[dashed, gray, ->] (140) edge node [black,sloped,anchor=south] {0.88} (170);
	\draw[red!28!lightgray,->] (150) edge node [black,sloped,anchor=south] {0.69} (130);
	\draw[dashed, gray, ->] (160) edge node [black,sloped,anchor=south] {0.69} (150);
	\draw[dashed, gray, ->] (170) edge node [black,sloped,anchor=south] {0.19} (130);
	\draw[dashed, gray, ->] (170) edge node [black,sloped,anchor=south] {0.69} (160);

	% first row, third column
	\draw[red!70!lightgray,->] (200) edge node [black,sloped,anchor=south] {1.76} (240);
	\draw[dashed, gray, ->] (210) edge node[black,sloped,anchor=south] {1.76} (200);
	\draw[dashed, gray, ->] (220) edge node [black,sloped,anchor=south] {1.76} (210);
	\draw[dashed, gray, ->] (230) edge node [black,sloped,anchor=south] {1.76} (220);
	\draw[red!37!lightgray,->] (240) edge node [black,sloped,anchor=south] {0.92} (230);
	\draw[dashed, gray, ->] (240) edge node [black,sloped,anchor=south] {0.85} (270);
	\draw[dashed, gray, ->] (250) edge node [black,sloped,anchor=south] {0.78} (230);
	\draw[dashed, gray, ->] (260) edge node [black,sloped,anchor=south] {0.78} (250);
	\draw[dashed,red!03!lightgray,->] (270) edge node [black,sloped,anchor=south] {0.07} (230);
	\draw[dashed, gray, ->] (270) edge node [black,sloped,anchor=south] {0.78} (260);

	% second row, first column
	\draw [red!82!lightgray,->] (001) edge node [black,sloped,anchor=south] {2.05} (041);
	\draw [red!82!lightgray,->] (011) edge node[black,sloped,anchor=south] {2.05} (001);
	\draw [red!82!lightgray,->] (021) edge node [black,sloped,anchor=south] {2.05} (011);
	\draw [red!82!lightgray,->] (031) edge node [black,sloped,anchor=south] {2.05} (021);
	\draw [red!46!lightgray,->] (041) edge node [black,sloped,anchor=south] {1.16} (031);
	\draw [red!36!lightgray,->] (041) edge node [black,sloped,anchor=south] {0.89} (071);
	\draw [red!25!lightgray,->] (051) edge node [black,sloped,anchor=south] {0.63} (031);
	\draw [red!25!lightgray,->] (061) edge node [black,sloped,anchor=south] {0.63} (051);
	\draw [red!10!lightgray,->] (071) edge node [black,sloped,anchor=south] {0.26} (031);
	\draw [red!25!lightgray,->] (071) edge node [black,sloped,anchor=south] {0.63} (061);

	% second row, second column
	\draw [red!77!lightgray,->] (101) edge node [black,sloped,anchor=south] {1.93} (141);
	\draw [red!77!lightgray,->] (111) edge node[black,sloped,anchor=south] {1.93} (101);
	\draw [red!77!lightgray,->] (121) edge node [black,sloped,anchor=south] {1.93} (111);
	\draw [red!77!lightgray,->] (131) edge node [black,sloped,anchor=south] {1.93} (121);
	\draw [red!42!lightgray,->] (141) edge node [black,sloped,anchor=south] {1.06} (131);
	\draw [red!35!lightgray,->] (141) edge node [black,sloped,anchor=south] {0.87} (171);
	\draw [red!27!lightgray,->] (151) edge node [black,sloped,anchor=south] {0.68} (131);
	\draw [red!27!lightgray,->] (161) edge node [black,sloped,anchor=south] {0.68} (151);
	\draw [red!08!lightgray,->] (171) edge node [black,sloped,anchor=south] {0.19} (131);
	\draw [red!27!lightgray,->] (171) edge node [black,sloped,anchor=south] {0.68} (161);

	% second row, third column
	\draw [red!72!lightgray,->] (201) edge node [black,sloped,anchor=south] {1.81} (241);
	\draw [red!72!lightgray,->] (211) edge node[black,sloped,anchor=south] {1.81} (201);
	\draw [red!72!lightgray,->] (221) edge node [black,sloped,anchor=south] {1.81} (211);
	\draw [red!72!lightgray,->] (231) edge node [black,sloped,anchor=south] {1.81} (221);
	\draw [red!39!lightgray,->] (241) edge node [black,sloped,anchor=south] {0.97} (231);
	\draw [red!33!lightgray,->] (241) edge node [black,sloped,anchor=south] {0.83} (271);
	\draw [red!28!lightgray,->] (251) edge node [black,sloped,anchor=south] {0.69} (231);
	\draw [red!28!lightgray,->] (261) edge node [black,sloped,anchor=south] {0.69} (251);
	\draw [red!06!lightgray,->] (271) edge node [black,sloped,anchor=south] {0.15} (231);
	\draw [red!28!lightgray,->] (271) edge node [black,sloped,anchor=south] {0.69} (261);

	% triangles
	\foreach \t in {0,1,2} {
		\foreach \r in {0,1} {
			\begin{pgfonlayer}{background}
				\fill[fill=lightgray, fill opacity=0.6] (\t3\r.center) to (\t4\r.center) to (\t7\r.center);
			\end{pgfonlayer}
		}
	}

\end{tikzpicture}
