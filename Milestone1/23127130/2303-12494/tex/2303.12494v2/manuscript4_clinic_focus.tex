\documentclass{article}


\usepackage{arxiv}

\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage[hidelinks]{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{xcolor, colortbl}   % possibility to color tables also
\usepackage{amssymb, amsmath}
\usepackage{float}
\usepackage{enumitem}
\usepackage{mathtools, cuted}
\usepackage{verbatim}
\usepackage{tikz,xcolor}
\usepackage{stfloats}
\usepackage{sidecap}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode} 
\usepackage{array,ragged2e,multirow}
\usepackage{scrtime}
\usepackage[usestackEOL]{stackengine}
\usepackage[bb=dsserif]{mathalpha}
\usepackage{calc,array}
\usepackage{etoolbox}


% Make enumerate look nice in table
\AtBeginEnvironment{tabular}{
\setlist[enumerate, 1]{wide, leftmargin=*, itemsep=0pt,label=\textbf{\roman*}, before=\vspace{-1.1\baselineskip}, after=\vspace{-1.1\baselineskip}, }
}


\newcommand{\pinP}{p\in \mathcal{P}}
\newcommand{\pinPpref}{p\in \mathcal{P}_{\mathit{pref}}}
\newcommand{\dinD}{d \in \mathcal{D}}
\newcommand{\dinDw}{d \in \mathcal{D}_w}
\newcommand{\finF}{f \in \mathcal{F}}
\newcommand{\winW}{w \in \mathcal{W}}
\newcommand{\minM}{m \in \mathcal{M}}
\newcommand{\hinH}{h \in \mathcal{H}}
\newcommand{\iinK}{i \in \mathcal{K}_p}
\newcommand{\R}{\mathbb{R}}
\newcommand{\B}{\mathbb{B}}
\newcommand{\red}[1]{\textcolor{red}{#1}}
\newcommand{\Dw}{\mathcal{D}_w}
\newcommand{\Bm}{\mathcal{B_M}}
\newcommand{\binBm}{b_\mathcal{M} \in \mathcal{B_M}}
\newcommand{\MprefP}{\mathcal{M}^{\mathit{pref}}_p}
\newcommand{\Ppref}{\mathcal{P}^{\mathit{pref}}}
\newcommand{\minbM}{m \in b_\mathcal{M}}
\newcommand{\fminP}{\mathit{f}_{\min, p}}
\newcommand{\ginG}{g \in \mathcal{G}}

\newcolumntype{P}[1]{>{\RaggedRight\arraybackslash}p{#1}}
\newcommand{\mypar}[1]{\vspace{-5pt} \paragraph{#1.}}

% Uncomment to override  the `A preprint' in the header
\renewcommand{\headeright}{}
\renewcommand{\undertitle}{}
\renewcommand{\shorttitle}{}
\renewcommand{\headrulewidth}{0pt}  % Default is 0.4 and gives a line at the top

\title{Automated Radiation Therapy Patient Scheduling:  \\A Case Study at a Belgian Hospital}


\author{
  Sara Frimodig\\
  RaySearch Laboratories\\
  KTH Royal Institute of Technology\\
  Stockholm, Sweden \\
  \texttt{sarhal@kth.se} \\
  %% examples of more authors
  \And
 Carole Mercier \\
 Department of Radiation Oncology \\
 Iridium Netwerk \\
 Antwerp, Belgium 
%   \And
%  Per Enqvist \\
%  Department of Mathematics \\
%  KTH Royal Institute of Technology\\
%  Stockholm, Sweden \\
%% \texttt{penqvist@kth.se} 
   \And
 Geert De Kerf \\
 Department of Radiation Oncology \\
 Iridium Netwerk \\
 Antwerp, Belgium 
}

\begin{document}
\maketitle

\begin{abstract}
The predicted increase in the number of patients receiving radiation therapy (RT) to treat cancer calls for an optimized use of resources. To manually schedule patients on the linear accelerators delivering RT is a time-consuming and challenging task. 
Operations research (OR), a discipline in applied mathematics, uses a variety of analytical methods to improve decision-making. In this paper, we study the implementation of an OR method that automatically generates RT patient schedules at an RT center with ten linear accelerators. 
The OR method is designed to produce schedules that mimic the objectives used in the clinical scheduling while following the medical and technical constraints. The resulting schedules are clinically validated and compared to manually constructed, historical schedules for a time period of one year. It is shown that the use of OR to generate schedules decreases the average patient waiting time by 80\%, improves the consistency in treatment times between appointments by 80\%, and increases the number of treatments scheduled the machine best suited for the treatment by more than 90\% compared to the manually constructed clinical schedules, without loss of performance in other quality metrics. Furthermore, automatically creating patient schedules can save the clinic many hours of administrative work every week. 
%\red{Redo as structured abstract if time (Background: the context and purpose of the study
%Methods: how the study was performed and statistical tests used
%Results: the main findings
%Conclusions: brief summary and potential implications)}
\end{abstract}


\keywords{Radiation therapy \and Patient scheduling \and Operations research \and Clinical implementation}  


\section{Background}

Cancer incidences are increasing globally, mainly due to a growing and aging population \cite{Ferlay2021}. %Radiation therapy (RT) is a treatment where ionizing radiation delivered by a linear accelerator (\emph{linac}) is used to kill cancer cells and shrink tumors.
In Europe, it is estimated that around 50\% of cancer patients would benefit from radiation therapy (RT), but that the actual use is lower \cite{Borras2015}. 
This variation largely depends on the countries' gross national income and %in case of a shortage of resources, an optimized use of the existing resources 
results in waiting lists and delays of RT treatments \cite{CHEN2008}. 
%There are multiple reasons for this, among them the shortage of resources, which results in waiting lists and delays in initiation of RT treatments \cite{CHEN2008}. 
Long waiting times for RT causes reduced effectiveness of the treatments due to tumor growth, higher risk of local recurrence, prolonged symptoms and also leads to higher levels of psychological stress among patients \cite{CHEN2008,Zumer2020,Fortin2002,Gomez2015,VanHarten2015}. Furthermore, long waiting times can also cause stress for the RT staff, which can potentially jeopardize the quality of the treatments \cite{French2004}. 
The timeliness for treatment is one of the most important quality indicators for RT \cite{VanLent2013}. Other RT quality indicators include appropriateness of care, patient experience and patient involvement, such as the possibility of choosing a time window for the treatment appointments
\cite{Harden2022, Olivotto2015}. %The most important aspects for a good patient experience are associated with the treatment-related information, professional standard and short time-interval between diagnosis and treatment \cite{Petersen2015}. 
%The patient experience is, among other things, related to the available treatment options, such as the possibility of choosing a time window for the treatment appointments \cite{Olivotto2015}. 


%Most RT patients are treated on an outpatient basis, which means the patient does not stay in the hospital overnight. A treatment plan is customized to each patient and takes into account factors such as the size and location of the tumor and the intention for RT. The schedule for RT varies; the majority of patients are treated daily on weekdays for several weeks, but weekly schedules and every-other-day schedules are also used clinically. 
An RT workflow starts with a patient consultation, followed by booking time-slots for both CT simulation and treatment delivery. CT simulation is the process where CT images are acquired for the area to be treated. The time between CT simulation and first treatment delivery is used to customize a treatment plan to each patient, taking into account  factors such as size and location of the tumor and the treatment intent. A patient-specific treatment schedule is also created.  
The majority of the patients are treated daily on an outpatient basis, meaning patients travel to the RT department on weekdays for several weeks. However, weekly and every-other-day schedules are also used clinically. 
The duration of a treatment session (\emph{fraction}) is most often 10 to 30 minutes. 
%Other challenges in RT  scheduling include patients that are treated with non-conventional fractionation schemes (e.g., not five times per week), or have multiple consecutive treatments, as well as the handling of unexpected activities such as machine failures. 
Because of stochastic patient arrivals, it is important that capacity is reserved for urgent patients that will arrive in the future.
%At cancer clinics today, almost all patient scheduling is done manually by the staff
To manually create efficient schedules for RT is both challenging and time-consuming. Therefore, the implementation of automatic scheduling algorithms can be used to support RT centers to better utilize the existing resources and improve the quality of the schedules. 


%Patient scheduling incorporates two systems. Allocation scheduling is the process of assigning patients to resources in advance, when future demand is still unknown, and appointment scheduling involves assigning specific start times to patients, based on the assumption that the number of patients and their needs for a particular service day are known. %Most allocation scheduling algorithms dynamically allocate resources to patients using a rolling time horizon. 
%RT scheduling falls within both categories; the clinics must allocate resources to patients in advance of their treatment days while ensuring that there is enough capacity for urgent patients that will arrive in the future, and must also assign specific appointment times on the machines. 


Operations research (OR) is a scientific approach to improved decision-making, where complex systems and processes are analyzed and optimized using mathematical modeling, statistics, and other tools and technologies. 
%Over the last two decades, OR techniques have been used to improve the efficiency of healthcare systems, reduce costs, and improve patient outcomes. 
OR methodologies have been widely applied to healthcare problems \cite{Rais2011,Brailsford2011,Saville2019,Vieira2016}, %In 2016, Vieira et al. \cite{Vieira2016} presented a literature review of the use of OR in RT, however, much has happened in the area since then. 
but there is not much evidence of successful implementation in clinical practice \cite{Brailsford2009, Carter2022}. %In a study of study the challenges when implementing OR in practice in healthcare, 
%Carter et al.  \cite{Carter2022} suggest that the literature of OR in healthcare is often either theoretical, or grounded in a practical problem but without documentation about implementation and final impact.
The RT scheduling problem has been modeled using OR in several studies, for a selection see \cite{Conforti2010,Saure2012,Legrain2015,Vieira2020,Pham2021,Frimodig2022}. 
All of these models are evaluated using generated data, which is often based on clinical data, but it is not possible %which makes it impossible 
to compare the results to the clinical schedules to fully assess their suitability for clinical implementation. Only Vieira et al. \cite{Vieira2021} studies the implementation of an OR model for RT patient scheduling. Their OR model performs weekly appointment scheduling and is tested using data from two different European clinics. The model is shown to improve the quality in the weekly schedule on all key performance indicators as identified by the clinics, such as reducing time variations between appointment times by 51\%. However, it is only evaluated for a time period of one week, which is not representative to assess the dynamics in a treatment schedule, since it does not capture the uncertainty in patient arrivals or the fact that treatments span over multiple weeks. 


In a previous paper, we presented a mathematical model for the RT scheduling problem \cite{Frimodig2023a}. 
Daily batch scheduling collects new patients during one day, and schedules their fractions on a machine, day and time for a planning horizon of three months. Uncertainty in future arrivals is handled by a dynamic time reservation method, which takes the expected future high-priority patients and adds them to the mathematical model as placeholder patients.%, to dynamically reserve time for future urgent patients. 

The \emph{main contribution} in this paper is the evaluation of an OR method for automatic RT patient scheduling from a clinical point of view. The potential for clinical implementation of the previously developed method \cite{Frimodig2023a} is investigated using a clinical dataset from a one-year period. The automatically generated schedules were validated by the clinical staff to ensure compliance with the medical and technical constraints posed at the clinic. Furthermore, the manually constructed clinical schedule spanning one year was compared to the automatically generated schedule for the same time period. Schedule quality metrics were developed in the clinical collaboration and were used to evaluate the schedules. We show that to automatically generate schedules would both be time-saving for the clinical staff, improve the timeliness of treatments, and increase the quality of care. %, which could improve patient outcomes. 


%The paper is structured as follows. Section~\ref{Sec:clinical_collab} presents the clinical collaboration and data. Section~\ref{Sec:QualityMetrics} describes the schedule quality metrics. In Section~\ref{Sec:results}, the results when evaluating the automatic algorithm compared to the clinical schedules are presented. Finally, in Section~\ref{Sec:conclusions} concluding remarks complete the paper.


\section{Methods}
\label{Sec:clinical_collab}
The potential for clinical implementation of the mathematical model for RT patient scheduling presented by Frimodig et al. \cite{Frimodig2023a} is evaluated using clinical input from different stakeholders. The input from medical physicists, booking administrators and radiation oncologists is used for data acquisition, defining quality metrics, and schedule validation. 
%The setup and scheduling system at Iridium Netwerk is presented in Section~\ref{Sec:Iridium}. Section~\ref{Sec:data_acquisition} describes the data acquisition process, and Section~\ref{Sec:auto_setup} presents the setup in the automatic scheduling algorithm.

\subsection{The RT center: Iridium Netwerk}
\label{Sec:Iridium}
Iridium Netwerk is a large RT center with four different hospitals located in Antwerp, Belgium. In 2020, ten linacs were in operation, and approximately 5500 RT treatments were delivered to 4000 patients.
%It is a network of hospitals, with four sites offering RT. 
The main location (S1) has four linacs, and the three satellite locations (S2-S4) operate two linacs each. In 2020, three different linac types were operational. 
Two linacs of the same type are called \textit{beam-matched}; both machines can deliver the same treatment plan, and a machine switch between fractions is possible. If the matched machines are at the same hospital, they are \textit{completely} matched, otherwise the match is \textit{partial}. %At Iridium Netwerk, M3-M10 and M5-M6 are completely matches pairs, and there is a partial matching with M2-M3-M5-M6-M7-M10 and M1-M4-M8, while M9 has no matchings. 
A switch between partially matched machines is allowed only in special cases.
%Two linacs are considered \emph{completely beam-matched} if they are the same machine type at the same hospital, and \emph{partially beam-matched} if they are the same machine type at different hospitals. It is possible for a patient to switch between completely beam-matched machines, whereas switching to a machine that is only a partially matched is allowed only in special cases. 
%The hospital sites, their machines, and the beam-matched machines are presented in Table \ref{tab:beam-matched}. 
%\begin{table}[ht]
%\center
%\caption{Hospital sites and beam-matches machines at Iridium Netwerk}
%\setlength\extrarowheight{2pt}
%\label{tab:beam-matched}
%\begin{tabular}{P{0.2\linewidth}P{0.19\linewidth}  P{0.25\linewidth} P{0.25\linewidth}}
%\hline
%Hospital site &Machine & Completely matched & Partially matched\\  % S1 = Sint-Aug, S2= Sint-Nik, S3 = Jan-Pal, S4=Klina
%\hline
%\multirow{4}{*}{S1} &M3 &   M10 & M2, M5, M6, M7 \\
%  &M4 &   -  & M1, M8 \\
%  &M9 &  - & - \\
%  &M10 &  M3 & M2, M5, M6, M7 \\
%  \hline
%\multirow{2}{*}{S2}&M1 &  - & M4, M8 \\
%  &M2 &  - & M3, M5, M6, M7, M10 \\
%  \hline
%\multirow{2}{*}{S3} &M7 &  - & M2, M3, M5, M6, M10 \\
%  &M8 &  - & M1, M4 \\
%  \hline
%\multirow{2}{*}{S4} &M5 &  M6 & M2, M3, M7, M10 \\
%  & M6 & M5 & M2, M3, M7, M10 \\
%\hline
%\end{tabular}
%\end{table}
%At Iridium Netwerk, a \emph{block scheduling} system is used, which means that each day is divided into blocks of equal duration (6 minutes) and each treatment is assigned to one or multiple blocks each day. 
The yearly schedule at Iridium Netwerk includes weekends and holidays, where no treatments are delivered, and days for planned maintenance or other quality assurance activities. When a machine is planned to be unavailable, the affected fractions can either be scheduled on a beam-matched machine the same day or postponed. For the latter, a fraction can be added at the end of the treatment or the patient can be treated twice on a day if the time between two fractions is at least 6 hours. %The overall treatment time should be kept as short as possible, therefore it is not favorable to postpone too many fractions even when it is technically allowed. %Not counting the weekends, in 2020 there were 87~days that had some planned machine unavailability. 
In 2020, 34\% of all weekdays had some type of machine unavailability planned due to holidays, planned maintenance or other quality assurance activities.
%All treatments are scheduled on weekdays. 
%Palliative patients can start treatment any weekday, whereas patients treated with curative intent cannot start treatment on Fridays. 

Each patient is appointed to a \textit{treatment protocol} that contains the scheduling instructions, such as required linac type, the duration of each fraction, dose prescription, and the minimum number of fractions to be treated each week. %Furthermore, 
%The first treatment fraction is often longer than the following due to for example setup times. 
Since time is needed to prepare the treatment, the protocol defines the minimum number of days between CT simulation and treatment start. 
%The  protocol also states the priority group (A, B or C) related to the urgency for treatment. 
The most common treatment protocols at Iridium in 2020 can be seen in Table~\ref{tab:protocols}. 
In case a patient needs two different \emph{consecutive treatments}, a secondary plan should ideally start the day after the primary plan has ended. These treatments are most common for breast cancer patients when the primary plan is followed by a boost plan. 
If the secondary plan has a different treatment protocol than the primary, it can also have different machine requirements and durations, and must therefore be handled separately in the scheduling. Approximately 17\% of all patients at Iridium Netwerk in 2020 were treated with two or more consecutive treatments.
\begin{table}
\caption{The most common treatment protocols Iridium Netwerk}
\setlength\extrarowheight{1pt}
\label{tab:protocols}
\begin{tabular}{P{1.7cm} P{1.05cm} P{2.1cm}  P{1.97cm} P{4.5cm} P{2.66cm}}
\hline
Protocol & Priority & Minimum fractions/week & Pre-treatment phase (days) & Preferred machines &Allowed machines\\
\hline
Palliative & A & 1 & 0 & M1, M2, M3, M4, M5, M6, M7, M8 & M10\\
Breast & C & 3 & 7 & M1, M4, M5, M6, M8 & M2, M3, M7, M10 \\
Prostate & C & 3  & 9 & M1, M3, M4, M5, M6, M7, M8 & M2, M10 \\
Head-Neck  & A &  5 & 11 & M2, M3, M5, M6, M10 & M1, M4 \\
Lung & B & 4  & 9  & M2, M3, M5, M6, M7, M10 & M1, M4, M8 \\
\hline
\end{tabular}
\end{table}

%The priority is not completely clear. I would at least refer to table 1. But maybe also explain the goal of assigning a priority: for example, not allowed to delay treatment start and what's the difference between A, B and C priority?
Each treatment protocol is associated with a priority as seen in Table~\ref{tab:protocols}. The purpose of the priority is to estimate the urgency for treatment; priority~A-patients should start treatment as soon as possible, whereas priority~B-patients can wait a few days and priority~C-patients a few weeks. In 2020 at Iridium, 37\% of the patients were priority~A, 16\% were priority~B, and 46\% were priority~C.  Since the treatments often span multiple weeks, there is a need to ensure that capacity is reserved for priority~A-patients that will arrive in the future. At Iridium Netwerk, this is handled by the booking administrator, who reserves empty timeslots for urgent patients on each machine based on historical data.

When scheduling treatment appointments, patient wishes are taken into consideration, such as preferred location and time. The booking administrators have estimated that 80\% of the patients
%Since Iridium Netwerk has multiple hospital sites, the aim is to schedule patients according to their site preferences, normally closest to where they live. The site preferences are communicated verbally to the booking administrators. The patients often also have a preference on when they wish to be scheduled during the day, and also this information is communicated verbally. The booking administrators have estimated that 80\% of the patients 
have a preference for treatment time, of which 65\% prefer a treatment before noon and 35\% prefer the afternoon. %, and that 20\% of the patients have no preference.
Each patient is notified of their treatment schedule soon after admission and all fractions are communicated at once and will only be re-planned in case of an unforeseen event such as a machine failure. The booking administrators estimate that it takes approximately one booking administrator's full time job to schedule the arriving patients on all sites. 



\subsection{Data Acquisition}
\label{Sec:data_acquisition}
Information of all treatments in 2020 has been extracted from Iridium Netwerk's oncology information system (OIS) ARIA \cite{Varian}. The patient data has been anonymized to comply with the General Data Protection Regulation (GDPR). 
%\mypar{Treatment protocols}

\begin{figure}[b]
\vspace{-0.3cm}
\center
\includegraphics[scale=0.7]{pie_chart_plot.pdf}
\caption{Breakdown of cancer category at Iridium Netwerk in 2020}
\vspace{-10pt}
\label{Fig:pie_chart}
\end{figure}

The information about what \textit{treatment protocol} each patient has followed is recorded in multiple free text fields in the data. %A script mapping key words into treatment protocols is created in Python~3.8. % to assign a treatment protocol to each treatment.
The free text often directly states the treatment protocol, and otherwise the prescribed dose and what machine the treatment has been delivered on are used for the protocol mapping.
%For example, a treatment with the free text "bekken" (which is Dutch for pelvis), can be either a prostate, cervix, or rectum case. In these situations, the fractionation scheme and dose prescription are used to further map to a treatment protocol; most likely, 20 fractions with the dose 3Gy is a prostate treatment, 25 fractions with 1.8Gy is a rectum case, and 25 fractions with 2Gy is a cervix treatment. 
%Furthermore, a script checks what machine the treatment has been delivered on, to ensure that the machine is allowed for the assigned treatment protocol. 
The palliative patients are grouped as one category. A breakdown of the cancer categories at Iridium Netwerk in 2020 can be seen in Figure~\ref{Fig:pie_chart}. Each treatment protocol is assigned a priority by the medical staff at Iridium Netwerk.
%\mypar{Treatment courses}
Furthermore, each treatment is assigned a \textit{CourseID} based on PatientID, treatment protocol and the times for the delivered fractions. This is used to separate the treatments for patients that were treated with multiple treatment courses in 2020. 
%\mypar{Consecutive treatments}
When each treatment course has a CourseID, it is possible to link together \textit{consecutive treatments}. This is done based on the delivery of the fractions: if a second CourseID starts within a few days after a another CourseID for the same patient, it is assumed that they are connected. %There are also extra checks for the word "boost" in the free text fields to find all plans that should be secondary plans, following a primary.
%\mypar{Input schedule}
All patients that arrived in 2019, but had treatments scheduled in 2020, are seen as fixed in the \textit{input schedule} for the 2020 scheduling. 
%For consecutive treatments, if the primary treatment started in 2019 then the secondary treatment is also added to the input schedule.



%\mypar{Site preferences}
The patients' \textit{hospital site preferences} are communicated verbally and not recorded in the data. According to the Iridium staff, the majority of patients want to be treated on the hospital closest to where they live. To keep the data anonymous, instead of using the patient's home address, a script assigns a site preference to each patient based on the patient's zip code and measured distance to each hospital. 



%\mypar{Maintenance data}
The dates for  \textit{planned unavailability} in the yearly schedule 2020 are given as input to the algorithm. Moreover, the extracted clinical data has information about \textit{machine failures} and other unplanned interruptions, and the durations of these interruptions are computed and given as input at the day of the interruption. 

%\mypar{Patient arrivals}
The automatic algorithm reads information about the \textit{patient arrivals}, where each treatment has a PatientID, CourseID, creation date, treatment protocol, number of fractions, the length of the first and subsequent fractions, and site preference. For secondary treatments, it is stated what CourseID it follows. The creation date in the OIS data is assumed to mimic the arrival to the hospital. Table~\ref{tab:patient_arrivals} shows examples of patient arrivals. Figure~\ref{Fig:Arrivals} shows the daily arrivals of patients in 2020, where the rolling average during the past two weeks varies between 13.9 to 26.4 patients per day, and the average priority A patient arrivals vary between 4.1 to 10.1 patients per day. The day with the most arrivals in the year was the 13\textsuperscript{th} of July, with 51 new arrivals, of which 20 were priority A. Some examples of the input data for three weeks in 2020 can be seen in Table~\ref{tab:data_inputs}. The clinical data used by the automatic scheduling algorithm is publicly available\footnote{Access through this link: \url{https://osf.io/j2bxp/?view_only=e1402382b67f4ad0a4b8a3f4ed28088a}}. 


\begin{table}
\caption{The first lines in the input data-file of patient arrivals after pre-processing}
\setlength\extrarowheight{2pt}
\label{tab:patient_arrivals}
%\resizebox{\textwidth}{!}{
\begin{tabular}{P{0.08\linewidth} P{0.082\linewidth} P{0.08\linewidth} P{0.175\linewidth} P{0.075\linewidth}  P{0.075\linewidth} P{0.075\linewidth}P{0.045\linewidth} P{0.083\linewidth}}
\hline
PatientID &  CourseID & Creation Date & Protocol & Number fractions & Duration \#1 (min) & Duration (min)  & Site pref & Follows CourseID \\
\hline
00001 & 11730 & 20-01-02& Bladder VMAT & 30 & 24 & 12 & S2 & -  \\
00002 & 11755 & 20-01-02& Head-Neck VMAT& 35 & 24 & 12 & S4 & -  \\
00003 & 16282 & 20-01-02& Prostate VMAT & 20 & 24 & 12 & S2 & -  \\
00004 & 14140 & 20-01-02& Liver SBRT & 8 & 50 & 50 & S3 & -  \\
00005 & 18671 & 20-01-02& Prostate VMAT & 20 & 24 & 12 & S2 & -  \\
00006 & 12402 & 20-01-03& Breast tang. fields	 & 15 & 24 & 12 & S4 & - \\
00006 & 15930 & 20-01-03& Breast photon boost & 5 & 20 & 12 & S4 & 12402  \\
\hline
\end{tabular}%}
\end{table}

\begin{figure}
\center
 \includegraphics[scale=0.85]{Arrivals_plot.pdf}
\caption{Daily arrivals in 2020 at Iridium Netwerk, excluding weekends and holidays}
\label{Fig:Arrivals}
\end{figure}


\begin{table}[ht]
\caption{Data for the patients arriving during three random weeks, shown as example of model input}
\setlength\extrarowheight{2pt}
\label{tab:data_inputs}
%\resizebox{\textwidth}{!}{
\begin{tabular}{P{0.357\linewidth} P{0.18\linewidth} P{0.18\linewidth}P{0.18\linewidth}}
\hline
      Week                                &  24-28 Feb 2020 & 4-8 May 2020 & 13-17 Oct 2020 \\
\hline
Number of patient arrivals	  & 80 & 69 & 114 \\
Average session duration, minutes (SD) & 14.5 (5.8) & 15.4 (6.5) & 15.3 (7.5)\\
Average number of fractions (SD)  & 18.8 (9.1) & 19.9 (11.2) & 19.9 (10.5) \\
Percentage with consecutive treatments & 18.8\% & 20.3\%  & 17.5\%\\
%Patients affected by unavailable machine & & \\
Patient site preference distribution & S1: 27\% & S1: 26\% & S1: 18\%\\
                                                              & S2: 25\% & S2: 22\% & S2: 25\% \\
                                                              & S3: 29 \%& S3: 36\% & S3: 33\%\\
                                                              & S4: 19 \%& S4: 16\% & S4: 24\%  \\  % S1 = Sint-Aug, S2= Sint-Nik, S3 = Jan-Pal, S4=Klina
Most common treatment protocols & Breast: 26.3\% & Breast: 29.0\% & Palliative: 23.7\% \\
                                                                & Palliative: 23.7\% & Palliative: 27.5\%& Breast: 23.7\%\\
                                                                & Prostate: 16.2 \% & Prostate: 13.0\% & Prostate: 14.9\% \\
\hline
\end{tabular}%}
\end{table}






\subsection{Automatic Scheduling Approach}
\label{Sec:auto_setup}
%In the previous paper \cite{Frimodig2023a}, each day is divided into four time windows (8:00-10:15, 10:15-12:15, 12:15-14:15, 14:15-16:30), and the model assigns each patient to a time window each day. The patient is assigned a specific start time within the time window in a post-processing step.  

The mathematical model developed in \cite{Frimodig2023a} is based on a column generation approach. It generates a schedule where each treatment session is assigned to a machine, day and time window, and the patient is assigned a specific start time within the time window in a post-processing step. The automatic scheduling is done at the end of each day taking patients from previous days into account. %, either as patients to be scheduled if the booking decisions have previously been postponed, or fixed in the input schedule.
%Different scheduling strategies include for example scheduling one patient at a time, or scheduling patients in batches at different time intervals. 
Daily batch scheduling can leverage accumulated information of the patients that have arrived during the day to reduce patient waiting time and overdue time \cite{Pham2021}. %At Iridium Netwerk, each patient is scheduled individually at admission.  However, the Iridium staff agreed to let the automatic scheduling algorithm focus on daily batch scheduling because of the potential benefits. 
%Therefore, the automatic scheduling is done at the end of each day taking patients from previous days into account, either as patients to be scheduled if the booking decisions have previously been postponed, or fixed in the input schedule.

At Iridium Netwerk each patient is notified of their treatment schedule soon after admission. However, literature shows that the majority of patients find it reasonable to receive a notification of their start date three days in advance \cite{Olivotto2015}. In \cite{Frimodig2023a} a compromise is used; for priority~B and C patients, the notification period is one week and priority~A patients are notified immediately. Iridium Netwerk communicates all fractions at once, so the same approach is applied to the automatic algorithm. A patient schedule can change until is has been communicated to the patient, i.e., booking decisions are postponed to the next day if patients are scheduled after the notification period.



The automatic algorithm reserves machine capacity for high priority patients to account for uncertainty in future patient arrivals. In \cite{Frimodig2023a}, a dynamic time blocking method is developed, in which the expected value of the future patient arrivals are included in the model as placeholder patients. This allows for a trade-off between the current (actual) patients to be scheduled, and the urgent patients that are expected to arrive in the future. Experiments in \cite{Frimodig2023a} show that this method better utilizes the resources than using a static time reservation method, which is used in the manual scheduling.


When a machine fails it results in unexpected downtime. 
At Iridium Netwerk, the booking administrators reschedule affected patients on beam-matched machines if possible, or otherwise move the fractions to other days. %The data about unplanned interruptions is extracted during the data acquisition, and used as input to the automatic daily batch scheduling. 
In the automatic scheduling, it is assumed that the daily interruptions are known already in the morning. The machine failures are managed in a pre-processing step by a heuristic algorithm that blocks failed machines for new bookings. The affected patients are moved to other machines or days according to what is allowed in the treatment protocol, and the list of the current patients is thereafter scheduled. 



\subsection{Schedule Quality Metrics}
\label{Sec:QualityMetrics}
Quality indicators have been published for certain tumor types, including minimizing waiting times or completing treatment within a certain time frame \cite{Leroy2019}. The patient experience is mostly affected by treatment-related information, professional standard and short time-interval between diagnosis and treatment \cite{Petersen2015}. It is also affected by the available treatment options, such as the possibility of choosing a time window for the treatment appointments \cite{Olivotto2015}. 
Since different cancer centers have different clinical setups, the quality metrics can differ between different clinics. 
To evaluate the automatically generated schedules and compare them to the manually constructed ones, multiple schedule quality metrics have been developed in collaboration with Iridium Netwerk through interviews with booking administrators, medical physicists, radiation oncologists and managers. Table~\ref{tab:quality_metrics} shows the quality metrics relevant at Iridium Netwerk. Each quality metric is presented as an objective that the booking administrators aim to fulfill, together with a short description and an associated priority that should reflect the importance of the objective. For example, the booking administrators always try to schedule the treatments on one of the best suited machines (objective \ref{enum:iv}), however, if the waiting time (objective \ref{enum:i}) is shorter on another machine, that is always preferred as that objective has a higher priority. %Objectives 1 and 6, with priority 1, are related to treatment quality and cure rates, 
\begin{table}[ht]
\small
\caption{Schedule quality metrics and their priorities}  % \red{To do if time: change order (also in plot)}
\setlength\extrarowheight{2pt}
\label{tab:quality_metrics}
%\resizebox{\textwidth}{!}{
\begin{tabular}{P{0.39\linewidth} P{0.47\linewidth} P{0.06\linewidth}} 
\hline
Objective &  Description & Priority \\
\hline
\begin{enumerate}
\item \label{enum:i} Minimize waiting time between referral and treatment start
\end{enumerate} & The waiting time should be minimized for all patients, but is most important for high priority patients & 1 \\
\begin{enumerate}
\setcounter{enumi}{1}
\item \label{enum:ii} Minimize the time deviations between fractions for each patient 
\end{enumerate}  & Consistency of appointments & 4 \\
\begin{enumerate}
\setcounter{enumi}{2}
\item \label{enum:iii} Minimize the number of fractions scheduled outside of preferred time windows 
\end{enumerate} & For patients that have preferred treatment times & 4 \\
\begin{enumerate}
\setcounter{enumi}{3}
\item  \label{enum:iv} Minimize the number of fractions scheduled on non-preferred machines 
\end{enumerate} & Among the list of allowed machines for each treatment, some are preferred over the others & 3 \\
\begin{enumerate}
\setcounter{enumi}{4}
\item \label{enum:v} Minimize the number of switches between partially beam-matched machines  
\end{enumerate} & Number of switches between same-type machines that are at different hospital sites should be minimized & 3\\
\begin{enumerate}
\setcounter{enumi}{5}
\item \label{enum:vi} Minimize fractions scheduled outside of patient's preferred hospital site 
\end{enumerate} & Fulfill patients' site preferences regarding treating hospital & 2\\
\begin{enumerate}
\setcounter{enumi}{6}
\item \label{enum:vii} Minimize overall treatment time 
\end{enumerate}& Gap days in the schedule can be induced when there is machine unavailability, but should be kept to a minimum & 1 \\
\hline
\end{tabular}%}
\end{table}
%[100, 0, 1, 1, 10, 10, 50, 300]
%# waiting time penalty, waiting time target violation penalty, window switch penalty, window preference violation
%    # penalty (u), green/yellow machine penalty (v), machine switch penalty, site preferences (s),
%    # total overtime in days
%Different cancer centers can have different scheduling objectives. 
%In some countries, there are nationally adopted waiting time targets stating the maximum waiting time between referral and start of treatment. This is however not the case in Belgium. In a previous paper, Frimodig et al. \cite{Frimodig2022} showed that there is a close correlation between minimizing the waiting time and minimizing the violations of the waiting time targets, thus, if this objective is relevant it is straightforward to include. 




\section{Results}
\label{Sec:results}
In a simulation of year 2020, the actual patient arrivals from Iridium Netwerk are used as input to the mathematical algorithm. Since daily batch scheduling is performed, there is one schedule to create each of the 254 workdays in 2020. The planning horizon for each day is three months. The patients that have arrived during the day are scheduled together with a list of unscheduled patients from the days before, while considering the input schedule that describes the partial occupation on each machine due to previous scheduling decisions. The experiments are run on a computer with Windows 10 that has an Intel\textsuperscript{\textregistered} Core{\texttrademark} i9-7940X X-series processor and 64~GB of RAM. The mathematical model for automatic schedule generation is created in Python~3.8 and solved using IBM ILOG CPLEX 20.1 in the Python API.

To evaluate the potential for clinical implementation of the automatically generated schedules, three factors must be assessed; the \emph{validity} of the schedules, %which is described in Section~\ref{Sec:model_validation}, 
the \emph{quality} of the schedules, %which is presented in Section~\ref{Sec:NumResults}, 
and the \emph{time} it takes to construct the schedules. %, which is analyzed in Section~\ref{Sec:time}.

\subsection{Schedule Validation}
\label{Sec:model_validation}
To ensure the automatically generated schedules can be implemented in practice, two different types of validation have been done by the staff at Iridium Netwerk. The  \emph{patient schedule validation} checks that the treatment is scheduled correctly for each patient, and the \emph{machine schedule validation} controls that the schedule is valid on each machine. Since it would be too time consuming to manually confirm the fulfillment of all medical and technical constraints for all ten machines and all 4000 treated patients at Iridium Netwerk in 2020, the schedule validation is done for a subset of patients and machines. First, a set of 15 randomly selected patient schedules are validated, covering a range of different treatment protocols. The patient information is reviewed together with the resource information data to confirm that the schedule would work in practice. The reviewed patient information includes fractionation schemes, number of fractions, fraction duration, time for pre-treatment and minimum number of fractions per week. Second, a random machine is selected for a time period of two weeks. The inspected machine information includes double bookings, machine unavailability, machine validity for each patient's protocol and that the machine capacity is not exceeded.

In addition to the manual validation performed by the medical staff at Iridium Netwerk, an automatic framework for validating the schedules has also been developed. It tests all the automatically generated schedules, both machine schedules (capacity, planned and unplanned unavailability), and patient schedules. For the patient schedules, every medical and technical constraint is tested for every patient and their treatment protocols; number of fractions, allowed start days, maximum fractions per day, minimum fractions per week, maximum interval between fractions, all fractions scheduled on beam-matched machines, all fractions scheduled on allowed machine, minimum number of days for pre-treatment, fractionation schemes, non-conventional protocol fulfillment, fractions at least 6 hours apart if two scheduled on same day, and finally the time interval between primary and secondary treatment for consecutive treatments. 



\subsection{Schedule Quality}
\label{Sec:NumResults}
\begin{figure}
\center
\includegraphics[scale=0.85]{Occupancy_manual_optimized_schedule_mean_excludeSiriusPulsar.pdf}
\caption{Occupancy in the automatically generated schedule and in the clinical schedule. The gray region is the first three months, where the input schedule with manually scheduled patients from 2019 make up a proportion of the total occupancy in the optimized schedule. The days where no data is shown are unavailable machine dates}
\label{Fig:Manual_opt_sched_occupancy}
\end{figure}
% M1: Orion, M2: Helix, M3: Jupiter, M4: Mercurius, M5: Apollo, M6: Ariane, M7: Sirius, M8: Pulsar, M9: Uranus, M10: Saturnus
Because a shortage of staff at one of the hospital sites at Iridium Netwerk, the machines at that site were not fully operational in 2020. Therefore, machines M7 and M8, together with all patients that were scheduled on those machines in the clinical schedule, are not included in the comparison between the schedules.

All patients that arrived to Iridium Netwerk in 2019, but had treatments scheduled in 2020, are seen as fixed in the input schedule for the automatic scheduling in 2020. These treatments span approximately the first three months in 2020, and therefore this period is excluded when comparing the manual and automatic schedules, since it is in fact a mix of the two. 
Figure \ref{Fig:Manual_opt_sched_occupancy} shows the occupancy (i.e., the machine utilization rate) on each machine for the automatically generated schedule and the actual clinical schedule in 2020. Figure~\ref{Fig:Manual_opt_sched_occupancy}a also shows the occupancy resulting from the 2019 manually scheduled patients in gray scale. 
From Figure \ref{Fig:Manual_opt_sched_occupancy}, it can be seen that the average overall occupancy on the machines is similar between the automatic and the manual scheduling: for all machines, it is 66.9\% for the automatic and 65.9\% for the manual schedule in 2020, excluding the first three months. %However, there are larger differences between the machines in the manual schedule than in the automatic, where the workload is more distributed between the machines.




To assess the quality of the automatically generated schedules, the schedule quality metrics presented in Section~\ref{Sec:QualityMetrics} were evaluated and compared to the historical schedules at Iridium Netwerk. When analyzing the manual schedules, a number of patients were identified to have unusually long waiting times. These patients were reviewed by the staff at Iridium Netwerk, and 169 of the patients had notes about why the treatment was delayed, usually because of a request from the patient, or due to clinical need, or because of reasons related to COVID-19. Therefore, these patients were excluded from the quality metric comparison altogether. Figure~\ref{Fig:results_manual_automatic} shows the results for measures that correspond to six of the quality metrics for the manually constructed clinical schedules and the automatically generated schedules. %, excluding the schedules for patients that arrived during the first three months corresponding to the gray scale period in Figure~\ref{Fig:Manual_opt_sched_occupancy}. 
The reason why objective \ref{enum:iii}, to minimize the number of fractions scheduled outside the patient's preferred time window, is not included in Figure~\ref{Fig:results_manual_automatic} is because Iridium Netwerk did not record the patients' time window preferences, thus it is not possible to measure what method that best fulfilled this objective.

\begin{figure}
\center
\includegraphics[scale=0.9]{Manual_optimized_costs_expected_excludeSiriusPulsar.pdf}
\caption{Comparison between costs for priority group A, B and C for automatically created schedules and manually constructed clinical schedules, with top 1\% marked as outliers}
\label{Fig:results_manual_automatic}
\end{figure}

In Figure \ref{Fig:results_manual_automatic}, similar performance is observed for objective \ref{enum:vi}, to minimize the number of fractions scheduled on a non-preferred hospital site. 
For objectives \ref{enum:ii}, \ref{enum:iv} and \ref{enum:vii}, Figure \ref{Fig:results_manual_automatic} shows that the automatic algorithm fulfills the goals better than the clinical schedules, both if including the 1\% outliers or when excluding them. The number of time window switches for a patient (objective \ref{enum:ii}) was on average 2.8 in the clinical schedule and 0.5 in the automatically generated schedule, which means that the consistency in appointment times was 84\% better in the optimized schedule. The average number of fractions scheduled on a non-preferred machine (objective \ref{enum:iv}) decreased by 93\% between the manual and automatic schedule (from 1.3 to 0.1 on average per patient). The excess time in days, which corresponds to the number of extra gap days in the schedule (objective \ref{enum:vii}) decreased from an average of 0.7 in the clinical schedule to 0.3 in the optimized schedule, a 55\% decline. 
Objective \ref{enum:v}, to minimize the number of switches between machines that are only partially beam-matched, is the only objective where the manual schedule outperforms the automatically generated one; the average number of switches to partially beam-matched machines is 0.003 in the manual schedule, and 0.14 is the optimized schedule, which is still very low. 

Finally, Figure \ref{Fig:results_manual_automatic} illustrates that for objective \ref{enum:i}, to minimize the waiting times, the automatically generated schedule outperforms the manually constructed schedule for all priority groups, but especially for urgent patients. The waiting time is computed as the time from the earliest allowed start date, taking into account the required number of days of the pre-treatment phase. For priority group~A, the average waiting time in the clinical schedule was 8.1 days, compared to 1.5 days  in the automatic scheduling approach, which corresponds to a 81\% decrease in average waiting time. For priority~B, the decrease in average waiting time was 86\% (from 11.3 to 1.6 days), and for priority~C-patients the average waiting time decreased 86\% (from 13.3 to 1.8 days). Furthermore, the maximum waiting times decreased from 35 to 7 days for priority~A-patients, from 35 to 8 for priority~B and from 47 to 34 for patients in priority group C. 





\section{Discussion}
It has been shown that the previously developed OR method for the RT scheduling problem can produce clinically acceptable schedules. The quality of the generated schedules is better than the historical schedules based on the quality metrics that have been developed within the clinical collaboration. Since the waiting times are shown to be decreased by the automatic algorithm, the time between first consultation and end of treatment is reduced by more than 80\% while the length of the pre-treatment phase remains the same. Three main reasons why the automatic scheduling algorithm produces schedules that are superior to the clinical schedules have been identified. First, the automatic algorithm performs daily batch scheduling instead of scheduling the patients one-by-one. This offers more degrees of freedom since the algorithm can leverage patient information accumulated throughout the day, and it has also been shown in previous studies that this leads to better schedules \cite{Pham2021}. Secondly, the handling of uncertainty in future urgent patients is improved in the automatic algorithm; it uses a dynamic time reservation method that allows for a tradeoff between actual patients and the patients that are expected to arrive in the future, which gives shorter waiting times than the static time reservation method that is used clinically today \cite{Frimodig2023a}. Third, the automatic algorithm uses mathematical optimization, and is designed to maximize the performance in the schedule quality metrics described in Section~\ref{Sec:QualityMetrics}. It is shown in \cite{Frimodig2023a} that, if the problem is modeled correctly, the resulting schedule will be close to optimal using the proposed mathematical approach. Another potential reason why the automatic schedule has shorter waiting times than the clinical schedule lies in the result of objective \ref{enum:v}; the automatic algorithm sometimes schedules a patient with planned switches between hospitals if it results in shorter waiting times. 

%maybe more focus on these results in the discussion because you can reduce the time between consultation and end of treatment while length of pre-treatment phase did not shrink! This is actually a very nice result!

As previously stated, approximately 170 outlier patients with unusually long waiting times were excluded from the quality measure plot in Figure~\ref{Fig:results_manual_automatic}. However, it is possible that additional waiting times are long in the clinical schedule not as a result of the scheduling strategy, but as a result of shortage of staff or other resources, due to personal requests, or influenced by the COVID pandemic (either because patients were sick or because they chose to delay their treatments). If excluding the top 15\% waiting times in the clinical schedule, the automatically generated schedule still decreases the average waiting times by 75\% for priority~A (6.2 to 1.5 days), 82\% for priority~B (8.8 to 1.6 days), and 81\% for priority~C (9.5 to 1.8 days). Furthermore, due to the shortage of staff in one of the hospital sites, the two machines on that site together with the patients scheduled on them in the clinical schedule were not included when creating the automatic schedules or in the quality comparison. If including these patients and machines with full capacity, the results are very similar, thus, this does not seem to be a large source of error.

For each treatment course, the creation date in the OIS is assumed to mimic the arrival to the hospital. This will be correct in the majority of the cases since the patient is entered into the OIS at arrival. However, there can be cases when it is not necessarily decided to treat with RT already at arrival (for example patients first treated with surgery or chemotherapy, where it is sometimes decided later to also treat with RT). There is no way to know this from the available data, but the Iridium staff assure that these cases are very uncommon. Another source of error is that in the automatic scheduling, it is assumed that the daily interruptions are known already in the morning, even though it is likely that the failure is not known until it actually happens. However, for the rescheduling of the affected patients this does not make a difference, since we limit the rescheduled fractions to be after the failure occurs.

Since the hospital site preferences were not recorded, they were instead estimated from the patient zip codes. %, the small improvement that is seen in the automatic algorithm could potentially be from misclassified site preferences. 
This is a source of error when evaluating the algorithm for this quality metric, but should not be a problem if used in practice when the actual preferences are known. Moreover, different cancer centers can have different scheduling objectives. 
In some countries, there are nationally adopted waiting time targets stating the maximum waiting time between referral and start of treatment. In a previous paper, Frimodig et al. \cite{Frimodig2022} showed that there is a close correlation between minimizing the waiting time and minimizing the violations of the waiting time targets, thus, if this objective is relevant it is straightforward to include in the mathematical model. 



%\subsection{Time to generate schedules}
%\label{Sec:time}
At Iridium Netwerk, approximately one full time job is spent every week on scheduling patients on the linacs. For each daily batch scheduling, the automatic algorithm is allowed to run for maximum one hour, %, a time limit that is reached in 11.8\% of the daily instances in 2020. 
and the average computation time is 33 minutes. Since the scheduling is done once daily, the automatic algorithm will spend at most five hours per week constructing schedules, a process that can be done in the background. 
Although the model is designed to capture all the major medical and technical constraints present in the clinical scheduling, some patients may have patient-specific needs that are not implemented in the model. Therefore, the generated schedule may need to be manually adjusted. % for these patients. 
Furthermore, the staff may also need to spend time validating the schedules. Even with time spent on these actitivies, there is a potential to save many hours of administrative work every week by automatically generating schedules. 

From a clinical point of view, the medical staff at Iridium Netwerk expresses a large interest in applying the automatic scheduling algorithm clinically. They especially see two main benefits of applying the model, where the first is that the clinical schedules are optimized, and the second is that the algorithm can be used to simulate department changes, such as buying a new linac, which can help make more informed decisions. Another main advantage is the rescheduling of patients in case of machine breakdowns, where an algorithm can take into account all the different scheduling parameters (overall treatment time, minimum number of fractions per week, etc), something that is difficult for a human to do efficiently.
%\mypar{Future Work}
%This paper has investigated the potential for an automated scheduling algorithm to be used clinically at Iridium Netwerk. 
However, several challenges exist for actual clinical implementation. The most important is that a user interface is needed, preferably  developed within the OIS, or at least with communication to it. That way, the information of planned maintenance and protocol data already exist within the system. The OIS should also hold the information of the treatment protocol for each patient, removing the need for the data acquisition steps. Furthermore, to enable all the schedule quality metrics to be incorporated in the automatic algorithm, the patients' preferences for time windows and hospital sites should be recorded. In the current solution, the CPLEX software is used for the mathematical optimization. Since this is an expensive system, the possibility of switching to an open source solver should be investigated. 
% Mention RayCare and possibility for implementation there directly?

%Can you quantify the number of unused timeslots in the clinical schedule compared to the automatically generated one? From a clinical point of view, it is impressive that the model outperforms on so many metrics. Mainly the waiting is very impressive, but you also state that the average occupancy on the machines is similar. This sounds like a little contradiction. Maybe because occupancy is calculated based on all weekdays and not on the available weekdays (skipping planned unavailability). Maybe its an idea to calculate the unused timeslots (eg unused placeholder slots) because your approach seems to be much more efficient and it would be nice to summarize this in a single number: maybe patient throughput did increase (can we treat more patients with the same number of linacs)?

%In general, I see two benefits to apply the model:
%-	Optimize clinical schedules
%-	Simulate department changes (buying new linac, new type of linac,): this tool can help making good decisions. 
%The first is very relevant today because we are currently struggling to optimize our schedules. Some matched machines are fully booked and some (STx machines) are working  days. So today, it would be very helpful to optimize the schedules and if we had such a tool in the past we could have known if buying a second STx machine was a good idea or not. In general, the main advantage of automatic scheduling is rescheduling patients in case of machine breakdowns and automation can take into account all the different scheduling parameters (overall treatment time, min number of fractions/week,), something a human cant do efficiently.
%To my opinion, this method should be implemented clinically as soon as possible!
%Can we do a prospective analysis?




%To potentially improve the schedules further, grouping of similar treatments to be after each other in the schedule would be beneficial. This way, the setup times can be reduced since the same material and machine settings are used between patients, and in the cases where fixation devices are used, these would already be in the correct treatment room. 

%Other pro: it assures "equal right to care", no bias among the patients (not an ML algorithm that can be taught bias)

\section{Conclusions}
\label{Sec:conclusions}
To manually schedule patients for RT is complex and labor-intensive. As the number of cancer cases in the world are rapidly increasing, automated scheduling algorithms can  optimize the resources to achieve short waiting times. In this paper, a previously developed operations research method for automated RT scheduling is evaluated from a clinical point of view in a collaboration with Iridium Netwerk.  
The automatically generated schedules are clinically validated and compared to the historical schedules from Iridium Netwerk for a time period of one year. % using schedule quality metrics that have been developed in the collaboration. 
The results show that when compared to the clinical schedule, the automatically generated schedule decreases the average patient waiting time by approximately 80\%, increases the time consistency between treatment appointments by 80\%, increases the number of fractions scheduled on preferred machines by 90\%, and also improves the majority of the other schedule quality metrics substantially. 
%To automatically generate schedules would save time for the clinical staff while it improves the timeliness of treatments, which could increase the quality of care. 



%From \cite{Carter2022}: Five characteristics that determine success when implementing OR clinically: "The problem needs an internal Champion; there should be a current Critical Issue; one must understand and adapt to the Cultural dynamics of the organization; appropriate Data exists; and we need to manage Expectations." Maybe we can connect to this in some way. 

%"It is assumed that the daily interruptions are known already in the morning. This is a source of error, since it is most likely that the failure is not known until it actually happens."

%\section{List of abbreviations}


\bibliographystyle{unsrt}  
\bibliography{mybibliography}





\end{document}
