%
%
%

\begin{tikzpicture}
\begin{groupplot}[
group style={
group size=1 by 2,
vertical sep=0.4cm,
},
width=\plotWidth, 
height=\plotHeight,
ylabel style={align=center},
every axis y label/.append style={ at={(-0.6cm,0.5)} },
xmin=0,
xmax=1500/60,
extra x ticks = {0.4, 1.067, 2.233, 3.717, 4.917, 6.25, 6.883, 7.933, 9.717, 10.967, 12.717, 13.967, 15.117, 16.017, 17.0, 18.067, 19.983, 21.1, 22.117, 23.117, 24.333},
extra tick style = {
  grid style={black, dashed},
  tickwidth = 0,
},
minor tick length = 0,
]

\nextgroupplot[
ylabel={Number of\\passengers},
ymin=0,
ymax=30,
ylabel style={font=\color{white!15!black}},
extra x tick labels={{Morgental}, {Jugendherberge}, {Thujastrasse}, {Brunau/Mutschellenstr.}, {Hügelstrasse}, {Waffenplatz-/Bederstr.}, {Waffenplatzstrasse}, {Sihlcity Nord}, {Manesseplatz}, {Hertersteg}, {Schmiede Wiedikon}, {Zwinglihaus}, {Bertastrasse}, {Friedhof Sihlfeld}, {Altes Krematorium}, {Albisriederplatz}, {Hardplatz}, {Bahnhof Hardbrücke}, {Schiffbau}, {Escher-Wyss-Platz}, {Rosengartenstrasse}},
xticklabels = {},
every extra x tick/.append style={
	xticklabel style={rotate=90},
	ticklabel pos=upper,
},
unbounded coords=jump,
]
\addplot[ycomb, color=plot-color1, thick, mark=o, mark options={solid, plot-color1}, forget plot] table[x expr=\thisrowno{0}/60] {img/stops/stops-1-numberOfPassengers.tsv};
\addplot[forget plot, color=white!15!black] table[x expr=\thisrowno{0}/60] {img/stops/stops-2.tsv};

\nextgroupplot[
ylabel={Vehicle\\speed},
y unit = {\si{\meter\per\second}},
xlabel = {Time},
x unit = {\si{\minute}},
ymin = 0,
ymax = 15,
extra x tick labels={},
legend style={at={(0,1)}, anchor=north west},
legend columns=-1,
]
\addplot [color=plot-color1, thick]
  table[x expr=\thisrowno{0}/60]{img/stops/stops-3-vehicleSpeed.tsv};
\addlegendentry{speed}

\addplot[area legend, draw=none, fill=black, fill opacity=0.25]
table[x expr=\thisrowno{0}/60] {img/stops/stops-4-doorIsOpen.tsv}--cycle;
\addlegendentry{door open}

\end{groupplot}
\end{tikzpicture}%