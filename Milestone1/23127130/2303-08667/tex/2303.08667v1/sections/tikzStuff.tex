%
%
%

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usetikzlibrary{calc}
\pgfplotsset{compat=1.9}
\usepgfplotslibrary{groupplots}
\usepgfplotslibrary{units}
\usetikzlibrary{fpu} %
\usetikzlibrary{matrix} %
\usetikzlibrary{positioning} %
\usetikzlibrary{shapes}
\usetikzlibrary{arrows.meta}
%
\tikzset{>=latex[round]}
\tikzstyle{*->} = [{Circle[length=3pt]}->, shorten <=-1.5pt]
\tikzstyle{<-*} = [<-{Circle[length=3pt]}, shorten >=-1.5pt]

\pgfkeys{/pgf/number format/.cd,1000 sep={\,}}

%
\pgfplotsset{/pgfplots/layers/niceLayers/.define layer set={
axis background,axis grid,main,axis ticks,axis lines,axis tick labels,axis descriptions,axis foreground
}{/pgfplots/layers/standard}
}

\pgfplotsset{every axis/.append style={
set layers=niceLayers,
tick label style={font=\footnotesize},
clip marker paths=true,
line width=1pt,
line cap=round,
line join=round,
tick style={semithick, color=black},
legend style={legend cell align=left, align=left, inner xsep=2pt, inner ysep=0.8pt, outer sep=2pt, font=\footnotesize, /tikz/every even column/.append style={column sep=2mm}},
xmajorgrids, ymajorgrids,
unit markings=parenthesis, %
}}

%
\usepgfplotslibrary{external}
\tikzexternalize
\tikzset{
  external/system call={pdflatex \tikzexternalcheckshellescape --halt-on-error --interaction=batchmode --output-directory=./build --jobname "\image" "\texsource"}, /pgf/images/include external/.code={\includegraphics{build/#1}}
}
\tikzexternaldisable %

%
\newenvironment{externalize}[1]{
\tikzexternalenable %
\tikzsetnextfilename{img-#1} %
}{}