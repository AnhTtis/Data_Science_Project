\section{Conclusions}
We consider the phase-extraction problem, and we showed that, given a unitary $U = e^{i\pi H}$ and its inverse $U^{\dag}$, we could implement a block-encoding of $\phi(H)$ for some smooth function $\phi(x)$. The word `smooth' here means existence and continuity of the derivatives: the higher the number of continuous derivatives that a function has, the faster its Fourier sum (and thus the Laurent polynomial on the eigenphases) uniformly converges to that function. We are confident this can have many more applications beyond what is shown in this work. It is also worth remarking that Jackson showed that the convergence rate of a Fourier series is almost-optimal, in the sense that no trigonometric (or, equivalently, complex exponential) series can approximate the desired function faster, up to that $\log d$ factor~\cite[p.\ 21]{jacksonTheoryApproximation1930a}. Also remember that `smoothing' a function, i.e., replacing its derivative with a continuous function, does not give faster convergence for free in general, as its derivative will become steep in the points where we smooth out discontinuities, and this translates to a high Lipschitz constant: a~clear example is given by Eq.~\ref{eq:lipschitz-constant-recurrence-solution}, but in that case, fortunately, nothing depends on the size of the input $N$, and thus does not influence the asymptotic query complexity of Algorithm~\ref{alg:prop-sampling-qsp}, although the constant factor can become large even for $p = 20$. From a theoretical point of view, this work shows that, for any $\eta > 0$, there is an algorithm with query complexity 
$$\Tilde{\bigO}\left(\frac{1}{\bar{c}^{\frac{1}{2} + \eta}} \frac{1}{\epsilon^\eta} \right)$$
solving the proportional-sampling problem. This statement seems to suggest there exists an algorithm which directly solves the problem with $\eta = 0$, and an open question would be to find such algorithm.


It is also interesting to remark that Theorems~\ref{thm:haah-construction},~\ref{thm:haah-completion} indeed allow the construction for any $\phi$, even complex-valued, provided that its absolute value is reciprocal.

One could think that, in Section~\ref{sec:prop-sampling}, instead of using the linear function in the phase-extraction subroutine, we could approximate the square root and then apply the transformation directly on $e^{i \pi c(x)}$. However, in the case of proportional sampling this would be inconvenient, as the derivative of the square root function has a discontinuity with an infinite jump around 0, and we could not choose a constant $\delta$ if we had values of the oracle that are too close to $0$.