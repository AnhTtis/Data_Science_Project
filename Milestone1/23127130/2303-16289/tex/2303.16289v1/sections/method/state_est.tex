\subsection{State estimation of \Tr\ and \Tf}
Since the virtual average floor temperature, used in the \MPC, is not measured a \lkf\ (\LKF) is used to estimate the state at sample time $k$. The \LKF\ is updated each 5 min.
%The \MPC\ requires an initial state, $\xv_0 = \begin{bmatrix} \Tr(t) & \Tf(t) \end{bmatrix}^\tra$, in order to integrate the dynamics. Since the virtual average floor temperature is not measured a \lkf\ (\LKF) is used to estimate the state at sample time $k$. The \LKF\ is updated each 5 min. %Since the implementation and theory of the \LKF\ is described in great detail in the literature, no further comment is given here.
The model in \eqref{eq_all_ss} is observable for any $\Ur, \Ua > 0$.
\begin{align}
    \mathcal{O} = \begin{bmatrix} \Cm \\ \Cm\Am \end{bmatrix} \ = \begin{bmatrix} 1 & 0 \\ -\left(\Ur + \Ua\right) & \Ur \end{bmatrix}
\end{align}
This is the case even if the matrices \Am, \Bm\ and \Em\ have been found using a black box method, since the parameter in eq. system \eqref{eq_all_ss} can be solved for, if \dotQhp\ is known.