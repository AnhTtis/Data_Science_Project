% !TeX spellcheck = en_US
\section{Introduction}

This paper delves into the challenges confronting present mobility systems, including traffic congestion, environmental pollution, and user dissatisfaction. The advent of cutting-edge technologies such as the internet of things and autonomous driving is ushering in a transformative era in the way we conceptualize mobility, providing an unprecedented opportunity to tackle these challenges. Nonetheless, a fundamental issue is the inherent misalignment between individual objectives, such as minimizing travel time, and societal goals, such as reducing the overall congestion and pollution, which can result in inefficient aggregate routing patterns \cite{RoughgardenTardos2002}.

To address this challenge, this paper employs an incentive scheme, initially proposed in~\cite{CensiBolognaniEtAl2019,SalazarPaccagnanEtAl2021}, based on an artificial currency, Karma, which is designed to align the routing decisions of self-interested users with the socially-optimal aggregate routing while taking into account their temporal individual needs. This innovative framework operates on a currency that can neither be purchased nor traded but can only be gained or expended while traveling. Specifically, we consider a parallel-arc network with a single origin and destination node, which is illustrated in Fig.~\ref{fig:network_example}, whereby each user chooses from one of the available arcs to reach their destination on a daily basis. It empowers users with an equal opportunity to choose between being self-interested and selecting the fastest path for a price or being altruistic and choosing a slower path for a reward.

\begin{figure}[t]
	\centering
	\includegraphics[width = 0.9\linewidth]{fig/network_example-eps-converted-to.pdf}
	\caption{Single origin-destination network of $n$ arcs.}
	\label{fig:network_example}
\end{figure}

\emph{Related work:} 
The toll design problem, which dates back to Pigou's work~\cite{Pigou1920}, has been extensively studied~\cite{Morrison1986,BergendorffHearnEtAl1997}. However, designing tolling mechanisms that account for user sensitivity distribution is a challenging task, for which some results have also been proposed~\cite{FleischerJainEtAl2004,PaccagnanChandanEtAl2019}. Moreover, monetary schemes are intrinsically unfair, as they discriminate against users with lower incomes.

To address this issue, significant attention has been given to the use of artificial currencies to align the aggregate behavior of self-interested users with the system's optimum~\cite{Prendergast2016,GorokhBanerjeeEtAl2019,CensiBolognaniEtAl2019,ElokdaCenedeseEtAl2022}. Nevertheless, these works focus on auction mechanisms forcing users to submit bids every time they desire to use a resource, which may lead to decision fatigue.
Moreover, users are never guaranteed whether they will be able to use the resource or whether they are going to be outbidden. %\msmargin{which in turn results into mistrust in the mechanism}{true, but it seems it reduces the main issue we are pointing out here: no guarantees...}.
Our approach deviates significantly from these mechanisms: We propose simple payment transactions where each itinerary has a fixed cost or reward, thus requiring no bidding whilst accounting for the users' sensitivity by endowing them with freedom of decision as long as they have enough Karma to pay for the desired resource.
In this context, we carried out work for the particular case of two arcs between common origin and destinations nodes in~\cite{SalazarPaccagnanEtAl2021} and, using a reinforcement learning approach, for two and three arcs in~\cite{SandenSchoukensEtAl2023}. Nevertheless, to the best of the author's knowledge, no mechanism has been proposed to cope with the more general $n$ parallel arcs scenario.

% \msmargin{This paper extends those results to the more general $n$ arcs scenario.}{Move this to the next subsection, and you are missing our IFAC~\cite{SandenSchoukensEtAl2023}: Using RL for 2 or 3 arcs}
%\msmargin{What is missing overall?}{add}

\emph{Statement of contributions:} 
The pivotal contributions in this paper are threefold: Focusing on a repeated game setting with $n$ parallel arcs, we first derive a closed-form solution for the best response strategy of a user, enabling an explicit analysis of the repeated game dynamics. Second, we model the aggregate Karma level dynamics under a stationary aggregate routing pattern as an aggregate of Markov chains, bridging the gap between the pricing policy and the aggregate routing pattern. Third, building on the two previous results, we propose a numerical pricing design {procedure driving the aggregate decisions to the system's optimum.} 
%\msmargin{,}{delete comma, as subsequent sentence is \textit{defining} (and consider using gerund)} which drives the aggregate decisions to the system's optimum.

\emph{Organization:} This paper is organized as follows. Section~\ref{sec:prob_statement} states the mechanism design problem. In Section~\ref{sec:bestresponse}, the best response strategy of each individual user is analyzed and a closed-form solution is derived, whilst we model the aggregate behavior resulting from the microscopic users' decisions in Section~\ref{sec:mesoscopic}. In Section~\ref{sec:pricing_design}, we devise a pricing design method, whose performance is assessed in Section~\ref{sec:num_res} resorting to numerical simulations. Finally, Section~\ref{sec:concl} presents the main conclusions of this paper.


% Alternatively, ğˆğ‘› and ğŸğ‘›Ã—ğ‘š are also used to represent the ğ‘› Ã— ğ‘š identity matrix and the ğ‘› Ã— ğ‘š null matrix, respectively.
% Alternatively, ğŸğ‘› is used to denote the vector of ones of dimension ğ‘›.  
% , and the entry $(i,j)$ of a matrix ğ€ is denoted by [ğ€]ğ‘–ğ‘—. 
\emph{Notation:} Throughout this paper, we denote the identity and null matrices, both of appropriate dimensions, by $\mathbf{I}$ and $\mathbf{0}$, respectively. The vectors of ones and zeros, both of appropriate dimensions, are denoted by $\mathbf{1}$ and $\mathbf{0}$. The $i$th component of a vector $\mathbf{v} \in \mathbb{R}^n$ is denoted by $\mathbf{v}_i$. The vector $\mathbf{e_i}$ denotes a column vector whose entries are all set to zero except for the $i$th one, which is set to 1. We denote $[\cdot]_x^y$ as the saturation function with lower bound $x \in \mathbb{R}$ and upper bound $y \in \mathbb{R}$. The cardinality of a set $\mathcal{A}$ is denoted by $|\mathcal{A}|$. The expected value of a random variable $X$ is denoted by~$\mathbb{E}[X]$.

%What is more, our scheme is fairly simple and does not rely on any auction mechanism for allocation, but leaves full freedom of choice to the users as long as their Karma level is non-negative.

