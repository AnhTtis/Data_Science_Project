


\documentclass[letterpaper, journal,twoside, twocolumn]{support/IEEEtran}
\usepackage[fleqn]{amsmath}
\usepackage{times}
\usepackage[pdftex]{graphicx}
\usepackage{subfigure}
\usepackage{amsmath,amssymb,amsopn,amstext,amsfonts}
\usepackage{cancel}
\usepackage[noadjust]{cite}
\usepackage{soul}
\usepackage{caption}
\captionsetup{font={small}}

\captionsetup[figure]{labelfont={},textfont={}}


\usepackage{balance}
\usepackage{color}
\usepackage{mathtools}
% \usepackage{algorithm}
% \usepackage{algorithmic}
\usepackage{bm}
%\newtheorem{theorem}{Theorem}
\usepackage{diagbox}
\usepackage{float}
\usepackage{epstopdf}
\usepackage{url}
\usepackage{multirow}
\usepackage{tikz}
\usepackage{subeqnarray}
\usepackage{cases}
\usepackage{booktabs}
\usepackage[linkcolor=black,citecolor=black,urlcolor=black,colorlinks=true]{hyperref}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\newtheorem{myTheo}{Theorem}
%\newtheorem{thm}{Theorem}[section] %如果不采用章节号做前缀，则不用[section]
\newtheorem{myDef}{Definition} %这句定义使得defn环境和thm共享编号
\newtheorem{lemma}{Lemma} %这句定义使得lem环境和thm共享编号
\newtheorem{myCollo}{Corollary}
\newtheorem{remark}{Remark}
%\newtheorem{lemma}{Lemma}
\newtheorem{myPro}{Proposition}
\newtheorem{assumption}{Assumption}
\newtheorem{example}{Example}
\soulregister\cite7
\soulregister\citep7
\soulregister\citet7
\soulregister\ref7
\soulregister\it7
\soulregister\pageref7

\bibliographystyle{support/IEEEtran}

\newcommand\px{\mathrel{/\mkern-5mu/}}  %平行
\newcommand{\ann}[1]{%
    \begin{tikzpicture}[remember picture, baseline=-0.75ex]%
        \node[coordinate] (inText) {};%
    \end{tikzpicture}%
    \marginpar{%
        \renewcommand{\baselinestretch}{1.0}%
        \begin{tikzpicture}[remember picture]%
            \definecolor{orange}{rgb}{1,0.5,0}%
            \draw node[fill=red!20,rounded corners,text width=\marginparwidth] (inNote){\footnotesize#1};%
    \end{tikzpicture}%
    }%
    \begin{tikzpicture}[remember picture, overlay]%
        \draw[draw = orange, thick]
            ([yshift=-0.2cm] inText)
                -| ([xshift=-0.2cm] inNote.west)
                -| (inNote.west);%
    \end{tikzpicture}%
}%

\graphicspath{{figures/}}
\DeclareGraphicsExtensions{.pdf,.png,.jpg,.eps}
\IEEEoverridecommandlockouts
%\overrideIEEEmargins

\title{\LARGE \bf Cooperative Control of Heterogeneous Platoons against Byzantine Attacks via Only Position Feedback}
%\title{Distributed Optimization in Prescribed-Time: Theory and Experiment}%
\author{
  \vskip 1em
  {
  Xin Gong, \emph{Graduate Student Member, IEEE}, Yiwen Liang,
   Yukang Cui, \emph{Member, IEEE},
   Shi Liang,
  and Tingwen Huang, \emph{Fellow,~IEEE}

  }

  \thanks{
    This work was partially supported by the National Natural Science Foundation of China under Grant 61903258, 61973156, 61603180, Qatar National Research Fund NPRP12C-0814-190012. %(\emph{Corresponding author: Yukang Cui.}) %the National Natural Science Foundation of China under Grant 61903258

X. Gong and S. Liang are with the Department of Mechanical Engineering, The University of Hong Kong, Pokfulam Road, Hong Kong (e-mail: {\tt\small gongxin,lswyy@connect.hku.hk}).


Y. Cui and Y. Liang are with the College of Mechatronics and Control Engineering, Shenzhen University, Shenzhen, 518060, China (e-mail: {\tt\small cuiyukang,yw3liang@gmail.com}).

T. Huang is with Texas A\&M University at Qatar, Doha, 23874, Qatar (e-mail: {\tt\small tingwen.huang@qatar.tamu.edu}).

%J. He is with the Department of Mechanical Engineering, The University of Hong Kong, Pokfulam Road, Hong Kong (e-mail: {\tt\small esmehe@connect.hku.hk}).

%X. Gong is with the Department of Mechanical Engineering, The University of Hong Kong, Pokfulam Road, Hong Kong, and also with the College of Mechatronics and Control Engineering, Shenzhen University, Shenzhen 518060, China. (e-mail: {\tt\small gongxin@connect.hku.hk}).
%China, and also
%with the Department of Mechanical Engineering, University of Hong Kong,
%Hong Kong

  }
%\thanks{$^{*}$ means the corresponding author.}
}

%\maketitle
%\author{}%\vspace{-0.0cm}
%%\thanks{This work was partially supported by.}% <-this % stops a space
%\thanks{$^{*}$These authors contribute equally and share the first authorship.}
%\thanks{$^{1}$Author is with the Group Robotics with Intelligent Planning (GRIP) Lab, Department of Mechanical Engineering, University of Hong Kong, Hong Kong,
%   {\tt\small gongxin@connect.hku.hk}}
%\thanks{Digital Object Identifier (DOI): see the top of this page.}
%\vspace{-0.5cm}}

% The note headers
%\markboth{Journal of \LaTeX\ Class Files,~Vol.~14, No.~8, August~2015}%
%{Shell \MakeLowercase{\textit{et al.}}: Bare Demo of IEEEtran.cls for IEEE Journals}
%\markboth{IEEE Transactions on ...}{GONG \MakeLowercase{\textit{et al.}}: Distributed Prescribed-time Consensus Observer on Directed Graphs}%{He \MakeLowercase{\textit{et al.}}: Resilient Path Planning of UAVs against Covert Attacks on UWB Sensors}



\begin{document}
  \maketitle
  \begin{abstract}
    This paper studies the problem
     of cooperative control in heterogeneous vehicle platoons against Byzantine attacks. An agent under Byzantine attacks sends different wrong values to all of its neighbors, while it applies some wrong input signals for itself. Thus, it is extremely difficult to be depressed.  Inspired by the concept of Digital Twin, a novel hierarchical protocol equipped with a virtual
Twin Layer (TL) is proposed, which decouples the above problems into the defense scheme against
Byzantine edge attacks on the TL and the defense scheme against Byzantine node attacks  on the Cyber-Physical Layer (CPL). It is strictly proven that the topology on the TL satisfies strongly $(2f+1)$-robustness is sufficient to achieve asymptotical  performance. On the CPL, decentralized chattering-free
controllers are proposed which guarantees the  resilient output consensus in the heterogeneous platoons against  unbounded Byzantine node attacks. Besides, this controller
can achieve uniformly ultimately bounded convergence. The effectiveness and practicality  of the theoretical results are verified by a hybrid Platoon formation against Byzantine attacks.
\end{abstract}
\begin{IEEEkeywords}
     Cooperative control, Heterogeneous platoons, Byzantine attacks, Resilient Platoon Formation
% Periodic positive systems, hyper-pyramid,
% reachable set estimation, S-procedure, state-feedback control.
%Formation-containment control,  high-order multi-agent systems,  observer-type protocols,  time-varying formation configuration
\end{IEEEkeywords}
\section{Introduction}
{\color{blue}
In recent years, the number of  vehicles has continued to grow, and the increase rate of the number of vehicles is higher than the expansion rate of road space. The resulting traffic congestion problem is becoming more and more serious. A way is to coordinate and control connected vehicles in the same lane, which is the so-called vehicle platoon technology \cite{shladover1991automated}. By using lane marker
detection and lidar  technologies, an automated vehicle platoon can operate cooperatively, which  has the potential to reduce energy consumption \cite{tsugawa2011automated}. 

In a platoon, all vehicles try to maintain a safe distance between vehicles while maintaining an expected speed. People have conducted extensive research on platoon control to improve its practicability and performance. Recent progress in vehicle emission control can be found in \cite{wang2019survey}. Considering the time delay in sensors and actuators, the string stability of homogeneous and heterogeneous vehicle platoons with constant headway strategy is studied \cite{xiao2011practical}. By using the feedback linearization technique, the article \cite{hu2020cooperative}
ensure that the heterogeneous vehicles in the platoon remain equidistant. However, the safety of platoons is rarely mentioned and they may be attacked by malicious attacker.
}

\begin{figure}\label{image1}
  \centering
  \includegraphics[height=6.5cm, width=8cm]{1.jpg}
  \caption{ A Platoon of vehicles.}\label{image1}
\end{figure}


In practical applications, modern large-scale complex networked systems are vulnerable to break down when one or more nodes are compromised and become non-cooperative, which may be caused by malicious attacks on the communication network. In order to improve the safety of networks, the resilient consensus has been a vital research topic in control system community in the presence of malicious attacks such as malicious attacks \cite{2020ResilientZ}, Byzantine attacks \cite{1982The}, denial of service attacks (DoS) \cite{2016ResilientY}, false-data injection (FDI) attacks \cite{2018State}, deception attacks \cite{2020Secure}, and replay attacks \cite{2020Event}. The resilient control of MASs aims to develop distributed consensus protocols which provide an admissible system performance in the hostile situation despite the network misbehavior. In the first study of the resilience of consensus under Byzantine attacks in \cite{1982The}, the problem was described abstractly in terms of a group of Byzantine generals with their troops camped in different places around an enemy city. However, some of them
may be traitors who will confuse the others to reach an agreement, which are referred to as Byzantine agents and Byzantine attacks. Since this pioneering work of the analysis of Byzantine attacks, several important advances towards the resilient consensus have been made in the last decades. In \cite{1994Reaching}, a series of algorithms, called the Mean-Subsequence-Reduced (MSR) algorithms were developed to handle the approximate Byzantine consensus problem, in which the loyal nodes are able to achieve approximate agreement in the presence of $f$-total Byzantine faults in finite time. Then, authors in \cite{2012Low} put forward a continuous-time variation of the MSR algorithms, referred to as the Adversarial Robust Consensus Protocol (ARC-P), to achieve asymptotic consensus for Byzantine threat networks with constrained topology. In \cite{2013Resilient}, a new topological property, named network robustness, was first introduced to measure the ability of the developed local algorithms W-MSR to succeed. These concepts have been later extended and employed to analyze second-order MASs in \cite{2015Consensus}. Furthermore, \cite{2017Secure} investigated the consensus problem for nonlinear MASs suffering from attacks and communication delays. Besides the above works, researchers also investigate some other consensus-based settings like synchronization of linear time-invariant systems \cite{2017Resilient}, distributed observers \cite{2019Byzantine}, distributed optimization\cite{2017DistributedS} and so on.

On one hand, besides the aforementioned works \cite{2018Consensus,2019LeaderS,2020A,luo2021leader}, there are few results available for heterogeneous networks, which complicates the controller design since the agents with different dynamics are coupled through information exchange. On the other hand, as most of the previous works \cite{2020ByzantineS,2021ByzantineL,2021ResilientY} dealing with Byzantine attacks could only consider attacks with bounded magnitude, which are born to be incapable of unbounded node attacks aiming at maximizing its destructive power. Inspired by the recent technique advances \cite{2020ResilientZ,2020Resilient}, we propose a hierarchical resilient framework to achieve the consensus of heterogeneous multi-agent system against unbounded Byzantine attacks. For addressing this issue, the main contributions can be summarized as follows:
\begin{enumerate}
\item Inspired by digital twin technology, we design a double-layer resilient control architecture, including Twin Layer (TL) and Cyber-Physical Layer (CPL). The TL can be  deployed on the  virtual space. Thus, agents are immune to Byzantine node attacks on the TL. Because of this feature of the TL, the resilient control strategy can be decomposed into  the defense against  Byzantine edge attacks on TL and  the defense against Byzantine node attacks on CPL, as shown in Fig. \ref{image2}.
\item   We strictly prove that strongly $(2f+1)$-robustness of the topology
is still effective to resist $f$-local Byzantine attacks, rather than $(3f+1)$-robustness, compared with the results in \cite{2019Byzantine}.
\item A decentralized controller is designed on the CPL, which is chattering-free and has explicit error bound even against unbounded Byzantine attacks.
\item  Different from the existing work in \cite{2021ResilientY}, we manage to ensure both Byzantine agents and normal agents own a decent error bound in the presence of Byzantine attacks. This implies that the network connectivity of the whole platoons is preserved thanks to our hierarchal approach. Thus, the platoon vehicle formation-tracking in the simulation part could be stilled accomplished via our double-layer resilient control scheme, despite Byzantine attacks.
\end{enumerate}

\noindent\textbf{Notations:}
In this paper, {\color{blue} $\sigma_{{\rm min}}(S)$ and $\sigma(S)$ are the minimum singular value and the spectrum of matrix $S$,
respectively.} $|S|$ is the cardinality of a set $S$. $\Vert \cdot \Vert$ is the Euclidean norm of a vector. Define the sets of real numbers, positive real numbers, nonnegative integers, positive integers as $\mathbb{R}$, $\mathbb{R}_{> 0}$, $\mathbb{Z}_{\geq 0}$ and $\mathbb{Z}_{> 0}$. {\color{blue}The in-neighbor set denote the index sets denoted by $\mathcal{N}_i^{in}= \{i \in \textbf{I} \ | \ (v_j, v_i) \in \mathcal{E} \}$.}
The Kronecker product is denoted by $\otimes$. $I_N \in \mathbb{R}^{N \times N}$ is the identity matrix. Denote $\textbf{I}[a,b]=\{a, a+1, \dots, b\}$  where $a<b$.
\section{Preliminaries}
\subsection{Robust Graph Theory}
For a group of agents, define a digraph $\mathcal{G } =(\mathcal{V}, \mathcal{E}, \mathcal{A} )$ with $\mathcal{V}=\{0, 1,\dots, N\}$, which indicates the edge set, $\mathcal{E} \subset \mathcal{V} \times \mathcal{V}$ indicates the edge set. The associated adjacency matrix is represented as $\mathcal{A} = [a_{ij}]$. An edge rooting from node $j$ and ending at node $i$ is represented by ($v_j$, $v_i$), meaning the information flow from node
$j$ to node $i$. The weight of edge
($v_j$, $v_i$) is $[a_{ij}]$, and $a_{ij} > 0$ when $(v_j, v_i) \in  \mathcal{E} $, otherwise $a_{ij} = 0$. $b_{i0}> 0 $ if there is an edge between the leader and the $i$th follower, otherwise $b_{i0} = 0$. Some useful definitions of network robustness are recalled first.

\begin{myDef}[r-reachable set]
Consider a graph $\mathcal{G } =(\mathcal{V}, \mathcal{E})$, a nonempty node subset $S \in \mathcal{V}$,  We say that $\mathcal{S}$ is an $r$-reachable set if at least one node exists in set $\mathcal{S}$ with at least $r$ neighbors outside set $\mathcal{S}$.
\end{myDef}\label{def41}

The notion of $r$-reachable is able be expressed as follows: Let $r \in \mathbb{Z}_{>0}$, then define $\mathcal{X}_S \subseteq \mathcal{S}$ to be the subset of nodes in $\mathcal{S}$, that is
\begin{equation}
\mathcal{X}_S=\{i \in \mathcal{S}:|\mathcal{N}_i \backslash \mathcal{S}| \geq r  \}.
\end{equation}

\begin{myDef}[strongly r-robust w.r.t. $\mathcal{X}$]
Consider a graph $\mathcal{G } =(\mathcal{V}, \mathcal{E})$ and a nonempty set $\mathcal{X} \subseteq \mathcal{V}$. $\mathcal{G }$ is called strongly $r$-robust w.r.t. $\mathcal{X}$ if every nonempty subset $\mathcal{Y} \subseteq \mathcal{V} \backslash \mathcal{X}$ is a $r$-reachable set.
\end{myDef}
\subsection{Metzler matrix}
Consider a Metzler matrix $A \in \mathbb{R}^{n \times n}$ with zero row sums. We denote the $\alpha$-digraph associated with it as $\mathcal{G}_\alpha = (\mathcal{V},\mathcal{E})$ and all edge weights are larger than $\alpha$.

\begin{lemma} \label{lemma_1} (\cite{moreau2004stability}).
Consider the following system
\begin{equation}\label{eq2}
\dot{x}=A(t)x.
\end{equation}

It is assumed that the system matrix is a bounded piecewise continuous function of time. Moreover, the system matrix $A(t)$ is a Metzler with zero row sums for every time $t$.  If there exists an index $k \in \textbf{I}[1, n]$,  a threshold value $\alpha \in \mathbb{R}_{> 0}$ and an interval length $T \in \mathbb{R}_{> 0}$ such that for all $t \in \mathbb{R}$ the $\alpha$-digraph associated with
\begin{equation}\label{eq3}
\int_t^{t+T}A(s)\mathrm{d}s
\end{equation}
has the property that all nodes may be reached from the node $k$, then all components of any solution $x(t)$ of (1)  exponentially converge
to a common value as $t \rightarrow \infty$.
\end{lemma}

\begin{lemma} (\cite{chicone2006ordinary}).\label{lemma_2}
For any given matrix $A$, define $\beta(A) \triangleq {\rm max}\{{\rm Re}(\lambda)|\lambda \in \sigma(A)  \}$. Then
 for any $\kappa > 0$ and any $t \geq 0$, it follows that $\Vert \mathrm{e}^{At} \Vert \leq \psi(\kappa)\mathrm{e}^{(\beta(A)+\kappa)t}$.
\end{lemma}

\section{Problem Formulation}
\subsection{System Model Related Assumptions}
{\color{blue}
Consider a platoon of vehicles with different dynamics. In each platoon,  the vehicles are considered as followers indexed by $\mathcal{F}=\{1,\dots, N\}$. 
As shown in \cite{ghasemi2013stable}, the  dynamics of each vehicle can be described by the nonlinear input-affine differential
equation
\begin{align}
\dot{a}_i&=g_i(v_i, a_i)+h_i(v_i)k_i\label{equation_4},\\
g_i(v_i, a_i)&=-\frac{1}{\tau_i}(a_i+\frac{\sigma \phi_i c_{d i}}{2m_i}v_i^2+\frac{d_{m i}}{m_i})-\frac{\sigma \phi_i c_{d i}}{m_i}v_i a_i,\\
h_i(v_i)&=\frac{1}{\tau_i m_i}.
\end{align}
where $k_i$ is the input of the $i$th vehicle engine,
$\sigma$ denotes the specific mass of the air, $\phi_i$ is the crosssectional area, $c_{d i}$ indicates the drag coefficient, $m_i$ denotes the
mass, $d_{mi}$ represents the mechanical drag and $\tau_i$ symbolizes
the engine time constant, 
$\frac{\sigma \phi_i c_{d i}}{2m_i}$ denotes the  air resistance.

Now, we transform the nonlinear model into linearized dynamics by using the following feedback linearizing control law 
\begin{equation}\label{equation_7}
    k_i=u_im_i+0.5\sigma \phi_i c_{di}v_i^2+d_{mi}+\tau_i \sigma \phi_i c_{di}v_i a_i.
\end{equation}

Bring (7) into (4), the dynamics of each vehicle in the platoon can be obtained as follows
\begin{equation}
\begin{cases}
\dot{s}_i=v_i,\\
\dot{v}_i=a_i,\\
\dot{a}_i=-\frac{a_i}{\tau_i}+\frac{u_i}{\tau_i}

\end{cases}
\end{equation}

}

Then the dynamics of the followers are described as
\begin{equation}\label{eq4}
\begin{cases}
\dot{x}_i(t)=A_ix_i (t)+B_i u_i(t),   \\
y_i(t)=C_ix_i(t),
\end{cases}
\end{equation}
where $x_i(t)=  \left[
  \begin{array}{ccc}
s_i   \\
v_i  \\
a_i \\
  \end{array}
  \right]$, $A_i(t)=  \left[
  \begin{array}{ccc}
0 & 1 & 0   \\
0 & 0 & 1 \\
0 & 0 & -\frac{1}{\tau_i} \\
  \end{array}
  \right]$,   $B_i(t)=  \left[
  \begin{array}{ccc}
0    \\
0  \\
\frac{1}{\tau_i} \\
  \end{array}
  \right]$
 and  $C_i(t)=  \left[
  \begin{array}{ccc}
1 & 0 & 0   \\
  \end{array}
  \right]$. $A_i, B_i$ and $C_i$ are
the system, input, and output matrices, respectively.

The virtual leader $x_0$, which is indexed by 0, represents the reference signal to be tracked. The dynamic of the leader is described as
\begin{equation}\label{eq5}
\begin{cases}
\dot{x}_0(t)=S x_0(t),\\
y_0(t)=R x_0(t),
\end{cases}
\end{equation}
where $x_0(t) \in \mathbb{R}^q$ and $y_0(t) \in \mathbb{R}^p$ are the state and output of the  leader, respectively.
In (4) and (5), $A_i \in \mathbb{R}^{n_i \times n_i}$, $B_i \in \mathbb{R}^{n_i \times m_i}$, $C_i \in \mathbb{R}^{p_i \times n_i}$, $S \in \mathbb{R}^{n \times n}$, $R \in \mathbb{R}^{p\times n}$.
\subsection{Related Assumptions}
Then we next make some assumptions
\begin{assumption}\label{assumption_1}
All the eigenvalues of $S$ are with zero real part.
\end{assumption}
\begin{assumption}\label{assumption_2}
The pair ($S$, $R$) is detectable.
\end{assumption}
\begin{assumption}\label{assumption_3}
For any $\lambda \in \sigma(S)$, it holds that\\
\begin{equation*}
{\rm rank} \bigg( \left[
  \begin{array}{ccc}
 A_i-\lambda I &  B_i   \\
C_i &  0   \\
  \end{array}
  \right]\bigg)=n_i+q.
\end{equation*}

\end{assumption}






\begin{lemma} (\cite{huang2004nonlinear})\label{lemma_3}
Under Assumptions $1$-$3$, for each follower $i$, there exist some matrices $\Gamma_i$ and $\Pi_i$ that satisfy the following regulator equations:
\begin{equation}\label{eq6}
\begin{cases}
A_i \Pi_i +B_i\Gamma_i= \Pi_i S, \\
C_i \Pi_i-R=0.
\end{cases}
\end{equation}
\end{lemma}

{\color{blue}

\begin{assumption}\label{assumption_3}
The directed graph $\mathcal{G}$ contains a spanning tree rooted by the leader node. 
\end{assumption}

In this paper, only a fraction of followers are pinned to the leader. 
}
For the sake of illustration, we take the followers where the leader can be directly observed as the pinned followers. The set of these pinned followers is described as set $\mathcal{V}_p$. On the other hand, the remaining followers are regarded as non-pinned followers and  collected in set $\mathcal{V}_{np}$.

Define the following local output consensus error:
\begin{equation}\label{eq7}
e_i(t)=y_i(t)-y_0(t)-h_i.
\end{equation}
where $h_i=[i h_r,0,0]^T, \forall i \in \mathcal{F}$ and $h_r$ is a pre-specified distance between any
two consecutive vehicles in the platoon.

Based on the above settings, the heterogeneous platoons in (9) are said to achieve cooperative Control if $\lim_{t \to \infty} e_i(t) = 0, \forall i \in \mathcal{F}$.

\subsection{Byzantine Attack Model}\label{2B}

\begin{figure}\label{image2}
  \centering
  \includegraphics[height=6.5cm, width=8cm]{a.PNG}
  \caption{Distributed attack-resilient MASs against Composite Attacks: A two-layer framework.}\label{image2}
\end{figure}

\subsubsection{Edge Attacks}
We consider a subset $\mathcal{B} \subseteq \mathcal{V}$ of the nodes in the network to be adversarial. We assume that the nodes are completely aware of the network topology and the system dynamics of each agent. Let us denote the agents as Byzantine agents. Then, the normal agents are collected in the set $\mathcal{K}=\{1,2,\dots,k\}$, where $k$ is the number of normal agents in network.


\begin{assumption}[f-local Attack]\label{assumption_4}
{\color{blue}
There exist at most $f$  Byzantine vehicles in the in-neighborhood of each follower. That is, $|\mathcal{B}\cap \mathcal{N}^{in} _i|\leq f , \ \forall i \in \mathcal{F}$.}
\end{assumption}

Here, we mainly consider the $f$-local attack model to deal with lots of Byzantine nodes in network. It is reasonable to assume that there exists at most $f$ adjacent Byzantine nodes. Otherwise, it will be too pessimistic to protect the network.

%\begin{remark}
%The maximum number of Byzantine agents is related to the network topology, so we can derive this upper bound $f$ from the communication topology.
%\end{remark}
\begin{remark}
The Byzantine nodes can completely understand the network topology and the system
dynamics. Different from general malicious nodes in \cite{2020ResilientZ}, the Byzantine nodes herein can send arbitrary and different false data to different in-neighbors and  cooperate with other Byzantine nodes at any time.
\end{remark}

\subsubsection{Node Attacks and the associated TL solution}
%For Byzantine agents, the attacker may permeates the actuator to change the input signal of the system via adding another potentially unbounded signal.  Hence, instead of the control input $u_i$ in (2), we may only obtain the following corrupted input signal:
%\begin{equation}
%\hat{u}_i=u_i+\psi_i,
%\end{equation}
%where $\psi_i$ is the unknown and unbounded  Byzantine node  attacks  caused in the actuator.
%\begin{assumption}\label{assumption_5}
%We assume that $[({\rm d}\Vert \psi_i \Vert )/ {\rm d}t]$ is bounded and $[({\rm d}\Vert \psi_i \Vert )/ {\rm d}t] \leq \bar{\kappa}$.
%\end{assumption}

The input signals of all Byzantine nodes on the CPL could be falsified via Byzantine node attacks. Under the influence of the Byzantine node attacks, the input signal of each Byzantine agent will be subverted as
 \begin{equation}\label{assumption_5}
   \bar{u}_i(t)=\psi_i(t),\ \forall i\in  \mathcal{B},
 \end{equation}
 where $\psi_i(t)$ represents a unknown, time-varying, and potentially unbounded signals satisfying Assumption \ref{assumption_5}.

 \begin{assumption}\label{assumption_5}
   The time derivative of the magnitude of the Byzantine node attacks on each follower is bounded by  $\bar{\kappa}>0$, that is, $\sup_{t\in \mathbb{R}_{\geq 0}} \frac{d\|\psi_i(t)\|}{dt}\leq \bar{\kappa}$, $\forall i \in \mathcal{F}$.
 \end{assumption}

\begin{remark}
In contrast to many existing works \cite{gusrialdi2018competitive, de2014resilient}, which could only tackle with bounded node
attacks, this work deals with unbounded node attacks under Assumption \ref{assumption_5}. When the attackers launch injections with unbounded derivative values, it is easy for the MAS to  detect and discard these signals.
\end{remark}

Note that the $i$-index set of Assumption \ref{assumption_4} includes the Byzantine agents, apart from normal ones. This means, not only do we try to ensure that the normal agents are free from the compromised information from Byzantine edge attacks, but also we consider correcting the performance of Byzantine agents. As shown in Figure \ref{image1}, a supervising layer, named TL, provides another control signals to fight against the BNAs. With the reference signals of TL, the real input signal of each follower consists of two parts:
 \begin{equation*}%\label{ucorrupt}
   \bar{u}_i(t)={u}_i(t)+\psi_i(t),\ \forall i\in  \mathcal{F},
 \end{equation*}
 where $u_i(t)$ is the input {\color{blue}signal (correction signal)} to be designed later, which is concerned about the virtual states on the TL.




%\subsubsection{Byzantine Node Attacks and its Countermeasures}
%
%
% \begin{remark}%arabi2017mitigating
%   In contrast to many existing works \cite{de2014resilient,xie2017decentralized,jin2017adaptive,song2019set, gusrialdi2018competitive}, which could only tackle with bounded node attacks, this work deals with unbounded node attacks under Assumption \ref{assumption_5}. It should be noticed that the attack signals with excessively high time derivatives can be easily detected. Thus, the MASs could discard these bad signals with unbounded derivatives directly.
% $\hfill \hfill \square $ \end{remark}



 \subsection{Problem Formulation}

Based on the above discussions, the resilient cooperative control problem of platoons, against Byzantine attacks will be summarized as follows:

%\vspace{0.2cm}
%
%\noindent \textbf{Problem ATMBA} (Attack-resilient TVFT control of MASs against Byzantine Attacks) : For the MASs in  (\ref{virtualleader}) and (\ref{FCLF}) on digraphs subject to BAs defined in Subsection \ref{AttD32},  design a series of distributed protocols and countermeasures such that the global TVFT error, that is, $E_i$ in (\ref{PTfocusall}),
%%\begin{equation}\label{PTfocusall}
%%E_i = x_i -h_i-x_0,\ i\in \mathcal{F},
%%\end{equation}
%is UUB under Assumptions \ref{assumption03}, \ref{assumption035},  \ref{assumption040}, \ref{Asmf}, and \ref{assumption_5}.
%$\hfill \hfill \square $

\vspace{0.2cm}

\noindent \textbf{Problem ROCHMB} (Resilient Cooperative Control  of Heterogeneous Platoons against Byzantine attacks):
Consider the platoons in \eqref{eq4} and \eqref{eq5} on graphs suffered from Byzantine attacks in Section \ref{2B}, design distributed protocols $u_i$ such that the global error $e_i$ in (\ref{eq7}) is UUB.
$\hfill \hfill \square $

\section{Main Results}
\subsection{Resilient Twins Layer Design}
{\color{blue}
As shown in Fig. $\ref{image3}$, the network topology is modified on the TL. Denote the in-neighbor and out-neighbor sets of node $i$ on the TL as $\mathcal{N}_{T,i}^{in}$ and $\mathcal{N}_{T,i}^{out}$. 
}


\begin{algorithm}
\caption{Topology Modify Algorithm}
{\bf Input: The topology $\mathcal{G}(\mathcal{V}, \mathcal{E}, \mathcal{A})$ and the parameter $f$}.  
\\
{\bf Output: The TL topology $\mathcal{G}_T(\mathcal{V}_T, \mathcal{E}_T)$}.
\begin{algorithmic}[1]
   \State Initialize $\mathcal{V}$ and $\mathcal{E}$  as $\varnothing$. Initialize the sets $\mathcal{M}_a = \varnothing$ and $\mathcal{M}_b$ = $\mathcal{F} \cup \{0\}$.
   \State Add the leader into $\mathcal{M}_a$. Updata $\mathcal{M}_b=\mathcal{M}_b \backslash \{0\}$.
   \While {$\mathcal{M}_a \neq \varnothing$}
   \State Denote  the followers pinned to  $\mathcal{M}_a$ as $\mathcal{F}_u$.
   \While {$\mathcal{F}_u \ne \varnothing$}
   \For {$i \in \mathcal{F}_u$}
   \If {Node $i$ is pinned to the leader or at least $(2f+1)$ nodes in $\mathcal{M}_a$}
   \State Updata $\mathcal{M}_a=\mathcal{M}_a \cup \{i\}$.
   \State Updata $\mathcal{F}_u=\mathcal{F}_u \backslash \{i\}$.
   \State Updata
   $\mathcal{V}_T$ as the set whose nodes are in $\mathcal{M}_a$.
   \State Updata $\mathcal{E}_T=\mathcal{E}_T \cup \mathcal{E}_i$.
   \State Updata $\mathcal{G}_T=(\mathcal{V}_T, \mathcal{E}_T)$.
   \Else 
   \State Add an edge $(v_j, v_i)$ from node $j \in \mathcal{M}_a$ to node $i$ and node $j$ pins to the minimal out-neighbors. 
   \EndIf
   \EndFor
   \EndWhile
   \EndWhile
 \State \Return The TL topology $\mathcal{G}_T(\mathcal{V}_T, \mathcal{E}_T)$.
\end{algorithmic}
\end{algorithm}

\begin{example}
Consider the network topology in Fig. $\ref{image2}$:
\end{example}

\begin{enumerate}
\item Add the leader into $\mathcal{M}_a$. Update $\mathcal{M}_a={0}$ and $\mathcal{M}_b=\mathcal{F}$.
\item Collect the followers pinned to  $\mathcal{M}_a$ as $\mathcal{F}_u=\{1, 2, 3\}$.
Since the nodes in $\mathcal{F}_u$ is pinned to the leader, we update $\mathcal{M}_a=\{0, 1, 2, 3\}$, $\mathcal{F}_u=\{4, 5, 6\}$, $\mathcal{V}_T=\{v_0, v_1, v_2, v_3\}$ and $\mathcal{E}_T=\{(v_0, v_1), (v_0, v_2), (v_0, v_3)\}$.
\item Collect the followers pinned to $\mathcal{M}_a$ as $\mathcal{F}_u=\{4, 5, 6\}$.\\ As only node 5 pins to at least $(2f+1)$ nodes in $\mathcal{M}_a$, we update $\mathcal{M}_a=\{0, 1, 2, 3, 5\}$, $\mathcal{F}_u=\{4, 6\}$,\\ $\mathcal{V}_T=  \{v_0, v_1, v_2, v_3, v_5\}$ and $\mathcal{E}_T=\{(v_0, v_1), (v_0, v_2),\\ (v_0, v_3), (v_1, v_5), (v_2, v_5), (v_3, v_5)\}$.

\item Collect the followers pinned to  $\mathcal{M}_a$ as $\mathcal{F}_u=\{4, 6\}$.\\ Since only node 4 pins to at least $(2f+1)$ nodes  in  $\mathcal{M}_a$, we update $\mathcal{M}_a=\{0, 1, 2, 3, 4,  5\}$, $\mathcal{F}_u=\{ 6\}$, $\mathcal{V}_T=\{v_0, v_1, v_2, v_3, v_4, v_5\}$ and $\mathcal{E}_T=\{(v_0, v_1), (v_0, v_2), (v_0, v_3), (v_1, v_5), (v_2, v_5), (v_3, v_5),\\ (v_2, v_4), (v_3, v_4), (v_5, v_4)\}$.
\item Collect the followers pinned to $\mathcal{M}_a$ as $\mathcal{F}_u=\{6\}$. As none of node  pins to the leader or at least $(2f+1)$ nodes in $\mathcal{M}_a$, the edge $(v_4, v_6)$ should be added. Then we can find that node 4 pins to at least $(2f+1)$ nodes in $\mathcal{M}_a$, we update $\mathcal{M}_a = \{0, 1, 2, 3, 4,  5, 6\}$, $\mathcal{F}_u=\{ 6\}$, $\mathcal{V}_T=\{v_0, v_1, v_2, v_3, v_4, v_5, v_6\}$ and $\mathcal{E}_T=\{(v_0, v_1), (v_0, v_2), (v_0, v_3), (v_1, v_5), (v_2, v_5), (v_3, v_5),\\ (v_2, v_4), (v_3, v_4), (v_5, v_4), (v_1, v_6), (v_2, v_6), (v_4, v_6)\}$.
\end{enumerate}

\begin{figure}
  \centering
  \includegraphics[height=6cm, width=8.5cm]{CT.PNG}
  \caption{Different topologies of the CPL and The TL}\label{image3}
\end{figure}

\begin{remark}
{\color{blue} 
Different from the existing work \cite{3xiao2021distributed}, we consider the TL that can encounter the Byzantine edge attacks, rather than the completely secure layer.
Since TL has certain programmability in topology, $\mathcal{G}$ and $\mathcal{G}_T$ are not requisitely the same. Compared with the traditional distributed observer, the TL has stronger confidentiality and higher security, which can be deployed in the cloud. 
}
\end{remark}

Then we use the the MSR algorithm \cite{1994Reaching} to process the virtual state $z_i(t)$ on the TL. At any time $t$, each follower  always makes updates as below:
\begin{enumerate}
\item Collect the status of all neighbor agents (except the leader if $i \in \mathcal{V}_p$) in a list $\Lambda_i(t)$.

\item The agents in $\Delta_i(t)$ are divided into $\overline{\Delta}_i(t)$ and $\underline{\Delta}_i(t)$ as follows :
\begin{equation}
\begin{split}
&\overline{\Delta}_i(t)=\{j \in \Delta_i:z_j(t) < z_i(t)\},   \\
&\underline{\Delta}_i(t)=\{j \in \Delta_i:z_j(t) > z_i(t)\},
\end{split}
\end{equation}

Remove $f$ largest state values in $\overline{\Delta}_i(t)$ that are greater than $z_i(t)$. Remove all values  if the number of agents in $\overline{\Delta}_i(t)$ is less than $f$.


\item Similarly, remove $f$ smallest state values in $\overline{\Delta}_i(t)$ that are lower than $z_i(t)$. Remove all values  if the number of agents in $\overline{\Delta}_i(t)$ is less than $f$.


\item Denote $\Omega_i (t)$, termed as an admitting set, as the collection of agents whose values are retained after (2) and (3). Agent $i$ makes updates  with the following rule:
\begin{equation}\label{eq10}
\begin{aligned}
\dot{z}_i (t) =\sum_{j \in \Omega_i(t)} &(\bar{\alpha} m_{i j}(t)(z_j(t)-z_i(t))\\
&+\bar{\alpha}m_{i0}(t)(z_0(t)-z_i(t))),
\end{aligned}
\end{equation}
where $z_i(t)$ is the local state of the virtual layer, $\bar{\alpha}> \alpha$, $m_{ij}$ denotes the number of adjacent followers of agent $i$, and $m_{i0}$ denotes the number of adjacent leader of agent $i \in \Omega_i(t)$.
\end{enumerate}

\begin{algorithm}
\caption{MSR algorithm}
\begin{algorithmic}[1]
   \State Receive the virtual states $z_j$ from all in-neighboring agents in a list $\Delta_i(t)$
   \State  Agents with state values greater than $z_i(t)$ are divided into set $\overline{\Delta}_i(t)$ and the rest are divided into set $\underline{\Delta}_i(t)$.
   \State  Compute the number of values that are in $\overline{\Delta}_i(t)$ and  $\underline{\Delta}_i(t)$  as $k$ and $q$, respectively.
   \If  {$k \geq f$}
   \State Remove $f$ largest state values in $\overline{\Delta}_i(t)$ .
   \Else
   \State Remove all largest state values $\overline{\Delta}_i(t)$.
   \EndIf
   \If  {$q \geq f$}
   \State Remove $f$ smallest state values in $\underline{\Delta}_i(t)$ .
   \Else
   \State Remove all smallest state values in $\underline{\Delta}_i(t)$.
   \EndIf
   \State Collect the agents retained after above process as a list $\Omega_i (t)$.
\end{algorithmic}
\end{algorithm}

We can resist edge attacks in this way. At any time, the agent removes at most 2$f$ extreme values and updates itself with the remaining information.

Agents on the TL can communicate with agents on the CPL. Compared to the output $y_i$ of the cyber-physical layer, the virtual state $z_i(t)$ of the twin layer has no physical meaning and is less observable to the attackers and unlikely to be attacked. Therefore, we can think that the nodes on the twin layer can not be attacked.

\begin{lemma}\label{lemma_4}
Consider the MASs satisfying the Assumption \ref{assumption_4}. Suppose each follower makes updates with MSR algorithm and there exists at least $2f+1$ in-neighbors outside the agent $i \in \mathcal{V}_{np}$. Then we have two statements as follows:
\begin{enumerate}
\item There exists a nonempty set $\Upsilon_i(t) \subseteq \mathcal{N}_{T,i}^{in}$ and some positive weights $\bar{m}_{ij}(t)$, so that the \eqref{eq10} is equivalent to the following form:
\begin{equation}\label{eq11}
\begin{aligned}
\dot{z}_i (t) =\sum_{j \in \Upsilon_i(t)} &(\bar{m}_{i j}(t)(z_j(t)-z_i(t))\\
&+{m}_{i0}(t)(z_0(t)-z_i(t))),
\end{aligned}
\end{equation}
\item For any agent $j \in \Upsilon_i(t)$, it holds that ${\rm max}\{\bar{m}_{i j} (t) \} > \frac{\alpha}{2}$.
\end{enumerate}

\end{lemma}

\textbf{Proof.}
The proof can be divided into the following two cases:

\textbf{Case 1:}  $i \in \mathcal{V}_{np}$. Since the in-neighbors of each agent $i$ are at least $2f+1$, it holds that $\Omega_i(t) \neq \varnothing$ as each agent
removes at most $2f$ values. If there exists some Byzantine agents in $\Omega_i(t)$, we denote that $\vartheta(t)=1$; otherwise, $\vartheta(t)=0$.

\begin{enumerate}
\item $\vartheta(t)=0$.
In the  case, it is obvious that the two statements are satisfied by letting $\bar{m}_{ij}(t) = \bar{\alpha}m_{ij}(t)$. Thus we mainly consider the second case where there are some Byzantine agents in $\Omega_i(t)$.


\item $\vartheta(t)=1$.
Consider the Byzantine agent $b \in \Omega_i(t)$. Since $z_b(t)$ is retained in $\Omega_i(t)$, it means that there exists $f$ agents whose states are greater than $z_b(t)$ and $f$ agents whose states are less than $z_b(t)$. The Byzantine agent pretend to be a normal agent. We can find a pair of normal nodes $p, q \in \mathcal{R}$ such that $z_p(t) \leq z_b(t) \leq z_q(t)$. There exists $0 \leq \gamma \leq 1 $ such that $z_b(t) = \gamma z_p(t) + (1-\gamma) z_q(t)$.  By setting $\bar{m}_{ip}(t) =\bar{\alpha}( m_{ip}(t) +\gamma m_{ib}(t))$ and $\bar{m}_{iq}(t) = \bar{\alpha}(m_{iq}(t) +(1-\gamma) m_{ib}(t))$, each Byzantine agent $b$ can be decomposed into two normal agents $p$ and $q$.
By repeating the above steps, we can obtain that (11) is hold. Moreover, we can find that
\begin{equation}
\begin{aligned}
&{\rm max}_{j \in \Omega_i(t)}\{\bar{m}_{ij}(t)\}\\
&\geq {\rm max}\{(1-\gamma), \gamma \}\bar{\alpha} \geq \frac{1}{2}\bar{\alpha}
\geq
\frac{1}{2}{\alpha}.
\end{aligned}
\end{equation}
\end{enumerate}

\textbf{Case 2:} $i \in \mathcal{V}_p$. This case is similar to Case 1 except that the information from leader will be preserved.

The proof is completed.  $\hfill \blacksquare$

\begin{lemma}\label{lemma_5}
Consider the MASs satisfying Assumption \ref{assumption_5}. Suppose $\mathcal{G} =(\mathcal{V}, \mathcal{E})$  is strongly $(2f+1)$-robustness w.r.t. $\mathcal{V}_p$ and all followers make updates according to the MSR algorithm. At any time $t$, there always exists a secure and equivalent $\frac{1}{2}\alpha$-directed path from leader to any follower in $\mathcal{F}$.
\end{lemma}

\textbf{Proof.}
The first statement in Lemma \ref{lemma_4} ensures that there exists a secure spanning tree rooted by the leader to all followers in $\mathcal{F}$. Moreover, the second statement in Lemma \ref{lemma_4} ensures that the above
secure spanning tree is an equivalent $\frac{1}{2}\alpha$-directed spanning tree. Consequently, Lemma \ref{lemma_5} can be proven
by following a similar procedure of Lemma \ref{lemma_4}.
The proof is completed.    $\hfill \blacksquare$

Note that MSR algorithm is proposed in the one-dimensional systems where the system state is simply a scalar. In order to cope with the multi-dimensional case, we discuss the extension of MSR to vector spaces. Towards the end, for any vector $z_i(t) \in \mathbb{R}^q$, let us introduce the notation:
\begin{equation}\label{eq13}
\begin{aligned}
\Theta_{f}(\{z_j(t)\}_{j \in \mathcal{N}_{T,i}^{in}}) \triangleq
\begin{bmatrix} \sum\limits_{j \in \Omega_i^1(t)} {m}_{i j}^1(t)[z_j^1(t)-z_i^1(t)]\\+m_{i0}^1(t)[z_0^1(t)-z_i^1(t)] \\ \vdots \\  \sum\limits_{j \in \Omega_i^q(t)} {m}_{i j}^q(t)[z_j^q(t)-z_i^q(t)]\\+m_{i0}^q(t)[z_0^q(t)-z_i^q(t)] \end{bmatrix}.
\end{aligned}
\end{equation}

\begin{lemma}\label{lemma_6}
Consider the following updating law:
\begin{equation}\label{eq14}
 \dot{z}_i(t) = \Theta_{f}(\{z_j(t)\}_{j \in \mathcal{N}_{T,i}^{in}}),
\end{equation}
where $\Theta_{f}(\{z_j(t)\}_{j \in \mathcal{N}_{T,i}^{in}})$ is defined in \eqref{eq13}. With the same settings as Lemma \ref{lemma_5}, $z_i(t)$ exponentially converges to $z_0(0)$.
\end{lemma}

\textbf{Proof.}
The two statements of Lemma \ref{lemma_4} hold, with the same settings as Lemma \ref{lemma_5}. By applying Lemma \ref{lemma_4} on \eqref{eq13}, we obtain
\begin{equation}
\begin{aligned}
\dot{z}_i(t) =
\begin{bmatrix} \sum\limits_{j \in \Upsilon_i^1(t)} \bar{m}_{i j}^1(t)[z_j^1(t)-z_i^1(t)]\\+m_{i0}^1(t)[z_0^1(t)-z_i^1(t)] \\ \vdots \\  \sum\limits_{j \in \Upsilon_i^q(t)} \bar{m}_{i j}^q(t)[z_j^q(t)-z_i^q(t)]\\+m_{i0}^q(t)[z_0^q(t)-z_i^q(t)] \end{bmatrix},
\end{aligned}
\end{equation}
{\color{blue}
where $\Upsilon_i^s(t) \subseteq \mathcal{N}_i^{in}, \forall s \in \textbf{I}[1, q].$}  Let us define $z^s(t) \triangleq [z_0^s(t), z_1^s(t), z_2^s(t),\dots, z_N^s(t)]$. From former discussion, we have
\begin{equation}\label{EQ16}
\dot{z}^s(t)=\bar{\Phi}^s(t)z^s(t),
\end{equation}
where $\bar{\Phi}^s(t)=[\bar{\phi}_{ij}^s(t)]$ such that
\begin{equation}
\begin{split}
\bar{\phi}_{ij}^s=
\begin{cases}
m_{i0}+\sum_{j \in \Upsilon_i(t)} \bar{m}_{ij}, &j=i\\
-\bar{m}_{ij},        & j \in \Upsilon_i(t)\\
0,& {\rm otherwise}.
\end{cases}
\end{split}
\end{equation}
In (\ref{EQ16}), $\bar{\Phi}^s(t)$ is a Metzler matrix with zero row sums. According to Lemma \ref{lemma_5}, each $\bar{\Phi}^s(t)$ has the property that any follower can be reached from the leader. Recalling Lemma \ref{lemma_1}, $z_i^s(t)$ exponentially converges to a common values as $t \rightarrow \infty$. Leader can not collect states from followers, so it holds that $z_0^s(t)=z_0^s(0)$. Thus, $z_i^s(t)$ exponentially converges to $z_0^s(0)$ for any $i$. The proof is completed.    $\hfill \blacksquare$

{\color{blue} There exists $\bar{R}\in \mathbb{R}^{n \times p}$ such that $R\bar{R}=I_p$}. 
We formulate a distributed TL to achieve the resilient control of MASs:
\begin{equation}\label{FDTL1}
\begin{split}
\begin{cases}
\dot{v}_i=Sv_i+\xi_i+\varpi_i, \\
\varpi_i=-S\bar{R}h_i,  ~ i \in \mathcal{F},
\end{cases}
\end{split}
\end{equation}
where the virtual state ${v}_i$ denote the $i$th follower's estimation on the leader state, $\xi_i$ denotes the update signals of the TL to be designed, and $\varpi_i$ denotes denotes the
feed-forward formation compensation signal.  

The secure fully-distributed estimation scheme is proposed as
\begin{equation}\label{FDTL2}
\xi_i(t)=Q e^{\Lambda t}\Theta_{f}(e^{-\Lambda t} Q^{-1}\{v_j\}_{j \in \mathcal{N}_i^{in}}),
\end{equation}
where $\Lambda=Q^{-1}SQ$ denotes the Jordan triangular matrix and $z_i(t)=v_i(t)-\bar{R}h_i$. Specially, $z_0=v_0=x_0$ in (24). Let
\begin{equation}
\delta_i(t)= v_i(t)-\bar{R}h_i-v_0(t),
\end{equation}
denote as the estimation error of the $i$th agent.

We then give a sufficient condition such that the distributed asymptotical estimation on the TL can be
achieved against the persistent Byzantine edge attacks:
\begin{myTheo}
Consider a TL in (18) and (19) under Assumptions 1, 2, 3 and 4. The estimation error on
the TL layer under Byzantine  attacks converges into zero asymptotically, that is,
$\lim_{t \to \infty} \delta_i(t) =0, i \in \mathcal{F}$, if $m_{ij}$ is solved via Algorithm 1.
\end{myTheo}

\textbf{Proof.}
Define the auxiliary variable $q_i(t)=e^{-\Lambda t}Q^{-1}(v_i(t)
-\bar{R}h_i)=e^{-\Lambda t}Q^{-1}z_i(t)$. Similarly, let $q_0(t)=e^{-\Lambda t}Q^{-1} v_0(t)=e^{-\Lambda t}Q^{-1} z_0(t)$. It is obvious that $q_i(0)
=Q^{-1}v_i(0), i \in \mathcal{F} \cup \{0\}$. We compute the derivative of $q_i(t)$:
\begin{equation}
\begin{split}
\dot{q}_i(t)
=&-\Lambda e^{-\Lambda t}Q^{-1} z_i(t)\\
&+e^{-\Lambda t}Q^{-1}(S v_i+\xi_i+\varpi_i)\\
=&-\Lambda e^{-\Lambda t}Q^{-1} z_i(t)+e^{-\Lambda t}Q^{-1}(Q \Lambda Q^{-1}v_i\\
&+Q e^{\Lambda t}\Theta_f(e^{-\Lambda t} Q^{-1}\{v_j\}_{j \in \mathcal{N}_i^{in}})-Q\Lambda Q^{-1}\bar{R}h_i)\\
=&\Theta_f(\{q_j\}_{j \in \mathcal{N}_{T,i}^{in}}).
\end{split}
\end{equation}
by recalling the fact that
$\Lambda e^{-\Lambda t}= e^{-\Lambda t}\Lambda$.
By employing (26) and Lemma 6, we conclude that
$q_i(t)$  converges to $q_0(0)$ exponentially. In other words, there exists a $\rho > 0$ such that
\begin{equation}
\Vert q_i(t)-q_0(0) \Vert \leq e^{-\rho t} \Vert q_i(0)-q_0(0) \Vert .
\end{equation}

Since $q_i(0)=Q^{-1}z_i(0)$, one has
\begin{equation}
\Vert q_i(t)-Q^{-1}z_0(0) \Vert \leq e^{-\rho t} \Vert  Q^{-1}  z_i(0)-Q^{-1} z_0(0) \Vert .
\end{equation}

Multiplying the above inequality with
$Q e^{\Lambda t}$ yields
\begin{equation}
\begin{split}
&\Vert  Q e^{\Lambda t}(   q_i(t)-Q^{-1}z_0(0) ) \Vert\\
=&\Vert z_i(t)-z_0(t) \Vert\\
\leq&e^{-\rho t} \Vert Q e^{\Lambda t}\Vert \Vert Q^{-1}z_i(t)-Q^{-1}z_0(0) \Vert\\
\leq&e^{-\rho t} \Vert Q e^{\Lambda t} Q^{-1}\Vert \Vert   z_i(0)-z_0(0)  \Vert\\
\leq& e^{-\rho t} \Vert e^{S t} \Vert \Vert   z_i(0)-z_0(0)  \Vert.
\end{split}
\end{equation}

By recalling Lemma 2, there always exists a constant $\varphi > 0$ such that
\begin{equation}
\Vert \mathrm{e}^{St} \Vert  \leq \varphi(\epsilon)\mathrm{e}^{\epsilon t},
\end{equation}
for any $0<\epsilon<\rho $. Hence, it holds that
\begin{equation}
\begin{split}\label{eq28}
\Vert z_i(t)-z_0(t) \Vert &\leq
\mathrm{e}^{-\rho t}   \varphi(\epsilon)\mathrm{e}^{\epsilon t} \Vert (z_i(0)-z_0(0)) \Vert \\
&\leq \varphi(\epsilon) \mathrm{e}^{-\delta t} \Vert (z_i(0)-z_0(0)) \Vert,
\end{split}
\end{equation}
where $\delta = \rho -\epsilon > 0 $.
Therefore, we have $\lim_{t \to \infty} z_i(t)=z_0(t)$, and thus the estimation error $\delta_i(t), i \in \mathcal{F}$, converges to 0 exponentially.

This completes the proof.  $\hfill \blacksquare$



{
\subsection{{\color{blue}Decentralized Controller on the CPL against Byzantine Node Attacks}}
Define the following state tracking error:
\begin{equation}
\varepsilon_i=x_i-\Pi_i v_i.
\end{equation}
%where  $v_i=\mathrm{e}^{St} v_i$.

We then present the following control protocols:
\begin{align}
u_i&=K_ix_i+H_i v_i-\theta_i-\hat{\psi}_i, \label{eq19}\\
\theta_i&=\bar{B}_i \Pi_i S\bar{R}h_i,\\
\hat{\psi}_i&=\frac{B^T_i P_i\varepsilon_i}{\Vert \varepsilon^T_i P_i B_i \Vert+\omega}\hat{\rho}_i,  \label{eq20}\\
\dot{\hat{\rho}}_i&=
\begin{cases}
\Vert \varepsilon^T_i P_i B_i \Vert +2\omega, \quad  \mbox{if} \   \Vert \varepsilon^T_i P_i B_i \Vert \geq \bar{\kappa}\\
\Vert \varepsilon^T_i P_i B_i \Vert +2\omega(\frac{\Vert \varepsilon^T_i P_i B_i \Vert}{\bar{\kappa}}), \quad \mbox{otherwise,}\label{eq21}
\end{cases}
\end{align}
where  $\hat{\psi}_i$ is an adaptive compensational signal designed and $\dot{\hat{\rho}}_i$ is an adaptive updating parameter. Define a nonsingular matrix $[\bar{B}_i^T, \widetilde{B}_i^T]^T$ such that $\bar{B}_i B_i= I_{m_i}$ and $\widetilde{B}_i B_i = 0_{mi}$.

\begin{myTheo}
Suppose that Assumptions \ref{assumption_1}-\ref{assumption_5} hold.
Consider the heterogeneous MASs with \eqref{eq4} and \eqref{eq5}.
 \textbf{Problem ROCHMB} can be solved  via the secure TL in (\ref{FDTL1}) and (\ref{FDTL2}) and the decentralized controller (\ref{eq19})-(\ref{eq21}), if the following two conditions hold:
\begin{enumerate}
{\color{blue}
\item The feasibility condition of output formation  is satisfied as follows:
\begin{align}
\widetilde{B}_i \Pi_i S \bar{R}h_i=0 \label{eq37}.
\end{align}}
\item The controller gain matrices $K_i$ and $H_i$ are designed as:
\begin{align}
K_i&=-U_i^{-1}B_i^T P_i, \label{eq22} \\
H_i&=\Gamma_i-K_i \Pi_i, \label{eq23}
\end{align}
where $P_i$ is positive definite matrix and satisfies the following Riccati equation:
\begin{equation}\label{eq24}
P_i A_i+A_i^T P_i-P_i B_i U_i^{-1}B_i^T P_i +Q_i-\frac{1}{\mu_i}I= 0,
\end{equation}
where $U_i > 0$ is a symmetric matrix. $Q_i >0$ and $\mu_i>0$  satisfy $Q_i-\frac{1}{\mu_i}I > 0$.
\item  $m_{ij}$ in \eqref{eq10} is tackled by using MSR algorithm.
\end{enumerate}
\end{myTheo}

\textbf{Proof.} Note that \eqref{eq7} can be written as
\begin{equation}
\begin{split}
\mathrm{e}_i(t)&=C_ix_i(t)-Rx_0(t)-h_i\\
&=C_ix_i(t)-C_i\Pi_ix_0(t)-h_i\\
&=C_i(x_i(t)-\Pi_ix_0(t))-h_i\\
&=C_i\big(x_i(t)-\Pi_i v_i(t)+\Pi_i(v_i(t)-x_0(t))\big)-h_i\\
&=C_i\varepsilon_i(t)+C_i\Pi_i(z_i(t)-x_0(t)),
\end{split}
\end{equation}

Then we have
\begin{equation}
\begin{split}
\Vert \mathrm{e}_i(t) \Vert& = \Vert C_i \varepsilon_i(t)+C_i\Pi_i(z_i(t)-x_0(t)) \Vert\\
&\leq \Vert C_i\varepsilon_i(t) \Vert+\Vert C_i\Pi_i(z_i(t)-x_0(t)) \Vert\\
&\leq \Vert C_i\Vert \Vert \varepsilon_i(t) \Vert+\Vert C_i\Pi_i\Vert \Vert (z_i(t)-x_0(t)) \Vert.
\end{split}
\end{equation}

To show that $ \mathrm{e}_i(t)$ is UUB, in the following part, we shall prove that $\Vert \varepsilon_i(t) \Vert$ is UUB and $\Vert (z_i(t)-x_0(t)) \Vert  \rightarrow 0$ as $t \rightarrow \infty$. Using (31), we can obtain
\begin{equation}
\begin{split}
\Vert z_i(t)-x_0(t) \Vert &=
\Vert z_i(t)-z_0(t) \Vert\\
&\leq  \varphi(\epsilon)  \mathrm{e}^{-\delta t} \Vert z_i(0)-z_0(0) \Vert,
\end{split}
\end{equation}

Then $\Vert z_i(t)-x_0(t) \Vert$ converges to 0 exponentially.

Next, we prove that $\Vert \varepsilon(t) \Vert$ is UUB. From \eqref{eq4}, \eqref{eq6}, \eqref{eq14}, and \eqref{eq23}, we obtain the time derivative of \eqref{eq11} as
\begin{equation}
\begin{split}
\dot{\varepsilon}_i =&\dot{x}_i-\Pi_i (S v_i+\xi_i-S \bar{R} h_i)\\
=&A_i x_i+B_i K_i x_i+B_i H_i v_i-B_i \hat{\psi}_i+B_i \psi_i\\
&-B_i\theta_i-\Pi_i S v_i-\Pi_i \xi_i-\Pi_i \varpi_i\\
=&\bar{A}_i \varepsilon_i-B_i \hat{\psi}_i+B_i \psi_i-\Pi_i \xi_i+\Xi_i,
\end{split}
\end{equation}
where $\bar{A}_i = A_i+B_i K_i$ and $\Xi_i=-B_i \theta_i-\Pi_i \varpi_i$. 
Note that $\bar{B}_i B = I_{m_i}$, we have 
\begin{equation}\label{eq45}
\bar{B}_i \Pi_i S\bar{R}h_i-\bar{B}_i B_i \theta_i =0.
\end{equation}

According to $\eqref{eq37}$, we can obtain that 
\begin{equation}\label{eq46}
\widetilde{B}_i \Pi_i S\bar{R}h_i-\widetilde{B}_i B_i \theta_i =0.
\end{equation}

Using $\eqref{eq45}$ and $\eqref{eq46}$, we obtain
\begin{equation}\label{eq47}
B_i \theta_i- \Pi_i S \bar{R}h_i=0.
\end{equation}

It follows from $\eqref{FDTL1}$ and $\eqref{eq47}$, we obtain that
\begin{equation}
\Xi_i=-B_i \theta_i-\Pi_i \varpi_i=0
\end{equation}

Let $\bar{Q}_i=Q_i+K_i^T U_i K_i$. It can be obtained from \eqref{eq22} and \eqref{eq24} that
\begin{equation}
P_i \bar{A}_i+\bar{A}_i^T P_i= -\bar{Q}_i+\frac{1}{\mu_i}I.
\end{equation}

The Lyapunov function is considered as:
\begin{equation}
V(t)=\sum_{i=1}^N \varepsilon_i^T P_i \varepsilon_i.
\end{equation}

The derivative of $V(t)$ can be calculated as
\begin{equation}\label{eq35}
\begin{aligned}
&\dot{V}(t)\\
=&2\sum_{i=1}^N \varepsilon_i^T P_i(\bar{A}_i \varepsilon_i-B_i \hat{\psi}_i+B_i \psi_i-\Pi_i \xi_i)\\
=&\sum_{i=1}^N \varepsilon_i^T(P_i \bar{A}_i+\bar{A}_i^T P_i) \varepsilon_i-2\sum_{i=1}^N \varepsilon_i^T P_i \Pi_i \xi_i\\
&+2\sum_{i=1}^N \varepsilon_i^T P_i (B_i \psi_i-B_i \hat{\psi}_i)\\
=&\sum_{i=1}^N \varepsilon_i^T(-\bar{Q}_i+\frac{1}{\mu_i}I)\varepsilon_i-2\sum_{i=1}^N \varepsilon_i^T P_i \Pi_i \xi_i\\
&+2\sum_{i=1}^N \varepsilon_i^T P_i (B_i \psi_i-B_i \hat{\psi}_i).
\end{aligned}
\end{equation}

Using \eqref{eq20} and \eqref{eq21} to obtain
\begin{equation}
\begin{split}
&\varepsilon_i^T P_i B_i (\psi_i-\hat{\psi}_i)\\
=&\varepsilon_i^T P_i B_i \psi_i-\frac{{\Vert \varepsilon_i^T P_i B_i \Vert}^2 }{\Vert \varepsilon_i^T P_i B_i \Vert+\omega}\hat{\rho}_i\\
\leq& \Vert \varepsilon_i^T P_i B_i \Vert \Vert \psi_i \Vert -\frac{{\Vert \varepsilon_i^T P_i B_i \Vert}^2 }{\Vert \varepsilon_i^T P_i B_i \Vert+\omega}\hat{\rho}_i\\
\leq& \frac{{\Vert \varepsilon_i^T P_i B_i \Vert}^2(\Vert \psi_i \Vert- \hat{\rho}_i)+\Vert \varepsilon_i^T P_i B_i \Vert \Vert \psi_i \Vert \ \omega}{\Vert \varepsilon_i^T P_i B_i \Vert+\omega}\\
\leq&  \frac{{\Vert \varepsilon_i^T P_i B_i \Vert}^2(\frac{\Vert \varepsilon_i^T P_i B_i \Vert +\omega}{\Vert \varepsilon_i^T P_i B_i \Vert}\Vert \psi_i \Vert-\hat{\rho}_i)}{\Vert \varepsilon_i^T P_i B_i \Vert+\omega}.
\end{split}
\end{equation}

Noting that $[({\rm d}\Vert \psi_i \Vert )/ {\rm d}t]$ is bounded by $\bar{\kappa}$.  Choose $\dot{\hat{\rho}}_i \geq  \bar{\kappa} \geq [({\rm d}\Vert \psi_i \Vert )/ {\rm d}t]$,that is, $\frac{\bar{\kappa}+\omega}{\bar{\kappa}} \frac{d \Vert \psi_i \Vert}{dt}-\dot{\hat{\rho}}_i \leq \bar{\kappa}+\omega-\dot{\hat{\rho}}_i \leq -\omega < 0$. Then, $\exists$ $ t_1 > 0$  such that for all $t \geq t_1$, we have
\begin{equation}
\frac{\Vert \varepsilon_i^T P_i B_i \Vert +\omega} {\Vert \varepsilon_i^T P_i B_i \Vert}\Vert \psi_i \Vert -\hat{\rho}_i \leq  \frac{\bar{\kappa}+\omega}{\bar{\kappa}}\Vert \psi_i \Vert-\hat{\rho}_i < 0.
\end{equation}

Thus, we have
\begin{equation}\label{eq38}
\varepsilon_i^T P_i B_i \psi_i-\varepsilon_i^T P_i B_i \hat{\psi}_i \leq 0, ~\forall t \geq t_1.
\end{equation}

Substituting \eqref{eq38} into \eqref{eq35} yields, $\forall t \geq t_1$,
\begin{equation}\label{eq39}
\dot{V}(t) \leq \sum_{i=1}^N \varepsilon_i^T(-\bar{Q}_i+\frac{1}{\mu_i}I)\varepsilon_i-2\sum_{i=1}^N \varepsilon_i^T P_i \Pi_i \xi_i.
\end{equation}

By using Yong's inequality, it holds that
\begin{equation}\label{eq40}
\begin{split}
&2\varepsilon_i^T P_i \Pi_i \xi_i \leq& \frac{1}{\mu_i}\varepsilon_i^T\varepsilon_i+\mu_i\xi_i^T\Pi_i^T P_i^T P_i \Pi_i  \xi_i.
\end{split}
\end{equation}

By using \eqref{eq39} and \eqref{eq40}, we can obtain that
\begin{equation}
\begin{aligned}
\dot{V}(t) \leq &-\sum_{i=1}^N \varepsilon_i^T \bar{Q}_i \varepsilon_i\\
&-\sum_{i=1}^N\mu_i\xi_i^T \Pi_i^T P_i^T P_i \Pi_i  \xi_i,  ~\forall t\geq t_1.
\end{aligned}
\end{equation}

In light of \eqref{eq28}, $\Theta_{f}(\cdot)$  exponentially tends to 0. According to Lemma 2,  it follows that $\xi_i$ also exponentially tends to 0. We conclude that there exist $\epsilon_1$
 and $\epsilon_2$ such that
 \begin{equation}
 \sum_{i=1}^N \mu_i\xi_i^T\Pi_i^T P_i^T P_i \Pi_i  \xi_i \leq \epsilon_1 \mathrm{e}^{-\epsilon_2 t}.
\end{equation}

Thus,
\begin{equation}\label{eq43}
\begin{split}
\dot{V}(t) \leq -\eta \sum_{i=1}^N   \varepsilon_i^T \varepsilon_i(t)- \epsilon_1 \mathrm{e}^{-\epsilon_2 t},  ~\forall t \geq t_1,
\end{split}
\end{equation}
where $\eta = \sigma_{\mathrm{min}}(\bar{Q}_i)$. From \eqref{eq43}, we have
\begin{equation}
\begin{aligned}
&V(t)-V(t_1) \\
\leq &-\eta \sum_{i=1}^N \int_{t_1}^t \Vert \varepsilon_i(\tau) \Vert^2 d\tau +\frac{\epsilon_1}{\epsilon_2}(\mathrm{e}^{-\epsilon_2 t}-\mathrm{e}^{-\epsilon_2 t_1}).
\end{aligned}
\end{equation}

Thus, we have
\begin{equation}
\sum_{i=1}^N \Vert \varepsilon_i(t) \Vert^2 \leq -\sum_{i=1}^N \int_{t_1}^t \Vert \varepsilon_i(\tau) \Vert^2 d\tau + F,
\end{equation}
where $F=\frac{1}{\eta}(\frac{\epsilon_1}
{\epsilon_2}(\mathrm{e}^{-\epsilon_2 t}-\mathrm{e}^{-\epsilon_2 t_1})+V(t_1))$.
Using Bellman–Gronwall Lemma, we obtain
\begin{equation}
\sum_{i=1}^N \Vert \varepsilon_i(t) \Vert^2 \leq -\sqrt{F}\mathrm{e}^{-(t-t_1)}, ~\mathrm{if} {\Vert \varepsilon_i^T P_i B_i \Vert} \geq \bar{\kappa}  
\end{equation}

That is, $\Vert \varepsilon_i(t) \Vert$ is UUB.
Hence, the output consensus problem for MASs \eqref{eq4} and \eqref{eq5}  has been solved, which completes the proof.  $\hfill \blacksquare$

\section{Numerical Simulation}
In this section, we use a simulation example to verify the effectiveness of the above theoretical results.

Consider a heterogeneous platoons. Their communication
topology is shown in Figure. \ref{image2}.  There are six followers
and one leader. Our goal is to achieve formation tracking of vehicle platoons against Byzantine attacks on the XY plane, that is, the horizontal plane. 

The  heterogeneous dynamics of vehicles can be described by
\begin{align*}
&A_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
0 &  1   \\
0 &  0   \\
  \end{array}\right], ~B_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
0   \\
1  \\
  \end{array}\right], \\
 & C_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
1 &  0   \\
  \end{array}\right],
\end{align*}
and
\begin{equation*}
    \begin{aligned}
A_{4,5,6}=&I_2 \otimes  \left[
  \begin{array}{ccc}
0 &  1 & 0  \\
0 &  0 & 1  \\
-1 &  -2 & -1  \\
  \end{array}\right], \\
  B_{4,5,6}=&I_2 \otimes  \left[
  \begin{array}{ccc}
0   \\
0   \\
1  \\
  \end{array}\right],~
C_{4,5,6}=I_2 \otimes  \left[
  \begin{array}{ccc}
1 &  0 &  0   \\
  \end{array}\right],\\
S=&I_2 \otimes  \left[
  \begin{array}{ccc}
1 &  -3   \\
1 &  -1 \\
  \end{array}\right], ~
R=I_2 \otimes  \left[
  \begin{array}{ccc}
1 & 0  \\
  \end{array}\right].
    \end{aligned}
\end{equation*}

We consider the following kind of Byzantine attacks, that is, followers 3 and 4 are Byzantine agents which satisfy $f-local$ assumption, that is, Assumption \ref{assumption_4}. The Byzantine edge attacks on the TL  are to replace the information among agents as:
\begin{equation}
e_{3,4}= \left[
  \begin{array}{ccc}
t  \\
t   \\
2t   \\
2t   \\
  \end{array}\right], e_{3,5}=  \left[
  \begin{array}{ccc}
1.5t   \\
-2.5t  \\
1.5t   \\
-2.5t   \\
  \end{array}\right],
  e_{5,6}=  \left[
  \begin{array}{ccc}
-1.5t   \\
2.5t   \\
-1.5t   \\
2.5t   \\
  \end{array}\right].
\end{equation}
where $e_{i,j}$ denote the information flow from agent $i$ to agent $j$ falsified by the Byzantine edge attacks.
Notice that $e_{3,4}(t)$, $e_{3,5}(t)$ and $e_{5,6}(t)$ are different from each other, which illustrates the difference between Byzantine attacks  and other malicious attacks. The Byzantine node attacks are
\begin{equation}
\psi_3=  \left[
  \begin{array}{ccc}
0.5t  \\
t   \\
  \end{array}\right], \psi_5=  \left[
  \begin{array}{ccc}
-t   \\
-0.5t  \\
  \end{array}\right].
\end{equation}

We conduct the resilient design of the TL. The distributed estimation performance of the TL
against Byzantine edge attack is shown in Fig. \ref{image2}. It is shown that the asymptotical performance of distributed estimation
error on the TL can be achieved despite the Byzantine attacks.

\begin{figure}
  \centering
  \includegraphics[height=6cm, width=8cm]{a1.eps}
  \caption{Distributed estimation performance on the TL}\label{image4}
\end{figure}
Then, we focus on the performance of CPL with the consideration of the potentially unbounded Byzantine node attacks.
In light of (60), the Byzantine node attack signals satisfy Assumption 5. It could be computed from \eqref{eq6} that

\begin{align*}
&\Pi_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
1 &  0  \\
1 &  -3   \\
  \end{array}\right], \\
 & \Gamma_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
-2 & 0   \\
  \end{array}\right],\\
&\Pi_{4,5,6}=I_2 \otimes  \left[
  \begin{array}{ccc}
1 &  0  \\
1 &  -3   \\
-2 &  0   \\
  \end{array}\right], \\
 & \Gamma_{4,5,6}=I_2 \otimes  \left[
  \begin{array}{ccc}
-1 & 0   \\
  \end{array}\right].
\end{align*}

By selecting $U_{1-6}=I_2$ and $w=1$, it can be obtained that
\begin{align*}
    &P_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
4.403 &  1.732  \\
1.732 &  2.542   \\
  \end{array}\right], \\
 &P_{4,5,6}=I_2 \otimes  \left[
  \begin{array}{ccc}
6.095 & 4.690 & 1.000   \\
4.690 & 8.515 & 2.047   \\
1.000 & 2.047 & 1.845  \\
  \end{array}\right],\\
&K_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
-1.732 &  -2.543 \\
  \end{array}\right], \\
 &H_{1,2,3}=I_2 \otimes  \left[
  \begin{array}{ccc}
2.275 & -7.627   \\
  \end{array}\right],\\
&K_{4,5,6}=I_2 \otimes  \left[
  \begin{array}{ccc}
-1.000 &  -2.047 & -1.845  \\
  \end{array}\right], \\
 &H_{4,5,6}=I_2 \otimes  \left[
  \begin{array}{ccc}
-1.643 & -6.142  \\
  \end{array}\right].
\end{align*}

\begin{figure}
  \centering
  \includegraphics[height=6cm, width=8cm]{a2.eps}
  \caption{Resilient formation tracking performance}\label{image5}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[height=6cm, width=8cm]{a3.eps}
  \caption{Formation-tracking error w.r.t. time}\label{image6}
\end{figure}

\begin{figure}
  \centering
  \includegraphics[height=6cm, width=8cm]{a4.eps}
  \caption{Tracking error between the CPL and the TL: The light red zone denotes the UUB bound $\Vert \varepsilon_i^T P_i B_i\Vert \leq \bar{d}$}.\label{image7}
\end{figure}


By employing the above parameters, the trajectories of all agents are depicted in Fig. \ref{image4}, which shows
that the whole MAS can achieve the formation tracking with little tolerance. More specifically, the formation-tracking error is recorded in Fig. \ref{image5}. The exact tracking error between the CPL and the TL $\varepsilon_i$ is depicted in Fig. \ref{image6}, which is proved to be UUB with the prescribed error bound.


\section{Conclusion}
In this paper, we investigate the problem of cooperative control of heterogeneous vehicle platoons in the presence of Byzantine attacks. Apart from CPL, a virtual TL is deployed on the cloud. The double-layer  scheme also decouples the defense strategy against Byzantine  attacks into the defense against Byzantine edge attacks on the TL and the defense against Byzantine node attacks on the CPL. The effectiveness of the TL has been verified, under the condition that the network topology on the TL is strongly $(2f+1)$-robust. A decentralized controller is designed against unbounded Byzantine node attacks, which ensures UUB convergence. Based on the theoretical result,  a  hybrid formation is achieved against Byzantine attacks.
In future work, it is interesting to consider the cases of nonlinear dynamics \cite{2019Leader}.

}



























% Proof: Consider the Lyapunov function candidate
% $$
% V_{1}=\frac{1}{2} \sum_{i=1}^{N} \xi_{i}^{T} P \xi_{i}+\sum_{i=1}^{N} \sum_{j=1, j \neq i}^{N} \frac{\left(c_{i j}-\alpha\right)^{2}}{8 \kappa_{i j}}
% $$
% where $\alpha$ is a positive constant that is to be determined later. Evidently, $V_{1}$ is positive definite. The time derivative of $V_{1}$ along the trajectory of (5) is given by
% $$
% \begin{aligned}
% \dot{V}_{1}=& \sum_{i=1}^{N} \xi_{i}^{T} P \dot{\xi}_{i}+\sum_{i=1}^{N} \sum_{j=1, j \neq i}^{N} \frac{c_{i j}-\alpha}{4 \kappa_{i j}} \dot{c}_{i j} \\
% =& \sum_{i=1}^{N} \xi_{i}^{T} P A \xi_{i}+\sum_{i=1}^{N} \xi_{i}^{T} P B K \sum_{j=1}^{N} c_{i j} a_{i j}\left(\tilde{x}_{i}-\tilde{x}_{j}\right) \\
% &+\sum_{i=1}^{N} \sum_{j=1, j \neq i}^{N} \frac{c_{i j}-\alpha}{4 \kappa_{i j}} \dot{c}_{i j}
% \end{aligned}
% $$
% Since $a_{i j}=a_{j i}$ and $c_{i j}(t)=c_{j i}(t)$, it can be easily verified that
% $$
% \begin{array}{rl}
% \sum_{i=1}^{N} \xi_{i}^{T} & P B K \sum_{j=1}^{N} c_{i j} a_{i j}\left(\tilde{x}_{i}-\tilde{x}_{j}\right) \\
% & =-\frac{1}{2} \sum_{i=1}^{N} \sum_{j=1}^{N} c_{i j} a_{i j}\left(\xi_{i}-\xi_{j}\right)^{T} \Gamma\left(\tilde{x}_{i}-\tilde{x}_{j}\right)
% \end{array}
% $$

 \bibliography{PIDFR}
 \end{document}\grid







