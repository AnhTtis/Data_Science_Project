% Appendix
\newpage

\appendix

\setcounter{page}{1}
\begin{center}
    {\Large\bf Supplementary material for ``Addressing bias in online selection with limited budget of comparisons’’}\\
    \vspace{1cm}
\end{center}
The appendices are organized as follows. 
In Appendices \ref{appendix:analysisDDT} and \ref{appendix:optMemless}, we give the omitted proofs from the paper. Then in Appendix \ref{appx:choose-opt-thresh} we show how to numerically compute the optimal thresholds $(\alpha_b, \beta_b)_{b=0}^B$ exploiting our previous results. Finally, in appendix \ref{appx:bench-algo}, we study non-asymptotically the unique-threshold algorithm, which is a particular case of DDT algorithms with $\alpha_0 = \ldots = \alpha_B = \beta_0 = \ldots = \beta_B$. We give a lower bound showing the convergence rate of its success probability to the limit we exhibited in the paper. This analysis uses different technique proofs and explicitly shows the impact of $\lambda$ on this convergence.



\begin{center}
    {\large CONTENTS}
\end{center}
\startcontents[appendices]
\printcontents[appendices]{}{1}{\setcounter{tocdepth}{2}}


\input{appendix_DDT}
\input{appendix_optMemless}
\input{appendix_chooseThresholds}
\input{appendix_benchmarkAlgo}






\section{Auxiliary Results}\label{sec:comp}
This section contains several general results that are used in other proofs. We begin by introducing some properties of the variables $(r_t)_t$ that were defined in Section \ref{sec:setup}.
\begin{definition}\label{def:inrank}
If $X$ is a totally ordered finite set, we define the inside-ranking function $\pi$ as
\[
\pi(X) := (r_1, \ldots, r_{|X|}),
\]
where $\{r_1, \ldots, r_{|X|}\} = \{1, \ldots, |X|\}$ and for any $1 \leq i \leq |X|$, $r_i$ is the rank of $x_i$ inside $X$.
\end{definition}


\begin{proposition}\label{prop:max2sets}
Let $I,J$ be two disjoint subsets of $\{1,\ldots,N\}$, and $\{x_1, \ldots, x_N\}$ a uniform random permutation of $\{1,\ldots,N\}$. If $X=\{x_i\}_{i\in I}$ and $Y = \{x_j\}_{j\in J}$ then the event $\{\max X < \max Y\}$ is independent of the inside rankings of $X$ and $Y$: $\pi(X)$ and $\pi(Y)$ (See Definition \ref{def:inrank}). Moreover 
\[
\Prob(\max X < \max Y)
= \frac{|Y|}{|X| + |Y|}.
\]
\end{proposition}

\begin{proof}
Since $(x_1,\ldots,x_N)$ is randomly permuted, every element in $X \cup Y$ has the same probability of being the maximum in $X \cup Y$, therefore
\begin{align*}
\Prob(\max X < \max Y)
&= \Prob(\max\{X\cup Y\} \in Y) 
= \sum_{y \in Y} \Prob(\max\{X\cup Y\} = y)
= \frac{|Y|}{|X| + |Y|}.
\end{align*}
\end{proof}


\begin{lemma}\label{lem:rank_indep_unif}
    For any positive integer $t$, conditionally to $G^1_t, G^2_t$, the relative ranks $(r_j)_{j=1}^t$, defined in Section \ref{sec:setup}, are mutually independent. Moreover,  the conditional distribution of the rank $r_t$ knowing $\lvert G_t^{g_t}\rvert$ is uniform over the set $\{1, \dots, \lvert G_t^{g_t}\rvert\}$.
\end{lemma}
\begin{proof}
Since the arrival order of the candidates is chosen uniformly at random, any subset of $(x_1, \ldots, x_N)$ is also uniformly shuffled. In particular, if $g_t = g$, this is the case for the subset $G^g_t$. The random variable $r_t$, indicating the rank of $x_t$ in $G^g_t$, is therefore a uniform random variable in $\{1, \ldots, |G^g_t|\}$. It is independent of the relative ranks of the past candidates in $G^g_{t-1}$ because all the possible relative ranks of $G^g_{t-1}$ are equally likely.
\end{proof}

Next, We remind Hoeffding's maximal inequality, from which we deduce a concentration bound on the random variables $|G^g_t|$ for $s \leq t \leq N$.
\begin{lemma}\label{lem:hoeff-max}
    Let $a$ and $b$ be two real numbers such that $a < b$. Let $(X_t)_{t \in \mathbb{N}}$ be a martingale difference sequence such that $a \leq X_t \leq b$ for any $t \in \mathbb{N}$. Let $r$ and $N$ be two integers such that $r \leq N$.
    Then, for any $\delta > 0$, 
    \[
      \Prob \left(
        %\exists r \leq t \leq N \; : \; 
        \max_{r \leq t \leq N}
        \frac{1}{t} \sum_{i=1}^t X_i \geq \sqrt{\frac{(b-a)^2}{2t}\log(1/\delta)\Phi(N/r)}  \;
        \right)
        \leq \delta\enspace,
    \] 
    where $\Phi : x>0 \mapsto \frac{(1 + \sqrt{x})^2}{4\sqrt{x}}$.

\end{lemma}

The following lemma is a corollary of the previous one.
\begin{lemma}\label{lem:conc-card}
    If $s = \w N$ with $\w \in (0,1)$, then the event
    \begin{equation}\label{eq:conc}\tag{$\mathcal{C}_{s,N}$}
    \mathcal{C}_{s,N} \coloneqq \left\{\forall s \leq t \leq N \; : \;
            \left| |G^1_t| - \lambda t \right|
            < A_\w \sqrt{t \log s}\right\}
    \end{equation}
    holds with probability at least $1 - \dfrac{2}{s}$, where $A_\w := \dfrac{1+\sqrt{\w}}{2\sqrt{2}\w^{1/4}}$.
\end{lemma}


\begin{proof}
We apply Hoeffding's maximal inequality, reminded in Lemma~\ref{lem:hoeff-max}, with $\delta = 1/s$, first for the random variables $(\indic{x_t \in G^1} - \lambda)_{r\leq t \leq N}$, then for the random variables $(\lambda - \indic{x_t \in G^1} )_{s \leq t \leq N}$. A union bound then gives
    \begin{align*}
        \Prob\left(
            \exists s \leq t \leq N \; : \;
            \left| |G^1_t| - \lambda t \right| \geq \left( \frac{\Phi(1/ \w)}{2}\right)^{\frac{1}{2}} \sqrt{t \log s}
        \right)
        \leq \frac{2}{s}\enspace,
    \end{align*} 
    where $\Phi : x>0 \mapsto \frac{(1 + \sqrt{x})^2}{4\sqrt{x}}$. An immediate computation yields $\sqrt{\dfrac{\Phi(1/ \w)}{2}} =  \dfrac{1+\sqrt{\w}}{2\sqrt{2}\w^{1/4}}$.
\end{proof}


\begin{comment}
\begin{lemma}\label{lem:sum-int}
    If $f:(0,\infty) \to \R$ and there exists $c > 0$ such that f is non-decreasing on $(0,c]$ and non-increasing on $[c,\infty)$ then for any integers $r,s$ such that $r + 2 \leq s$, if $f$ is non-negative on $[r,s]$ then we have
    \[
    \sum_{t=r+1}^{s-1} f(t) \geq \int_r^s f(x)dx - \max_{x \in [r,s]}f(x).
    \]
\end{lemma}
\begin{proof}
Let $f$ be such a function and $r < s$ two integers. If $s - 1\leq c$ then $f$ is non-decreasing on $[1,s-1]$ thus
\begin{align*}
\sum_{t=r+1}^{s-1} f(t)
&\geq \sum_{t=r+1}^{s-1} \int_{t-1}^t f(x)dx
= \int_r^{s-1} f(x)dx\\
&= \int_r^s f(x)dx - \int_{s-1}^s f(x)dx
\geq \int_r^s f(x)dx - \max_{x \in [r,s]}f(x), 
\end{align*}

In the other case, if $s - 1 > c$ then $s -1  \geq \lfloor c \rfloor + 1$, and we have
\begin{align*}
\sum_{t=r+1}^{s-1} f(t) 
&= \sum_{t=r+1}^{\lfloor c \rfloor} f(t) + \sum_{t=\lfloor c \rfloor + 1}^{s-1} f(t)\\
&\geq \sum_{t=r+1}^{\lfloor c \rfloor} \int_{t-1}^t f(x)dx
      + \sum_{t=\lfloor c \rfloor + 1}^{s-1} \int_t^{t+1} f(x)dx\\
&= \int_r^{s} f(x) dx - \int_{\lfloor c \rfloor}^{\lfloor c \rfloor+1} f(x)dx\\
&\geq \int_r^{s} f(x) dx - \max_{x \in [r,s]}f(x).
\end{align*}
\end{proof}


\begin{lemma}\label{lem:Sm(s,N)}
    For any integers $m \geq 1$ and $r,s$ such that $r + m \leq s$, we define
    \[
    S_m(r,s) := \sum_{r \leq t_1 < \ldots < t_{m} \leq s-1} \prod_{\ell=1}^{m} \frac{1}{t_\ell}.
    \]
    if $r,s$ are such that $r + m \leq s \leq \frac{r}{w}$ for some $w \in (0,1)$ then
    \[
    S_m(r,s) \geq \frac{\log(s/r)^m}{m!} - \frac{e\log(1/w)^{m-1}}{r}.
    \]
\end{lemma}

\begin{proof}
Observe that for $m \geq 2$ and $r,s$ such that $r+m \leq s$ we have
\begin{align*}
    S_m(r,s)
    &= \sum_{r \leq t_1 < \ldots < t_{m} \leq s-1} \prod_{\ell=1}^{m} \frac{1}{t_\ell}\\
    &= \sum_{t_m=r+m-1}^{s-1} \frac{1}{t_m} \left(
      \sum_{r \leq t_1 < \ldots < t_{m-1} \leq t_m-1} \prod_{\ell=1}^{m-1} \frac{1}{t_\ell} \right)\\
    &= \sum_{t=r+m-1}^{s-1} \frac{S_{m-1}(r,t)}{t}.
\end{align*}
Using this equation, we will prove by induction on $m$ that for $r,s$ such that $r+m \leq s \leq r/w$
\begin{equation}\label{eq:sm-induc}
    S_m(r,s) \geq \frac{\log(s/r)^m}{m!} - \frac{\alpha_m\log(1/w)^{m-1}}{r},
\qquad \text{where } \alpha_m := \sum_{\ell = 0}^{m-2} \frac{1}{\ell !},
\end{equation}


with the convention $\alpha_1 = 0$. For $m = 1$ we have for any $r,s$ such that $r +1 \leq s$
\[
S_1(r,s)
= \sum_{t=r}^{s-1} \frac{1}{t}
\geq \sum_{t=r}^{s-1} \int_t^{t+1} \frac{dx}{x}
= \int_r^s \frac{dx}{x}
= \log(s/r).
\]
Let $m \geq 2$ and assume that the lower bound (\ref{eq:sm-induc}) holds for $m-1$. We have for any $r,s$ such that $r+m \leq s \leq \frac{r}{w}$
\begin{align*}
S_m(r,s) 
&= \sum_{t=r+m-1}^{s-1} \frac{S_{m-1}(r,t)}{t}\\
&\geq \sum_{t=r+m-1}^{s-1} \left( \frac{\log(t/r)^{m-1}}{(m-1)!t} - \frac{\alpha_{m-1}\log(1/w)^{m-2}}{rt} \right)\\
& = \frac{1}{(m-1)!} \sum_{t=r+m-1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1}
    - \frac{\alpha_{m-1}}{r}\log(1/w)^{m-2} \sum_{t=r+m-1}^{s-1} \frac{1}{t},
\end{align*}
the first sum can be lower bounded using Lemma \ref{lem:sum-int} with the function $t \to \frac{1}{t}\log(t/r)^{m-1}$:
\begin{align*}
    \sum_{t=r+m-1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1}
    &= \sum_{t=r+1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1} 
        - \sum_{t=r+1}^{r+m-2} \frac{1}{t}\log(t/r)^{m-1}\\
    &\geq \sum_{t=r+1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1} 
        - (m-2)\max_{x\in [r,s]}\frac{1}{x}\log(x/r)^{m-1}\\
    &\geq \int_r^s \frac{1}{x}\log(x/r)^{m-1} dx 
        - (m-1) \max_{x\in [r,s]}\frac{1}{x}\log(x/r)^{m-1}
\end{align*}
we have directly that 
\[
\int_r^s \frac{1}{x}\log(x/r)^{m-1} dx
= \left[ \frac{\log(x/r)^m}{m}\right]_r^s 
=  \frac{\log(s/r)^m}{m},
\]
and since $s \leq r/w$ we have for any $x \in [r,s]$
\[
\frac{1}{x}\log(x/r)^{m-1} 
\leq \frac{1}{r}\log(s/r)^{m-1}
\leq \frac{1}{r}\log(1/w)^{m-1}
\]
therefore 
\[
\sum_{t=r+m-1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1}
\geq \frac{\log(s/r)^m}{m} - \frac{m-1}{r}\log(1/w)^{m-1}.
\]

On the other hand, we have
\[
\sum_{t=r+m-1}^{s-1} \frac{1}{t}
\leq \int_r^s \frac{1}{t}
= \log(r/r)
\leq \log(1/w),
\]
we deduce that
\begin{align*}
S_m(r,s)
&\geq \frac{\log(s/r)^m}{m!} - \frac{1}{(m-2)!r}\log(1/w)^{m-1} 
   - \frac{\alpha_{m-1}}{r}\log(1/w)^{m-1}\\
&= \frac{\log(s/r)^m}{m!} - \frac{\alpha_m}{r}\log(1/w)^{m-1},
\end{align*}
which concludes the induction. Finally, given that $\alpha_m \leq e$, we deduce the lower bound stated in the lemma.
\end{proof}


\begin{lemma}\label{lem:Im}
If $r,N$ are two real numbers such that $r = wN$ for some $w \in (0,1)$ then for any integer $m \geq 0$ we have
\[
\frac{1}{m!}\int_r^N \frac{\log(x/r)^m}{x^2}dx
= \frac{1}{r} - \frac{1}{N} \sum_{\ell = 0}^m \frac{\log(1/w)^\ell}{\ell !}.
\]
\end{lemma}

\begin{proof}
Let us denote $I_m := \frac{1}{m!}\int_r^N \frac{\log(x/r)^m}{x^2}dx$. 
For $m = 0$ we have
\[
I_0 = \int_r^N \frac{dx}{x^2} = \frac{1}{r} - \frac{1}{N},
\]
and for any $m \geq 1$, by integration by parts we obtain
\begin{align*}
I_m 
&= \frac{1}{m!}\left(  \int_r^N m  \frac{\log(x/r)^{m-1}}{x^2}dx
    +< \left[ -\frac{\log(x/r)^{m}}{x} \right]_r^N \right)\\
&=  I_{m-1} - \frac{\log(1/w)^m}{m!N},
\end{align*}
thus 
\[
I_m = I_0 - \frac{1}{N} \sum_{\ell = 1}^m \frac{\log(1/w)^\ell}{\ell !}
= \frac{1}{r} - \frac{1}{N} \sum_{\ell = 0}^m \frac{\log(1/w)^\ell}{\ell !}.
\]
\end{proof}

\end{comment}


Finally, the next lemma gives an upper bound that is used in the proof of Proposition \ref{prop:lb-optDDT}.
\begin{lemma}\label{lem:sum-exp-remainder}
For any $x > 0$ and for any $B \geq 1$ we have
\[
0 \leq
xe^x - \sum_{b=0}^B\left( e^x - \sum_{\ell=0}^b \frac{x^\ell}{\ell !} \right)
\leq e^x\frac{x^{B+2}}{(B+1)!}.
\]
\end{lemma}

\begin{proof}
Let $x>0$ and $B \geq 1$. First, observe that
\[
\sum_{b=0}^\infty\left( e^x - \sum_{\ell=0}^b \frac{x^\ell}{\ell !} \right)
= \sum_{b=0}^\infty \sum_{\ell=b+1}^\infty \frac{x^\ell}{\ell !}
= \sum_{\ell = 1}^\infty \sum_{b=0}^{\ell-1}  \frac{x^\ell}{\ell !} 
= \sum_{\ell = 1}^\infty \frac{x^\ell}{(\ell - 1) !}
= x \sum_{\ell = 0}^\infty \frac{x^\ell}{\ell !}
= x e^x,
\]
therefore 
\[
\sum_{b=0}^B\left( e^x - \sum_{\ell=0}^b \frac{x^\ell}{\ell !} \right)
\leq x e^x,
\]
and we have
\begin{align*}
xe^x - \sum_{b=0}^B\left( e^x - \sum_{\ell=0}^b \frac{x^\ell}{\ell !} \right)
&= \sum_{b=B+1}^\infty \sum_{\ell=b+1}^\infty \frac{x^\ell}{\ell !}
\quad= \sum_{\ell=B+2}^\infty \sum_{b=B+1}^{\ell - 1} \frac{x^\ell}{\ell !}
\quad= \sum_{\ell=B+2}^\infty (\ell - B - 1) \frac{x^\ell}{\ell !}\\
&\leq \sum_{\ell=B+2}^\infty  \frac{x^\ell}{(\ell-1) !}
\quad\leq x \sum_{\ell=B+1}^\infty \frac{x^\ell}{\ell !}
\quad\leq e^x\frac{x^{B+2}}{(B+1)!},
\end{align*}
where we used for the last step the classical inequality 
\[
\sum_{\ell=B+1}^\infty \frac{x^\ell}{\ell !}
= e^x - \sum_{\ell=0}^B \frac{x^\ell}{\ell !}
\leq e^x\frac{x^{B+1}}{(B+1)!}.
\]
\end{proof}








\begin{lemma}\label{lem:sum-int}
    If $f:(0,\infty) \to \R$ and there exists $c > 0$ such that f is non-decreasing on $(0,c]$ and non-increasing on $[c,\infty)$ then for any integers $r,s$ such that $r + 2 \leq s$, if $f$ is non-negative on $[r,s]$ then we have
    \[
    \sum_{t=r+1}^{s-1} f(t) \geq \int_r^s f(x)dx - \max_{x \in [r,s]}f(x).
    \]
\end{lemma}
\begin{proof}
Let $f$ be such a function and $r < s$ two integers. If $s - 1\leq c$ then $f$ is non-decreasing on $[1,s-1]$ thus
\begin{align*}
\sum_{t=r+1}^{s-1} f(t)
&\geq \sum_{t=r+1}^{s-1} \int_{t-1}^t f(x)dx
= \int_r^{s-1} f(x)dx\\
&= \int_r^s f(x)dx - \int_{s-1}^s f(x)dx
\geq \int_r^s f(x)dx - \max_{x \in [r,s]}f(x), 
\end{align*}

In the other case, if $s - 1 > c$ then $s -1  \geq \lfloor c \rfloor + 1$, and we have
\begin{align*}
\sum_{t=r+1}^{s-1} f(t) 
&= \sum_{t=r+1}^{\lfloor c \rfloor} f(t) + \sum_{t=\lfloor c \rfloor + 1}^{s-1} f(t)\\
&\geq \sum_{t=r+1}^{\lfloor c \rfloor} \int_{t-1}^t f(x)dx
      + \sum_{t=\lfloor c \rfloor + 1}^{s-1} \int_t^{t+1} f(x)dx\\
&= \int_r^{s} f(x) dx - \int_{\lfloor c \rfloor}^{\lfloor c \rfloor+1} f(x)dx\\
&\geq \int_r^{s} f(x) dx - \max_{x \in [r,s]}f(x).
\end{align*}
\end{proof}


\begin{lemma}\label{lem:Sm(s,N)}
    For any integers $m \geq 1$ and $r,s$ such that $r + m \leq s$, we define
    \[
    S_m(r,s) := \sum_{r \leq t_1 < \ldots < t_{m} \leq s-1} \prod_{\ell=1}^{m} \frac{1}{t_\ell}.
    \]
    if $r,s$ are such that $r + m \leq s \leq \frac{r}{w}$ for some $w \in (0,1)$ then
    \[
    S_m(r,s) \geq \frac{\log(s/r)^m}{m!} - \frac{e\log(1/w)^{m-1}}{r}.
    \]
\end{lemma}

\begin{proof}
Observe that for $m \geq 2$ and $r,s$ such that $r+m \leq s$ we have
\begin{align*}
    S_m(r,s)
    &= \sum_{r \leq t_1 < \ldots < t_{m} \leq s-1} \prod_{\ell=1}^{m} \frac{1}{t_\ell}\\
    &= \sum_{t_m=r+m-1}^{s-1} \frac{1}{t_m} \left(
      \sum_{r \leq t_1 < \ldots < t_{m-1} \leq t_m-1} \prod_{\ell=1}^{m-1} \frac{1}{t_\ell} \right)\\
    &= \sum_{t=r+m-1}^{s-1} \frac{S_{m-1}(r,t)}{t}.
\end{align*}
Using this equation, we will prove by induction on $m$ that for $r,s$ such that $r+m \leq s \leq r/w$
\begin{equation}\label{eq:sm-induc}
    S_m(r,s) \geq \frac{\log(s/r)^m}{m!} - \frac{\alpha_m\log(1/w)^{m-1}}{r},
\qquad \text{where } \alpha_m := \sum_{\ell = 0}^{m-2} \frac{1}{\ell !},
\end{equation}


with the convention $\alpha_1 = 0$. For $m = 1$ we have for any $r,s$ such that $r +1 \leq s$
\[
S_1(r,s)
= \sum_{t=r}^{s-1} \frac{1}{t}
\geq \sum_{t=r}^{s-1} \int_t^{t+1} \frac{dx}{x}
= \int_r^s \frac{dx}{x}
= \log(s/r).
\]
Let $m \geq 2$ and assume that the lower bound (\ref{eq:sm-induc}) holds for $m-1$. We have for any $r,s$ such that $r+m \leq s \leq \frac{r}{w}$
\begin{align*}
S_m(r,s) 
&= \sum_{t=r+m-1}^{s-1} \frac{S_{m-1}(r,t)}{t}\\
&\geq \sum_{t=r+m-1}^{s-1} \left( \frac{\log(t/r)^{m-1}}{(m-1)!t} - \frac{\alpha_{m-1}\log(1/w)^{m-2}}{rt} \right)\\
& = \frac{1}{(m-1)!} \sum_{t=r+m-1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1}
    - \frac{\alpha_{m-1}}{r}\log(1/w)^{m-2} \sum_{t=r+m-1}^{s-1} \frac{1}{t},
\end{align*}
the first sum can be lower bounded using Lemma \ref{lem:sum-int} with the function $t \to \frac{1}{t}\log(t/r)^{m-1}$:
\begin{align*}
    \sum_{t=r+m-1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1}
    &= \sum_{t=r+1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1} 
        - \sum_{t=r+1}^{r+m-2} \frac{1}{t}\log(t/r)^{m-1}\\
    &\geq \sum_{t=r+1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1} 
        - (m-2)\max_{x\in [r,s]}\frac{1}{x}\log(x/r)^{m-1}\\
    &\geq \int_r^s \frac{1}{x}\log(x/r)^{m-1} dx 
        - (m-1) \max_{x\in [r,s]}\frac{1}{x}\log(x/r)^{m-1}
\end{align*}
we have directly that 
\[
\int_r^s \frac{1}{x}\log(x/r)^{m-1} dx
= \left[ \frac{\log(x/r)^m}{m}\right]_r^s 
=  \frac{\log(s/r)^m}{m},
\]
and since $s \leq r/w$ we have for any $x \in [r,s]$
\[
\frac{1}{x}\log(x/r)^{m-1} 
\leq \frac{1}{r}\log(s/r)^{m-1}
\leq \frac{1}{r}\log(1/w)^{m-1}
\]
therefore 
\[
\sum_{t=r+m-1}^{s-1}  \frac{1}{t}\log(t/r)^{m-1}
\geq \frac{\log(s/r)^m}{m} - \frac{m-1}{r}\log(1/w)^{m-1}.
\]

On the other hand, we have
\[
\sum_{t=r+m-1}^{s-1} \frac{1}{t}
\leq \int_r^s \frac{1}{t}
= \log(r/r)
\leq \log(1/w),
\]
we deduce that
\begin{align*}
S_m(r,s)
&\geq \frac{\log(s/r)^m}{m!} - \frac{1}{(m-2)!r}\log(1/w)^{m-1} 
   - \frac{\alpha_{m-1}}{r}\log(1/w)^{m-1}\\
&= \frac{\log(s/r)^m}{m!} - \frac{\alpha_m}{r}\log(1/w)^{m-1},
\end{align*}
which concludes the induction. Finally, given that $\alpha_m \leq e$, we deduce the lower bound stated in the lemma.
\end{proof}


\begin{lemma}\label{lem:Im}
If $r,N$ are two real numbers such that $r = wN$ for some $w \in (0,1)$ then for any integer $m \geq 0$ we have
\[
\frac{1}{m!}\int_r^N \frac{\log(x/r)^m}{x^2}dx
= \frac{1}{r} - \frac{1}{N} \sum_{\ell = 0}^m \frac{\log(1/w)^\ell}{\ell !}.
\]
\end{lemma}

\begin{proof}
Let us denote $I_m := \frac{1}{m!}\int_r^N \frac{\log(x/r)^m}{x^2}dx$. 
For $m = 0$ we have
\[
I_0 = \int_r^N \frac{dx}{x^2} = \frac{1}{r} - \frac{1}{N},
\]
and for any $m \geq 1$, by integration by parts we obtain
\begin{align*}
I_m 
&= \frac{1}{m!}\left(  \int_r^N m  \frac{\log(x/r)^{m-1}}{x^2}dx
    +< \left[ -\frac{\log(x/r)^{m}}{x} \right]_r^N \right)\\
&=  I_{m-1} - \frac{\log(1/w)^m}{m!N},
\end{align*}
thus 
\[
I_m = I_0 - \frac{1}{N} \sum_{\ell = 1}^m \frac{\log(1/w)^\ell}{\ell !}
= \frac{1}{r} - \frac{1}{N} \sum_{\ell = 0}^m \frac{\log(1/w)^\ell}{\ell !}.
\]
\end{proof}