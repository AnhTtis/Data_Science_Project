In this section, we give our setup, introduce the notations used throughout the paper, and finally state the problem formally.

\subsection{Setup and Notation}
\label{sec:setup}
Assume we are given a hospital operations database with a record of events on healthcare entities. The set of all healthcare entities $\entities$ includes the set of Doctors $\doc$, the set of Patients $\pat$, the set of medications $\med$, and the set of hospital rooms $\room$. 

The database has a record of time-stamped interactions between entities for each medical event that occurred in the hospital. In this paper, we consider three types of interactions. A \textbf{physician} interaction $(p,d,t)$, with $t \in \mathbb{R}^+$ and $0 \leq t \leq T$, represents that a doctor $d \in \doc$ performed a medical procedure on patient $p \in \pat$ at time $t$. Similarly, a \textbf{medication} 
interaction $(p,m,t)$ indicates that medicine $m \in \med$ was prescribed to patient $p \in \pat$ at time $t$, and finally a \textbf{spatial} interaction $(p,r,t)$ represents that a patient $p \in \pat$ was transferred to a hospital room $r \in \room$ at time $t$. We represent sets of physician, medication, and spatial interactions as $\Pro$, $\Med$, and $\Tra$, respectively. 

The database also consists of relationships among entities of the same type, represented as static graphs $G_{\mathrm{entitytype}}$. These are as follows:

\begin{itemize}
    \item \textbf{Room graph: } The architectural layout of the hospital can be represented as a graph $G_{\mathrm{room}}(\room,E_{\mathrm{room}})$ between hospital rooms.
    Two rooms $r_1$ and $r_2$ are connected by an edge $(r_1,r_2)$ in $G_{\mathrm{room}}$ if they are adjacent to each other.
    \item \textbf{Medication graph: }The medication hierarchy can be represented as a tree $G_{\mathrm{med}}(\med\cup{M}, E_{\mathrm{med}})$. Note that each leaf $m$ in the tree is a medication, i.e., $m \in \med$. The intermediate nodes $M$ represent medication sub-types.
    \item \textbf{Doctor graph: } Each doctor $d\in \doc$ has a specialty. We create a graph $G_{\mathrm{doc}}(\doc, E_{\mathrm{doc}})$, where the edges $(d_1,d_2)$ are based on the proximity of the specialty of doctors $d_1$ and $d_2$. 
\end{itemize}

Finally, for each patient $p \in \pat$, we are given static attributes $\ps_p$ with demographic and medical information. 
We are also given dynamic attributes $\pd_{p,t}$ at time $t$ that include information on the length of hospital stay, cumulative antibiotics count, gastric acid suppressors, and others.
\begin{comment}
\begin{itemize}
    \item  medication prescriptions to patients,
    \item doctor encounter (captured from procedure events)
    \item patient room transfer (Admission Discharge Transfer data)
    \item medication: medication hierarchy.
    \item doctor: specialty info
    \item room: UIHC hospital graph. (V: rooms, E: physical distance)
    \item patients: 
    \begin{itemize}
        \item static features: gender, -
        \item dynamic features: risk factors for CDI. (e.g., LOS, cummulative count antibiotics, gastric acid suppersors, CDI pressure features - cumulative counts of nearby CDIs)
    \end{itemize}
\end{itemize}
\end{comment}

In what follows, the lower case bold letters such as $\mathbf{v}$ represent vectors, the uppercase bold letters such as $\mathbf{W}$ represent matrices, and calligraphic symbols such as $\mathcal{S}$ represent sets. The lower case bold letters with hat such as $\hat{\mathbf{v}}$ represent dynamic vectors, and $\hat{\mathbf{v}}_t$ represents the vector at time $t$. Functions are represented by lowercase letters followed by braces, for example, $f(\cdot)$.
% The list of the notations used is presented in the Appendix.

\begin{comment}
In Table \ref{tab:notation}, we provide the symbol and the definition of the notations we use throughout the paper.

\begin{table}[h!]
    \centering
    \caption{Notations}
    \label{tab:notation}
    \footnotesize
    % \small
    \begin{tabular}{|c|c|}
        \hline
        \textbf{Symbol} & \textbf{Definition} \\
        \hline
        \multicolumn{2}{|l|}{Set of healthcare entities}\\
        \hline
        $\pat$, $\doc$, $\med$, $\room$ & patients, doctors, medications, and rooms \\
        $\tau$ & $\pat \cup \doc \cup \med \cup \room$ Set of all entities \\
        \hline
        \multicolumn{2}{|l|}{Set of patient interaction with healthcare entities}\\
        \hline
        $\Pro$, $\Med$, $\Tra$ & physician, medication, and spatial \\
        $\Int$ & $\Pro \cup \Med \cup \Tra$ Set of all interactions \\
        \hline
        \multicolumn{2}{|l|}{Static graphs of healthcare entities}\\
        \hline
        $G_{\mathrm{doc}}$ & doctor graph \\
        $G_{\mathrm{med}}$ & medication graph \\
        $G_{\mathrm{room}}$ & room graph \\
        \hline
        \hline
        \multicolumn{2}{|l|}{Features for each patient $p \in \pat$}\\
        \hline
        $\ps_p$, $\pd_{p,t}$ & static, and dynamic attributes at time $t$ \\
        \hline
        \multicolumn{2}{|l|}{Embeddings for healthcare entity $v \in \tau$}\\
        \hline
        $\ed_{v,t}$ & Dynamic embedding at time $t$ \\
        $\es_{v}$ & Static embedding \\
        $\pred_{v,t}$ & Predicted embedding of size $|\ed_{v,t}| + |\es_{v}|$\\
        \hline
        \multicolumn{2}{|l|}{Co-evolutionary update modules}\\
        \hline
        $\prodmod_{p}$, $\prodmod_{d}$ & patient and doctor module for $\Pro$ \\
        $\medmod_{p}$, $\medmod_{d}$ & patient and medication module for $\Med$\\
        $\transmod_{p}$, $\transmod_{d}$ & patient and room module for $\Tra$\\
        \hline
        \multicolumn{2}{|l|}{Time elapsed since previous interaction}\\
        \hline
        \makecell{$\Delta_p$, $\Delta_d$, \\$\Delta_m$, $\Delta_r$} & \makecell{time elapsed since the previous \\ interaction of $p$, $d$, $m$, and $r$} \\
        \hline
    \end{tabular}
\end{table}
\end{comment}


\subsection{Problem Statement}

Having defined the notations, we can now state our problem. 
Our goal is to learn dynamic embeddings for all patients, medications, rooms, and doctors 
based on the set of all interactions $\Int = \Pro \cup \Med \cup \Tra$. 
Without the loss of generality, we assume that the interactions in $\Int$ are sorted by time.  
We also aim to preserve the relationship among the entities of the same type represented by the static graphs in the embedding space.  Formally, the problem can be stated as follows:

\begin{problem} \textsc{Dynamic Healthcare Embeddings Problem}\\
\par\noindent\textbf{Given:} A set $\Int$ of time-stamped interactions among healthcare entities,  static networks $G_{\mathrm{room}}$, $G_{\mathrm{med}}$, $G_{\mathrm{doc}}$, and dynamic and static attributes of patients $\pd$ and $\ps$.
\par \noindent\textbf{Learn:} Dynamic embeddings 
$\ed_{u,t}$ for each entity $u \in \pat$ and
$\ed_{v,t}$ for each entity $v \in \doc \cup \med \cup \room$ and for each time $t$.
\par \noindent\textbf{Such that:} A function $f(\ed_{u,t}, \ed_{v,t})$ encodes information to be predictive of $v$,
% A function $f(\ed_{v,t})$ is predictive of the entity $v'$ with which entity $v$ interacts at time %a 
% $t+\Delta > t$ 
and the $dist(\ed_{v,t}, \ed_{v',t})$  between the embeddings $\ed_{v,t}$ and $\ed_{v',t}$ is of two entities of the same type $v$ and $v'$ reflects the distance between the two in $G_{\mathrm{entity type}}$.
\label{prob:problem}
\end{problem}


\begin{comment}
% \textbf{[TODO] graph G(V,E), embedding,}
% \vspace{5cm}
Let $G=(V,E)$ be a given network, where $V$ represents the set of nodes and $E$ represents the set of edges between two nodes.
In the temporal networks, $G_t = (V_t, E_t)$ denotes a network at a timestamp $t \in [0,T]$, where $V_t$ is the set of nodes in a network $G_t$ at timestamp $t$ and $E_t$ is the set of edges in a network $G_t$ at timestamp $t$.


Let $f: V \rightarrow \mathbb{R}^d$ be the mapping function that projects set of nodes to vector representation with the size of $|V| \times d$.
For every node $x \in V$, $f(x)$ generates the embedding of node $x$.
The embedding of node $x$ at timestamp $t$ is learned from the temporal network $G_t$ and is denoted as $x(t)$.
\end{comment}
