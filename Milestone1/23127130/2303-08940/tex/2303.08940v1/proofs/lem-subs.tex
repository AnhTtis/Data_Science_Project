%\begin{proof}
    The proof follows by induction over $\Phi_t$:
    \begin{itemize}
        \item Case $\Phi_t$ ends with rule (\ruleAx). Then $t$ must be a variable and we need to consider two cases:
        \begin{itemize}
            \item Assume $t = y = x$. Then $\Gam_t = \eset$, $\tau = \M$, $t \subs{x}{v} = v$, $b_t = 0$, and $s_t = 0$. So we can take $\Phi_{t \subs{x}{v}} = \Phi_v$ and conclude with $\Gam_t + \Gam_v = \Gam_v$, $b_t + b_v = b_v$, and $s_t + s_v = s_v$.
            \item Assume $t = y \not= x$. Then $\M = \emul$, $\Gam_v = \eset$, $t \subs{x}{v} = t$, $b_v = 0$, and $s_v = 0$. So we can take $\Phi_{t \subs{x}{v}} = \Phi_t$ and conclude with $\Gam_t + \Gam_v = \Gam_t$, $b_t + b_v = b_t$, and $s_t + s_v = s_t$.
        \end{itemize}
        \item Case $\Phi_t$ ends with rule (\ruleLam). Then $t$ must be of the form $\lam y.u$ and $\Phi_t$ must be of the following form (by $\alpha$-conversion):
        \[ \begin{prooftree}
            \hypo{\Phi_u \tr \seqi{\Gam; x : \M}{u}{\tau'}{(b_t,s_t)}}
            \infer1[(\ruleLam)]{\seqi{(\Gam \sm y); x : \M}{\lam y.u}{\Gam(y) \ta \tau'}{(b_t, s_t)}}
        \end{prooftree} \]
        where $\tau = \Gam(y) \ta \tau'$ and $\Gam_t = (\Gam \sm y)$. By the \ih, we have the following derivation $\Phi_{u \subs{x}{v}} \tr \seqi{\Gam + \Gam_v}{u \subs{x}{v}}{\tau}{(b_t + b_v, s_t + s_v)}$. Therefore, we can construct $\Phi_{t \subs{x}{v}}$ as follows:
        \[ \begin{prooftree}
            \hypo{\Phi_{u \subs{x}{v}} \tr \seqi{\Gam + \Gam_v}{u \subs{x}{v}}{\tau'}{(b_t + b_v, s_t + s_v)}}
            \infer1[(\ruleLam)]{\seqi{(\Gam + \Gam_v) \sm y}{(\lam y.u) \subs{x}{v}}{\Gam(y) \ta \tau'}{(b_t + b_v, s_t + s_v)}}
        \end{prooftree} \]
        And we can conclude with $(\Gam + \Gam_v) \sm y = (\Gam \sm y) + \Gam_v = \Gam_t + \Gam_v$, by $\alpha$-conversion.
        \item Case $\Phi_t$ ends with rule ($\ruleApp$). Then $t$ must be of the form $up$ and $\Phi_t$ must be of the following form:
        \[ \begin{prooftree}
            \hypo{\Phi_u \tr \seqi{\Gam; x : \M_1}{u}{\M' \ta \tau}{(b_u, s_u)}}
            \hypo{\Phi_p \tr \seqi{\Del; x : \M_2}{p}{\M'}{(b_p,s_p)}}
            \infer2[(\ruleApp)]{\seqi{(\Gam + \Del); x : \M_1 \sqcup \M_2}{up}{\tau}{(1+b_u+b_p, s_u+s_p)}}
        \end{prooftree} \]
        where $\Gam_t = (\Gam + \Del)$, $\M = \M_1 \sqcup \M_2$, $b_t = 1 + b_u + b_p$, and $s_t = s_u + s_p$. By~\cref{lem:split-values}, we know there exist the following derivations $(\Phi^i_v \tr \seqi{\Gam^i_v}{v}{\M_i}{(b_i,s_i)})_{i \in \{1,2\}}$, such that $\Gam_v = \Gam^1_v + \Gam^2_v$, $b_v = b_1 + b_2$, and $s_v = s_1 + s_2$. By the \ih, we know there exist $\Phi_{u \subs{x}{v}} \tr \seqi{\Gam + \Gam^1_v}{u \subs{x}{v}}{\M' \ta \tau}{(b_u+b_1, s_u+s_1)}$ and $\Phi_{p \subs{x}{v}} \tr \seqi{\Del + \Gam^2_v}{p \subs{x}{v}}{\M'}{(b_p + b_2, s_p + s_2)}$. So we can construct $\Phi_{t \subs{x}{v}}$ as follows:
        \[ \begin{prooftree}
            \hypo{\Phi_{u \subs{x}{v}} \tr \seqi{\Gam + \Gam^1_v}{u \subs{x}{v}}{\M' \ta \tau}{(b_u+b_1, s_u+s_1)}}
            \hypo{\Phi_{p \subs{x}{v}} \tr \seqi{\Del + \Gam^2_v}{p \subs{x}{v}}{\M'}{(b_p+b_2,s_p+s_2)}}
            \infer2[(\ruleApp)]{\seqi{(\Gam + \Del) + (\Gam^1_v + \Gam^2_v)}{(u p) \subs{x}{v}}{\tau}{(1+b_u+b_p+b_1+b_2, s_u + s_p + s_1 + s_2)}}
        \end{prooftree} \]
        And we can conclude with $\Gam_t + \Gam_v = (\Gam + \Del) + (\Gam^1_v + \Gam^2_v)$, $b_t + b_v = 1 + b_u + b_p + b_1 + b_2$, and $s_t + s_v = s_u + s_p + s_1 + s_2$.
        \item Case $\Phi_t$ ends with rule ($\ruleMany$). Then $t$ must be of the form $w$ and $\Phi$ must be of the following form:
        \[ \begin{prooftree}
            \hypo{(\Phi^i_w \tr \seqi{\Gam_i; x : \M_i}{w}{\sig_i}{(b_i,s_i)})_{\iI}}
            \infer1[(\ruleMany)]{\seqi{+_{\iI} \Gam_i; x : \sqcup_{\iI} \M_i}{w}{\mul{\sig_i}_{\iI}}{(+_{\iI} b_i, +_{\iI} s_i)}}
        \end{prooftree} \]
        where $\tau = \mul{\sig_i}_{\iI}$, $\Gam_t = +_{\iI} \Gam_i$, $b_t = +_{\iI} b_i$, and $s_t = +_{\iI} s_i$. By~\cref{lem:split-values}, we have the following derivations $(\Phi^i_v \tr \seqi{\Gam^i_v}{v}{\M_i}{(b^i_v, s^i_v)})_{\iI}$, such that $\Gam_v = +_{\iI} \Gam^i_v$, $b_v = +_{\iI} b^i_v$, and $s_v = +_{\iI} s^i_v$. By the \ih over each $\Phi^i_w$, we have $(\Phi^i_{w \subs{x}{v}} \tr \seqi{\Gam_i + \Gam^i_v}{w \subs{x}{v}}{\sig_i}{(b_i + b^i_v, s_i + s^i_v)})_{\iI}$. Therefore, we can construct $\Phi_{t \subs{x}{v}}$ as follows:
        \[ \begin{prooftree}
            \hypo{(\Phi^i_{w \subs{x}{v}} \tr \seqi{\Gam_i + \Gam^i_v}{w \subs{x}{v}}{\sig_i}{(b_i + b^i_v, s_i + s^i_v)})_{\iI}}
            \infer1[(\ruleMany)]{\seqi{+_{\iI} (\Gam_i + \Gam^i_v)}{w \subs{x}{v}}{\mul{\sig_i}_{\iI}}{(+_{\iI} (b_i + b^i_v), +_{\iI} (s_i + s^i_v))}}
        \end{prooftree} \]
        And we can conclude with $\Gam_t + \Gam_v = +_{\iI} \Gam_i +_{\iI} \Gam^i_v = +_{\iI} (\Gam_i + \Gam^i_v)$, $b_t + b_v = +_{\iI} b_i +_{\iI} b^i_v = +_{\iI} (b_i + b^i_v)$, and $s_t + s_v = +_{\iI} s_i +_{\iI} s^i_v = +_{\iI} (s_i + s^i_v)$.
        \item Case $\Phi_t$ ends with rule (\ruleLamP). Then $t$ must be of the form $\lam y.u$, $\Gam_t = \eset$, $\tau = \tabs$, $\M = \emul$, $\Gam_v = \eset$, $t \subs{x}{v} = \lam y.(u \subs{x}{v}) = (\lam y.u) \subs{x}{v}$, $b_t = b_v = 0$, and $s_t = s_v = 0$. So we can construct $\Phi_{t \subs{x}{v}}$ as follows:
        \[ \begin{prooftree}
            \infer0[(\ruleLamP)]{\seqi{}{(\lam y.u) \subs{x}{v}}{\tabs}{(0,0)}}
        \end{prooftree} \]
        And conclude with $\Gam_t + \Gam_v = \eset$, $b_t + b_v = 0$, and $s_t + s_v = 0$.
        \item Case $\Phi_t$ ends with rule (\ruleAppPOne) or (\ruleAppPTwo), the proof is very similar to when $\Phi_t$ ends with rule (\ruleApp).
    \end{itemize}
%\end{proof}
