%\begin{proof}
    We are going to generalize the original statement by replacing $\del$ with $\gtype$.
    \\ \\
    The proof now follows by induction over the structure of $\Phi_t$:
        \begin{itemize}
            \item Case $\Phi_t$ ends with rule ($\ruleAx$). Then $t$ must be a variable and we must consider two cases:
            \begin{itemize}
                \item Assume $t = y = x$. Then $\Gam_t = \eset$, $\gtype = \M$, $t \subs{x}{v} = v$, $b_t = m_t = d_t = 0$. So we can take $\Phi_{t \subs{x}{v}} = \Phi_v$ and conclude with $\Gam_t + \Gam_v = \Gam_v$, $b_t + b_v = b_v$, $m_t + m_v = m_v$, and $d_t + d_v = d_v$.
                \item Assume $t = y \not= x$. Then $\M = \emul$, $\Gam_v = \eset$, $t \subs{x}{v} = t$, $b_v = 0$, $m_v = 0$, and $d_v = 0$. So we can take $\Phi_{t \subs{x}{v}} = \Phi_t$ and conclude with $\Gam_t + \Gam_v = \Gam_t$, $b_t + b_v = b_t$, $m_t + m_v = m_t$, and $d_t + d_v = d_t$.
            \end{itemize}
            \item Case $\Phi_t$ ends with (\ruleLam). Then $t$ must be of the form $\lam y.u$ and $\Phi_t$ must be of the following form (by $\alpha$-conversion):
            \[ \begin{prooftree}
                \hypo{\Phi_u \tr \seqi{\Gam; x : \M}{u}{\comptype{\stype}{\ctype}}{(b_t,m_t,d_t)}}
                \infer1[(\ruleLam)]{\seqi{(\Gam \sm y); x : \M}{\lam y.u}{\Gam(y) \ta (\comptype{\stype}{\ctype})}{(b_t,m_t,d_t)}}
            \end{prooftree} \]
            where $\Gam_t = (\Gam \sm y)$, and $\gtype = \Gam(y) \ta (\comptype{\stype}{\ctype})$. By the \ih, we have the following derivation $\Phi_{u \subs{x}{v}} \tr \seqi{\Gam + \Gam_v}{u \subs{x}{v}}{\comptype{\stype}{\ctype}}{(b_t+b_v,m_t+m_v,d_t+d_v)}$. Therefore, we can build $\Phi_{t \subs{x}{v}}$ as follows:
            \[ \begin{prooftree}
                \hypo{\Phi_{u \subs{x}{v}} \tr \seqi{\Gam + \Gam_v}{u \subs{x}{v}}{\comptype{\stype}{\ctype}}{(b_t+b_v,m_t+m_v,d_t+d_v)}}
                \infer1[(\ruleLam)]{\seqi{(\Gam + \Gam_v) \sm y}{\lambda y.u \subs{x}{v}}{\Gam(y) \ta (\comptype{\stype}{\ctype})}{(b_t+b_v,m_t+m_v,d_t+d_v)}}
            \end{prooftree} \]
            And we conclude with $(\Gam + \Gam_v) \sm y = (\Gam \sm y) + \Gam_v = \Gam_t + \Gam_v$, by $\alpha$-conversion.
            \item Case $\Phi_t$ ends with ($\ruleApp$). Then $t$ must be of the form $wu$ and $\Phi_t$ must be of following form:
            \[ \begin{prooftree}
                \hypo{\Phi_w \tr \seqi{\Gam; x : \M_1}{w}{\M' \ta (\comptype{\stype'}{\ctype})}{(b_w,m_w,d_w)}}
                \hypo{\Phi_u \tr \seqi{\Del; x : \M_2}{u}{\tcomptype{\stype}{\M'}{\stype'}}{(b_u,m_u,d_u)}}
                \infer2[(\ruleApp)]{\seqi{\Gam + \Del; x : \M_1 \sqcup \M_2}{wu}{\comptype{\stype}{\ctype}}{(1+b_w+b_u,m_w+m_u,d_w+d_u)}}
            \end{prooftree} \]
            such that $\Gam_t = \Gam + \Del$, $\M = \M_1 \sqcup \M_2$, $\gtype = \comptype{\stype}{\ctype}$, $b_t = 1+b_w+b_u$, $m_t = m_w+m_u$, and $d_t = d_w + d_u$. By~\cref{lem:split-values-stores}.\ref{lem:com-split-values}, we know there exist the following derivations $(\Phi^i_v \tr \seqi{\Gam^i_v}{v}{\M_i}{(b_i,m_i,d_i)})_{i \in \{1,2\}}$, such that $\Gam_v = \Gam^1_v + \Gam^2_v$, $b_v = b_1 + b_2$, $m_v = m_1 + m_2$, and $d_v = d_1 + d_2$. By the \ih, we know there exist $\Phi_{w \subs{x}{v}} \tr \seqi{\Gam + \Gam^1_v}{w \subs{x}{v}}{\M' \ta (\comptype{\stype'}{\ctype})}{(b_w+b_1,m_w+m_1,d_w+d_1)}$ and $\Phi_{u \subs{x}{v}} \tr \seqi{\Del + \Gam^2_v}{u \subs{x}{v}}{\tcomptype{\stype}{\M'}{\stype'}}{(b_u+b_2,m_u+m_2,d_u+d_2)}$. %Assume $\Phi_{w \subs{x}{v}} \tr \seqi{\Gam + \Gam^1_v}{w \subs{x}{v}}{\tcomptype{\M'}{\stype'}{\ctype}}{(b_w+b_1,m_w+m_1,d_w+d_1)}$ and $\Phi_{u \subs{x}{v}} \tr \seqi{\Del + \Gam^2_v}{u \subs{x}{v}}{\stype \ta (\comptype{\M'}{\stype'})}{(b_u+b_2,m_u+m_2,d_u+d_2)}$. 
            We can build $\Phi_{t \subs{x}{v}}$ as follows:
            \[ \begin{prooftree}
                \hypo{\Phi_{w \subs{x}{v}}}
                \hypo{\Phi_{u \subs{x}{v}}}
                \infer2[(\ruleApp)]{\seqi{(\Gam + \Del) + (\Gam^1_v + \Gam^2_v)}{(wu) \subs{x}{v}}{\comptype{\stype}{\ctype}}{(1+b_w+b_u+b_1+b_2,m_w+m_u+m_1+m_2,d_w+d_u+d_1+d_2)}}
            \end{prooftree} \]
            And we can conclude with $\Gam_t + \Gam_v = (\Gam + \Del) + (\Gam^1_v + \Gam^2_v)$, $b_t + b_v = 1 + b_w+b_u+b_1+b_2$, $m_t + m_v = m_w+m_u+m_1+m_2$, and $d_t + d_v = d_w+d_u+d_1+d_2$.
            \item Case $\Phi_w$ ends with ($\ruleMany$). Then $t$ must be of the form $w$ and $\Phi_t$ must be of the following form:
            \[ \begin{prooftree}
                \hypo{(\Phi^i_w \tr \seqi{\Gam_i; x : \M_i}{w}{\rdel_i}{(b_i,m_i,d_i)})_{\iI}}
                \infer1[(\ruleMany)]{\seqi{+_{\iI} \Gam_i; x : \sqcup_{\iI} \M_i}{w}{\mul{\rdel_i}_{\iI}}{(+_{\iI}b_i, +_{\iI}m_i, +_{\iI}d_i)}}
            \end{prooftree} \]
            such that $\Gam_t = +_{\iI} \Gam_i$, $\gtype = \mul{\rdel_i}_{\iI}$, $b_t = +_{\iI} b_i$, $m_t = +_{\iI} m_i$, and $d_t = +_{\iI} d_i$. By~\cref{lem:split-values-stores}.\ref{lem:com-split-values}, $(\Phi^i_v \tr \seqi{\Gam^i_v}{v}{\M_i}{(b^i_v,m^i_v,d^i_v)})_{\iI}$, such that $\Gam_v = +_{\iI} \Gam^i_v$, $b_v = +_{\iI} b^i_v$, $m_v = +_{\iI} m^i_v$, and $d_v = +_{\iI} d^i_v$. By the \ih over each $\Phi^i_v$, we have $(\Phi^i_{w \subs{x}{v}} \tr \seqi{\Gam_i + \Gam^i_v}{w \subs{x}{v}}{\rdel_i}{(b_i+b^i_v,m_i+m^i_v,d_i+d^i_v)})_{\iI}$. Therefore, we can build $\Phi_{t \subs{x}{v}}$ as follows:
            \[ \begin{prooftree}
                \hypo{(\Phi^i_{w \subs{x}{v}} \tr \seqi{\Gam_i + \Gam^i_v}{w \subs{x}{v}}{\rdel_i}{(b_i+b^i_v,m_i+m^i_v,d_i+d^i_v)})_{\iI}}
                \infer1[(\ruleMany)]{\seqi{+_{\iI} (\Gam^i_v + \Gam^i_w)}{w \subs{x}{v}}{\mul{\tau_i}_{\iI}}{(+_{\iI}(b_i+b^i_v),+_{\iI}(m_i+m^i_v),+_{\iI}(d_i+d^i_v))}}
            \end{prooftree} \]
            And we can conclude with $\Gam_t + \Gam_v = +_{\iI} \Gam_i +_{\iI} \Gam^i_v = +_{\iI} (\Gam_i + \Gam^i_v)$, $b_t + b_v = +_{\iI} b_i +_{\iI} b^i_v = +_{\iI} (b_i + b^i_v)$, $m_t + m_v = +_{\iI} m_i +_{\iI} m^i_v = +_{\iI} (m_i + m^i_v)$, and $d_t + d_v = +_{\iI} d_i +_{\iI} d^i_v = +_{\iI} (d_i + d^i_v)$.
            \item Case $\Phi_t$ ends with (\ruleLift). Then $t$ is a variable and $\Phi_t$ must be of the following form:
            \[ \begin{prooftree}
                \hypo{\Phi_w \tr \seqi{\Gam; x : \M}{w}{\M'}{(b_t,m_t,d_t)}}
                \infer1[(\ruleLift)]{\seqi{\Gam; x : \M}{w}{\tcomptype{\stype}{\M'}{\stype}}{(b_t,m_t,d_t)}}
            \end{prooftree} \]
            where $\gtype = \tcomptype{\stype}{\M'}{\stype}$. By the \ih, we have $\Phi_{w \subs{x}{v}} \tr \seqi{\Gam + \Gam_v}{w \subs{x}{v}}{\M'}{(b_t+b_v, m_t+m_v, d_t +d_v)}$. Therefore, we can build $\Phi_{t \subs{x}{v}}$ as follows:
            \[ \begin{prooftree}
                \hypo{\Phi_{w \subs{x}{v}} \tr \seqi{\Gam + \Gam_v}{w \subs{x}{v}}{\M'}{(b_t+b_v, m_t+m_v, d_t +d_v)}}
                \infer1[(\ruleLift)]{\seqi{\Gam + \Gam_v}{w \subs{x}{v}}{\tcomptype{\stype}{\M'}{\stype}}{(b_t+b_v, m_t+m_v, d_t +d_v)}}
            \end{prooftree} \]
            And we can conclude.
            \item Case $\Phi_t$ ends with ($\ruleGet$). Then $t$ must be of the form $\get{l}{y}{u}$ and $\Phi_t$ must be of the following form:
            \[ \begin{prooftree}
                \hypo{\Phi_u \tr \seqi{\Gam_u; x : \M}{u}{\comptype{\stype}{\ctype}}{(b_u,m_u,d_u)}}
                \infer1[(\ruleGet)]{\seqi{(\Gam_u \sm y); x : \M}{\get{l}{y}{u}}{\comptype{\conj{(l : \Gam_{u}(y))} \splus \stype}{\ctype}}{(b_u,1+m_u,d_u)}}
            \end{prooftree} \]
          where $\gtype = \comptype{\conj{(l : \Gam_{u}(y))} \splus \stype}{\ctype}$, $\Gam_t = \Gam_u \sm y$, $b_t = b_u$, $m_t = 1+m_u$, and $d_t = d_u$. By the \ih, we have $\Phi_{u \subs{x}{v}} \tr \seqi{\Gam_u + \Gam_v}{u \subs{x}{v}}{\stype \ra \ctype}{(b_u+b_v,m_u+m_v,d_u+d_v)}$. Therefore, we can build $\Phi_{t \subs{x}{v}}$ as follows:
            \[ \begin{prooftree}
                \hypo{\Phi_{u \subs{x}{v}} \tr \seqi{\Gam_u + \Gam_v}{u \subs{x}{v}}{\comptype{\stype}{\ctype}}{(b_u+b_v,m_u+m_v,d_u+d_v)}}
                \infer1[(\ruleGet)]{\seqi{(\Gam_u  + \Gam_v) \sm y}{\get{l}{y}{u} \subs{x}{v}}{\comptype{\conj{(l : \Gam_u(y))} \splus \stype}{\ctype}}{(b_u+b_v,1+m_u+m_v,d_u+d_v)}}
            \end{prooftree} \]
            And we can conclude with $(\Gam_u + \Gam_v) \sm y = (\Gam \sm y) + \Gam_v = \Gam_t + \Gam_v$ by $\alpha$-conversion, $b_t + b_v = b_u+b_v$, $m_t + m_v = 1+m_u+m_v$, and $d_t + d_v = d_u +d_v$.
            \item Case $\Phi_t$ ends with ($\ruleSet$). Then $t$ must be of the form $\set{l}{w}{u}$ and $\Phi_t$ must be of the following form:
            \[ \begin{prooftree}
                \hypo{\Phi_w \tr \seqi{\Gam_w; x : \M_1}{w}{\M'}{(b_w,m_w,d_w)}}
                \hypo{\Phi_u \tr \seqi{\Gam_u; x : \M_2}{u}{\comptype{\conj{(l : \M')}; \stype}{\ctype}}{(b_u,m_u,d_u)}}
                \infer2[(\ruleSet)]{\seqi{\Gam_w + \Gam_u; x : \M_1 \sqcup \M_2}{\set{l}{w}{u}}{\comptype{\stype}{\ctype}}{(b_w+b_u,1+m_w+m_u,d_w+d_u)}}
            \end{prooftree} \]
            where $\gtype = \comptype{\stype}{\ctype}$, $\Gam_t = \Gam_w + \Gam_u$, $\del = \comptype{\stype}{\ctype}$, $b_t = b_w+b_u$, $m_t = 1+m_w + m_u$, and $d_t = d_w + d_u$. By~\cref{lem:split-values-stores}.\ref{lem:com-split-values}, we have $\Phi^1_v \tr \seqi{\Gam^1_v}{v}{\M_1}{(b^1_v,m^1_v,d^1_v)}$ and $\Phi^2_v \tr \seqi{\Gam^2_v}{v}{\M_2}{(b^2_v,m^2_v,d^2_v)}$, such that $\Gam_v = \Gam^1_v + \Gam^2_v$, $b_v = b^1_v + b^2_v$, $m_v = m^1_v + m^2_v$, and $d_v = d^1_v + d^2_v$. By the \ih, we have $\Phi_{w \subs{x}{v}} \tr \seqi{\Gam_w + \Gam^1_v}{w \subs{x}{v}}{\M'}{(b_w+b^1_v,m_w+m^1_v,d_w+d^1_v)}$ and $\Phi_{u \subs{x}{v}} \tr \seqi{\Gam_u + \Gam^2_v}{u \subs{x}{v}}{\comptype{\conj{(l : \M')}; \stype}{\ctype}}{(b_u+b^2_v,m_u+m^2_u,d_u+d^2_v)}$. Assume $\Phi_{w \subs{x}{v}} \tr \seqi{\Gam_w + \Gam^1_v}{w \subs{x}{v}}{\M'}{(b_w+b^1_v,m_w+m^1_v,d_w+d^1_v)}$ and $\Phi_{u \subs{x}{v}} \tr \seqi{\Gam_u + \Gam^2_v}{u \subs{x}{v}}{\comptype{\conj{(l : \M')}; \stype}{\ctype}}{(b_u+b^2_v,m_u+m^2_u,d_u+d^2_v)}$. We can build $\Phi_{t \subs{x}{v}}$ as follows:
            \[ \begin{prooftree}
                \hypo{\Phi_{w \subs{x}{v}}}
                \hypo{\Phi_{u \subs{x}{v}}}
                \infer2[(\ruleSet)]{\seqi{(\Gam_w + \Gam_u) + (\Gam^1_v + \Gam^2_v)}{(wu) \subs{x}{v}}{\comptype{\stype}{\ctype}}{(b_w+b_u+b^1_v+b^2_v,1+m_w+m_u+m^1_v+m^2_v,d_w+d_u+d^1_v+d^2_v)}}
            \end{prooftree} \]
            And we can conclude with $\Gam_t + \Gam_v = (\Gam_w + \Gam_u) + (\Gam^1_v + \Gam^2_v)$, $b_t + b_v = b_w+b_u+b^1_v+b^2_v$, $m_t + m_v = 1+m_w+m_u+m^1_v+m^2_v$, $d_t + d_v = d_w+d_u+d^1_v+d^2_v$.
            \item Case $\Phi_t$ ends with (\ruleAxP). Then $t$ must be a variable and we must consider two cases:
            \begin{itemize}
                \item Assume $t = y = x$. Then $\Gam_t = \eset$, $\gtype = \stype \ta (\comptype{\nott{\tneutral}}{\stype})$, $t \subs{x}{v} = v$, $b_t = m_t = d_t = 0$. Moreover, $\M = \mul{\nott{\tneutral}}$. We have to consider two cases:
                \begin{itemize}
                    \item Case $v = z$. Then $\Phi_v \tr \seqi{z : \mul{\nott{\tneutral}}}{z}{\mul{\nott{\tneutral}}}{(0,0,0)}$. So we can take $\Phi_{t \subs{x}{v}}$ as the following derivation:
                    \[ \begin{prooftree}
                        \infer0[(\ruleAxP)]{\seqi{z : \mul{\nott{\tneutral}}}{z}{\tcomptype{\stype}{\nott{\tneutral}}{\stype}}{(0,0)}}
                    \end{prooftree} \]
                    and conclude with $\Gam_t + \Gam_v = \Gam_v = (z : \mul{\nott{\tneutral}})$, $b_t + b_v = b_v = 0$, $m_t + m_v = m_v = 0$, and $d_t + d_v = d_v$.
                    \item Case $v = \lam z.p$. This case does not apply, by~\cref{lem:comp-notabs-implies-negabs}.
                \end{itemize}
                \item Assume $t = y \neq x$. Then $\M = \emul$, $\Gam_v = \eset$, $t \subs{x}{v} = t$, $b_v = 0$, $m_v = 0$, and $d_v = 0$. So we can take $\Phi_{t \subs{x}{v}} = \Phi_t$ and conclude with $\Gam_t + \Gam_v = \Gam_t$, $b_t + b_v = b_t$, $m_t + m_v = m_t$, and $d_t + d_v = d_t$.
            \end{itemize}
            \item Case $\Phi_t$ ends with (\ruleLamP). Then $t$ is of the form $\lam y.u$, $\Gam_t = \eset$, $\gtype = \tcomptype{\stype}{\vl}{\stype}$, $\M = \emul$, $\Gam_v = \eset$, $t \subs{x}{v} = \lam y.(u \subs{x}{v}) = (\lam y.u) \subs{x}{v}$, $b_t = b_v = 0$, $m_t = m_v = 0$, and $d_t = d_v = 0$. So we can build $\Phi_{t \subs{x}{v}}$ as follows:
            \[ \begin{prooftree}
                \infer0[(\ruleLamP)]{\seqi{}{(\lam y.u) \subs{x}{v}}{\tcomptype{\stype}{\vl}{\stype}}{(0,0,0)}}
            \end{prooftree} \]
            And conclude with $\Gam_t + \Gam_v = \eset$, $b_t = b_v = 0$, $m_t = m_v = 0$, and $d_t = d_v = 0$.
            \item Case $\Phi_t$ ends with (\ruleAppPOne). Then $t$ is of the form $yu$ and we have to consider two cases:
            \begin{itemize}
                \item Case $y = x$. Then $\Phi_t$ must be of the following form:
                \[ \begin{prooftree}
                    \hypo{\seqi{\Gam_u}{u}{\tcomptype{\stype}{\tightt}{\stype}}{(b_u,m_u,d_u)}}
                    \infer1[(\ruleAppPOne)]{\seqi{(x : \mul{\tvar} \sqcup \Gam_u(x)); (\Gam_u \sm x)}{x u}{\tcomptype{\stype}{\tneutral}{\stype}}{(b_u,m_u,1+d_u)}}
                \end{prooftree} \]
                such that $\Gam_t = (\Gam_u \sm x)$, $b = b_u$, $m = m_u$, and $d = 1+d_u$. Then $\M = \mul{\tvar} \sqcup \Gam_u(x)$ and, by~\cref{lem:split-values-stores}.\ref{lem:com-split-values}, we have $\Phi^1_v \tr \seqi{\Gam^1_v}{v}{\mul{\tvar}}{(b^1_v,m^1_v,d^1_v)}$ and $\Phi^2_v \tr \seqi{\Gam^2_v}{v}{\Gam_u(x)}{(b^2_v,m^2_v,d^2_v)}$, such that $\Gam_v = \Gam^1_v + \Gam^2_v$, $b_v = b^1_v + b^2_v$, $m_v = m^1_v + m^2_v$, and $d_v = d^1_v + d^2_v$. By the \ih, we know there exists $\Phi_{u \subs{x}{v}} \tr \seqi{(\Gam_u \sm x) + \Gam^2_u}{u \subs{x}{v}}{\tcomptype{\stype}{\tightt}{\stype}}{(b_u+b^2_v, m_u+m^2_v, d_u+d^2_v)}$. Now, we need to consider two cases:
                \begin{itemize}
                    \item Case $v = z$. Then $\Phi^1_v \tr \seqi{z : \mul{\tvar}}{z}{\mul{\tvar}}{(0,0,0)}$ and $\Phi^2_v \tr \seqi{z : \Gam_u(x)}{z}{\Gam_u(x)}{(0,0)}$. Therefore, we can build $\Phi_{t \subs{x}{v}} = \Phi_{v \subs{x}{v}}$ as follows:
                    \[ \begin{prooftree}
                        \hypo{\Phi_{u \subs{x}{v}} \tr \seqi{(\Gam_u \sm x) + \Gam_u(x)}{u \subs{x}{v}}{\tcomptype{\stype}{\tightt}{\stype}}{(b_u+b^2_v, m_u+m^2_v, d_u+d^2_v)}}
                        \infer1[(\ruleAppPOne)]{\seqi{(z : \mul{\tvar}) + (\Gam_u \sm x + (z : \Gam_u(x)))}{z (u \subs{x}{v})}{\tcomptype{\stype}{\tneutral}{\stype}}{(b_u+b^2_v,m_u+m^2_v,1+d_u+d^2_v)}}
                    \end{prooftree} \]
                    where $(z : \mul{\tvar}) + (\Gam_u \sm x + (z : \Gam_u(x))) = (\Gam_u \sm x) + (z : \mul{\tvar} \cup \Gam_u(x)) = \Gam_u + \Gam_v$, $b_u + b^2_v = b + b^1_v + b^2_v = b + b_v$, $m_u + m^2_v = m + m^1_v + m^2_v = m + m_v$, and $d_u + d^2_v = d + d^1_v + d^2_v = d + d_v$.
                    \item Case $v = \lam z.p$. This case does not apply, since it is not possible to assign $\tvar$ to $\lam z.p$, by~\cref{lem:comp-notabs-implies-negabs}.
                \end{itemize}
                \item Case $y \neq x$. Then, the proof is very similar to when $\Phi_t$ ends with rule ($\ruleApp$).
            \end{itemize}
            \item Case $\Phi_t$ ends with (\ruleAppPTwo), the proof is very similar to when $\Phi_t$ ends with rule (\ruleAppPOne).
        \end{itemize}
%\end{proof}
