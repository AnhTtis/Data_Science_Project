\subsection{Unified Analysis in the Probabilistic Model}
\label{sec:analysis-details}

In this section, we develop all the tools needed to prove the safety and liveness of the PoW and PoS longest chain protocols.

In \secref{analysis-details-cps-stabilize} we show that a block produced in a \timeslot corresponding to a \sltcp stabilizes, \ie, remains in the longest downloaded chain of all honest nodes. 
This is useful because if transactions in a block are confirmed after waiting long enough so at least one \sltcp occurs, 
the prefix of the \sltcp stabilizes and so
those transactions remain in every honest node's ledger (safety).
%
%
The occurrence of \sltcps also guarantees liveness because the block from a \sltcp 
is honest, so it adds new valid transactions to the ledger.
%

Further, we show that \sltpps occur very often (\secref{analysis-details-many-pps}) and the adversary cannot prevent all \sltpps from becoming \sltcps (\secref{analysis-details-many-pps-one-cps}). Thus, at least one \sltcp occurs in a long enough time interval, the length of which can be set as the confirmation time.




%
%
%
%

%
%
%
%
%
%
%
%
%
%
%
%

%
%
%
%
%


\input{03_analysis_04_details_01_cps_stabilize.tex}
\input{03_analysis_04_details_02_many_pps.tex}
\input{03_analysis_04_details_03_many_pps_one_cps.tex}








%

%
%
%
%

%

%

%

%

%

%

%

%


%

%
%

%
%


%



%

