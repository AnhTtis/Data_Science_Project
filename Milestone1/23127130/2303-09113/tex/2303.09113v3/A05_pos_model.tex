\section{Proof-of-Stake Model Details}
\label{sec:pos-model-details}

\import{./figures/}{alg-hdrtree-pos.tex}

Details of the PoS-based block production and verification are abstracted through an idealized functionality $\FtreePoS$ whose pseudocode is provided in \cref{alg:hdrtree-pow} (\cf~\cref{alg:hdrtree-pow}, \cite[Fig.~2]{sleepy}, \cite[Alg.~3]{bwlimitedposlc}).

As in PoW, each node can make one block production attempt per \timeslot that will be successful with probability $\blkrateslot/N$, independently of other nodes and \timeslots
(\myalgref{alg:hdrtree-pos}{loc:hdrtree-pos-blockproductionlottery})%
\footnote{There may be multiple blocks in one \timeslot, as in
%
%
the Ouroboros~\cite{kiayias2017ouroboros,david2018ouroboros,badertscher2018ouroboros} and Sleepy Consensus~\cite{sleepy,snowwhite} protocols.}%
, modeling uniform stake.
In PoS, however, (even past) block production opportunities can be `reused' to produce multiple blocks with different parents and/or content, \ie, to equivocate
(\myalgref{alg:hdrtree-pos}{loc:hdrtree-pos-leader,loc:hdrtree-pos-binding}).