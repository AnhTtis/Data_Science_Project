We summarize the process of \texttt{ADSampling} in Algorithm~\ref{code:adasampling}.
{\JIANYANGREVISION It takes a transformed data vector $\mathbf{o}'$, a transformed query vector $\mathbf {q}'$ and a distance threshold $r$ as inputs and outputs the result of the DCO of whether $dis \le r$: 1 for yes {\CHENGC (in this case, it returns $dis$ as well)} and 0 for no. 
We note that the transformation of the data vectors is conducted in the index phase and its cost can be amortized by all the subsequent queries on the same database. The transformation of the query vector is conducted in the query phase when a query comes and its cost can be amortized by all the DCOs involved for answering the same query.} 
Specifically, the algorithm maintains the number of sampled dimensions with a variable $d$ with $d = 0$ initially (line 1). 
It then performs an iterative process if $d < D$ (line 2). 
At each iteration, it samples some more dimensions incrementally and updates $d$ {\JIANYANGB and the approximate distance $dis'$} accordingly (line 3-4)
and conducts a hypothesis testing with the null hypothesis as $dis \le r$ based on the approximate distance $dis'$ (line 5). 
It then returns the result in three cases as explained in Section~\ref{subsec:idea-2} (line 6 - 11). 

\begin{algorithm}[tbh]
\DontPrintSemicolon
\SetKwFunction{LevelUp}{LevelUp}
\SetKwData{and}{and}
\SetKwInOut{Input}{Input}\SetKwInOut{Output}{Output}
\Input{{\JIANYANGREVISION A transformed data vector $\mathbf{o}'$, a transformed query vector $\mathbf q'$ and a distance threshold $r$}}
\Output{The result of DCO (i.e., whether $dis \le r$): 1 means yes and 0 means no; {\CHENG In case of the result of 1, an {\CHENGB exact} distance is also returned}}
\BlankLine
% \tcc{ 1. $\mathbf o' \leftarrow P' \mathbf o$ in the index phase.
    % \\2. $\mathbf q' \leftarrow P' \mathbf q$ at the start of the query phase.}
{\CHENGB Initialize the number of sampled dimensions $d$ to be 0\;}
\While{$d < D$}{
        {\JIANYANGREVISION Sample some more dimensions $y_i$ {\chengr incrementally with} $y_i=\mathbf{o}_i'-\mathbf{q}_i'$\;}
        Update $d$ and the approximate distance $dis'$ accordingly\;
	Conduct a hypothesis testing with the null hypothesis {\JIANYANGB $H_0$} as $dis \le r$ based on the approximate distance $dis'$\;
	\If(\tcp*[f]{Case 1}){{\JIANYANGB $H_0$} is rejected and $d < D$}{
			\textbf{return} 0  \;
		}
	\ElseIf(\tcp*[f]{Case 2}){{\JIANYANGB $H_0$} is not rejected and $d < D$}{
		\textbf{continue}\;
		}
	\Else(\tcp*[f]{Case 3}){
	    \textbf{return} 1 {\CHENG (and $dis'$)} if $dis' \le r$ and 0 otherwise\;
	}
}
\caption{\texttt{ADSampling}}
\label{code:adasampling}
\end{algorithm}