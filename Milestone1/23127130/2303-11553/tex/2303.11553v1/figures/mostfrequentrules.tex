\tikzmath{%
    \colone = 0;
    \coltwo = 5;
    \yoffset = 1;
    \yshiftrulefour = -0.75;
}

\begin{tikzpicture}
    \coordinate (label1l) at (\colone - 0.25 - 3/4, -1 * \yoffset + 0.4);
    \coordinate (left1l) at (\colone, -1 * \yoffset + 0.4);
    \coordinate (right1l) at (\colone + 1.5, -1 * \yoffset + 0.4);
    \coordinate (label1r) at (\coltwo - 3/4, -1 * \yoffset + 0.4);
    \coordinate (left1r) at (\coltwo, -1 * \yoffset + 0.4);
    \coordinate (right1r) at (\coltwo + 1.5, -1 * \yoffset + 0.4);
    \coordinate (arrow1) at (\colone + 3.95, -1 * \yoffset + 0.4);

    \coordinate (label2l) at (\colone - 0.25 - 3/4, -2 * \yoffset + 0.425);
    \coordinate (left2l) at (\colone, -2 * \yoffset + 0.425);
    \coordinate (right2l) at (\colone + 1.5, -2 * \yoffset + 0.425);
    \coordinate (label2r) at (\coltwo - 3/4, -2 * \yoffset + 0.425);
    \coordinate (left2r) at (\coltwo, -2 * \yoffset + 0.425);
    \coordinate (right2r) at (\coltwo + 1.5, -2 * \yoffset + 0.425);
    \coordinate (arrow2) at (\colone + 3.95, -2 * \yoffset + 0.425);

    \coordinate (label3l) at (\colone - 0.25 - 3/4, -3 * \yoffset + 0.4);
    \coordinate (left3l) at (\colone, -3 * \yoffset + 0.4);
    \coordinate (right3l) at (\colone + 1.5, -3 * \yoffset + 0.4);
    \coordinate (label3r) at (\coltwo - 3/4, -3 * \yoffset + 0.4);
    \coordinate (left3r) at (\coltwo, -3 * \yoffset + 0.4);
    \coordinate (right3r) at (\coltwo + 1.5, -3 * \yoffset + 0.4);
    \coordinate (arrow3) at (\colone + 3.95, -3 * \yoffset + 0.4);

    \coordinate (label4l) at (\colone - 0.25 - 3/4, -4 * \yoffset);
    \coordinate (left4l) at (\colone, -4 * \yoffset);
    \coordinate (right4l) at (\colone + 1.5, -4 * \yoffset);
    \coordinate (label4r) at (\coltwo - 3/4, -4 * \yoffset);
    \coordinate (left4r) at (\coltwo, -4 * \yoffset);
    \coordinate (right4r) at (\coltwo + 1.5, -4 * \yoffset);
    \coordinate (arrow4) at (\colone + 3.95, -4 * \yoffset);

    % rule1
    \begin{scope}[scale=1]
        \node [] at (label1l) () {\(\dot{P}_1\)};
        \begin{scope}[scale=1/2, shift={(left1l)}, transparency group, opacity=0.5]
            \node [lhs] at (0, 0) (lhs) {\scriptsize \phantom{0}};
            \node [blank] at (right1l) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right1l)}]
            \node [lhs, opacity=0.5] at (0, 0) (lhs) {\scriptsize \phantom{0}};
        \end{scope}
        \node [] at (arrow1) () {$\xRightarrow{\times 61}$};
        \begin{scope}[scale=1/2, shift={(left1r)}]
            \node [text opacity=1] at (label1r) () {};
            \node [addlhs] at (0, 0) (lhs) {\scriptsize 2};
            \node [blank] at (right1r) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right1r)}]
            \node [addnode] at (0, 0) (rhs0) {};
            \draw [addedge] (rhs0) -- (0.53033, 0.53033);
            \draw [addedge] (rhs0) -- (0.53033, -0.53033);
        \end{scope}
    \end{scope}

    % rule2
    \begin{scope}[scale=1]
        \node [] at (label2l) () {\(\dot{P}_2\)};
        \begin{scope}[scale=1/2, shift={(left2l)}, transparency group, opacity=0.5]
            \node [lhs] at (0, 0) (lhs) {\scriptsize \phantom{0}};
            \node [blank] at (right2l) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right2l)}]
            \node [lhs, opacity=0.5] at (0, 0) (lhs) {\scriptsize \phantom{0}};
        \end{scope}
        \node [] at (arrow2) () {$\xRightarrow{\times 5}$};
        \begin{scope}[scale=1/2, shift={(left2r)}]
            \node [text opacity=1] at (label2r) () {};
            \node [addlhs] at (0, 0) (lhs) {\scriptsize 3};
            \node [blank] at (right2r) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right2r)}]
            \node [addnode] at (0.75, 0) (rhs0) {};
            \node [addnode] at (2.25, 0) (rhs1) {};
            \draw [addedge] (rhs0) -- (rhs1);
            \draw [addedge] (rhs0) -- (0.2196699, 0.53033);
            \draw [addedge] (rhs0) -- (0.2196699, -0.53033);
            \draw [addedge] (rhs1) -- (3.0, 0.0);
        \end{scope}
    \end{scope}

    % rule3
    \begin{scope}[scale=1]
        \node [] at (label3l) () {\(\dot{P}_3\)};
        \begin{scope}[scale=1/2, shift={(left3l)}]
            \node [lhs] at (0, 0) (lhs) {\scriptsize 10};
            \node [blank] at (right3l) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right3l)}]
            \node [node] at (0.75, 0) (rhs0) {};
            \node [node] at (2.25, 0) (rhs1) {};
            \draw [edge] (rhs0) -- (rhs1);
            \draw [edge] (rhs0) -- (1.28033, 0.53033);
            \draw [edge] (rhs0) -- (0.75, 0.75);
            \draw [edge] (rhs0) -- (0.2196699, 0.53033);
            \draw [edge] (rhs0) -- (0.0, 0.0);
            \draw [edge] (rhs0) -- (0.2196699, -0.53033);
            \draw [edge] (rhs0) -- (0.75, -0.75);
            \draw [edge] (rhs0) -- (1.28033, -0.53033);
            \draw [edge] (rhs1) -- (3.0, 0.0);
            \draw [edge] (rhs1) -- (2.625, 0.649519);
            \draw [edge] (rhs1) -- (2.625, -0.649519);
        \end{scope}
        \node [] at (arrow3) () {$\xRightarrow{\times 3}$};
        \begin{scope}[scale=1/2, shift={(left3r)}]
            \node [text opacity=1] at (label3r) () {};
            \node [dellhs] at (0, 0) (lhs) {\scriptsize 8};
            \node [blank] at (right3r) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right3r)}]
            \node [node] at (0.75, 0) (rhs0) {};
            \node [node] at (2.25, 0) (rhs1) {};
            \draw [edge] (rhs0) -- (rhs1);
            \draw [edge] (rhs0) -- (1.28033, 0.53033);
            \draw [edge] (rhs0) -- (0.75, 0.75);
            \draw [edge] (rhs0) -- (0.2196699, 0.53033);
            \draw [edge] (rhs0) -- (0.0, 0.0);
            \draw [edge] (rhs0) -- (0.2196699, -0.53033);
            \draw [edge] (rhs0) -- (0.75, -0.75);
            \draw [edge] (rhs0) -- (1.28033, -0.53033);
            \draw [deledge] (rhs1) -- (3.0, 0.0);
            \draw [edge] (rhs1) -- (2.625, 0.649519);
            \draw [deledge] (rhs1) -- (2.625, -0.649519);
        \end{scope}
    \end{scope}

    % rule4
    \begin{scope}[scale=1]
        \node [] at (label4l) () {\(\dot{P}_4\)};
        \begin{scope}[scale=1/2, shift={(left4l)}]
            \node [lhs] at (0, 0) (lhs) {\scriptsize 10};
            \node [blank] at (right4l) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right4l)}]
            \node [node] at (0.75, 0) (rhs0) {};
            \node [node] at (1.85, 0.649519) (rhs1) {};
            \node [node] at (1.85, -0.649519) (rhs2) {};
            \draw [edge] (rhs0) -- (rhs2);
            \draw [edge] (rhs1) -- (rhs2);

            \draw [edge] (rhs0) -- (0.375, 0.649519);
            \draw [edge] (rhs0) -- (0.0, 0.0);
            \draw [edge] (rhs0) -- (0.375, -0.649519);

            \draw [edge] (rhs1) -- (1.3196699, 1.179849);
            \draw [edge] (rhs1) -- (2.38033, 1.179849);

            \draw [edge] (rhs2) -- (1.2754666676607664, -1.131609707264904);
            \draw [edge] (rhs2) -- (1.7197638667498023, -1.388124814759156);
            \draw [edge] (rhs2) -- (2.225, -1.2990380528383292);
            \draw [edge] (rhs2) -- (2.5547694655894313, -0.9060341074942514);
            \draw [edge] (rhs2) -- (2.5547694655894313, -0.3930038925057484);
        \end{scope}
        \node [] at (arrow4) () {$\xRightarrow{\times 2}$};
        \begin{scope}[scale=1/2, shift={(left4r)}]
            \node [text opacity=1] at (label4r) () {};
            \node [addlhs] at (0, 0) (lhs) {\scriptsize 14};
            \node [blank] at (right4r) (rhs) {};
            \draw [->, edge] (lhs) -- (rhs);
        \end{scope}
        \begin{scope}[scale=1/2, shift={(right4r)}]
            \node [node] at (0.75, 0) (rhs0) {};
            \node [node] at (1.85, 0.649519) (rhs1) {};
            \node [node] at (1.85, -0.649519) (rhs2) {};
            \draw [deledge] (rhs0) -- (rhs2);
            \draw [edge] (rhs1) -- (rhs2);

            \draw [addedge] (rhs0) -- (0.75, 0.75);
            \draw [edge] (rhs0) -- (0.375, 0.649519);
            \draw [addedge] (rhs0) -- (0.100480947161671, 0.37499999999999994);
            \draw [edge] (rhs0) -- (0.0, 0.0);
            \draw [addedge] (rhs0) -- (0.10048094716167089, -0.375);
            \draw [edge] (rhs0) -- (0.375, -0.649519);

            \draw [addedge] (rhs1) -- (1.1255556302831988, 0.8436332838268907);
            \draw [edge] (rhs1) -- (1.3196699, 1.179849);
            \draw [addedge] (rhs1) -- (1.6558857161731095, 1.3739633697168012);
            \draw [addedge] (rhs1) -- (2.0441142838268904, 1.3739633697168012);
            \draw [edge] (rhs1) -- (2.38033, 1.179849);
            \draw [addedge] (rhs1) -- (2.5744443697168014, 0.8436332838268905);

            \draw [deledge] (rhs2) -- (1.2754666676607664, -1.131609707264904);
            \draw [edge] (rhs2) -- (1.7197638667498023, -1.388124814759156);
            \draw [deledge] (rhs2) -- (2.225, -1.2990380528383292);
            \draw [edge] (rhs2) -- (2.5547694655894313, -0.9060341074942514);
            \draw [deledge] (rhs2) -- (2.5547694655894313, -0.3930038925057484);
        \end{scope}
        \begin{pgfonlayer}{background} 
            \coordinate (lsw) at ([shift={(-0.2 + 0.15 + 0.87, -0.2)}]current bounding box.south west);
            \coordinate (lne) at ([shift={(0.2 - 4.9, 0.05)}]current bounding box.north east);
            \coordinate (rsw) at ([shift={(-0.2 + 0.15 + 5.9, -0.2)}]current bounding box.south west);
            \coordinate (rne) at ([shift={(0.2, 0.05)}]current bounding box.north east);

            \draw [draw=plotgrey, fill=plotgrey, opacity=0.75] (lsw) rectangle (lne);
            \draw [draw=plotgrey, fill=plotgrey, opacity=0.75] (rsw) rectangle (rne);
            \draw [very thick, draw=white] ([shift={(0.0, 3.85)}]lsw) -- ([shift={(4.65, 3.85)}]rsw);
            \draw [very thick, draw=white] ([shift={(0.0, 2.85)}]lsw) -- ([shift={(4.65, 2.85)}]rsw);
            \draw [very thick, draw=white] ([shift={(0.0, 1.75)}]lsw) -- ([shift={(4.65, 1.75)}]rsw);
        \end{pgfonlayer}
        \node [] at ([shift={(9.75, 0.0)}]label1l) () {\(\ddot{P}_1\)};
        \node [] at ([shift={(9.75, 0.0)}]label2l) () {\(\ddot{P}_2\)};
        \node [] at ([shift={(9.75, 0.0)}]label3l) () {\(\ddot{P}_3\)};
        \node [] at ([shift={(9.75, 0.0)}]label4l) () {\(\ddot{P}_4\)};
    \end{scope}
\end{tikzpicture}
