\section{Derivation of the Pair Approximation system of ODEs}\label{app_PA}
For the sake of simplicity, we apply the pair approximation on a z-regular undirected modular graph with two communities, but the treatment can be easily extended to a directed modular network with heterogeneous degrees.\\
Each node of class $1$ has $z_{11}$ internal neighbours and $z_{12}$ external (of different class) ones. Same thing for class 2. Moreover, $N_1z_{12} = N_2 z_{21}$. The following quantities are defined: the density of up spins in the first and second class, respectively $\rho'_1$ and $\rho'_2,$ as in the paragraph before, while $b_{lm}^{\sigma_i\;\sigma_j}$ represents the fraction of active\footnote{An edge linking the nodes $ij$ is active at a time $t$ if $\sigma_i(t)\sigma_j(t)=-1$} links connecting a spin in state $\sigma_i$ spin of class $l$ with a spin in state $\sigma_j$ spin of class $m$, normalized by the total number of connections of the class $l$ towards the class $m$,
\begin{align}
    &\rho'_1 = \frac{1}{N_1}\sum_{i=1}^{N_1} \frac{1+\sigma_i}{2} \\
    &\rho'_2 = \frac{1}{N_2}\sum_{i=N_1+1}^{N} \frac{1+\sigma_i}{2} \\
    &b_{11}^{+-} = \frac{1}{N_1z_{11}}\sum_{i=1}^{N_1}\;\sum_{j=1}^{N_1}A_{ij}\frac{1-\sigma_i+\sigma_j-\sigma_i\sigma_j}{4}  \\
    &b_{22}^{+-} = \frac{1}{N_2z_{22}}\sum_{i=N_1+1}^{N}\;\sum_{j=N_1+1}^{N}A_{ij}\frac{1-\sigma_i+\sigma_j-\sigma_i\sigma_j}{4}  \\
    &b_{12}^{-+} = \frac{1}{N_1z_{12}}\sum_{i=1}^{N_1}\sum_{j=N_1+1}^{N}A_{ij}\frac{1-\sigma_i+\sigma_j-\sigma_i\sigma_j}{4}  \\
    &b_{12}^{+-} = \frac{1}{N_1z_{12}}\sum_{i=1}^{N_1}\sum_{j=N_1+1}^{N}A_{ij}\frac{1+\sigma_i-\sigma_j-\sigma_i\sigma_j}{4}
\end{align}
Due to the undirectedness of the network, the other quantities of interest can be expressed as functions of the ones defined above, specifically $b_{11}^{-+} = b_{11}^{+-}$, $b_{22}^{-+} = b_{22}^{+-}$, $b_{21}^{+-} = b_{12}^{-+}$, $b_{21}^{-+} = b_{12}^{+-}$.\\
\\
The first of the global rates of the possible processes $W^{1+}_{z_{11},m_{11},z_{12},m_{12}}$, i.e. the probability that in a time $dt$ (recall $dt=\frac{1}{N}d\tau$) a spin of the first class in current state $-$ and with $m_{11}$ out of $z_{11}$ internal neighbours and $m_{12}$ out of $z_{12}$ external ones currently in $+$ state flips, reads
\begin{align}
    &W^{1-\rightarrow+}_{z_{11},m_{11},z_{12},m_{12}} = N_1 (1-\rho'_1)P^{11-}_{z_{11},m_{11}}P^{12-}_{z_{12},m_{12}}F^1_{z_{11}+z_{12},m_{11}+m_{12}}
\end{align}
where $P^{11-}_{z_{11},m_{11}}$ is the probability that a node in the first population currently in state $-1$ has $z_{11}$  degree (trivial, explicited only for the generalization) and $m_{11}$ neighbours of the first population currently in state $+1$. The other rates read similarly
\begin{align}
    &W^{2-\rightarrow+}_{z_{22},m_{22},z_{21},m_{21}} = N_2 (1-\rho'_2)P^{22-}_{z_{22},m_{22}}P^{21-}_{z_{21},m_{21}}F^2_{z_{22}+z_{21},m_{22}+m_{21}}\\
    &W^{1+\rightarrow-}_{z_{11},m_{11},z_{12},m_{12}} = N_1 \rho'_1P^{11+}_{z_{11},m_{11}}P^{12+}_{z_{12},m_{12}}R^1_{z_{11}+z_{12},m_{11}+m_{12}}\\
    &W^{2+\rightarrow-}_{z_{22},m_{22},z_{21},m_{21}} = N_2 \rho'_2P^{22+}_{z_{22},m_{22}}P^{21+}_{z_{21},m_{21}}R^2_{z_{22}+z_{21},m_{22}+m_{21}}
\end{align}
The transition rates (infection $-1\rightarrow +1$ and recovery $+1\rightarrow -1$) in the expressions of the global rates, for this specific multi-class binary-state stochastic process, are 
\begin{align}
    &F^{1/2}_{z,m} = \frac{m}{z}\frac{1+h_{1/2}}{2}\\
    &R^{1/2}_{z,m} = \bigg(1-\frac{m}{z}\bigg)\frac{1-h_{1/2}}{2}
\end{align}
The two global rates of the first class $W^{1\mp\rightarrow\pm}_{z_{11},m_{11},z_{12},m_{12}}$ change the variables respectively
\begin{align}
    &\rho'_1 \rightarrow \rho'_1 \pm \frac{1}{N_1}\\
    &b_{11}^{+-} \rightarrow b_{11} \pm \frac{(z_{11}-2m_{11})}{N_1z_{11}}  \\
    &b_{12}^{-+} \rightarrow  b_{12}^{-+} \mp \frac{m_{12}}{N_1z_{12}} \\
    &b_{12}^{+-} \rightarrow  b_{12}^{+-} \pm \frac{z_{12}-m_{12}}{N_1z_{12}}
\end{align}
and correspondingly the ones the second class rates $W^{2\mp\rightarrow\pm}_{z_{22},m_{22},z_{21},m_{21}}$ change the variables 
\begin{align}
    &\rho'_2 \rightarrow \rho'_2 \pm \frac{1}{N_2}\\
    &b_{22}^{+-} \rightarrow b_{22} \pm \frac{(z_{22}-2m_{22})}{N_2z_{22}}  \\
    &b_{12}^{-+} \rightarrow  b_{12}^{-+} \pm  \frac{z_{21}-m_{21}}{N_2z_{21}}\\
    &b_{12}^{+-} \rightarrow  b_{12}^{+-} \mp  \frac{m_{21}}{N_2z_{21}} 
\end{align}
\\
Thus, the dynamical system consists of six coupled evolution equations 
\begin{equation}
    \begin{cases}
    \dot{\rho'_1} = \frac{1}{N_1} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}[W^{1+}_{z_{11},m_{11},z_{12},m_{12}} - W^{1-}_{z_{11},m_{11},z_{12},m_{12}}]\\
    \dot{\rho'_2} = \frac{1}{N_2} \sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}[W^{2+}_{z_{22},m_{22},z_{21},m_{21}} - W^{2-}_{z_{22},m_{22},z_{21},m_{21}}]\\
    \dot{b_{11}^{+-}} = \frac{1}{N_1z_{11}} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(z_{11} - 2m_{11})[W^{1+}_{z_{11},m_{11},z_{12},m_{12}} - W^{1-}_{z_{11},m_{11},z_{12},m_{12}}]\\
    \dot{b_{22}^{+-}} = \frac{1}{N_2z_{22}} \sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}(z_{22} - 2m_{22})[W^{2+}_{z_{22},m_{22},z_{21},m_{21}} - W^{2-}_{z_{22},m_{22},z_{21},m_{21}}]\\
    \dot{b_{12}^{-+}} = \frac{1}{N_1z_{12}} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(-m_{12})[W^{1+}_{z_{11},m_{11},z_{12},m_{12}} - W^{1-}_{z_{11},m_{11},z_{12},m_{12}}]  \;+\\ 
    \;\;\;\;\;\;\;\;\;\;\;\;\;+\frac{1}{N_2z_{21}} \sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}(z_{21} - m_{21})[W^{2+}_{z_{22},m_{22},z_{21},m_{21}} - W^{2-}_{z_{22},m_{22},z_{21},m_{21}}]\\
    \dot{b_{12}^{+-}} = \frac{1}{N_1z_{12}} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(z_{12}-m_{12})[W^{1+}_{z_{11},m_{11},z_{12},m_{12}} - W^{1-}_{z_{11},m_{11},z_{12},m_{12}}]  \;+\\ 
    \;\;\;\;\;\;\;\;\;\;\;\;\;+\frac{1}{N_2z_{21}} \sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}( - m_{21})[W^{2+}_{z_{22},m_{22},z_{21},m_{21}} - W^{2-}_{z_{22},m_{22},z_{21},m_{21}}]\\    
    
    \end{cases}
\end{equation}
We still have to defined the probabilities e.g.  $P^{11-}_{z_{11},m_{11}}$, whose definition would close the system of ordinary differential equations above.\\
\\
The mean-field approximation corresponds to take the probabilities 
\begin{align}
    &P^{11+}_{z_{11},m_{11}} = P^{11-}_{z_{11},m_{11}} =  \delta_{\rho_1,\frac{m_{11}}{z_{11}}} \label{MF_probabilities_start} \\
    &P^{22+}_{z_{22},m_{22}} = P^{22-}_{z_{22},m_{22}} =  \delta_{\rho_2,\frac{m_{22}}{z_{22}}}\\
    &P^{12+}_{z_{12},m_{12}} = P^{12-}_{z_{12},m_{12}} = \delta_{\rho_2,\frac{m_{12}}{z_{12}}} \\
    &P^{21+}_{z_{21},m_{21}} = P^{21-}_{z_{21},m_{21}} = \delta_{\rho_1,\frac{m_{21}}{z_{21}}}
\label{MF_probabilities_end}
\end{align}
and thus decouples the evolution of the densities of up spin from the rest of the system, indeed by inserting those probabilities we would recover the mean-field evolution equations (\ref{mf_echochambers}) for $\rho'_1,\rho'_2$ .\\
\\
The pair approximation, instead, consists in assuming that those probability are binomial distributions $B_{z,m}(x) = \binom{z}{m}x^m(1-x)^{z-m}$ 
\begin{align} 
    &P^{11-}_{z_{11},m_{11}} = B_{z_{11},m_{11}}(p_{11-}) \label{eq:PA_proba_start}\\
    &P^{11+}_{z_{11},m_{11}} = B_{z_{11},z_{11}-m_{11}}(p_{11+}) \\
    &P^{22-}_{z_{22},m_{22}} = B_{z_{22},m_{22}}(p_{22-}) \\
    &P^{22+}_{z_{22},m_{22}} = B_{z_{22},z_{22}-m_{22}}(p_{22+}) \\
    &P^{12-}_{z_{12},m_{12}} = B_{z_{12},m_{12}}(p_{12-}) \\
    &P^{12+}_{z_{12},m_{12}} = B_{z_{12},z_{12}-m_{12}}(p_{12+}) \\
    &P^{21-}_{z_{21},m_{21}} = B_{z_{21},m_{21}}(p_{21-}) \\
    &P^{21+}_{z_{21},m_{21}} = B_{z_{21},z_{21}-m_{21}}(p_{21+}) \label{PA_proba_end}
\end{align}
with single events probabilities
\begin{align}
    &p_{11-} = \frac{b_{11}^{-+}}{1-\rho'_1} = \frac{b_{11}^{+-}}{1-\rho'_1}\label{PA_single_proba_start}\\
    &p_{11+} = \frac{b_{11}^{+-}}{\rho'_1} \\
    &p_{22-} = \frac{b_{22}^{-+}}{1-\rho'_2} = \frac{b_{22}^{+-}}{1-\rho'_2} \\
    &p_{22+} = \frac{b_{22}^{+-}}{\rho'_2} \\
    &p_{12-} = \frac{b_{12}^{-+}}{1-\rho'_1} \\
    &p_{12+} = \frac{b_{12}^{+-}}{\rho'_1} \\
    &p_{21-} = \frac{b_{21}^{+-}}{1-\rho'_2} = \frac{b_{12}^{-+}}{1-\rho'_2}  \\
    &p_{21+} =  \frac{b_{21}^{+-}}{\rho'_2} = \frac{b_{12}^{-+}}{\rho'_2}\label{PA_single_proba_end}   
\end{align}
The criterium is to consider as single probability, e.g. to express $p_{11-}$, the fraction of $-+$ links of the first communities (in number $b_{11}^{-+}N_1z_{11}$) over the total of the edges starting from $-$ within the first community (in number $(1-\rho'_1)N_1z_{11}$).\\
\\
Eventually we can write the final system of ODE within the pair approximation

\begin{equation}
    \begin{cases}
    \dot{\rho'_1} =   (1-\rho'_1)\sum\limits_{m_{11}=0}^{z_{11}}B_{z_{11},m_{11}}(p_{11-})\sum\limits_{m_{12}=0}^{z_{12}}B_{z_{12},m_{12}}(p_{12-})F^1_{z_{11}+z_{12},m_{11}+m_{12}} +\\
    \;\;\;\;\;\;\;\;\; -  \rho'_1 \sum\limits_{m_{11}=0}^{z_{11}}B_{z_{11},z_{11}-m_{11}}(p_{11+}) \sum\limits_{m_{12}=0}^{z_{12}}B_{z_{12},z_{12}-m_{12}}(p_{12+})R^1_{z_{11}+z_{12},m_{11}+m_{12}}\\
    \\
    
    \dot{\rho'_2} = (1-\rho'_2)\sum\limits_{m_{22}=0}^{z_{22}}B_{z_{22},m_{22}}(p_{22-}) \sum\limits_{m_{21}=0}^{z_{21}}B_{z_{21},m_{21}}(p_{21-})F^2_{z_{22}+z_{21},m_{22}+m_{21}} +\\
    \;\;\;\;\;\;\;\;\;- \rho'_2\sum\limits_{m_{22}=0}^{z_{22}}B_{z_{22},z_{22}-m_{22}}(p_{22+})\sum\limits_{m_{21}=0}^{z_{21}}B_{z_{21},z_{21}-m_{21}}(p_{21+})R^2_{z_{22}+z_{21},m_{22}+m_{21}}\\
    \\
    
    \dot{b_{11}^{+-}} = \frac{1-\rho'_1}{z_{11}} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(z_{11} - 2m_{11})B_{z_{11},m_{11}}(p_{11-})B_{z_{12},m_{12}}(p_{12-})F^1_{z_{11}+z_{12},m_{11}+m_{12}} +\\
    \;\;\;\;\;\;\;\;\;\;-\frac{\rho'_1}{z_{11}} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(z_{11} - 2m_{11})B_{z_{11},z_{11}-m_{11}}(p_{11+}) B_{z_{12},z_{12}-m_{12}}(p_{12+})R^1_{z_{11}+z_{12},m_{11}+m_{12}} \\
    \\
    
    \dot{b_{22}^{+-}} = \frac{1-\rho'_2}{z_{22}} \sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}(z_{22} - 2m_{22})B_{z_{22},m_{22}}(p_{22-}) B_{z_{21},m_{21}}(p_{21-})F^2_{z_{22}+z_{21},m_{22}+m_{21}} +\\ \;\;\;\;\;\;\;\;\;-\frac{\rho'_2}{z_{22}}\sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}(z_{22} - 2m_{22})B_{z_{22},z_{22}-m_{22}}(p_{22+})B_{z_{21},z_{21}-m_{21}}(p_{21+})R^2_{z_{22}+z_{21},m_{22}+m_{21}}\\
    \\
    
    \dot{b_{12}^{-+}} = \frac{1-\rho'_1}{z_{12}} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(-m_{12})B_{z_{11},m_{11}}(p_{11-})B_{z_{12},m_{12}}(p_{12-})F^1_{z_{11}+z_{12},m_{11}+m_{12}} + \\ \;\;\;\;\;\;\;\;\;\;\;-\frac{\rho'_1}{z_{12}}\sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(-m_{12}) B_{z_{11},z_{11}-m_{11}}(p_{11+}) B_{z_{12},z_{12}-m_{12}}(p_{12+})R^1_{z_{11}+z_{12},m_{11}+m_{12}}  \;+\\ 
    \;\;\;\;\;\;\;\;\;\;\;\;\;+\frac{1-\rho'_2}{z_{21}} \sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}(z_{21} - m_{21})B_{z_{22},m_{22}}(p_{22-}) B_{z_{21},m_{21}}(p_{21-})F^2_{z_{22}+z_{21},m_{22}+m_{21}}\;+\\
    \;\;\;\;\;\;\;\;\;\;\;\;- \frac{\rho'_2}{z_{21}}\sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}(z_{21} - m_{21})B_{z_{22},z_{22}-m_{22}}(p_{22+})B_{z_{21},z_{21}-m_{21}}(p_{21+})R^2_{z_{22}+z_{21},m_{22}+m_{21}}\\
    \\
    
    \dot{b_{12}^{+-}} = \frac{1-\rho'_1}{z_{12}} \sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(z_{12}-m_{12})B_{z_{11},m_{11}}(p_{11-})B_{z_{12},m_{12}}(p_{12-})F^1_{z_{11}+z_{12},m_{11}+m_{12}} +\\
    \;\;\;\;\;\;\;\;\;\;\;\;-  \frac{\rho'_1}{z_{12}}\sum\limits_{m_{11}=0}^{z_{11}}\sum\limits_{m_{12}=0}^{z_{12}}(z_{12}-m_{12}) B_{z_{11},z_{11}-m_{11}}(p_{11+}) B_{z_{12},z_{12}-m_{12}}(p_{12+})R^1_{z_{11}+z_{12},m_{11}+m_{12}}   \;+\\ 
    \;\;\;\;\;\;\;\;\;\;\;\;\;+\frac{1-\rho'_2}{z_{21}} \sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}( - m_{21})B_{z_{22},m_{22}}(p_{22-}) B_{z_{21},m_{21}}(p_{21-})F^2_{z_{22}+z_{21},m_{22}+m_{21}} +\\
    \;\;\;\;\;\;\;\;\;\;\;\;- \frac{\rho'_2}{z_{21}}\sum\limits_{m_{22}=0}^{z_{22}}\sum\limits_{m_{21}=0}^{z_{21}}( - m_{21})B_{z_{22},z_{22}-m_{22}}(p_{22+})B_{z_{21},z_{21}-m_{21}}(p_{21+})R^2_{z_{22}+z_{21},m_{22}+m_{21}}\\    
    \end{cases}
    \label{PA_system}
\end{equation}
to be solve numerically with standard methods.\\
From the initial conditions $\rho'_1(0),\rho'_2(0)$, the other initial conditions are determined as follows
\begin{align}
    & b_{11}^{+-}(0) = \rho'_1(0)(1-\rho'_1(0))\\
    & b_{22}^{+-}(0) = \rho'_2(0)(1-\rho'_2(0))\\
    & b_{12}^{-+}(0) = \rho'_1(0)(1-\rho'_2(0))\\
    & b_{12}^{+-}(0) = \rho'_2(0)(1-\rho'_1(0))
\end{align}

