\section{{Experiments and Results}}
\label{sec:exp_and_res}
% \begin{table*}
%     \centering
%     \ra{1.3}\tbs{7}
%     \caption{\label{tb:sim_exp_summary}Average grasp success rate (\%) on different stiffnesses for two different tasks. The higher the better.}
%     \begin{tabular}{@{}l|cccc|cccc@{}}
%         \toprule
%         & \multicolumn{4}{c|}{Shake task} & \multicolumn{4}{c}{Twist task} \\
%         \multicolumn{1}{c}{Stiffness ($\mathbf{E}$)} & \multicolumn{2}{c}{Common} & \multicolumn{2}{c|}{\egad{}} & \multicolumn{2}{c}{Common} & \multicolumn{2}{c}{\egad{}}  \\
%         \cmidrule(lr){2-3} \cmidrule(lr){4-5} \cmidrule(lr){6-7} \cmidrule(lr){8-9} & With stiffness & No stiffness & With stiffness & No stiffness  & With stiffness & No stiffness & With stiffness & No stiffness\\
%         \midrule
%         $2\cdot 10^4$             & 75.4 & 22.8 &  67  & 40.8 & 65.7 & 20 & 69.5 & 51.3\\
%         $2\cdot 10^5$             & 88.5 & 38.5 & 77.4 & 68.6 & 74.2 & 40 & 80 & 65.2\\
%         $2\cdot 10^6$             & 88.5 & 48.5 & 77.4 & 69.6 & 71.4 & 42.8 & 75 & 64.4\\
%         $2\cdot 10^9$             & 51.4 & 46.2 & 51.3 & 51.3 & 40   & 31.4 & 41.7 &41.7\\
%         All stiffnesses                        & \textbf{75.9} & 40.3 &\textbf{68}& 57.6 &\textbf{63.5} & 34 & \textbf{67.3} & 55.6 \\
%         \bottomrule
%     \end{tabular}
%     \label{tab:simresult}
%  \figvspace{}
% \end{table*}
We evaluate each component of our \textit{SPONGE} pipeline: contact map prediction and sequence planning. In particular, our aim is to answer the following key questions:
\begin{itemize}
    \item Can the proposed contact prediction model predict the contact map between the deformable tool and the target objects given only the pose of deformable tool?
    \item Is the optimal trajectory generated by \textit{SPONGE} capable of covering the entire surface of the target objects in the simulation? 
    \item Can \textit{SPONGE}, trained purely on synthetic data, generate a good trajectory to accomplish the task in the real world?
\end{itemize}
\subsection{Contact Map Prediction Result}
We access the performance of the proposed prediction model based on the contact prediction F1 score on the test dataset, which is approximately \textbf{0.95}. This high score indicates that the proposed model is capable of accurately predicting the contact map, given only the applied position and the rotation of the sponge. \figref{fig:pred_result} qualitatively compares the predicted contact map from the proposed model with the ground truth in the simulation. As shown, the predicted contact maps are qualitatively similar to ground truth. It should be noted that the model was able to capture the correlation between the geometric features of the target object and the contact map between the two bodies. For example, let us examine the bowls shown in \figref{fig:pred_result}, because of the deformability of the tool, it conforms to the curvature of the bowls when applied to the side of the bowl. Our proposed model was able to capture this behavior by taking into account the pose of deformable tool, and the local features close to the applied location.
\begin{figure}[!t]
    \centering
    \def\svgwidth{\linewidth}
     {\fontsize{10}{10}%\selectfont\sf
    % \input{figures_tex/datagennew.pdf_tex}}
    \input{figures_tex/prediction_res.pdf_tex}} 
    \caption{Visualization of the contact map predictions on the test dataset and the ground-truth in simulation. Left columns show the ground-truth and the right columns show the prediction. Blue indicates points that are in contact with the deformable tool, while orange denotes points that are not in contact with the deformable tool. \bestcolor}
    \label{fig:pred_result}
    \vspace{-0.5cm}
\end{figure}

It is worth mentioning that to single out the effect of deformability has on the planning pipeline, we attempted to learn a contact map prediction model in the case that the tool is rigid. To do that, we generated a new dataset following the same procedure mentioned in \secref{sec:dataset}, but in this case, we assume the tool is rigid by setting its Youngâ€™s modulus to $2\cdot10^{9}$. However, the model was unable to learn the correlation from the geometric features of the target objects and the contact map in this case due to the sparse ground truth, as shown in \figref{fig:rigid}. Since the tool is rigid, it does not conform to the surface of the target objects, which in turn leads to a sparsity in the ground truth. 
\begin{figure}[!t]
    \centering
    \includegraphics[width=.6\linewidth]{figures/rigid.png}
    \caption{Visualization of labeled contact map when the sponge is set to be rigid.}
    \label{fig:rigid}
    \vspace{-0.5cm}
\end{figure}
\subsection{Planning in Simulation Result}
We investigate the quality of the generated trajectories in the context of the dish cleaning task in the Isaac Gym simulator using the same environment and the same ten target objects shown in \figref{fig:sim_objs}. Due to the limited options regarding the controller for soft bodies in Isaac Gym, we simply execute the planned trajectory using a Cartesian position controller. The position and contact forces of the sponge are recorded during the execution process. Then, based on the recorded data, contact maps between the target objects and the sponge are calculated using the same approach described in \secref{sec:dataset}. As the objective of the task is to cover the entire surface of the target objects with the planned trajectory, we quantify the quality of the trajectory by the area coverage (\textit{i.e.,~}proportion of the contact points to the total population of point clouds). The higher and closer to 100 the proportion, the better the quality of the planned trajectory. For each object, we randomly initialized its starting position 20 times and evaluated the best trajectory among 50 sampled ones. In total, we evaluated 200 trajectories on all ten objects.
\begin{table}
    \centering
	\ra{1}\tbs{10}
	\caption{\label{tb:simexp} The average area coverage (\%) and average number of waypoints over 20 trajectories on the target objects in simulation. $\uparrow$: higher the better}
    \begin{tabular}{@{}lcc@{}}
        \toprule
        Object & \multicolumn{1}{l}{Area Coverage} & \multicolumn{1}{l}{Number of Waypoints} \\
        \midrule
        1  & 89.5    &  19.3  \\
        2  & 97.3    &   13.3\\
        3  &  100   & 18.1  \\
        4  &  96.2    & 14.1  \\
        5 &  87.6    &  23.6\\
        6  & 97.9    &   22.3\\
        7  & 98.7    &   12.4\\
        8  & 88.5    &  32.7 \\
        9  & 92.1    &   22.4\\
        10 &  94.6    &  20.2\\
        \midrule
        All  $\uparrow$ & 94.27    & \_  \\
        \bottomrule
    \end{tabular}
     \figvspace{}
\end{table}

\tabref{tb:simexp} presents the average area coverage over 20 optimal trajectories on all objects. These results clearly show that the proposed planning pipeline is capable of producing high-quality trajectories that cover approximately 94\% the surfaces of different objects with varying geometry and curvatures. Although there exist some declines in the area coverage of objects 1, 5 and 8 compared to other objects, the coverage is still above 87\% for all three objects. Based on our observations, one reason for that is due to the fact that we are using only a position controller to execute the trajectories; sometimes, for these large-sized objects with large curvatures, the controller does not necessarily apply enough contact force at certain locations, which in turn leads to the incorrect contact point calculation.

Furthermore, the average number of waypoints for 20 trajectories over all objects is also reported in \tabref{tb:simexp}. As expected, the number of waypoints needed to cover the entire surface increases as the size of 
the target objects increases. It is exciting that for objects 2 and 4, it takes only less than 15 waypoints to accomplish the task, which shows the effectiveness of the proposed planning pipeline.
\subsection{Real Robot Deployment}
\begin{figure*}[!t]
    \centering
    \begin{tabular}{c@{}c@{}}%\begin{subfigure}
		%\centering
        \def\svgwidth{.4\linewidth}
         {\fontsize{10}{10}%\selectfont\sf
        \input{figures_tex/real_res.pdf_tex}} 
	&	\def\svgwidth{.4\linewidth}
         {\fontsize{10}{10}%\selectfont\sf
        \input{figures_tex/real_res_bowl.pdf_tex}} 
    \end{tabular}%\end{subfigure}
    \caption{Qualitative visualizations of \textit{SPONGE} for real-world dish cleaning task. Columns headed by Start State are the target object with blue marker writings denoting dirt need to be removed. The optimal coverage trajectories planned by \textit{SPONGE} (solid green lines) are shown in columns headed by Planning by SPONGE. The columns headed by  Final State are when robot is done executing the early planned trajectories. \bestcolor}
    \label{fig:real_result}
    \vspace{-0.5cm}
\end{figure*}

To investigate how well the proposed pipeline performs in the real world, we conducted an experiment that performs a dish cleaning task with a \panda equipped with a hemispherical finger attached to a deformable sponge, as shown in \figref{fig:title}. The dimensions and material characteristics of the sponge used in the real-world experiment are identical to those of the sponge in the simulation. Two target objects used in this experiment are a bowl and a plate that are not from any dataset. This allows us to study whether the contact map predicted with the model trained only on synthetic data transfer to real objects and whether the trajectory generated by the planning pipeline is sufficient to accomplish the task in the real world. 

We used a Kinect v2 camera to capture the point cloud of the scene. We then segmented the object from the scene by subtracting
the background and the table from the obtained point cloud. The point cloud of the target object is then fed into the proposed planning pipeline to generate the optimal trajectory to clean the top surface of the object. Cartesian impedance control is employed to execute the generated trajectory to guarantee contact with the object surface. The robot first approaches each waypoint of the trajectory from its normal direction and then applies forces on the target object at that location for a short period of time before traversing to the next waypoint. It is important to note that the execution of the trajectory depends on the object that remains immobile during the process. In our case, the object is manually held to prevent the object from moving during execution. The problem could potentially be solved by using a dual-arm setup to remove the need for human intervention. 

As shown in \figref{fig:real_result}, the objective of the task is to clean all the blue marker writings, which represent dirt on the target objects. The performance of the proposed pipeline is then qualitatively and quantitatively evaluated based on the remaining amount of blue marker writings after the execution of the trajectories. Specifically, we quantitatively achieve this by first taking two RGB images of the target objects before and after the execution of the planned trajectories; then we calculate and compare the number of blue-color pixels between the two images. The coverage is then calculated as: 
\begin{equation*}
    \text{Coverage} = (1 - \frac{n_{after}}{n_{before}})*100
\end{equation*}
where $n_{before}, n_{after}$ denote the number of blue-color pixels of the target object before and after the execution of the trajectory, respectively. The higher and closer to 100 the coverage, the better the quality of the planned trajectory. For each object, we randomly placed it five times and evaluated the best coverage trajectory among 50 sampled ones, which in total amounts to 10 trajectories on two real-world objects.

\figref{fig:real_result} shows qualitative results of the real robot deployment of \textit{SPONGE} on the two target objects. From the results, we can see that even though there still remains some blue marker writings after the cleaning process, the robot has successfully accomplished the dish cleaning task by removing almost all of the blue marker writings from the surfaces of the target objects. This observation was further reflected by the quantitative results shown in \tabref{tb:realexp} with an impressive area coverage of more than 95\% in two different geometries. In addition, the plate requires 20 waypoints to cover its surface, whereas the bowl requires fewer waypoints due to the smaller size.   
\begin{table}
    \centering
	\ra{1}\tbs{10}
	\caption{\label{tb:realexp} The average area coverage (\%) and average number of waypoints over 5 trajectories on the target objects. $\uparrow$: higher the better}
    \begin{tabular}{@{}lcc@{}}
        \toprule
        Object & \multicolumn{1}{l}{Area Coverage} & \multicolumn{1}{l}{Number of Waypoints} \\
        \midrule
        Plate  & 94.5   &  20.4  \\
        Bowl  & 96.2    & 17.4  \\
        \midrule
        All  $\uparrow$ & 95.35    & \_  \\
        \bottomrule
    \end{tabular}
     \figvspace{}
\end{table}


\subsection{Discussion}
Despite the good results, several limitations of \textit{SPONGE} can be further investigated and improved in future work.

First, the current contact map prediction model lacks real-time knowledge of the en route contact map while moving from one contact point to another. For example, given two contact points A and B, the current model can only predict two separate contact maps associated with those two points. Therefore, the contact map created when moving the deformable object from point A to point B is unknown. One potential approach to this problem is to extend the current model by incorporating the robot kinematics, such as gripper velocity, into the model to learn the mapping from the robot movements to the contact map. Knowledge of the contact map when moving between contact points can potentially increase the efficiency of the planning pipeline, so that fewer waypoints would be needed to cover the entire surface of the objects.    

Second, in the sequence planning module, since we just randomly sample contact points until the entire surface is covered, the resulting trajectories may look counter-intuitive compared to that of humans. For example, humans usually clean dishes by executing a smooth spiral-shaped trajectory. Introducing a more systematic waypoints sampling approach may be the way to tackle this issue.

Last but not least, in this work, the planned trajectories are executed in an open-loop manner, where we omit the actual contact happening between the two objects during the manipulation. This information is important in reacting and adapting trajectories to uncertainties such as incorrect contact map prediction, or displacement of the target object during execution procedure. One interesting future work would be to introduce a contact reasoning model, which reasons the actual contact map based on the immediate observation, as a feedback to close the aforementioned control loop.

