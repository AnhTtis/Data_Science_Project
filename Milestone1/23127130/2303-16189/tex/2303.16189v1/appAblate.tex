\section{\ycReb{Ablation on Energy model and Optimization method}}

\ycReb{We further ablate on our design choices, including the energy model and sampling methods.
We consider Masked Language Model (MLM) and sequence model classifier as the energy model, and random-shooting, Cross-Entropy Method (CEM), and Gibbs Sampling as the optimization approach. 
All combinations are tested, for which the results are collected in Table~\ref{tbl:samplings}.
We observe that the Gibbs sampling gives the best outcome with MLM model and that defining an energy value using a sequence model classifier doesn't work well in all settings.}

\begin{enumerate}[leftmargin=*]
    \item \hongyi{Sampling methods:} 
    \begin{itemize}
        \item \hongyi{Random-shooting: randomly generated 30 action sequences and pick up the one with lowest estimated energy value.}
        \item \hongyi{Cross-Entropy method: randomly generated 30 action sequences, keep the three best sequences with lowest estimated energy values in each iteration. Then we randomly update one action token in the elite sequences to get 30 new sequences for next iteration. The sequence with lowest energy is selected in the final iteration.}
        \item \hongyi{Gibbs sampling: discussed in the main text.}
    \end{itemize}
    \item \hongyi{Energy models:} 
    \begin{itemize}
        \item \hongyi{Sequence model classifier: LSTM sequence model predicts the scalar energy value given the entire trajectory $\btau{}$, and train the loss between ground truth trajectory energy and estimated energy. The optimal trajectories in Babyai are assigned with lowest energy value 0 and the generates suboptimal trajectories are assigned with higher values depending on the degree of randomness.}
        \item \hongyi{MLM: discussed in the main text.}
    \end{itemize}
\end{enumerate}


\begin{table*}[t]
    \centering
    \small
    % \hspace{-35pt}
        \scalebox{1.0}{
            \color{black}\begin{tabular}{cccc}
            \toprule
            \multicolumn{1}{c}{\bf Energy model} & \multicolumn{1}{c}{\bf Random-shooting} &  \multicolumn{1}{c}{\bf CEM} &  \multicolumn{1}{c}{\bf Gibbs sampling}\\
            \midrule
            MLM & 23.3\% & 57.5\%  & \textbf{62.5\%}\\ 
            Classifier & 25.0\% & 12.5\%  & 15.5\% 
            \\
            \bottomrule
            \end{tabular}
        }
        \captionsetup{labelfont={color=black},font={color=black}}
        \caption{Comparison of different combination between energy models and sampling methods}
        \label{tbl:samplings}
    \vspace{-0pt}
\end{table*}