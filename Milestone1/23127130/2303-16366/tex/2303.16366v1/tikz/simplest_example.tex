\resizebox{!}{4cm}{
\begin{tikzpicture}
\definecolor{darkturquoise}{rgb}{0.0, 0.81, 0.82}

\node[rectangle, rounded corners = 3mm, draw = black, minimum height = 0.6cm, fill =white] (m) at (0,0) {{User}}; 

\node[rectangle,  draw = black!60, fill = bleudefrance, minimum height = 1.2 cm, minimum width = 0.5cm, opacity=.5, text opacity=1 ,above right = -0.2 and 0.5 cm of m] (a) {\small $A$};

\node[rectangle,  draw = black!60, fill = green!50!black, minimum height = 0.5 cm, minimum width = 1.2 cm, opacity=.5, text opacity=1 , right = 0.1 cm of a.north east, anchor = north west] (b) {\small $B$};


\node[rectangle, rounded corners = 1mm, draw = black, minimum height = 0.6 cm, minimum width = 1 cm,  fill = white, below = 2 cm of m] (w2) {Server $2$};

\node[rectangle, rounded corners = 1mm, draw = black, minimum height = 0.6 cm, minimum width = 1 cm, fill = white, left = 2 cm of w2] (w1) {Server $1$};

\node[rectangle, rounded corners = 1mm, draw = black, minimum height = 0.6 cm, minimum width = 1 cm, fill = white, right = 2 cm of w2] (w3) {Server $3$};

% \node[minimum height = 0.45 cm, minimum width = 2cm, opacity=.5, text opacity=1, below = 0.1cm of w1] (a11) { \centering \small \uncover<4->{$h(1)=f(1)g(1)$} };

% \node[minimum height = 0.45 cm, minimum width = 0.6cm, opacity=.5, text opacity=1, below = 0.1cm of w2] (a22) { \centering \small \uncover<4->{$h(2)=f(2)g(2)$} };

% \node[minimum height = 0.45 cm, minimum width = 0.6cm, opacity=.5, text opacity=1, below = 0.1cm of w3] (a33) { \centering \small \uncover<4->{$h(3)=f(3)g(3)$} };
\uncover<3->{
\node[rectangle,  draw = black!60, fill = bleudefrance, minimum height = 0.3 cm, minimum width = 0.5 cm, opacity=.5, text opacity=1, below right = 0.1 and 0.25 cm of w1.south west, anchor = north west] (a11);

\node[rectangle,  draw = black!60, fill = green!50!black, minimum height = 0.5 cm, minimum width = 0.3 cm, opacity=.5, text opacity=1, right = 0.1 cm of a11.north east, anchor = north west] (b11) node[below = 0 of b11, color = green!50!black] (c11) {\begin{varwidth}{0.6cm} \centering \small $g(\beta_1)$ \end{varwidth}} %
node[left = -0.2 of c11.west, anchor = east, color = bleudefrance] { \centering \small \uncover<6->{ {\color{magenta}$h(\beta_1)=$}} {\color{bleudefrance}$f(\beta_1)$}};
%node[left = 0.3 of c11.west, anchor = east, color = magenta] { \small ;

\node[rectangle,  draw = black!60, fill = bleudefrance, minimum height = 0.3 cm, minimum width = 0.5 cm, opacity=.5, text opacity=1, below right = 0.1 and 0.25 cm of w2.south west, anchor = north west] (a12);


\node[rectangle,  draw = black!60, fill = green!50!black, minimum height = 0.5 cm, minimum width = 0.3 cm, opacity=.5, text opacity=1, right = 0.1 cm of a12.north east, anchor = north west] (b12) node[below = 0 of b12, color = green!50!black] (c12) {\begin{varwidth}{0.6cm} \centering \small $g(\beta_2)$ \end{varwidth}} %
node[left = -0.2 of c12.west, anchor = east, color = bleudefrance] { \centering \small \uncover<6->{ {\color{magenta}$h(\beta_2)=$}} {\color{bleudefrance}$f(\beta_2)$}};;


\node[rectangle,  draw = black!60, fill = bleudefrance, minimum height = 0.3 cm, minimum width = 0.5 cm, opacity=.5, text opacity=1, below right = 0.1 and 0.25 cm of w3.south west, anchor = north west] (a13);

\node[rectangle,  draw = black!60, fill = green!50!black, minimum height = 0.5 cm, minimum width = 0.3 cm, opacity=.5, text opacity=1, right = 0.1 cm of a13.north east, anchor = north west] (b13) node[below = 0 of b13, color = green!50!black] (c13) {\begin{varwidth}{0.6cm} \centering \small $g(\beta_3)$ \end{varwidth}} %
node[left = -0.2 of c13.west, anchor = east, color = bleudefrance] { \centering \small \uncover<6->{ {\color{magenta}$h(\beta_3)=$}} {\color{bleudefrance}$f(\beta_3)$}};;

}





\path<3-5>[<-]
(w1.north)  edge[bend left] node[above left = 0 cm and -1cm, midway, sloped, font=\small] {$f(\beta_1),g(\beta_1)$} (m)
[->]
(m) edge[bend right] node[right = -0.2cm, below=-0.05cm, midway, sloped, font=\small] {$f(\beta_2),g(\beta_2)$} (w2)
[<-]
(w3.north) edge[bend right] node[above right = 0 cm and -0.8cm, midway, sloped, font=\small] {$f(\beta_3),g(\beta_3)$} (m)
;

\path<6->[->, color = magenta]
(w1.north)  edge node[below left = 0 cm and -1cm, near start, sloped, font=\small] {$h(\beta_1)$} (m)
[<-]
(m) edge node[right = -0.2cm, above=0.05cm, midway, sloped, font=\small] {$h(\beta_2)$} (w2)
[->]
(w3.north) edge node[above right = 0 cm and -0.8cm, midway, sloped, font=\small] {$h(\beta_3)$} (m)
;

\node[left = 4 of m] (v) {$f(x)=A+Rx$};
\node[below = 0 cm of v.south west, anchor = north west] (u)  {$g(x)=B+Sx$};

\end{tikzpicture}}